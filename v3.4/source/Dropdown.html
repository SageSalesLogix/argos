<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">define('argos/Dropdown', ['exports', 'module', 'dojo/_base/declare', 'dojo/_base/array', 'dojo/_base/connect', 'dojo/dom-class', 'dojo/dom-construct', 'dojo/dom-geometry', 'dojo/dom-style', 'dojo/keys', 'dojo/on', 'dojo/query', 'dijit/_Widget', 'argos/_Templated'], function (exports, module, _dojo_baseDeclare, _dojo_baseArray, _dojo_baseConnect, _dojoDomClass, _dojoDomConstruct, _dojoDomGeometry, _dojoDomStyle, _dojoKeys, _dojoOn, _dojoQuery, _dijit_Widget, _argos_Templated) {
  function _interopRequireDefault(obj) { return obj &amp;&amp; obj.__esModule ? obj : { 'default': obj }; }

  /* Copyright (c) 2010, Sage Software, Inc. All rights reserved.
   *
   * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *     http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */

  var _declare = _interopRequireDefault(_dojo_baseDeclare);

  var _array = _interopRequireDefault(_dojo_baseArray);

  var _connect = _interopRequireDefault(_dojo_baseConnect);

  var _domClass = _interopRequireDefault(_dojoDomClass);

  var _domConstruct = _interopRequireDefault(_dojoDomConstruct);

  var _domGeom = _interopRequireDefault(_dojoDomGeometry);

  var _domStyle = _interopRequireDefault(_dojoDomStyle);

  var _keys = _interopRequireDefault(_dojoKeys);

  var _on = _interopRequireDefault(_dojoOn);

  var _query = _interopRequireDefault(_dojoQuery);

  var _Widget2 = _interopRequireDefault(_dijit_Widget);

  var _Templated2 = _interopRequireDefault(_argos_Templated);

<span id='argos-Dropdown'>  /**
</span>   * @class argos.Dropdown
   */
  var __class = (0, _declare['default'])('argos.Dropdown', [_Widget2['default'], _Templated2['default']], {
    widgetTemplate: new Simplate(['&lt;div id=&quot;{%= $.id %}_dropdownNode&quot; class=&quot;dropdown {%: $.dropdownClass %}&quot; data-dojo-attach-point=&quot;dropdownNode&quot;&gt;', '&lt;label class=&quot;dropdown__label&quot;&gt;{%: $.label %}&lt;/label&gt;', '&lt;input readOnly class=&quot;dropdown__input&quot; data-dojo-attach-point=&quot;dropdownInput&quot;&gt;&lt;/input&gt;', '&lt;span class=&quot;dropdown__icon {%: $.icon %}&quot;&gt;&lt;/span&gt;', '&lt;select class=&quot;dropdown__select dropdown__select--hidden&quot; data-dojo-attach-point=&quot;dropdownSelect&quot;&gt;&lt;/select&gt;', '&lt;/div&gt;', '&lt;/div&gt;']),
    listTemplate: new Simplate(['&lt;div id=&quot;{%= $.id %}_dropdown_list&quot; class=&quot;dropdown {%: $.dropdownClass %} dropdown--absolute dropdown--hidden&quot;&gt;', '&lt;input readOnly class=&quot;dropdown__input dropdown__input--absolute&quot; value=&quot;{%: $.value %}&quot;&gt;&lt;/input&gt;', '&lt;span class=&quot;dropdown__icon {%: $.icon %}&quot;&gt;&lt;/span&gt;', '&lt;/div&gt;']),
    listStartTemplate: new Simplate(['&lt;ul class=&quot;dropdown__list&quot;&gt;']),
    listEndTemplate: new Simplate(['&lt;/ul&gt;']),
    listItemTemplate: new Simplate(['&lt;li class=&quot;dropdown__list__item&quot; data-key=&quot;{%= $.key %}&quot; data-value=&quot;{%= $.value %}&quot;&gt;', '{% if ($.text) { %}', '{%= $.text %}', '{% } else { %}', '{%= $.value %}', '{% } %}', '&lt;/li&gt;']),
    overlayTemplate: new Simplate(['&lt;div class=&quot;dropdown__overlay&quot;&gt;&lt;/div&gt;']),
    selectItemTemplate: new Simplate(['&lt;option value=&quot;{%= $.value %}&quot;&gt;', '{% if ($.text) { %}', '{%= $.text %}', '{% } else { %}', '{%= $.value %}', '{% } %}', '&lt;/option&gt;']),

    dropdownClass: '',
    icon: 'fa fa-caret-down',
    id: 'dropdown-template',
    multiSelect: false,
    onSelect: null,
    onSelectScope: null,
    openIcon: 'fa fa-caret-up',
    _eventConnections: null,
    _ghost: null,
    _list: null,
    _orientation: null,
    _overlay: null,
    _overlayEvent: null,
    _selected: null,
    items: null,
    itemMustExist: false,
    constructor: function constructor() {
      this._eventConnections = [];
      this.items = [];
    },
    createGhost: function createGhost() {
      var _this = this;

      var top = arguments.length &lt;= 0 || arguments[0] === undefined ? false : arguments[0];

      var listStart = _domConstruct['default'].toDom(this.listStartTemplate.apply(this));
      var listEnd = _domConstruct['default'].toDom(this.listEndTemplate.apply(this));
      _array['default'].forEach(this.items, function (item) {
        var dom = _domConstruct['default'].toDom(_this.listItemTemplate.apply({ key: item.key, value: item.value, text: item.text }, _this));
        _domConstruct['default'].place(dom, listStart);
        if (item.value === _this.dropdownSelect.value) {
          _this._selected = dom;
          _domClass['default'].add(dom, 'dropdown__list__item--selected');
        }
      }, this);
      this._eventConnections.push((0, _on['default'])(listStart, 'click', this.onListClick.bind(this)));
      _domConstruct['default'].place(listEnd, listStart);
      if (this._ghost) {
        _domConstruct['default'].destroy(this._ghost);
      }
      this._ghost = _domConstruct['default'].toDom(this.listTemplate.apply({ id: this.id, value: this.getText(), icon: this.openIcon, label: this.label, dropdownClass: this.dropdownClass }, this));

      var dropdownInput = (0, _query['default'])('.dropdown__input', this._ghost)[0];
      if (dropdownInput) {
        this._eventConnections.push((0, _on['default'])(dropdownInput, 'keydown', this.onKeyPress.bind(this)));
      }
      var dropdownIcon = (0, _query['default'])('.dropdown__icon', this._ghost)[0];
      if (dropdownIcon) {
        this._eventConnections.push((0, _on['default'])(dropdownIcon, 'click', this.hide.bind(this)));
      }
      var position = 'last';
      if (top) {
        position = 'first';
      }
      _domConstruct['default'].place(listStart, this._ghost, position);
      this._list = listStart;
      _domConstruct['default'].place(this._ghost, document.body);
    },
    createList: function createList(_ref) {
      var items = _ref.items;
      var defaultValue = _ref.defaultValue;

      var itemFound = null;
      this.items = items ? items : [];
      this._defaultValue = defaultValue;

      _array['default'].forEach(items, function findItem(item) {
        if (item.value === defaultValue) {
          itemFound = item;
        }
      }, this);

      if (this.itemMustExist &amp;&amp; !itemFound) {
        itemFound = { key: -1, value: defaultValue, text: defaultValue };
        this.items.splice(0, 0, itemFound);
      }

      _array['default'].forEach(items, function addToModalList(item) {
        var option = _domConstruct['default'].toDom(this.selectItemTemplate.apply({ key: item.key, value: item.value, text: item.text }, this));
        _domConstruct['default'].place(option, this.dropdownSelect);
      }, this);

      if (itemFound) {
        this.dropdownSelect.value = itemFound.value;
        this.dropdownInput.value = itemFound.text ? itemFound.text : itemFound.value;
      } else {
        this.dropdownSelect.value = defaultValue;
        this.dropdownInput.value = defaultValue;
      }

      this._eventConnections.push((0, _on['default'])(this.dropdownNode, 'click', this.onClick.bind(this)));
      this.createGhost();

      return this;
    },
    createOverlay: function createOverlay() {
      this.destroyOverlay();
      this._overlay = _domConstruct['default'].toDom(this.overlayTemplate.apply(this));
      _domConstruct['default'].place(this._overlay, document.body);
      this._overlayEvent = (0, _on['default'])(this._overlay, 'click', this.onOverlayClick.bind(this));
    },
    destroy: function destroy() {
      this._eventConnections.forEach(function (evt) {
        evt.remove();
      });
      this._eventConnections = [];
      _domConstruct['default'].destroy(this._ghost);
      this.destroyOverlay();
      this.inherited(arguments);
    },
    destroyOverlay: function destroyOverlay() {
      if (this._overlay) {
        _domConstruct['default'].destroy(this._overlay);
        this._overlayEvent.remove();
      }
    },
    findValue: function findValue(text) {
      var value = _array['default'].filter(this._list.children, function (element) {
        if (element.innerText === text) {
          return element;
        }
      });
      return value[0];
    },
    getSelected: function getSelected() {
      return this._selected;
    },
    getText: function getText() {
      var text = this.dropdownSelect.options[this.dropdownSelect.selectedIndex] ? this.dropdownSelect.options[this.dropdownSelect.selectedIndex].text : '';
      return text;
    },
    getValue: function getValue() {
      var value = this.dropdownSelect.options[this.dropdownSelect.selectedIndex] ? this.dropdownSelect.options[this.dropdownSelect.selectedIndex].value : this.dropdownInput.value;
      return value;
    },
    hide: function hide() {
      this.destroyOverlay();
      _domClass['default'].add(this._ghost, 'dropdown--hidden');
      return this;
    },
    onClick: function onClick(evt) {
      if (evt.currentTarget === this.dropdownNode) {
        this.scrollToDropdown();
        this.show();
        evt.preventDefault();
        evt.stopPropagation();
      }
    },
    onKeyPress: function onKeyPress(evt) {
      var prevent = true;
      switch (evt.keyCode) {
        case _keys['default'].UP_ARROW:
          if (!_domClass['default'].contains(this._ghost, 'dropdown--hidden')) {
            if (this._selected.previousSibling) {
              this.updateSelected(this._selected.previousSibling);
              this.updateGhost(this._selected.dataset.value);
              this.scrollListTo(this._selected);
            }
          } else {
            this.show();
          }
          break;
        case _keys['default'].DOWN_ARROW:
          if (!_domClass['default'].contains(this._ghost, 'dropdown--hidden')) {
            if (this._selected.nextSibling) {
              this.updateSelected(this._selected.nextSibling);
              this.updateGhost(this._selected.dataset.value);
              this.scrollListTo(this._selected);
            }
          } else {
            this.show();
          }
          break;
        case _keys['default'].TAB:
          prevent = false;
          this.hide();
          break;
        case _keys['default'].ESCAPE:
        case _keys['default'].CLEAR:
          this.hide();
          break;
        case _keys['default'].ENTER:
        case _keys['default'].SPACE:
          this.onListClick({ target: this._selected });
          break;
        case _keys['default'].HOME:
          this.updateSelected(this._list.children[0]);
          this.scrollListTo(this._selected);
          break;
        case _keys['default'].END:
          this.updateSelected(this._list.children[this._list.children.length - 1]);
          this.scrollListTo(this._selected);
          break;
        default:
      }
      if (prevent) {
        evt.preventDefault();
        evt.stopPropagation();
      }
    },
    onListClick: function onListClick(_ref2) {
      var target = _ref2.target;

      this.updateSelected(target);
      if (!this.multiSelect) {
        this.hide();
        this.setValue(target.dataset.value);
      } // TODO: Add in what will happen for a multiSelect dropdown
      if (this.onSelect &amp;&amp; this.onSelectScope) {
        this.onSelect.bind(this.onSelectScope)();
      }
    },
    onOverlayClick: function onOverlayClick(evt) {
      if (!_domClass['default'].contains(this._ghost, 'dropdown--hidden')) {
        evt.preventDefault();
        evt.stopPropagation();
        this.hide();
        _domConstruct['default'].destroy(this._overlay);
      }
    },
    postCreate: function postCreate() {
      this.inherited(arguments);
      this._orientation = _connect['default'].subscribe('/app/setOrientation', this, this.hide);
      this._eventConnections.push((0, _on['default'])(this.dropdownInput, 'keydown', this.onKeyPress.bind(this)));
    },
    scrollListTo: function scrollListTo(target) {
      if (target) {
        this._list.scrollTop = target.offsetTop - target.offsetHeight;
      }
    },
    scrollToDropdown: function scrollToDropdown() {
      var scrollParent = this.dropdownNode.offsetParent;
      if (scrollParent) {
        if (scrollParent.scrollTop &gt; this.dropdownNode.offsetTop) {
          scrollParent.scrollTop = this.dropdownNode.offsetTop;
        } else if (this.dropdownNode.offsetTop &gt; scrollParent.scrollTop &amp;&amp; this.dropdownNode.offsetTop + this.dropdownNode.offsetHeight &gt; scrollParent.scrollTop + scrollParent.offsetHeight) {
          scrollParent.scrollTop = this.dropdownNode.offsetTop + this.dropdownNode.offsetHeight - scrollParent.offsetHeight;
        }
      }
    },
    setOnSelect: function setOnSelect(value) {
      if (value) {
        this.onSelect = value;
      }
      return this;
    },
    setOnSelectScope: function setOnSelectScope(scope) {
      if (scope) {
        this._onSelectScope = scope;
      }
      return this;
    },
    setSelected: function setSelected() {
      var value = arguments.length &lt;= 0 || arguments[0] === undefined ? {} : arguments[0];

      if (value !== this._selected) {
        this.updateSelected(value);
        this._selected = value;
        this.setValue(value.dataset.value);
      }
    },
    setValue: function setValue(value) {
      if (value === 0 || value) {
        this.dropdownSelect.value = value;
        this.dropdownInput.value = this.getText();
      }
    },
    show: function show() {
      var pos = _domGeom['default'].position(this.dropdownInput, true);
      if (pos.y &lt;= App._rootDomNode.offsetHeight / 2) {
        if (_domClass['default'].contains(this._ghost, 'dropdown--onTop')) {
          this.createGhost(false);
          _domClass['default'].remove(this._ghost, 'dropdown--onTop');
        }
        _domStyle['default'].set(this._ghost, {
          top: pos.y - _domStyle['default'].get(this.dropdownInput, 'borderTopWidth') + 'px',
          left: pos.x + 'px',
          width: pos.w + 'px'
        });
        this.trimHeight(false);
      } else {
        if (!_domClass['default'].contains(this._ghost, 'dropdown--onTop')) {
          this.createGhost(true);
          _domClass['default'].add(this._ghost, 'dropdown--onTop');
        }
        if (!this._listItemHeight) {
          this._listItemHeight = _domStyle['default'].get(this._list, 'lineHeight');
        }
        var ghostMaxHeight = _domStyle['default'].get(this._ghost, 'maxHeight');
        var ghostHeight = this._listItemHeight * this._list.children.length + pos.h &lt; ghostMaxHeight ? this._listItemHeight * this._list.children.length + pos.h : ghostMaxHeight;
        _domStyle['default'].set(this._ghost, {
          top: pos.y + _domStyle['default'].get(this.dropdownInput, 'borderBottomWidth') - ghostHeight + pos.h + 'px',
          left: pos.x + 'px',
          width: pos.w + 'px'
        });
        this.trimHeight(true);
      }
      var ghostInput = (0, _query['default'])('.dropdown__input', this._ghost)[0];
      if (ghostInput) {
        _domStyle['default'].set(ghostInput, {
          height: pos.h + 'px'
        });
      }
      var ghostIcon = (0, _query['default'])('.dropdown__icon', this._ghost)[0];
      if (ghostIcon) {
        _domStyle['default'].set(ghostIcon, {
          marginTop: pos.h / 2 - _domStyle['default'].get(ghostIcon, 'height') / 2 + 'px'
        });
      }
      this.updateGhost(this.dropdownSelect.value);
      this.createOverlay();
      this.toggle();
      this.scrollListTo(this._selected);
    },
    toggle: function toggle() {
      _domClass['default'].toggle(this._ghost, 'dropdown--hidden');
      if (_domClass['default'].contains(this._ghost, 'dropdown--hidden')) {
        this.destroyOverlay();
      }
    },
    trimHeight: function trimHeight() {
      var top = arguments.length &lt;= 0 || arguments[0] === undefined ? false : arguments[0];

      var ghostList = (0, _query['default'])('.dropdown__list', this._ghost)[0];
      if (ghostList) {
        var dropdownHeight = _domStyle['default'].get(this.dropdownInput, 'height');
        var ghostHeight = _domStyle['default'].get(this._ghost, 'height');
        var ghostTop = _domStyle['default'].get(this._ghost, 'top');
        var borderTop = _domStyle['default'].get(this._ghost, 'borderTopWidth');
        var borderBottom = _domStyle['default'].get(this._ghost, 'borderBottomWidth');
        if (!top &amp;&amp; ghostTop + ghostHeight &gt; App._rootDomNode.offsetHeight) {
          _domStyle['default'].set(this._ghost, {
            height: ''
          });
          _domStyle['default'].set(ghostList, {
            height: App._rootDomNode.offsetHeight - dropdownHeight - ghostTop + 'px'
          });
        } else if (top &amp;&amp; ghostTop &lt; 0) {
          _domStyle['default'].set(this._ghost, {
            top: '0px',
            height: ghostHeight + ghostTop + 'px'
          });
          _domStyle['default'].set(ghostList, {
            height: ghostHeight + ghostTop - dropdownHeight - borderTop - borderBottom + 'px'
          });
        }
      }
    },
    updateGhost: function updateGhost(value) {
      var current = (0, _query['default'])('[data-value=' + value + ']', this._list)[0];
      var input = (0, _query['default'])('.dropdown__input', this._ghost)[0];
      if (current) {
        this.updateSelected(current);
      }
      if (input) {
        input.value = this.getText();
      }
      return this;
    },
    updateSelected: function updateSelected(target) {
      _domClass['default'].add(target, 'dropdown__list__item--selected');
      if (this._selected &amp;&amp; this._selected !== target) {
        _domClass['default'].remove(this._selected, 'dropdown__list__item--selected');
      }
      this._selected = target;
    }
  });

  module.exports = __class;
});
//# sourceMappingURL=data:application/json;base64,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SSxDQUFDLFNBQVMsR0FBRyxNQUFNLENBQUM7S0FDekI7R0FDRixDQUFDLENBQUM7O21CQUVZLE9BQU8iLCJmaWxlIjoic3JjL0Ryb3Bkb3duLmpzIiwic291cmNlUm9vdCI6InNyYyIsInNvdXJjZXNDb250ZW50IjpbIi8qIENvcHlyaWdodCAoYykgMjAxMCwgU2FnZSBTb2Z0d2FyZSwgSW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcblxyXG5pbXBvcnQgZGVjbGFyZSBmcm9tICdkb2pvL19iYXNlL2RlY2xhcmUnO1xyXG5pbXBvcnQgYXJyYXkgZnJvbSAnZG9qby9fYmFzZS9hcnJheSc7XHJcbmltcG9ydCBjb25uZWN0IGZyb20gJ2Rvam8vX2Jhc2UvY29ubmVjdCc7XHJcbmltcG9ydCBkb21DbGFzcyBmcm9tICdkb2pvL2RvbS1jbGFzcyc7XHJcbmltcG9ydCBkb21Db25zdHJ1Y3QgZnJvbSAnZG9qby9kb20tY29uc3RydWN0JztcclxuaW1wb3J0IGRvbUdlb20gZnJvbSAnZG9qby9kb20tZ2VvbWV0cnknO1xyXG5pbXBvcnQgZG9tU3R5bGUgZnJvbSAnZG9qby9kb20tc3R5bGUnO1xyXG5pbXBvcnQga2V5cyBmcm9tICdkb2pvL2tleXMnO1xyXG5pbXBvcnQgb24gZnJvbSAnZG9qby9vbic7XHJcbmltcG9ydCBxdWVyeSBmcm9tICdkb2pvL3F1ZXJ5JztcclxuaW1wb3J0IF9XaWRnZXQgZnJvbSAnZGlqaXQvX1dpZGdldCc7XHJcbmltcG9ydCBfVGVtcGxhdGVkIGZyb20gJ2FyZ29zL19UZW1wbGF0ZWQnO1xyXG5cclxuLyoqXHJcbiAqIEBjbGFzcyBhcmdvcy5Ecm9wZG93blxyXG4gKi9cclxuY29uc3QgX19jbGFzcyA9IGRlY2xhcmUoJ2FyZ29zLkRyb3Bkb3duJywgW19XaWRnZXQsIF9UZW1wbGF0ZWRdLCB7XHJcbiAgd2lkZ2V0VGVtcGxhdGU6IG5ldyBTaW1wbGF0ZShbXHJcbiAgICAnPGRpdiBpZD1cInslPSAkLmlkICV9X2Ryb3Bkb3duTm9kZVwiIGNsYXNzPVwiZHJvcGRvd24geyU6ICQuZHJvcGRvd25DbGFzcyAlfVwiIGRhdGEtZG9qby1hdHRhY2gtcG9pbnQ9XCJkcm9wZG93bk5vZGVcIj4nLFxyXG4gICAgICAnPGxhYmVsIGNsYXNzPVwiZHJvcGRvd25fX2xhYmVsXCI+eyU6ICQubGFiZWwgJX08L2xhYmVsPicsXHJcbiAgICAgICc8aW5wdXQgcmVhZE9ubHkgY2xhc3M9XCJkcm9wZG93bl9faW5wdXRcIiBkYXRhLWRvam8tYXR0YWNoLXBvaW50PVwiZHJvcGRvd25JbnB1dFwiPjwvaW5wdXQ+JyxcclxuICAgICAgJzxzcGFuIGNsYXNzPVwiZHJvcGRvd25fX2ljb24geyU6ICQuaWNvbiAlfVwiPjwvc3Bhbj4nLFxyXG4gICAgICAnPHNlbGVjdCBjbGFzcz1cImRyb3Bkb3duX19zZWxlY3QgZHJvcGRvd25fX3NlbGVjdC0taGlkZGVuXCIgZGF0YS1kb2pvLWF0dGFjaC1wb2ludD1cImRyb3Bkb3duU2VsZWN0XCI+PC9zZWxlY3Q+JyxcclxuICAgICAgJzwvZGl2PicsXHJcbiAgICAnPC9kaXY+JyxcclxuICBdKSxcclxuICBsaXN0VGVtcGxhdGU6IG5ldyBTaW1wbGF0ZShbXHJcbiAgICAnPGRpdiBpZD1cInslPSAkLmlkICV9X2Ryb3Bkb3duX2xpc3RcIiBjbGFzcz1cImRyb3Bkb3duIHslOiAkLmRyb3Bkb3duQ2xhc3MgJX0gZHJvcGRvd24tLWFic29sdXRlIGRyb3Bkb3duLS1oaWRkZW5cIj4nLFxyXG4gICAgICAnPGlucHV0IHJlYWRPbmx5IGNsYXNzPVwiZHJvcGRvd25fX2lucHV0IGRyb3Bkb3duX19pbnB1dC0tYWJzb2x1dGVcIiB2YWx1ZT1cInslOiAkLnZhbHVlICV9XCI+PC9pbnB1dD4nLFxyXG4gICAgICAnPHNwYW4gY2xhc3M9XCJkcm9wZG93bl9faWNvbiB7JTogJC5pY29uICV9XCI+PC9zcGFuPicsXHJcbiAgICAnPC9kaXY+JyxcclxuICBdKSxcclxuICBsaXN0U3RhcnRUZW1wbGF0ZTogbmV3IFNpbXBsYXRlKFtcclxuICAgICc8dWwgY2xhc3M9XCJkcm9wZG93bl9fbGlzdFwiPicsXHJcbiAgXSksXHJcbiAgbGlzdEVuZFRlbXBsYXRlOiBuZXcgU2ltcGxhdGUoW1xyXG4gICAgJzwvdWw+JyxcclxuICBdKSxcclxuICBsaXN0SXRlbVRlbXBsYXRlOiBuZXcgU2ltcGxhdGUoW1xyXG4gICAgJzxsaSBjbGFzcz1cImRyb3Bkb3duX19saXN0X19pdGVtXCIgZGF0YS1rZXk9XCJ7JT0gJC5rZXkgJX1cIiBkYXRhLXZhbHVlPVwieyU9ICQudmFsdWUgJX1cIj4nLFxyXG4gICAgICAgJ3slIGlmICgkLnRleHQpIHsgJX0nLFxyXG4gICAgICAgJ3slPSAkLnRleHQgJX0nLFxyXG4gICAgICAgJ3slIH0gZWxzZSB7ICV9JyxcclxuICAgICAgICd7JT0gJC52YWx1ZSAlfScsXHJcbiAgICAgICAneyUgfSAlfScsXHJcbiAgICAnPC9saT4nLFxyXG4gIF0pLFxyXG4gIG92ZXJsYXlUZW1wbGF0ZTogbmV3IFNpbXBsYXRlKFtcclxuICAgICc8ZGl2IGNsYXNzPVwiZHJvcGRvd25fX292ZXJsYXlcIj48L2Rpdj4nLFxyXG4gIF0pLFxyXG4gIHNlbGVjdEl0ZW1UZW1wbGF0ZTogbmV3IFNpbXBsYXRlKFtcclxuICAgICc8b3B0aW9uIHZhbHVlPVwieyU9ICQudmFsdWUgJX1cIj4nLFxyXG4gICAgICAgJ3slIGlmICgkLnRleHQpIHsgJX0nLFxyXG4gICAgICAgJ3slPSAkLnRleHQgJX0nLFxyXG4gICAgICAgJ3slIH0gZWxzZSB7ICV9JyxcclxuICAgICAgICd7JT0gJC52YWx1ZSAlfScsXHJcbiAgICAgICAneyUgfSAlfScsXHJcbiAgICAnPC9vcHRpb24+JyxcclxuICBdKSxcclxuXHJcbiAgZHJvcGRvd25DbGFzczogJycsXHJcbiAgaWNvbjogJ2ZhIGZhLWNhcmV0LWRvd24nLFxyXG4gIGlkOiAnZHJvcGRvd24tdGVtcGxhdGUnLFxyXG4gIG11bHRpU2VsZWN0OiBmYWxzZSxcclxuICBvblNlbGVjdDogbnVsbCxcclxuICBvblNlbGVjdFNjb3BlOiBudWxsLFxyXG4gIG9wZW5JY29uOiAnZmEgZmEtY2FyZXQtdXAnLFxyXG4gIF9ldmVudENvbm5lY3Rpb25zOiBudWxsLFxyXG4gIF9naG9zdDogbnVsbCxcclxuICBfbGlzdDogbnVsbCxcclxuICBfb3JpZW50YXRpb246IG51bGwsXHJcbiAgX292ZXJsYXk6IG51bGwsXHJcbiAgX292ZXJsYXlFdmVudDogbnVsbCxcclxuICBfc2VsZWN0ZWQ6IG51bGwsXHJcbiAgaXRlbXM6IG51bGwsXHJcbiAgaXRlbU11c3RFeGlzdDogZmFsc2UsXHJcbiAgY29uc3RydWN0b3I6IGZ1bmN0aW9uIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy5fZXZlbnRDb25uZWN0aW9ucyA9IFtdO1xyXG4gICAgdGhpcy5pdGVtcyA9IFtdO1xyXG4gIH0sXHJcbiAgY3JlYXRlR2hvc3Q6IGZ1bmN0aW9uIGNyZWF0ZUdob3N0KHRvcCA9IGZhbHNlKSB7XHJcbiAgICBjb25zdCBsaXN0U3RhcnQgPSBkb21Db25zdHJ1Y3QudG9Eb20odGhpcy5saXN0U3RhcnRUZW1wbGF0ZS5hcHBseSh0aGlzKSk7XHJcbiAgICBjb25zdCBsaXN0RW5kID0gZG9tQ29uc3RydWN0LnRvRG9tKHRoaXMubGlzdEVuZFRlbXBsYXRlLmFwcGx5KHRoaXMpKTtcclxuICAgIGFycmF5LmZvckVhY2godGhpcy5pdGVtcywgKGl0ZW0pID0+IHtcclxuICAgICAgY29uc3QgZG9tID0gZG9tQ29uc3RydWN0LnRvRG9tKHRoaXMubGlzdEl0ZW1UZW1wbGF0ZS5hcHBseSh7a2V5OiBpdGVtLmtleSwgdmFsdWU6IGl0ZW0udmFsdWUsIHRleHQ6IGl0ZW0udGV4dH0sIHRoaXMpKTtcclxuICAgICAgZG9tQ29uc3RydWN0LnBsYWNlKGRvbSwgbGlzdFN0YXJ0KTtcclxuICAgICAgaWYgKGl0ZW0udmFsdWUgPT09IHRoaXMuZHJvcGRvd25TZWxlY3QudmFsdWUpIHtcclxuICAgICAgICB0aGlzLl9zZWxlY3RlZCA9IGRvbTtcclxuICAgICAgICBkb21DbGFzcy5hZGQoZG9tLCAnZHJvcGRvd25fX2xpc3RfX2l0ZW0tLXNlbGVjdGVkJyk7XHJcbiAgICAgIH1cclxuICAgIH0sIHRoaXMpO1xyXG4gICAgdGhpcy5fZXZlbnRDb25uZWN0aW9ucy5wdXNoKG9uKGxpc3RTdGFydCwgJ2NsaWNrJywgdGhpcy5vbkxpc3RDbGljay5iaW5kKHRoaXMpKSk7XHJcbiAgICBkb21Db25zdHJ1Y3QucGxhY2UobGlzdEVuZCwgbGlzdFN0YXJ0KTtcclxuICAgIGlmICh0aGlzLl9naG9zdCkge1xyXG4gICAgICBkb21Db25zdHJ1Y3QuZGVzdHJveSh0aGlzLl9naG9zdCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLl9naG9zdCA9IGRvbUNvbnN0cnVjdC50b0RvbSh0aGlzLmxpc3RUZW1wbGF0ZS5hcHBseSh7aWQ6IHRoaXMuaWQsIHZhbHVlOiB0aGlzLmdldFRleHQoKSwgaWNvbjogdGhpcy5vcGVuSWNvbiwgbGFiZWw6IHRoaXMubGFiZWwsIGRyb3Bkb3duQ2xhc3M6IHRoaXMuZHJvcGRvd25DbGFzcyB9LCB0aGlzKSk7XHJcblxyXG4gICAgY29uc3QgZHJvcGRvd25JbnB1dCA9IHF1ZXJ5KCcuZHJvcGRvd25fX2lucHV0JywgdGhpcy5fZ2hvc3QpWzBdO1xyXG4gICAgaWYgKGRyb3Bkb3duSW5wdXQpIHtcclxuICAgICAgdGhpcy5fZXZlbnRDb25uZWN0aW9ucy5wdXNoKG9uKGRyb3Bkb3duSW5wdXQsICdrZXlkb3duJywgdGhpcy5vbktleVByZXNzLmJpbmQodGhpcykpKTtcclxuICAgIH1cclxuICAgIGNvbnN0IGRyb3Bkb3duSWNvbiA9IHF1ZXJ5KCcuZHJvcGRvd25fX2ljb24nLCB0aGlzLl9naG9zdClbMF07XHJcbiAgICBpZiAoZHJvcGRvd25JY29uKSB7XHJcbiAgICAgIHRoaXMuX2V2ZW50Q29ubmVjdGlvbnMucHVzaChvbihkcm9wZG93bkljb24sICdjbGljaycsIHRoaXMuaGlkZS5iaW5kKHRoaXMpKSk7XHJcbiAgICB9XHJcbiAgICBsZXQgcG9zaXRpb24gPSAnbGFzdCc7XHJcbiAgICBpZiAodG9wKSB7XHJcbiAgICAgIHBvc2l0aW9uID0gJ2ZpcnN0JztcclxuICAgIH1cclxuICAgIGRvbUNvbnN0cnVjdC5wbGFjZShsaXN0U3RhcnQsIHRoaXMuX2dob3N0LCBwb3NpdGlvbik7XHJcbiAgICB0aGlzLl9saXN0ID0gbGlzdFN0YXJ0O1xyXG4gICAgZG9tQ29uc3RydWN0LnBsYWNlKHRoaXMuX2dob3N0LCBkb2N1bWVudC5ib2R5KTtcclxuICB9LFxyXG4gIGNyZWF0ZUxpc3Q6IGZ1bmN0aW9uIGNyZWF0ZUxpc3Qoe2l0ZW1zLCBkZWZhdWx0VmFsdWV9KSB7XHJcbiAgICBsZXQgaXRlbUZvdW5kID0gbnVsbDtcclxuICAgIHRoaXMuaXRlbXMgPSAoaXRlbXMpID8gaXRlbXMgOiBbXTtcclxuICAgIHRoaXMuX2RlZmF1bHRWYWx1ZSA9IGRlZmF1bHRWYWx1ZTtcclxuXHJcbiAgICBhcnJheS5mb3JFYWNoKGl0ZW1zLCBmdW5jdGlvbiBmaW5kSXRlbShpdGVtKSB7XHJcbiAgICAgIGlmIChpdGVtLnZhbHVlID09PSBkZWZhdWx0VmFsdWUpIHtcclxuICAgICAgICBpdGVtRm91bmQgPSBpdGVtO1xyXG4gICAgICB9XHJcbiAgICB9LCB0aGlzKTtcclxuXHJcbiAgICBpZiAodGhpcy5pdGVtTXVzdEV4aXN0ICYmICFpdGVtRm91bmQpIHtcclxuICAgICAgaXRlbUZvdW5kID0geyBrZXk6IC0xLCB2YWx1ZTogZGVmYXVsdFZhbHVlLCB0ZXh0OiBkZWZhdWx0VmFsdWUgfTtcclxuICAgICAgdGhpcy5pdGVtcy5zcGxpY2UoMCwgMCwgaXRlbUZvdW5kKTtcclxuICAgIH1cclxuXHJcbiAgICBhcnJheS5mb3JFYWNoKGl0ZW1zLCBmdW5jdGlvbiBhZGRUb01vZGFsTGlzdChpdGVtKSB7XHJcbiAgICAgIGNvbnN0IG9wdGlvbiA9IGRvbUNvbnN0cnVjdC50b0RvbSh0aGlzLnNlbGVjdEl0ZW1UZW1wbGF0ZS5hcHBseSh7a2V5OiBpdGVtLmtleSwgdmFsdWU6IGl0ZW0udmFsdWUsIHRleHQ6IGl0ZW0udGV4dH0sIHRoaXMpKTtcclxuICAgICAgZG9tQ29uc3RydWN0LnBsYWNlKG9wdGlvbiwgdGhpcy5kcm9wZG93blNlbGVjdCk7XHJcbiAgICB9LCB0aGlzKTtcclxuXHJcbiAgICBpZiAoaXRlbUZvdW5kKSB7XHJcbiAgICAgIHRoaXMuZHJvcGRvd25TZWxlY3QudmFsdWUgPSBpdGVtRm91bmQudmFsdWU7XHJcbiAgICAgIHRoaXMuZHJvcGRvd25JbnB1dC52YWx1ZSA9IChpdGVtRm91bmQudGV4dCkgPyBpdGVtRm91bmQudGV4dCA6IGl0ZW1Gb3VuZC52YWx1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuZHJvcGRvd25TZWxlY3QudmFsdWUgPSBkZWZhdWx0VmFsdWU7XHJcbiAgICAgIHRoaXMuZHJvcGRvd25JbnB1dC52YWx1ZSA9IGRlZmF1bHRWYWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl9ldmVudENvbm5lY3Rpb25zLnB1c2gob24odGhpcy5kcm9wZG93bk5vZGUsICdjbGljaycsIHRoaXMub25DbGljay5iaW5kKHRoaXMpKSk7XHJcbiAgICB0aGlzLmNyZWF0ZUdob3N0KCk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfSxcclxuICBjcmVhdGVPdmVybGF5OiBmdW5jdGlvbiBjcmVhdGVPdmVybGF5KCkge1xyXG4gICAgdGhpcy5kZXN0cm95T3ZlcmxheSgpO1xyXG4gICAgdGhpcy5fb3ZlcmxheSA9IGRvbUNvbnN0cnVjdC50b0RvbSh0aGlzLm92ZXJsYXlUZW1wbGF0ZS5hcHBseSh0aGlzKSk7XHJcbiAgICBkb21Db25zdHJ1Y3QucGxhY2UodGhpcy5fb3ZlcmxheSwgZG9jdW1lbnQuYm9keSk7XHJcbiAgICB0aGlzLl9vdmVybGF5RXZlbnQgPSBvbih0aGlzLl9vdmVybGF5LCAnY2xpY2snLCB0aGlzLm9uT3ZlcmxheUNsaWNrLmJpbmQodGhpcykpO1xyXG4gIH0sXHJcbiAgZGVzdHJveTogZnVuY3Rpb24gZGVzdHJveSgpIHtcclxuICAgIHRoaXMuX2V2ZW50Q29ubmVjdGlvbnMuZm9yRWFjaCggKGV2dCkgPT4ge1xyXG4gICAgICBldnQucmVtb3ZlKCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX2V2ZW50Q29ubmVjdGlvbnMgPSBbXTtcclxuICAgIGRvbUNvbnN0cnVjdC5kZXN0cm95KHRoaXMuX2dob3N0KTtcclxuICAgIHRoaXMuZGVzdHJveU92ZXJsYXkoKTtcclxuICAgIHRoaXMuaW5oZXJpdGVkKGFyZ3VtZW50cyk7XHJcbiAgfSxcclxuICBkZXN0cm95T3ZlcmxheTogZnVuY3Rpb24gZGVzdHJveU92ZXJsYXkoKSB7XHJcbiAgICBpZiAodGhpcy5fb3ZlcmxheSkge1xyXG4gICAgICBkb21Db25zdHJ1Y3QuZGVzdHJveSh0aGlzLl9vdmVybGF5KTtcclxuICAgICAgdGhpcy5fb3ZlcmxheUV2ZW50LnJlbW92ZSgpO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgZmluZFZhbHVlOiBmdW5jdGlvbiBmaW5kVmFsdWUodGV4dCkge1xyXG4gICAgY29uc3QgdmFsdWUgPSBhcnJheS5maWx0ZXIodGhpcy5fbGlzdC5jaGlsZHJlbiwgKGVsZW1lbnQpID0+IHtcclxuICAgICAgaWYgKGVsZW1lbnQuaW5uZXJUZXh0ID09PSB0ZXh0KSB7XHJcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHZhbHVlWzBdO1xyXG4gIH0sXHJcbiAgZ2V0U2VsZWN0ZWQ6IGZ1bmN0aW9uIGdldFNlbGVjdGVkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3NlbGVjdGVkO1xyXG4gIH0sXHJcbiAgZ2V0VGV4dDogZnVuY3Rpb24gZ2V0VGV4dCgpIHtcclxuICAgIGNvbnN0IHRleHQgPSAodGhpcy5kcm9wZG93blNlbGVjdC5vcHRpb25zW3RoaXMuZHJvcGRvd25TZWxlY3Quc2VsZWN0ZWRJbmRleF0pID8gdGhpcy5kcm9wZG93blNlbGVjdC5vcHRpb25zW3RoaXMuZHJvcGRvd25TZWxlY3Quc2VsZWN0ZWRJbmRleF0udGV4dCA6ICcnO1xyXG4gICAgcmV0dXJuIHRleHQ7XHJcbiAgfSxcclxuICBnZXRWYWx1ZTogZnVuY3Rpb24gZ2V0VmFsdWUoKSB7XHJcbiAgICBjb25zdCB2YWx1ZSA9ICh0aGlzLmRyb3Bkb3duU2VsZWN0Lm9wdGlvbnNbdGhpcy5kcm9wZG93blNlbGVjdC5zZWxlY3RlZEluZGV4XSkgPyB0aGlzLmRyb3Bkb3duU2VsZWN0Lm9wdGlvbnNbdGhpcy5kcm9wZG93blNlbGVjdC5zZWxlY3RlZEluZGV4XS52YWx1ZSA6IHRoaXMuZHJvcGRvd25JbnB1dC52YWx1ZTtcclxuICAgIHJldHVybiB2YWx1ZTtcclxuICB9LFxyXG4gIGhpZGU6IGZ1bmN0aW9uIGhpZGUoKSB7XHJcbiAgICB0aGlzLmRlc3Ryb3lPdmVybGF5KCk7XHJcbiAgICBkb21DbGFzcy5hZGQodGhpcy5fZ2hvc3QsICdkcm9wZG93bi0taGlkZGVuJyk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9LFxyXG4gIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZXZ0KSB7XHJcbiAgICBpZiAoZXZ0LmN1cnJlbnRUYXJnZXQgPT09IHRoaXMuZHJvcGRvd25Ob2RlKSB7XHJcbiAgICAgIHRoaXMuc2Nyb2xsVG9Ecm9wZG93bigpO1xyXG4gICAgICB0aGlzLnNob3coKTtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIH1cclxuICB9LFxyXG4gIG9uS2V5UHJlc3M6IGZ1bmN0aW9uIG9uS2V5UHJlc3MoZXZ0KSB7XHJcbiAgICBsZXQgcHJldmVudCA9IHRydWU7XHJcbiAgICBzd2l0Y2ggKGV2dC5rZXlDb2RlKSB7XHJcbiAgICAgIGNhc2Uga2V5cy5VUF9BUlJPVzpcclxuICAgICAgICBpZiAoIWRvbUNsYXNzLmNvbnRhaW5zKHRoaXMuX2dob3N0LCAnZHJvcGRvd24tLWhpZGRlbicpKSB7XHJcbiAgICAgICAgICBpZiAodGhpcy5fc2VsZWN0ZWQucHJldmlvdXNTaWJsaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU2VsZWN0ZWQodGhpcy5fc2VsZWN0ZWQucHJldmlvdXNTaWJsaW5nKTtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVHaG9zdCh0aGlzLl9zZWxlY3RlZC5kYXRhc2V0LnZhbHVlKTtcclxuICAgICAgICAgICAgdGhpcy5zY3JvbGxMaXN0VG8odGhpcy5fc2VsZWN0ZWQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLnNob3coKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2Uga2V5cy5ET1dOX0FSUk9XOlxyXG4gICAgICAgIGlmICghZG9tQ2xhc3MuY29udGFpbnModGhpcy5fZ2hvc3QsICdkcm9wZG93bi0taGlkZGVuJykpIHtcclxuICAgICAgICAgIGlmICh0aGlzLl9zZWxlY3RlZC5uZXh0U2libGluZykge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNlbGVjdGVkKHRoaXMuX3NlbGVjdGVkLm5leHRTaWJsaW5nKTtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVHaG9zdCh0aGlzLl9zZWxlY3RlZC5kYXRhc2V0LnZhbHVlKTtcclxuICAgICAgICAgICAgdGhpcy5zY3JvbGxMaXN0VG8odGhpcy5fc2VsZWN0ZWQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLnNob3coKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2Uga2V5cy5UQUI6XHJcbiAgICAgICAgcHJldmVudCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuaGlkZSgpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIGtleXMuRVNDQVBFOlxyXG4gICAgICBjYXNlIGtleXMuQ0xFQVI6XHJcbiAgICAgICAgdGhpcy5oaWRlKCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2Uga2V5cy5FTlRFUjpcclxuICAgICAgY2FzZSBrZXlzLlNQQUNFOlxyXG4gICAgICAgIHRoaXMub25MaXN0Q2xpY2soeyB0YXJnZXQ6IHRoaXMuX3NlbGVjdGVkIH0pO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIGtleXMuSE9NRTpcclxuICAgICAgICB0aGlzLnVwZGF0ZVNlbGVjdGVkKHRoaXMuX2xpc3QuY2hpbGRyZW5bMF0pO1xyXG4gICAgICAgIHRoaXMuc2Nyb2xsTGlzdFRvKHRoaXMuX3NlbGVjdGVkKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBrZXlzLkVORDpcclxuICAgICAgICB0aGlzLnVwZGF0ZVNlbGVjdGVkKHRoaXMuX2xpc3QuY2hpbGRyZW5bdGhpcy5fbGlzdC5jaGlsZHJlbi5sZW5ndGggLSAxXSk7XHJcbiAgICAgICAgdGhpcy5zY3JvbGxMaXN0VG8odGhpcy5fc2VsZWN0ZWQpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgfVxyXG4gICAgaWYgKHByZXZlbnQpIHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIH1cclxuICB9LFxyXG4gIG9uTGlzdENsaWNrOiBmdW5jdGlvbiBvbkxpc3RDbGljayh7IHRhcmdldCB9KSB7XHJcbiAgICB0aGlzLnVwZGF0ZVNlbGVjdGVkKHRhcmdldCk7XHJcbiAgICBpZiAoIXRoaXMubXVsdGlTZWxlY3QpIHtcclxuICAgICAgdGhpcy5oaWRlKCk7XHJcbiAgICAgIHRoaXMuc2V0VmFsdWUodGFyZ2V0LmRhdGFzZXQudmFsdWUpO1xyXG4gICAgfSAvLyBUT0RPOiBBZGQgaW4gd2hhdCB3aWxsIGhhcHBlbiBmb3IgYSBtdWx0aVNlbGVjdCBkcm9wZG93blxyXG4gICAgaWYgKHRoaXMub25TZWxlY3QgJiYgdGhpcy5vblNlbGVjdFNjb3BlKSB7XHJcbiAgICAgIHRoaXMub25TZWxlY3QuYmluZCh0aGlzLm9uU2VsZWN0U2NvcGUpKCk7XHJcbiAgICB9XHJcbiAgfSxcclxuICBvbk92ZXJsYXlDbGljazogZnVuY3Rpb24gb25PdmVybGF5Q2xpY2soZXZ0KSB7XHJcbiAgICBpZiAoIWRvbUNsYXNzLmNvbnRhaW5zKHRoaXMuX2dob3N0LCAnZHJvcGRvd24tLWhpZGRlbicpKSB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgIHRoaXMuaGlkZSgpO1xyXG4gICAgICBkb21Db25zdHJ1Y3QuZGVzdHJveSh0aGlzLl9vdmVybGF5KTtcclxuICAgIH1cclxuICB9LFxyXG4gIHBvc3RDcmVhdGU6IGZ1bmN0aW9uIHBvc3RDcmVhdGUoKSB7XHJcbiAgICB0aGlzLmluaGVyaXRlZChhcmd1bWVudHMpO1xyXG4gICAgdGhpcy5fb3JpZW50YXRpb24gPSBjb25uZWN0LnN1YnNjcmliZSgnL2FwcC9zZXRPcmllbnRhdGlvbicsIHRoaXMsIHRoaXMuaGlkZSk7XHJcbiAgICB0aGlzLl9ldmVudENvbm5lY3Rpb25zLnB1c2gob24odGhpcy5kcm9wZG93bklucHV0LCAna2V5ZG93bicsIHRoaXMub25LZXlQcmVzcy5iaW5kKHRoaXMpKSk7XHJcbiAgfSxcclxuICBzY3JvbGxMaXN0VG86IGZ1bmN0aW9uIHNjcm9sbExpc3RUbyh0YXJnZXQpIHtcclxuICAgIGlmICh0YXJnZXQpIHtcclxuICAgICAgdGhpcy5fbGlzdC5zY3JvbGxUb3AgPSB0YXJnZXQub2Zmc2V0VG9wIC0gdGFyZ2V0Lm9mZnNldEhlaWdodDtcclxuICAgIH1cclxuICB9LFxyXG4gIHNjcm9sbFRvRHJvcGRvd246IGZ1bmN0aW9uIHNjcm9sbFRvRHJvcGRvd24oKSB7XHJcbiAgICBjb25zdCBzY3JvbGxQYXJlbnQgPSB0aGlzLmRyb3Bkb3duTm9kZS5vZmZzZXRQYXJlbnQ7XHJcbiAgICBpZiAoc2Nyb2xsUGFyZW50KSB7XHJcbiAgICAgIGlmIChzY3JvbGxQYXJlbnQuc2Nyb2xsVG9wID4gdGhpcy5kcm9wZG93bk5vZGUub2Zmc2V0VG9wKSB7XHJcbiAgICAgICAgc2Nyb2xsUGFyZW50LnNjcm9sbFRvcCA9IHRoaXMuZHJvcGRvd25Ob2RlLm9mZnNldFRvcDtcclxuICAgICAgfSBlbHNlIGlmICh0aGlzLmRyb3Bkb3duTm9kZS5vZmZzZXRUb3AgPiBzY3JvbGxQYXJlbnQuc2Nyb2xsVG9wICYmIHRoaXMuZHJvcGRvd25Ob2RlLm9mZnNldFRvcCArIHRoaXMuZHJvcGRvd25Ob2RlLm9mZnNldEhlaWdodCA+IHNjcm9sbFBhcmVudC5zY3JvbGxUb3AgKyBzY3JvbGxQYXJlbnQub2Zmc2V0SGVpZ2h0KSB7XHJcbiAgICAgICAgc2Nyb2xsUGFyZW50LnNjcm9sbFRvcCA9IHRoaXMuZHJvcGRvd25Ob2RlLm9mZnNldFRvcCArIHRoaXMuZHJvcGRvd25Ob2RlLm9mZnNldEhlaWdodCAtIHNjcm9sbFBhcmVudC5vZmZzZXRIZWlnaHQ7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LFxyXG4gIHNldE9uU2VsZWN0OiBmdW5jdGlvbiBzZXRPblNlbGVjdCh2YWx1ZSkge1xyXG4gICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgIHRoaXMub25TZWxlY3QgPSB2YWx1ZTtcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH0sXHJcbiAgc2V0T25TZWxlY3RTY29wZTogZnVuY3Rpb24gc2V0T25TZWxlY3RTY29wZShzY29wZSkge1xyXG4gICAgaWYgKHNjb3BlKSB7XHJcbiAgICAgIHRoaXMuX29uU2VsZWN0U2NvcGUgPSBzY29wZTtcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH0sXHJcbiAgc2V0U2VsZWN0ZWQ6IGZ1bmN0aW9uIHNldFNlbGVjdGVkKHZhbHVlID0ge30pIHtcclxuICAgIGlmICh2YWx1ZSAhPT0gdGhpcy5fc2VsZWN0ZWQpIHtcclxuICAgICAgdGhpcy51cGRhdGVTZWxlY3RlZCh2YWx1ZSk7XHJcbiAgICAgIHRoaXMuX3NlbGVjdGVkID0gdmFsdWU7XHJcbiAgICAgIHRoaXMuc2V0VmFsdWUodmFsdWUuZGF0YXNldC52YWx1ZSk7XHJcbiAgICB9XHJcbiAgfSxcclxuICBzZXRWYWx1ZTogZnVuY3Rpb24gc2V0VmFsdWUodmFsdWUpIHtcclxuICAgIGlmICh2YWx1ZSA9PT0gMCB8fCB2YWx1ZSkge1xyXG4gICAgICB0aGlzLmRyb3Bkb3duU2VsZWN0LnZhbHVlID0gdmFsdWU7XHJcbiAgICAgIHRoaXMuZHJvcGRvd25JbnB1dC52YWx1ZSA9IHRoaXMuZ2V0VGV4dCgpO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgc2hvdzogZnVuY3Rpb24gc2hvdygpIHtcclxuICAgIGNvbnN0IHBvcyA9IGRvbUdlb20ucG9zaXRpb24odGhpcy5kcm9wZG93bklucHV0LCB0cnVlKTtcclxuICAgIGlmIChwb3MueSA8PSBBcHAuX3Jvb3REb21Ob2RlLm9mZnNldEhlaWdodCAvIDIpIHtcclxuICAgICAgaWYgKGRvbUNsYXNzLmNvbnRhaW5zKHRoaXMuX2dob3N0LCAnZHJvcGRvd24tLW9uVG9wJykpIHtcclxuICAgICAgICB0aGlzLmNyZWF0ZUdob3N0KGZhbHNlKTtcclxuICAgICAgICBkb21DbGFzcy5yZW1vdmUodGhpcy5fZ2hvc3QsICdkcm9wZG93bi0tb25Ub3AnKTtcclxuICAgICAgfVxyXG4gICAgICBkb21TdHlsZS5zZXQodGhpcy5fZ2hvc3QsIHtcclxuICAgICAgICB0b3A6IGAke3Bvcy55IC0gZG9tU3R5bGUuZ2V0KHRoaXMuZHJvcGRvd25JbnB1dCwgJ2JvcmRlclRvcFdpZHRoJyl9cHhgLFxyXG4gICAgICAgIGxlZnQ6IGAke3Bvcy54fXB4YCxcclxuICAgICAgICB3aWR0aDogYCR7cG9zLnd9cHhgLFxyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy50cmltSGVpZ2h0KGZhbHNlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmICghZG9tQ2xhc3MuY29udGFpbnModGhpcy5fZ2hvc3QsICdkcm9wZG93bi0tb25Ub3AnKSkge1xyXG4gICAgICAgIHRoaXMuY3JlYXRlR2hvc3QodHJ1ZSk7XHJcbiAgICAgICAgZG9tQ2xhc3MuYWRkKHRoaXMuX2dob3N0LCAnZHJvcGRvd24tLW9uVG9wJyk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKCF0aGlzLl9saXN0SXRlbUhlaWdodCkge1xyXG4gICAgICAgIHRoaXMuX2xpc3RJdGVtSGVpZ2h0ID0gZG9tU3R5bGUuZ2V0KHRoaXMuX2xpc3QsICdsaW5lSGVpZ2h0Jyk7XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgZ2hvc3RNYXhIZWlnaHQgPSBkb21TdHlsZS5nZXQodGhpcy5fZ2hvc3QsICdtYXhIZWlnaHQnKTtcclxuICAgICAgY29uc3QgZ2hvc3RIZWlnaHQgPSB0aGlzLl9saXN0SXRlbUhlaWdodCAqIHRoaXMuX2xpc3QuY2hpbGRyZW4ubGVuZ3RoICsgcG9zLmggPCBnaG9zdE1heEhlaWdodCA/IHRoaXMuX2xpc3RJdGVtSGVpZ2h0ICogdGhpcy5fbGlzdC5jaGlsZHJlbi5sZW5ndGggKyBwb3MuaCA6IGdob3N0TWF4SGVpZ2h0O1xyXG4gICAgICBkb21TdHlsZS5zZXQodGhpcy5fZ2hvc3QsIHtcclxuICAgICAgICB0b3A6IGAke3Bvcy55ICsgZG9tU3R5bGUuZ2V0KHRoaXMuZHJvcGRvd25JbnB1dCwgJ2JvcmRlckJvdHRvbVdpZHRoJykgLSBnaG9zdEhlaWdodCArIHBvcy5ofXB4YCxcclxuICAgICAgICBsZWZ0OiBgJHtwb3MueH1weGAsXHJcbiAgICAgICAgd2lkdGg6IGAke3Bvcy53fXB4YCxcclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMudHJpbUhlaWdodCh0cnVlKTtcclxuICAgIH1cclxuICAgIGNvbnN0IGdob3N0SW5wdXQgPSBxdWVyeSgnLmRyb3Bkb3duX19pbnB1dCcsIHRoaXMuX2dob3N0KVswXTtcclxuICAgIGlmIChnaG9zdElucHV0KSB7XHJcbiAgICAgIGRvbVN0eWxlLnNldChnaG9zdElucHV0LCB7XHJcbiAgICAgICAgaGVpZ2h0OiBgJHtwb3MuaH1weGAsXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZ2hvc3RJY29uID0gcXVlcnkoJy5kcm9wZG93bl9faWNvbicsIHRoaXMuX2dob3N0KVswXTtcclxuICAgIGlmIChnaG9zdEljb24pIHtcclxuICAgICAgZG9tU3R5bGUuc2V0KGdob3N0SWNvbiwge1xyXG4gICAgICAgIG1hcmdpblRvcDogYCR7cG9zLmggLyAyIC0gZG9tU3R5bGUuZ2V0KGdob3N0SWNvbiwgJ2hlaWdodCcpIC8gMn1weGAsXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgdGhpcy51cGRhdGVHaG9zdCh0aGlzLmRyb3Bkb3duU2VsZWN0LnZhbHVlKTtcclxuICAgIHRoaXMuY3JlYXRlT3ZlcmxheSgpO1xyXG4gICAgdGhpcy50b2dnbGUoKTtcclxuICAgIHRoaXMuc2Nyb2xsTGlzdFRvKHRoaXMuX3NlbGVjdGVkKTtcclxuICB9LFxyXG4gIHRvZ2dsZTogZnVuY3Rpb24gdG9nZ2xlKCkge1xyXG4gICAgZG9tQ2xhc3MudG9nZ2xlKHRoaXMuX2dob3N0LCAnZHJvcGRvd24tLWhpZGRlbicpO1xyXG4gICAgaWYgKGRvbUNsYXNzLmNvbnRhaW5zKHRoaXMuX2dob3N0LCAnZHJvcGRvd24tLWhpZGRlbicpKSB7XHJcbiAgICAgIHRoaXMuZGVzdHJveU92ZXJsYXkoKTtcclxuICAgIH1cclxuICB9LFxyXG4gIHRyaW1IZWlnaHQ6IGZ1bmN0aW9uIHRyaW1IZWlnaHQodG9wID0gZmFsc2UpIHtcclxuICAgIGNvbnN0IGdob3N0TGlzdCA9IHF1ZXJ5KCcuZHJvcGRvd25fX2xpc3QnLCB0aGlzLl9naG9zdClbMF07XHJcbiAgICBpZiAoZ2hvc3RMaXN0KSB7XHJcbiAgICAgIGNvbnN0IGRyb3Bkb3duSGVpZ2h0ID0gZG9tU3R5bGUuZ2V0KHRoaXMuZHJvcGRvd25JbnB1dCwgJ2hlaWdodCcpO1xyXG4gICAgICBjb25zdCBnaG9zdEhlaWdodCA9IGRvbVN0eWxlLmdldCh0aGlzLl9naG9zdCwgJ2hlaWdodCcpO1xyXG4gICAgICBjb25zdCBnaG9zdFRvcCA9IGRvbVN0eWxlLmdldCh0aGlzLl9naG9zdCwgJ3RvcCcpO1xyXG4gICAgICBjb25zdCBib3JkZXJUb3AgPSBkb21TdHlsZS5nZXQodGhpcy5fZ2hvc3QsICdib3JkZXJUb3BXaWR0aCcpO1xyXG4gICAgICBjb25zdCBib3JkZXJCb3R0b20gPSBkb21TdHlsZS5nZXQodGhpcy5fZ2hvc3QsICdib3JkZXJCb3R0b21XaWR0aCcpO1xyXG4gICAgICBpZiAoIXRvcCAmJiBnaG9zdFRvcCArIGdob3N0SGVpZ2h0ID4gQXBwLl9yb290RG9tTm9kZS5vZmZzZXRIZWlnaHQpIHtcclxuICAgICAgICBkb21TdHlsZS5zZXQodGhpcy5fZ2hvc3QsIHtcclxuICAgICAgICAgIGhlaWdodDogJycsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZG9tU3R5bGUuc2V0KGdob3N0TGlzdCwge1xyXG4gICAgICAgICAgaGVpZ2h0OiBgJHtBcHAuX3Jvb3REb21Ob2RlLm9mZnNldEhlaWdodCAtIGRyb3Bkb3duSGVpZ2h0IC0gZ2hvc3RUb3B9cHhgLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9IGVsc2UgaWYgKHRvcCAmJiBnaG9zdFRvcCA8IDApIHtcclxuICAgICAgICBkb21TdHlsZS5zZXQodGhpcy5fZ2hvc3QsIHtcclxuICAgICAgICAgIHRvcDogYDBweGAsXHJcbiAgICAgICAgICBoZWlnaHQ6IGAke2dob3N0SGVpZ2h0ICsgZ2hvc3RUb3B9cHhgLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGRvbVN0eWxlLnNldChnaG9zdExpc3QsIHtcclxuICAgICAgICAgIGhlaWdodDogYCR7Z2hvc3RIZWlnaHQgKyBnaG9zdFRvcCAtIGRyb3Bkb3duSGVpZ2h0IC0gYm9yZGVyVG9wIC0gYm9yZGVyQm90dG9tfXB4YCxcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0sXHJcbiAgdXBkYXRlR2hvc3Q6IGZ1bmN0aW9uIHVwZGF0ZUdob3N0KHZhbHVlKSB7XHJcbiAgICBjb25zdCBjdXJyZW50ID0gcXVlcnkoYFtkYXRhLXZhbHVlPSR7dmFsdWV9XWAsIHRoaXMuX2xpc3QpWzBdO1xyXG4gICAgY29uc3QgaW5wdXQgPSBxdWVyeSgnLmRyb3Bkb3duX19pbnB1dCcsIHRoaXMuX2dob3N0KVswXTtcclxuICAgIGlmIChjdXJyZW50KSB7XHJcbiAgICAgIHRoaXMudXBkYXRlU2VsZWN0ZWQoY3VycmVudCk7XHJcbiAgICB9XHJcbiAgICBpZiAoaW5wdXQpIHtcclxuICAgICAgaW5wdXQudmFsdWUgPSB0aGlzLmdldFRleHQoKTtcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH0sXHJcbiAgdXBkYXRlU2VsZWN0ZWQ6IGZ1bmN0aW9uIHVwZGF0ZVNlbGVjdGVkKHRhcmdldCkge1xyXG4gICAgZG9tQ2xhc3MuYWRkKHRhcmdldCwgJ2Ryb3Bkb3duX19saXN0X19pdGVtLS1zZWxlY3RlZCcpO1xyXG4gICAgaWYgKHRoaXMuX3NlbGVjdGVkICYmIHRoaXMuX3NlbGVjdGVkICE9PSB0YXJnZXQpIHtcclxuICAgICAgZG9tQ2xhc3MucmVtb3ZlKHRoaXMuX3NlbGVjdGVkLCAnZHJvcGRvd25fX2xpc3RfX2l0ZW0tLXNlbGVjdGVkJyk7XHJcbiAgICB9XHJcbiAgICB0aGlzLl9zZWxlY3RlZCA9IHRhcmdldDtcclxuICB9LFxyXG59KTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IF9fY2xhc3M7XHJcbiJdfQ==
</pre>
</body>
</html>
