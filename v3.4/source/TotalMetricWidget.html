<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">define('crm/Views/Offline/TotalMetricWidget', ['exports', 'module', '../MetricWidget', 'dojo/_base/declare'], function (exports, module, _MetricWidget, _dojo_baseDeclare) {
  function _interopRequireDefault(obj) { return obj &amp;&amp; obj.__esModule ? obj : { 'default': obj }; }

  var _MetricWidget2 = _interopRequireDefault(_MetricWidget);

  var _declare = _interopRequireDefault(_dojo_baseDeclare);

  module.exports = (0, _declare['default'])('crm.Views.Offline.TotalMetricWidget', [_MetricWidget2['default']], {
    navToReportView: function navToReportView() {},
    _buildQueryOptions: function _buildQueryOptions() {
      return {};
    },
    _buildQueryExpression: function _buildQueryExpression() {
      var filters = this.activeEntityFilters || [];
      return {
        map: function map(doc, emit) {
          // If the user has entity filters stored in preferences, filter based on that
          if (App.preferences &amp;&amp; App.preferences.offlineEntityFilters) {
            filters.forEach(function (f) {
              if (doc.entityName === f.name) {
                emit(1);
              }
            });
          } else {
            // User has no entity filter preferences (from right drawer)
            emit(1);
          }
        },
        reduce: '_count'
      };
    },
    createStore: function createStore() {
      this._model = App.modelManager.getModel('');
    }
  });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9WaWV3cy9PZmZsaW5lL1RvdGFsTWV0cmljV2lkZ2V0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7bUJBR2UseUJBQVEscUNBQXFDLEVBQUUsMkJBQWMsRUFBRTtBQUM1RSxtQkFBZSxFQUFFLFNBQVMsZUFBZSxHQUFHLEVBQUU7QUFDOUMsc0JBQWtCLEVBQUUsU0FBUyxrQkFBa0IsR0FBRztBQUNoRCxhQUFPLEVBQUUsQ0FBQztLQUNYO0FBQ0QseUJBQXFCLEVBQUUsU0FBUyxxQkFBcUIsR0FBRztBQUN0RCxVQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsbUJBQW1CLElBQUksRUFBRSxDQUFDO0FBQy9DLGFBQU87QUFDTCxXQUFHLEVBQUUsU0FBUyxHQUFHLENBQUMsR0FBRyxFQUFFLElBQUksRUFBRTs7QUFFM0IsY0FBSSxHQUFHLENBQUMsV0FBVyxJQUFJLEdBQUcsQ0FBQyxXQUFXLENBQUMsb0JBQW9CLEVBQUU7QUFDM0QsbUJBQU8sQ0FBQyxPQUFPLENBQUMsVUFBQyxDQUFDLEVBQUs7QUFDckIsa0JBQUksR0FBRyxDQUFDLFVBQVUsS0FBSyxDQUFDLENBQUMsSUFBSSxFQUFFO0FBQzdCLG9CQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7ZUFDVDthQUNGLENBQUMsQ0FBQztXQUNKLE1BQU07O0FBRUwsZ0JBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztXQUNUO1NBQ0Y7QUFDRCxjQUFNLEVBQUUsUUFBUTtPQUNqQixDQUFDO0tBQ0g7QUFDRCxlQUFXLEVBQUUsU0FBUyxXQUFXLEdBQUc7QUFDbEMsVUFBSSxDQUFDLE1BQU0sR0FBRyxHQUFHLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQztLQUM3QztHQUNGLENBQUMiLCJmaWxlIjoic3JjL1ZpZXdzL09mZmxpbmUvVG90YWxNZXRyaWNXaWRnZXQuanMiLCJzb3VyY2VSb290Ijoic3JjIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IE1ldHJpY1dpZGdldCBmcm9tICcuLi9NZXRyaWNXaWRnZXQnO1xyXG5pbXBvcnQgZGVjbGFyZSBmcm9tICdkb2pvL19iYXNlL2RlY2xhcmUnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZGVjbGFyZSgnY3JtLlZpZXdzLk9mZmxpbmUuVG90YWxNZXRyaWNXaWRnZXQnLCBbTWV0cmljV2lkZ2V0XSwge1xyXG4gIG5hdlRvUmVwb3J0VmlldzogZnVuY3Rpb24gbmF2VG9SZXBvcnRWaWV3KCkge30sXHJcbiAgX2J1aWxkUXVlcnlPcHRpb25zOiBmdW5jdGlvbiBfYnVpbGRRdWVyeU9wdGlvbnMoKSB7XHJcbiAgICByZXR1cm4ge307XHJcbiAgfSxcclxuICBfYnVpbGRRdWVyeUV4cHJlc3Npb246IGZ1bmN0aW9uIF9idWlsZFF1ZXJ5RXhwcmVzc2lvbigpIHtcclxuICAgIGNvbnN0IGZpbHRlcnMgPSB0aGlzLmFjdGl2ZUVudGl0eUZpbHRlcnMgfHwgW107XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBtYXA6IGZ1bmN0aW9uIG1hcChkb2MsIGVtaXQpIHtcclxuICAgICAgICAvLyBJZiB0aGUgdXNlciBoYXMgZW50aXR5IGZpbHRlcnMgc3RvcmVkIGluIHByZWZlcmVuY2VzLCBmaWx0ZXIgYmFzZWQgb24gdGhhdFxyXG4gICAgICAgIGlmIChBcHAucHJlZmVyZW5jZXMgJiYgQXBwLnByZWZlcmVuY2VzLm9mZmxpbmVFbnRpdHlGaWx0ZXJzKSB7XHJcbiAgICAgICAgICBmaWx0ZXJzLmZvckVhY2goKGYpID0+IHtcclxuICAgICAgICAgICAgaWYgKGRvYy5lbnRpdHlOYW1lID09PSBmLm5hbWUpIHtcclxuICAgICAgICAgICAgICBlbWl0KDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgLy8gVXNlciBoYXMgbm8gZW50aXR5IGZpbHRlciBwcmVmZXJlbmNlcyAoZnJvbSByaWdodCBkcmF3ZXIpXHJcbiAgICAgICAgICBlbWl0KDEpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAgcmVkdWNlOiAnX2NvdW50JyxcclxuICAgIH07XHJcbiAgfSxcclxuICBjcmVhdGVTdG9yZTogZnVuY3Rpb24gY3JlYXRlU3RvcmUoKSB7XHJcbiAgICB0aGlzLl9tb2RlbCA9IEFwcC5tb2RlbE1hbmFnZXIuZ2V0TW9kZWwoJycpO1xyXG4gIH0sXHJcbn0pO1xyXG4iXX0=
</pre>
</body>
</html>
