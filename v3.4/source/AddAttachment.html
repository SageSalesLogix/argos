<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">define('crm/Views/Attachment/AddAttachment', ['exports', 'module', 'dojo/_base/declare', 'dojo/_base/lang', 'argos/Format', 'argos/Views/FileSelect', '../../AttachmentManager', '../../Environment', 'argos/I18n'], function (exports, module, _dojo_baseDeclare, _dojo_baseLang, _argosFormat, _argosViewsFileSelect, _AttachmentManager, _Environment, _argosI18n) {
  function _interopRequireDefault(obj) { return obj &amp;&amp; obj.__esModule ? obj : { 'default': obj }; }

  var _declare = _interopRequireDefault(_dojo_baseDeclare);

  var _lang = _interopRequireDefault(_dojo_baseLang);

  var _sdkFormat = _interopRequireDefault(_argosFormat);

  var _FileSelect = _interopRequireDefault(_argosViewsFileSelect);

  var _AttachmentManager2 = _interopRequireDefault(_AttachmentManager);

  var _Environment2 = _interopRequireDefault(_Environment);

  var _getResource = _interopRequireDefault(_argosI18n);

  var resource = (0, _getResource['default'])('attachmentAdd');

<span id='crm-Views-Attachment-AddAttachment'>  /**
</span>   * @class crm.Views.Attachment.AddAttachment
   *
   * @extends argos.Views.FileSelect
   *
   * @requires argos.Views.FileSelect
   * @requires argos.Format
   *
   * @requires crm.AttachmentManager
   * @requires crm.Environment
   *
   */
  var __class = (0, _declare['default'])('crm.Views.Attachment.AddAttachment', [_FileSelect['default']], {
    // Localization
    titleText: resource.titleText,

    // View Properties
    id: 'attachment_Add',

    onUploadFiles: function onUploadFiles() {
      var self = this;
      if (this._files &amp;&amp; this._files.length &gt; 0) {
        this.inherited(arguments);
        var fileItems = this.getFileItems();
        var am = new _AttachmentManager2['default']();

        am.onSuccessUpdate = function onSuccessUpdate() {
          _Environment2['default'].refreshAttachmentViews();
          ReUI.back();
        };

        am.onFailedUpload = function onFailedUpload(errorMessage) {
          self.onUpdateFailed(errorMessage);
          alert(errorMessage); // eslint-disable-line
          ReUI.back();
        };

        am.onUpdateProgress = function onUpdateProgress(percent) {
          var msg = _sdkFormat['default'].percent(percent / 100);
          self.onUpdateProgress(msg);
        };

        am.createAttachment(fileItems[0].file, {
          description: fileItems[0].description
        });
      }
    },
    cancelSelect: function cancelSelect() {
      ReUI.back();
    }
  });

  _lang['default'].setObject('Mobile.SalesLogix.Views.Attachment.AddAttachment', __class);
  module.exports = __class;
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9WaWV3cy9BdHRhY2htZW50L0FkZEF0dGFjaG1lbnQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFRQSxNQUFNLFFBQVEsR0FBRyw2QkFBWSxlQUFlLENBQUMsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7QUFjOUMsTUFBTSxPQUFPLEdBQUcseUJBQVEsb0NBQW9DLEVBQUUsd0JBQVksRUFBRTs7QUFFMUUsYUFBUyxFQUFFLFFBQVEsQ0FBQyxTQUFTOzs7QUFHN0IsTUFBRSxFQUFFLGdCQUFnQjs7QUFFcEIsaUJBQWEsRUFBRSxTQUFTLGFBQWEsR0FBRztBQUN0QyxVQUFNLElBQUksR0FBRyxJQUFJLENBQUM7QUFDbEIsVUFBSSxJQUFJLENBQUMsTUFBTSxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtBQUN6QyxZQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBQzFCLFlBQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztBQUN0QyxZQUFNLEVBQUUsR0FBRyxvQ0FBdUIsQ0FBQzs7QUFFbkMsVUFBRSxDQUFDLGVBQWUsR0FBRyxTQUFTLGVBQWUsR0FBRztBQUM5QyxtQ0FBWSxzQkFBc0IsRUFBRSxDQUFDO0FBQ3JDLGNBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztTQUNiLENBQUM7O0FBRUYsVUFBRSxDQUFDLGNBQWMsR0FBRyxTQUFTLGNBQWMsQ0FBQyxZQUFZLEVBQUU7QUFDeEQsY0FBSSxDQUFDLGNBQWMsQ0FBQyxZQUFZLENBQUMsQ0FBQztBQUNsQyxlQUFLLENBQUMsWUFBWSxDQUFDLENBQUM7QUFDcEIsY0FBSSxDQUFDLElBQUksRUFBRSxDQUFDO1NBQ2IsQ0FBQzs7QUFFRixVQUFFLENBQUMsZ0JBQWdCLEdBQUcsU0FBUyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUU7QUFDdkQsY0FBTSxHQUFHLEdBQUcsc0JBQVUsT0FBTyxDQUFDLE9BQU8sR0FBRyxHQUFHLENBQUMsQ0FBQztBQUM3QyxjQUFJLENBQUMsZ0JBQWdCLENBQUMsR0FBRyxDQUFDLENBQUM7U0FDNUIsQ0FBQzs7QUFFRixVQUFFLENBQUMsZ0JBQWdCLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRTtBQUNyQyxxQkFBVyxFQUFFLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXO1NBQ3RDLENBQUMsQ0FBQztPQUNKO0tBQ0Y7QUFDRCxnQkFBWSxFQUFFLFNBQVMsWUFBWSxHQUFHO0FBQ3BDLFVBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztLQUNiO0dBQ0YsQ0FBQyxDQUFDOztBQUVILG1CQUFLLFNBQVMsQ0FBQyxrREFBa0QsRUFBRSxPQUFPLENBQUMsQ0FBQzttQkFDN0QsT0FBTyIsImZpbGUiOiJzcmMvVmlld3MvQXR0YWNobWVudC9BZGRBdHRhY2htZW50LmpzIiwic291cmNlUm9vdCI6InNyYyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBkZWNsYXJlIGZyb20gJ2Rvam8vX2Jhc2UvZGVjbGFyZSc7XHJcbmltcG9ydCBsYW5nIGZyb20gJ2Rvam8vX2Jhc2UvbGFuZyc7XHJcbmltcG9ydCBzZGtGb3JtYXQgZnJvbSAnYXJnb3MvRm9ybWF0JztcclxuaW1wb3J0IEZpbGVTZWxlY3QgZnJvbSAnYXJnb3MvVmlld3MvRmlsZVNlbGVjdCc7XHJcbmltcG9ydCBBdHRhY2htZW50TWFuYWdlciBmcm9tICcuLi8uLi9BdHRhY2htZW50TWFuYWdlcic7XHJcbmltcG9ydCBFbnZpcm9ubWVudCBmcm9tICcuLi8uLi9FbnZpcm9ubWVudCc7XHJcbmltcG9ydCBnZXRSZXNvdXJjZSBmcm9tICdhcmdvcy9JMThuJztcclxuXHJcbmNvbnN0IHJlc291cmNlID0gZ2V0UmVzb3VyY2UoJ2F0dGFjaG1lbnRBZGQnKTtcclxuXHJcbi8qKlxyXG4gKiBAY2xhc3MgY3JtLlZpZXdzLkF0dGFjaG1lbnQuQWRkQXR0YWNobWVudFxyXG4gKlxyXG4gKiBAZXh0ZW5kcyBhcmdvcy5WaWV3cy5GaWxlU2VsZWN0XHJcbiAqXHJcbiAqIEByZXF1aXJlcyBhcmdvcy5WaWV3cy5GaWxlU2VsZWN0XHJcbiAqIEByZXF1aXJlcyBhcmdvcy5Gb3JtYXRcclxuICpcclxuICogQHJlcXVpcmVzIGNybS5BdHRhY2htZW50TWFuYWdlclxyXG4gKiBAcmVxdWlyZXMgY3JtLkVudmlyb25tZW50XHJcbiAqXHJcbiAqL1xyXG5jb25zdCBfX2NsYXNzID0gZGVjbGFyZSgnY3JtLlZpZXdzLkF0dGFjaG1lbnQuQWRkQXR0YWNobWVudCcsIFtGaWxlU2VsZWN0XSwge1xyXG4gIC8vIExvY2FsaXphdGlvblxyXG4gIHRpdGxlVGV4dDogcmVzb3VyY2UudGl0bGVUZXh0LFxyXG5cclxuICAvLyBWaWV3IFByb3BlcnRpZXNcclxuICBpZDogJ2F0dGFjaG1lbnRfQWRkJyxcclxuXHJcbiAgb25VcGxvYWRGaWxlczogZnVuY3Rpb24gb25VcGxvYWRGaWxlcygpIHtcclxuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG4gICAgaWYgKHRoaXMuX2ZpbGVzICYmIHRoaXMuX2ZpbGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgdGhpcy5pbmhlcml0ZWQoYXJndW1lbnRzKTtcclxuICAgICAgY29uc3QgZmlsZUl0ZW1zID0gdGhpcy5nZXRGaWxlSXRlbXMoKTtcclxuICAgICAgY29uc3QgYW0gPSBuZXcgQXR0YWNobWVudE1hbmFnZXIoKTtcclxuXHJcbiAgICAgIGFtLm9uU3VjY2Vzc1VwZGF0ZSA9IGZ1bmN0aW9uIG9uU3VjY2Vzc1VwZGF0ZSgpIHtcclxuICAgICAgICBFbnZpcm9ubWVudC5yZWZyZXNoQXR0YWNobWVudFZpZXdzKCk7XHJcbiAgICAgICAgUmVVSS5iYWNrKCk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBhbS5vbkZhaWxlZFVwbG9hZCA9IGZ1bmN0aW9uIG9uRmFpbGVkVXBsb2FkKGVycm9yTWVzc2FnZSkge1xyXG4gICAgICAgIHNlbGYub25VcGRhdGVGYWlsZWQoZXJyb3JNZXNzYWdlKTtcclxuICAgICAgICBhbGVydChlcnJvck1lc3NhZ2UpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXHJcbiAgICAgICAgUmVVSS5iYWNrKCk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBhbS5vblVwZGF0ZVByb2dyZXNzID0gZnVuY3Rpb24gb25VcGRhdGVQcm9ncmVzcyhwZXJjZW50KSB7XHJcbiAgICAgICAgY29uc3QgbXNnID0gc2RrRm9ybWF0LnBlcmNlbnQocGVyY2VudCAvIDEwMCk7XHJcbiAgICAgICAgc2VsZi5vblVwZGF0ZVByb2dyZXNzKG1zZyk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBhbS5jcmVhdGVBdHRhY2htZW50KGZpbGVJdGVtc1swXS5maWxlLCB7XHJcbiAgICAgICAgZGVzY3JpcHRpb246IGZpbGVJdGVtc1swXS5kZXNjcmlwdGlvbixcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfSxcclxuICBjYW5jZWxTZWxlY3Q6IGZ1bmN0aW9uIGNhbmNlbFNlbGVjdCgpIHtcclxuICAgIFJlVUkuYmFjaygpO1xyXG4gIH0sXHJcbn0pO1xyXG5cclxubGFuZy5zZXRPYmplY3QoJ01vYmlsZS5TYWxlc0xvZ2l4LlZpZXdzLkF0dGFjaG1lbnQuQWRkQXR0YWNobWVudCcsIF9fY2xhc3MpO1xyXG5leHBvcnQgZGVmYXVsdCBfX2NsYXNzO1xyXG4iXX0=
</pre>
</body>
</html>
