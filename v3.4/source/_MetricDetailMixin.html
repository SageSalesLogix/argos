<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">define('crm/Views/_MetricDetailMixin', ['exports', 'module', 'dojo/_base/declare', 'dojo/_base/array', 'dojo/_base/lang', './MetricWidget'], function (exports, module, _dojo_baseDeclare, _dojo_baseArray, _dojo_baseLang, _MetricWidget) {
  function _interopRequireDefault(obj) { return obj &amp;&amp; obj.__esModule ? obj : { 'default': obj }; }

  var _declare = _interopRequireDefault(_dojo_baseDeclare);

  var _array = _interopRequireDefault(_dojo_baseArray);

  var _lang = _interopRequireDefault(_dojo_baseLang);

  var _MetricWidget2 = _interopRequireDefault(_MetricWidget);

<span id='crm-Views-_MetricDetailMixin'>  /**
</span>   * @class crm.Views._MetricDetailMixin
   *
   * Mixin for adding KPI widgets to detail views.
   *
   * @since 3.0
   *
   * @requires crm.Views.MetricWidget
   *
   */
  var __class = (0, _declare['default'])('crm.Views._MetricDetailMixin', null, {
    // Metrics
    metricNode: null,
    metricWidgets: null,
    entityName: '',

    postMixInProperties: function postMixInProperties() {
      this.widgetTemplate = new Simplate(['&lt;div id=&quot;{%= $.id %}&quot; title=&quot;{%= $.titleText %}&quot; class=&quot;overthrow detail panel {%= $.cls %}&quot; {% if ($.resourceKind) { %}data-resource-kind=&quot;{%= $.resourceKind %}&quot;{% } %}&gt;', '{%! $.loadingTemplate %}', '&lt;ul data-dojo-attach-point=&quot;metricNode&quot; class=&quot;metric-list&quot;&gt;&lt;/ul&gt;', '&lt;div class=&quot;panel-content&quot; data-dojo-attach-point=&quot;contentNode&quot;&gt;&lt;/div&gt;', '&lt;/div&gt;']);
    },
    postCreate: function postCreate() {
      this.inherited(arguments);
    },
    destroyWidgets: function destroyWidgets() {
      _array['default'].forEach(this.metricWidgets, function destroy(widget) {
        widget.destroy();
      }, this);
    },
    processEntry: function processEntry(entry) {
      this.inherited(arguments);
      this.rebuildWidgets(entry);
    },
    createMetricWidgetsLayout: function createMetricWidgetsLayout() {},
    rebuildWidgets: function rebuildWidgets(entry) {
      this.destroyWidgets();
      this.metricWidgets = [];

      // Create metrics widgets and place them in the metricNode
      var widgetOptions = this.createMetricWidgetsLayout(entry) || [];
      _array['default'].forEach(widgetOptions, function createAndPlaceWidget(options) {
        if (this.hasValidOptions(options)) {
          var widget = new _MetricWidget2['default'](options);
          widget.placeAt(this.metricNode, 'last');
          widget.requestData();
          this.metricWidgets.push(widget);
        }
      }, this);
    },
    hasValidOptions: function hasValidOptions(options) {
      return options &amp;&amp; options.queryArgs &amp;&amp; options.queryArgs._filterName &amp;&amp; options.queryArgs._metricName;
    }
  });

  _lang['default'].setObject('Mobile.SalesLogix.Views._MetricDetailMixin', __class);
  module.exports = __class;
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9WaWV3cy9fTWV0cmljRGV0YWlsTWl4aW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBZUEsTUFBTSxPQUFPLEdBQUcseUJBQVEsOEJBQThCLEVBQUUsSUFBSSxFQUFFOztBQUU1RCxjQUFVLEVBQUUsSUFBSTtBQUNoQixpQkFBYSxFQUFFLElBQUk7QUFDbkIsY0FBVSxFQUFFLEVBQUU7O0FBRWQsdUJBQW1CLEVBQUUsU0FBUyxtQkFBbUIsR0FBRztBQUNsRCxVQUFJLENBQUMsY0FBYyxHQUFHLElBQUksUUFBUSxDQUFDLENBQ2pDLDRLQUE0SyxFQUM1SywwQkFBMEIsRUFDMUIsbUVBQW1FLEVBQ25FLHdFQUF3RSxFQUN4RSxRQUFRLENBQ1QsQ0FBQyxDQUFDO0tBQ0o7QUFDRCxjQUFVLEVBQUUsU0FBUyxVQUFVLEdBQUc7QUFDaEMsVUFBSSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsQ0FBQztLQUMzQjtBQUNELGtCQUFjLEVBQUUsU0FBUyxjQUFjLEdBQUc7QUFDeEMsd0JBQU0sT0FBTyxDQUFDLElBQUksQ0FBQyxhQUFhLEVBQUUsU0FBUyxPQUFPLENBQUMsTUFBTSxFQUFFO0FBQ3pELGNBQU0sQ0FBQyxPQUFPLEVBQUUsQ0FBQztPQUNsQixFQUFFLElBQUksQ0FBQyxDQUFDO0tBQ1Y7QUFDRCxnQkFBWSxFQUFFLFNBQVMsWUFBWSxDQUFDLEtBQUssRUFBRTtBQUN6QyxVQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBQzFCLFVBQUksQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLENBQUM7S0FDNUI7QUFDRCw2QkFBeUIsRUFBRSxTQUFTLHlCQUF5QixHQUFHLEVBQUU7QUFDbEUsa0JBQWMsRUFBRSxTQUFTLGNBQWMsQ0FBQyxLQUFLLEVBQUU7QUFDN0MsVUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDO0FBQ3RCLFVBQUksQ0FBQyxhQUFhLEdBQUcsRUFBRSxDQUFDOzs7QUFHeEIsVUFBTSxhQUFhLEdBQUcsSUFBSSxDQUFDLHlCQUF5QixDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNsRSx3QkFBTSxPQUFPLENBQUMsYUFBYSxFQUFFLFNBQVMsb0JBQW9CLENBQUMsT0FBTyxFQUFFO0FBQ2xFLFlBQUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsRUFBRTtBQUNqQyxjQUFNLE1BQU0sR0FBRyw4QkFBaUIsT0FBTyxDQUFDLENBQUM7QUFDekMsZ0JBQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxNQUFNLENBQUMsQ0FBQztBQUN4QyxnQkFBTSxDQUFDLFdBQVcsRUFBRSxDQUFDO0FBQ3JCLGNBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1NBQ2pDO09BQ0YsRUFBRSxJQUFJLENBQUMsQ0FBQztLQUNWO0FBQ0QsbUJBQWUsRUFBRSxTQUFTLGVBQWUsQ0FBQyxPQUFPLEVBQUU7QUFDakQsYUFBTyxPQUFPLElBQUksT0FBTyxDQUFDLFNBQVMsSUFBSSxPQUFPLENBQUMsU0FBUyxDQUFDLFdBQVcsSUFBSSxPQUFPLENBQUMsU0FBUyxDQUFDLFdBQVcsQ0FBQztLQUN2RztHQUNGLENBQUMsQ0FBQzs7QUFFSCxtQkFBSyxTQUFTLENBQUMsNENBQTRDLEVBQUUsT0FBTyxDQUFDLENBQUM7bUJBQ3ZELE9BQU8iLCJmaWxlIjoic3JjL1ZpZXdzL19NZXRyaWNEZXRhaWxNaXhpbi5qcyIsInNvdXJjZVJvb3QiOiJzcmMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZGVjbGFyZSBmcm9tICdkb2pvL19iYXNlL2RlY2xhcmUnO1xyXG5pbXBvcnQgYXJyYXkgZnJvbSAnZG9qby9fYmFzZS9hcnJheSc7XHJcbmltcG9ydCBsYW5nIGZyb20gJ2Rvam8vX2Jhc2UvbGFuZyc7XHJcbmltcG9ydCBNZXRyaWNXaWRnZXQgZnJvbSAnLi9NZXRyaWNXaWRnZXQnO1xyXG5cclxuLyoqXHJcbiAqIEBjbGFzcyBjcm0uVmlld3MuX01ldHJpY0RldGFpbE1peGluXHJcbiAqXHJcbiAqIE1peGluIGZvciBhZGRpbmcgS1BJIHdpZGdldHMgdG8gZGV0YWlsIHZpZXdzLlxyXG4gKlxyXG4gKiBAc2luY2UgMy4wXHJcbiAqXHJcbiAqIEByZXF1aXJlcyBjcm0uVmlld3MuTWV0cmljV2lkZ2V0XHJcbiAqXHJcbiAqL1xyXG5jb25zdCBfX2NsYXNzID0gZGVjbGFyZSgnY3JtLlZpZXdzLl9NZXRyaWNEZXRhaWxNaXhpbicsIG51bGwsIHtcclxuICAvLyBNZXRyaWNzXHJcbiAgbWV0cmljTm9kZTogbnVsbCxcclxuICBtZXRyaWNXaWRnZXRzOiBudWxsLFxyXG4gIGVudGl0eU5hbWU6ICcnLFxyXG5cclxuICBwb3N0TWl4SW5Qcm9wZXJ0aWVzOiBmdW5jdGlvbiBwb3N0TWl4SW5Qcm9wZXJ0aWVzKCkge1xyXG4gICAgdGhpcy53aWRnZXRUZW1wbGF0ZSA9IG5ldyBTaW1wbGF0ZShbXHJcbiAgICAgICc8ZGl2IGlkPVwieyU9ICQuaWQgJX1cIiB0aXRsZT1cInslPSAkLnRpdGxlVGV4dCAlfVwiIGNsYXNzPVwib3ZlcnRocm93IGRldGFpbCBwYW5lbCB7JT0gJC5jbHMgJX1cIiB7JSBpZiAoJC5yZXNvdXJjZUtpbmQpIHsgJX1kYXRhLXJlc291cmNlLWtpbmQ9XCJ7JT0gJC5yZXNvdXJjZUtpbmQgJX1cInslIH0gJX0+JyxcclxuICAgICAgJ3slISAkLmxvYWRpbmdUZW1wbGF0ZSAlfScsXHJcbiAgICAgICc8dWwgZGF0YS1kb2pvLWF0dGFjaC1wb2ludD1cIm1ldHJpY05vZGVcIiBjbGFzcz1cIm1ldHJpYy1saXN0XCI+PC91bD4nLFxyXG4gICAgICAnPGRpdiBjbGFzcz1cInBhbmVsLWNvbnRlbnRcIiBkYXRhLWRvam8tYXR0YWNoLXBvaW50PVwiY29udGVudE5vZGVcIj48L2Rpdj4nLFxyXG4gICAgICAnPC9kaXY+JyxcclxuICAgIF0pO1xyXG4gIH0sXHJcbiAgcG9zdENyZWF0ZTogZnVuY3Rpb24gcG9zdENyZWF0ZSgpIHtcclxuICAgIHRoaXMuaW5oZXJpdGVkKGFyZ3VtZW50cyk7XHJcbiAgfSxcclxuICBkZXN0cm95V2lkZ2V0czogZnVuY3Rpb24gZGVzdHJveVdpZGdldHMoKSB7XHJcbiAgICBhcnJheS5mb3JFYWNoKHRoaXMubWV0cmljV2lkZ2V0cywgZnVuY3Rpb24gZGVzdHJveSh3aWRnZXQpIHtcclxuICAgICAgd2lkZ2V0LmRlc3Ryb3koKTtcclxuICAgIH0sIHRoaXMpO1xyXG4gIH0sXHJcbiAgcHJvY2Vzc0VudHJ5OiBmdW5jdGlvbiBwcm9jZXNzRW50cnkoZW50cnkpIHtcclxuICAgIHRoaXMuaW5oZXJpdGVkKGFyZ3VtZW50cyk7XHJcbiAgICB0aGlzLnJlYnVpbGRXaWRnZXRzKGVudHJ5KTtcclxuICB9LFxyXG4gIGNyZWF0ZU1ldHJpY1dpZGdldHNMYXlvdXQ6IGZ1bmN0aW9uIGNyZWF0ZU1ldHJpY1dpZGdldHNMYXlvdXQoKSB7fSxcclxuICByZWJ1aWxkV2lkZ2V0czogZnVuY3Rpb24gcmVidWlsZFdpZGdldHMoZW50cnkpIHtcclxuICAgIHRoaXMuZGVzdHJveVdpZGdldHMoKTtcclxuICAgIHRoaXMubWV0cmljV2lkZ2V0cyA9IFtdO1xyXG5cclxuICAgIC8vIENyZWF0ZSBtZXRyaWNzIHdpZGdldHMgYW5kIHBsYWNlIHRoZW0gaW4gdGhlIG1ldHJpY05vZGVcclxuICAgIGNvbnN0IHdpZGdldE9wdGlvbnMgPSB0aGlzLmNyZWF0ZU1ldHJpY1dpZGdldHNMYXlvdXQoZW50cnkpIHx8IFtdO1xyXG4gICAgYXJyYXkuZm9yRWFjaCh3aWRnZXRPcHRpb25zLCBmdW5jdGlvbiBjcmVhdGVBbmRQbGFjZVdpZGdldChvcHRpb25zKSB7XHJcbiAgICAgIGlmICh0aGlzLmhhc1ZhbGlkT3B0aW9ucyhvcHRpb25zKSkge1xyXG4gICAgICAgIGNvbnN0IHdpZGdldCA9IG5ldyBNZXRyaWNXaWRnZXQob3B0aW9ucyk7XHJcbiAgICAgICAgd2lkZ2V0LnBsYWNlQXQodGhpcy5tZXRyaWNOb2RlLCAnbGFzdCcpO1xyXG4gICAgICAgIHdpZGdldC5yZXF1ZXN0RGF0YSgpO1xyXG4gICAgICAgIHRoaXMubWV0cmljV2lkZ2V0cy5wdXNoKHdpZGdldCk7XHJcbiAgICAgIH1cclxuICAgIH0sIHRoaXMpO1xyXG4gIH0sXHJcbiAgaGFzVmFsaWRPcHRpb25zOiBmdW5jdGlvbiBoYXNWYWxpZE9wdGlvbnMob3B0aW9ucykge1xyXG4gICAgcmV0dXJuIG9wdGlvbnMgJiYgb3B0aW9ucy5xdWVyeUFyZ3MgJiYgb3B0aW9ucy5xdWVyeUFyZ3MuX2ZpbHRlck5hbWUgJiYgb3B0aW9ucy5xdWVyeUFyZ3MuX21ldHJpY05hbWU7XHJcbiAgfSxcclxufSk7XHJcblxyXG5sYW5nLnNldE9iamVjdCgnTW9iaWxlLlNhbGVzTG9naXguVmlld3MuX01ldHJpY0RldGFpbE1peGluJywgX19jbGFzcyk7XHJcbmV4cG9ydCBkZWZhdWx0IF9fY2xhc3M7XHJcbiJdfQ==
</pre>
</body>
</html>
