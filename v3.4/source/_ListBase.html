<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">define('argos/_ListBase', ['exports', 'module', 'dojo/_base/declare', 'dojo/_base/lang', 'dojo/_base/array', 'dojo/_base/connect', 'dojo/query', 'dojo/dom-attr', 'dojo/dom-class', 'dojo/dom-construct', 'dojo/dom-geometry', 'dojo/dom', 'dojo/string', 'dojo/when', './Utility', './ErrorManager', './View', './SearchWidget', './ConfigurableSelectionModel', './_PullToRefreshMixin', './I18n'], function (exports, module, _dojo_baseDeclare, _dojo_baseLang, _dojo_baseArray, _dojo_baseConnect, _dojoQuery, _dojoDomAttr, _dojoDomClass, _dojoDomConstruct, _dojoDomGeometry, _dojoDom, _dojoString, _dojoWhen, _Utility, _ErrorManager, _View, _SearchWidget, _ConfigurableSelectionModel, _PullToRefreshMixin2, _I18n) {
  function _interopRequireDefault(obj) { return obj &amp;&amp; obj.__esModule ? obj : { 'default': obj }; }

  /* Copyright (c) 2010, Sage Software, Inc. All rights reserved.
   *
   * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *     http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */

  var _declare = _interopRequireDefault(_dojo_baseDeclare);

  var _lang = _interopRequireDefault(_dojo_baseLang);

  var _array = _interopRequireDefault(_dojo_baseArray);

  var _connect = _interopRequireDefault(_dojo_baseConnect);

  var _query = _interopRequireDefault(_dojoQuery);

  var _domAttr = _interopRequireDefault(_dojoDomAttr);

  var _domClass = _interopRequireDefault(_dojoDomClass);

  var _domConstruct = _interopRequireDefault(_dojoDomConstruct);

  var _domGeom = _interopRequireDefault(_dojoDomGeometry);

  var _dom = _interopRequireDefault(_dojoDom);

  var _string = _interopRequireDefault(_dojoString);

  var _when = _interopRequireDefault(_dojoWhen);

  var _Utility2 = _interopRequireDefault(_Utility);

  var _ErrorManager2 = _interopRequireDefault(_ErrorManager);

  var _View2 = _interopRequireDefault(_View);

  var _SearchWidget2 = _interopRequireDefault(_SearchWidget);

  var _ConfigurableSelectionModel2 = _interopRequireDefault(_ConfigurableSelectionModel);

  var _PullToRefreshMixin3 = _interopRequireDefault(_PullToRefreshMixin2);

  var _getResource = _interopRequireDefault(_I18n);

  var resource = (0, _getResource['default'])('listBase');

<span id='argos-_ListBase'>  /**
</span>   * @class argos._ListBase
   * A List View is a view used to display a collection of entries in an easy to skim list. The List View also has a
   * selection model built in for selecting rows from the list and may be used in a number of different manners.
   * @extends argos.View
   * @alternateClassName _ListBase
   * @requires argos.ErrorManager
   * @requires argos.Utility
   * @requires argos.SearchWidget
   * @mixins argos._PullToRefreshMixin
   */
  var __class = (0, _declare['default'])('argos._ListBase', [_View2['default'], _PullToRefreshMixin3['default']], {
<span id='argos-_ListBase-property-attributeMap'>    /**
</span>     * @property {Object}
     * Creates a setter map to html nodes, namely:
     *
     * * listContent =&gt; contentNode's innerHTML
     * * remainingContent =&gt; remainingContentNode's innerHTML
     */
    attributeMap: {
      listContent: {
        node: 'contentNode',
        type: 'innerHTML'
      },
      remainingContent: {
        node: 'remainingContentNode',
        type: 'innerHTML'
      }
    },
<span id='argos-_ListBase-property-widgetTemplate'>    /**
</span>     * @property {Simplate}
     * The template used to render the view's main DOM element when the view is initialized.
     * This template includes emptySelectionTemplate, moreTemplate and listActionTemplate.
     *
     * The default template uses the following properties:
     *
     *      name                description
     *      ----------------------------------------------------------------
     *      id                   main container div id
     *      title                main container div title attr
     *      cls                  additional class string added to the main container div
     *      resourceKind         set to data-resource-kind
     *
     */
    widgetTemplate: new Simplate(['&lt;div id=&quot;{%= $.id %}&quot; title=&quot;{%= $.titleText %}&quot; class=&quot;overthrow list {%= $.cls %}&quot; {% if ($.resourceKind) { %}data-resource-kind=&quot;{%= $.resourceKind %}&quot;{% } %}&gt;', '&lt;div data-dojo-attach-point=&quot;searchNode&quot;&gt;&lt;/div&gt;', '&lt;div class=&quot;overthrow scroller&quot; data-dojo-attach-point=&quot;scrollerNode&quot;&gt;', '{%! $.emptySelectionTemplate %}', '&lt;ul class=&quot;list-content&quot; data-dojo-attach-point=&quot;contentNode&quot;&gt;&lt;/ul&gt;', '{%! $.moreTemplate %}', '{%! $.listActionTemplate %}', '&lt;/div&gt;', '&lt;/div&gt;']),
<span id='argos-_ListBase-property-loadingTemplate'>    /**
</span>     * @property {Simplate}
     * The template used to render the loading message when the view is requesting more data.
     *
     * The default template uses the following properties:
     *
     *      name                description
     *      ----------------------------------------------------------------
     *      loadingText         The text to display while loading.
     */
    loadingTemplate: new Simplate(['&lt;div class=&quot;busyIndicator__container busyIndicator--active&quot; aria-live=&quot;polite&quot;&gt;', '&lt;div class=&quot;busyIndicator busyIndicator--large&quot;&gt;', '&lt;div class=&quot;busyIndicator__bar busyIndicator__bar--large busyIndicator__bar--one&quot;&gt;&lt;/div&gt;', '&lt;div class=&quot;busyIndicator__bar busyIndicator__bar--large busyIndicator__bar--two&quot;&gt;&lt;/div&gt;', '&lt;div class=&quot;busyIndicator__bar busyIndicator__bar--large busyIndicator__bar--three&quot;&gt;&lt;/div&gt;', '&lt;div class=&quot;busyIndicator__bar busyIndicator__bar--large busyIndicator__bar--four&quot;&gt;&lt;/div&gt;', '&lt;div class=&quot;busyIndicator__bar busyIndicator__bar--large busyIndicator__bar--five&quot;&gt;&lt;/div&gt;', '&lt;/div&gt;', '&lt;span class=&quot;busyIndicator__label&quot;&gt;{%: $.loadingText %}&lt;/span&gt;', '&lt;/div&gt;']),
<span id='argos-_ListBase-property-moreTemplate'>    /**
</span>     * @property {Simplate}
     * The template used to render the pager at the bottom of the view.  This template is not directly rendered, but is
     * included in {@link #viewTemplate}.
     *
     * The default template uses the following properties:
     *
     *      name                description
     *      ----------------------------------------------------------------
     *      moreText            The text to display on the more button.
     *
     * The default template exposes the following actions:
     *
     * * more
     */
    moreTemplate: new Simplate(['&lt;div class=&quot;list-more&quot; data-dojo-attach-point=&quot;moreNode&quot;&gt;', '&lt;div class=&quot;list-remaining&quot;&gt;&lt;span data-dojo-attach-point=&quot;remainingContentNode&quot;&gt;&lt;/span&gt;&lt;/div&gt;', '&lt;button class=&quot;button&quot; data-action=&quot;more&quot;&gt;', '&lt;span&gt;{%= $.moreText %}&lt;/span&gt;', '&lt;/button&gt;', '&lt;/div&gt;']),
<span id='argos-_ListBase-property-emptySelectionTemplate'>    /**
</span>     * @property {Simplate}
     * Template used on lookups to have empty Selection option.
     * This template is not directly rendered but included in {@link #viewTemplate}.
     *
     * The default template uses the following properties:
     *
     *      name                description
     *      ----------------------------------------------------------------
     *      emptySelectionText  The text to display on the empty Selection button.
     *
     * The default template exposes the following actions:
     *
     * * emptySelection
     */
    emptySelectionTemplate: new Simplate(['&lt;div class=&quot;list-empty-opt&quot; data-dojo-attach-point=&quot;emptySelectionNode&quot;&gt;', '&lt;button class=&quot;button&quot; data-action=&quot;emptySelection&quot;&gt;', '&lt;span&gt;{%= $.emptySelectionText %}&lt;/span&gt;', '&lt;/button&gt;', '&lt;/div&gt;']),
<span id='argos-_ListBase-property-rowTemplate'>    /**
</span>     * @property {Simplate}
     * The template used to render a row in the view.  This template includes {@link #itemTemplate}.
     */
    rowTemplate: new Simplate(['&lt;li data-action=&quot;activateEntry&quot; data-key=&quot;{%= $[$$.idProperty] %}&quot; data-descriptor=&quot;{%: $[$$.labelProperty] %}&quot;&gt;', '&lt;button data-action=&quot;selectEntry&quot; class=&quot;list-item-selector button&quot;&gt;', '{% if ($$.selectIconClass) { %}', '&lt;span class=&quot;{%= $$.selectIconClass %}&quot;&gt;&lt;/span&gt;', '{% } else if ($$.icon || $$.selectIcon) { %}', '&lt;img src=&quot;{%= $$.icon || $$.selectIcon %}&quot; class=&quot;icon&quot; /&gt;', '{% } %}', '&lt;/button&gt;', '&lt;div class=&quot;list-item-content&quot; data-snap-ignore=&quot;true&quot;&gt;{%! $$.itemTemplate %}&lt;/div&gt;', '&lt;/li&gt;']),
<span id='argos-_ListBase-cfg-itemTemplate'>    /**
</span>     * @cfg {Simplate}
     * The template used to render the content of a row.  This template is not directly rendered, but is
     * included in {@link #rowTemplate}.
     *
     * This property should be overridden in the derived class.
     * @template
     */
    itemTemplate: new Simplate(['&lt;h3&gt;{%: $[$$.labelProperty] %}&lt;/h3&gt;', '&lt;h4&gt;{%: $[$$.idProperty] %}&lt;/h4&gt;']),
<span id='argos-_ListBase-property-noDataTemplate'>    /**
</span>     * @property {Simplate}
     * The template used to render a message if there is no data available.
     * The default template uses the following properties:
     *
     *      name                description
     *      ----------------------------------------------------------------
     *      noDataText          The text to display if there is no data.
     */
    noDataTemplate: new Simplate(['&lt;li class=&quot;no-data&quot;&gt;', '&lt;h2&gt;{%= $.noDataText %}&lt;/h2&gt;', '&lt;/li&gt;']),
<span id='argos-_ListBase-property-listActionTemplate'>    /**
</span>     * @property {Simplate}
     * The template used to render the single list action row.
     */
    listActionTemplate: new Simplate(['&lt;li data-dojo-attach-point=&quot;actionsNode&quot; class=&quot;actions-row&quot;&gt;&lt;/li&gt;']),
<span id='argos-_ListBase-property-listActionItemTemplate'>    /**
</span>     * @property {Simplate}
     * The template used to render a list action item.
     * The default template uses the following properties:
     *
     *      name                description
     *      ----------------------------------------------------------------
     *      actionIndex         The correlating index number of the action collection
     *      title               Text used for ARIA-labeling
     *      icon                Relative path to the icon to use
     *      cls                 CSS class to use instead of an icon
     *      id                  Unique name of action, also used for alt image text
     *      label               Text added below the icon
     */
    listActionItemTemplate: new Simplate(['&lt;button data-action=&quot;invokeActionItem&quot; data-id=&quot;{%= $.actionIndex %}&quot; aria-label=&quot;{%: $.title || $.id %}&quot;&gt;', '{% if ($.cls) { %}', '&lt;span class=&quot;{%= $.cls %}&quot;&gt;&lt;/span&gt;', '{% } else if ($.icon) { %}', '&lt;img src=&quot;{%= $.icon %}&quot; alt=&quot;{%= $.id %}&quot; /&gt;', '{% } else { %}', '&lt;span class=&quot;fa fa-level-down fa-2x&quot;&gt;&lt;/span&gt;', '{% } %}', '&lt;label&gt;{%: $.label %}&lt;/label&gt;', '&lt;/button&gt;']),
<span id='argos-_ListBase-property-contentNode'>    /**
</span>     * @property {HTMLElement}
     * Attach point for the main view content
     */
    contentNode: null,
<span id='argos-_ListBase-property-remainingContentNode'>    /**
</span>     * @property {HTMLElement}
     * Attach point for the remaining entries content
     */
    remainingContentNode: null,
<span id='argos-_ListBase-property-searchNode'>    /**
</span>     * @property {HTMLElement}
     * Attach point for the search widget
     */
    searchNode: null,
<span id='argos-_ListBase-property-emptySelectionNode'>    /**
</span>     * @property {HTMLElement}
     * Attach point for the empty, or no selection, container
     */
    emptySelectionNode: null,
<span id='argos-_ListBase-property-remainingNode'>    /**
</span>     * @property {HTMLElement}
     * Attach point for the remaining entries container
     */
    remainingNode: null,
<span id='argos-_ListBase-property-moreNode'>    /**
</span>     * @property {HTMLElement}
     * Attach point for the request more entries container
     */
    moreNode: null,
<span id='argos-_ListBase-property-actionsNode'>    /**
</span>     * @property {HTMLElement}
     * Attach point for the list actions container
     */
    actionsNode: null,

<span id='argos-_ListBase-cfg-id'>    /**
</span>     * @cfg {String} id
     * The id for the view, and it's main DOM element.
     */
    id: 'generic_list',

<span id='argos-_ListBase-cfg-resourceKind'>    /**
</span>     * @cfg {String}
     * The SData resource kind the view is responsible for.  This will be used as the default resource kind
     * for all SData requests.
     */
    resourceKind: '',
    store: null,
    entries: null,
<span id='argos-_ListBase-property-pageSize'>    /**
</span>     * @property {Number}
     * The number of entries to request per SData payload.
     */
    pageSize: 20,
<span id='argos-_ListBase-property-enableSearch'>    /**
</span>     * @property {Boolean}
     * Controls the addition of a search widget.
     */
    enableSearch: true,
<span id='argos-_ListBase-property-enableActions'>    /**
</span>     * @property {Boolean}
     * Flag that determines if the list actions panel should be in use.
     */
    enableActions: false,
<span id='argos-_ListBase-property-hideSearch'>    /**
</span>     * @property {Boolean}
     * Controls the visibility of the search widget.
     */
    hideSearch: false,
<span id='argos-_ListBase-property-allowSelection'>    /**
</span>     * @property {Boolean}
     * True to allow selections via the SelectionModel in the view.
     */
    allowSelection: false,
<span id='argos-_ListBase-property-autoClearSelection'>    /**
</span>     * @property {Boolean}
     * True to clear the selection model when the view is shown.
     */
    autoClearSelection: true,
<span id='argos-_ListBase-property-detailView'>    /**
</span>     * @property {String/View}
     * The id of the detail view, or view instance, to show when a row is clicked.
     */
    detailView: null,

<span id='argos-_ListBase-property-quickActionConfigureView'>    /**
</span>     * @property {String}
     * The id of the configure view for quick action preferences
     */
    quickActionConfigureView: 'configure_quickactions',
<span id='argos-_ListBase-property-editView'>    /**
</span>     * @property {String}
     * The view id to show if there is no `insertView` specified, when
     * the {@link #navigateToInsertView} action is invoked.
     */
    editView: null,
<span id='argos-_ListBase-property-insertView'>    /**
</span>     * @property {String}
     * The view id to show when the {@link #navigateToInsertView} action is invoked.
     */
    insertView: null,
<span id='argos-_ListBase-property-contextView'>    /**
</span>     * @property {String}
     * The view id to show when the {@link #navigateToContextView} action is invoked.
     */
    contextView: false,
<span id='argos-_ListBase-property-hashTagQueries'>    /**
</span>     * @property {Object}
     * A dictionary of hash tag search queries.  The key is the hash tag, without the symbol, and the value is
     * either a query string, or a function that returns a query string.
     */
    hashTagQueries: null,
<span id='argos-_ListBase-property-moreText'>    /**
</span>     * The text displayed in the more button.
     * @type {String}
     */
    moreText: resource.moreText,
<span id='argos-_ListBase-property-emptySelectionText'>    /**
</span>     * @property {String}
     * The text displayed in the emptySelection button.
     */
    emptySelectionText: resource.emptySelectionText,
<span id='argos-_ListBase-property-titleText'>    /**
</span>     * @property {String}
     * The text displayed as the default title.
     */
    titleText: resource.titleText,
<span id='argos-_ListBase-property-configureText'>    /**
</span>     * @property {String}
     * The text displayed for quick action configure.
     */
    configureText: resource.configureText,
<span id='argos-_ListBase-property-errorRenderText'>    /**
</span>     * @property {String}
     * The error message to display if rendering a row template is not successful.
     */
    errorRenderText: resource.errorRenderText,
<span id='argos-_ListBase-property-rowTemplateError'>    /**
</span>     * @property {Simplate}
     *
     */
    rowTemplateError: new Simplate(['&lt;li data-action=&quot;activateEntry&quot; data-key=&quot;{%= $[$$.idProperty] %}&quot; data-descriptor=&quot;{%: $[$$.labelProperty] %}&quot;&gt;', '&lt;div class=&quot;list-item-content&quot; data-snap-ignore=&quot;true&quot;&gt;{%: $$.errorRenderText %}&lt;/div&gt;', '&lt;/li&gt;']),
<span id='argos-_ListBase-property-remainingText'>    /**
</span>     * @property {String}
     * The format string for the text displayed for the remaining record count.  This is used in a {@link String#format} call.
     */
    remainingText: resource.remainingText,
<span id='argos-_ListBase-property-cancelText'>    /**
</span>     * @property {String}
     * The text displayed on the cancel button.
     * @deprecated
     */
    cancelText: resource.cancelText,
<span id='argos-_ListBase-property-insertText'>    /**
</span>     * @property {String}
     * The text displayed on the insert button.
     * @deprecated
     */
    insertText: resource.insertText,
<span id='argos-_ListBase-property-noDataText'>    /**
</span>     * @property {String}
     * The text displayed when no records are available.
     */
    noDataText: resource.noDataText,
<span id='argos-_ListBase-property-loadingText'>    /**
</span>     * @property {String}
     * The text displayed when data is being requested.
     */
    loadingText: resource.loadingText,
<span id='argos-_ListBase-property-customizationSet'>    /**
</span>     * @property {String}
     * The customization identifier for this class. When a customization is registered it is passed
     * a path/identifier which is then matched to this property.
     */
    customizationSet: 'list',
<span id='argos-_ListBase-property-selectIcon'>    /**
</span>     * @property {String}
     * The relative path to the checkmark or select icon for row selector
     */
    selectIcon: '',
<span id='argos-_ListBase-property-selectIconClass'>    /**
</span>     * @property {String}
     * CSS class to use for checkmark or select icon for row selector. Overrides selectIcon.
     */
    selectIconClass: 'fa fa-check fa-lg',
<span id='argos-_ListBase-property-searchWidget'>    /**
</span>     * @property {Object}
     * The search widget instance for the view
     */
    searchWidget: null,
<span id='argos-_ListBase-property-searchWidgetClass'>    /**
</span>     * @property {SearchWidget}
     * The class constructor to use for the search widget
     */
    searchWidgetClass: _SearchWidget2['default'],
<span id='argos-_ListBase-property-defaultSearchTermSet'>    /**
</span>     * @property {Boolean}
     * Flag to indicate the default search term has been set.
     */
    defaultSearchTermSet: false,

<span id='argos-_ListBase-property-defaultSearchTerm'>    /**
</span>     * @property {String}
     * The default search term to use
     */
    defaultSearchTerm: '',
<span id='argos-_ListBase-property-_selectionModel'>    /**
</span>     * @property {Object}
     * The selection model for the view
     */
    _selectionModel: null,
<span id='argos-_ListBase-property-_selectionConnects'>    /**
</span>     * @property {Object}
     * The selection event connections
     */
    _selectionConnects: null,
<span id='argos-_ListBase-property-tools'>    /**
</span>     * @property {Object}
     * The toolbar layout definition for all toolbar entries.
     */
    tools: null,
<span id='argos-_ListBase-property-actions'>    /**
</span>     * The list action layout definition for the list action bar.
     */
    actions: null,
<span id='argos-_ListBase-property-If'>    /**
</span>     * @property {Boolean} If true, will remove the loading button and auto fetch more data when the user scrolls to the bottom of the page.
     */
    continuousScrolling: true,
<span id='argos-_ListBase-property-Indicates'>    /**
</span>     * @property {Boolean} Indicates if the list is loading
     */
    listLoading: false,
    viewType: 'list',
    // Store properties
    itemsProperty: '',
    idProperty: '',
    labelProperty: '',
    entityProperty: '',
    versionProperty: '',
<span id='argos-_ListBase-method-_setSelectionModelAttr'>    /**
</span>     * Setter method for the selection model, also binds the various selection model select events
     * to the respective List event handler for each.
     * @param {SelectionModel} selectionModel The selection model instance to save to the view
     * @private
     */
    _setSelectionModelAttr: function _setSelectionModelAttr(selectionModel) {
      if (this._selectionConnects) {
        _array['default'].forEach(this._selectionConnects, this.disconnect, this);
      }

      this._selectionModel = selectionModel;
      this._selectionConnects = [];

      if (this._selectionModel) {
        this._selectionConnects.push(this.connect(this._selectionModel, 'onSelect', this._onSelectionModelSelect), this.connect(this._selectionModel, 'onDeselect', this._onSelectionModelDeselect), this.connect(this._selectionModel, 'onClear', this._onSelectionModelClear));
      }
    },
<span id='argos-_ListBase-method-_getSelectionModelAttr'>    /**
</span>     * Getter nmethod for the selection model
     * @return {SelectionModel}
     * @private
     */
    _getSelectionModelAttr: function _getSelectionModelAttr() {
      return this._selectionModel;
    },
    constructor: function constructor() {
      this.entries = {};
    },
    postCreate: function postCreate() {
      this.inherited(arguments);

      var scrollerNode = this.get('scroller');

      if (this._selectionModel === null) {
        this.set('selectionModel', new _ConfigurableSelectionModel2['default']());
      }
      this.subscribe('/app/refresh', this._onRefresh);

      if (this.enableSearch) {
        var SearchWidgetCtor = _lang['default'].isString(this.searchWidgetClass) ? _lang['default'].getObject(this.searchWidgetClass, false) : this.searchWidgetClass;

        this.searchWidget = this.searchWidget || new SearchWidgetCtor({
          'class': 'list-search',
          'owner': this,
          'onSearchExpression': this._onSearchExpression.bind(this)
        });
        this.searchWidget.placeAt(this.searchNode, 'replace');
      } else {
        this.searchWidget = null;
      }

      _domClass['default'].toggle(this.domNode, 'list-hide-search', this.hideSearch || !this.enableSearch);
      this.clear();

      this.initPullToRefresh(scrollerNode);
    },
    shouldStartPullToRefresh: function shouldStartPullToRefresh() {
      // Get the base results
      var shouldStart = this.inherited(arguments);
      var selected = _domAttr['default'].get(this.domNode, 'selected');
      return shouldStart &amp;&amp; selected === 'true' &amp;&amp; !this.listLoading;
    },
    forceRefresh: function forceRefresh() {
      this.clear();
      this.refreshRequired = true;
      this.refresh();
    },
    onPullToRefreshComplete: function onPullToRefreshComplete() {
      this.forceRefresh();
    },
    onConnectionStateChange: function onConnectionStateChange(state) {
      if (state === true &amp;&amp; this.enableOfflineSupport) {
        this.refreshRequired = true;
      }
    },
<span id='argos-_ListBase-method-startup'>    /**
</span>     * Called on application startup to configure the search widget if present and create the list actions.
     */
    startup: function startup() {
      this.inherited(arguments);

      if (this.searchWidget) {
        this.searchWidget.configure({
          'hashTagQueries': this._createCustomizedLayout(this.createHashTagQueryLayout(), 'hashTagQueries'),
          'formatSearchQuery': this.formatSearchQuery.bind(this)
        });
      }

      this.createActions(this._createCustomizedLayout(this.createSystemActionLayout(this.createActionLayout()), 'actions'));
    },
<span id='argos-_ListBase-method-destroy'>    /**
</span>     * Extends dijit Widget to destroy the search widget before destroying the view.
     */
    destroy: function destroy() {
      if (this.searchWidget) {
        if (!this.searchWidget._destroyed) {
          this.searchWidget.destroyRecursive();
        }

        delete this.searchWidget;
      }

      delete this.store;
      this.inherited(arguments);
    },
    _getStoreAttr: function _getStoreAttr() {
      return this.store || (this.store = this.createStore());
    },
<span id='argos-_ListBase-method-show'>    /**
</span>     * Shows overrides the view class to set options for the list view and then calls the inherited show method on the view.
     * @param {Object} options The navigation options passed from the previous view.
     * @param transitionOptions {Object} Optional transition object that is forwarded to ReUI.
     */
    show: function show(options /*, transitionOptions*/) {
      if (options) {
        if (options.resetSearch) {
          this.defaultSearchTermSet = false;
        }

        if (options.allowEmptySelection === false &amp;&amp; this._selectionModel) {
          this._selectionModel.requireSelection = true;
        }
      }

      this.inherited(arguments);
    },
<span id='argos-_ListBase-method-createToolLayout'>    /**
</span>     * Sets and returns the toolbar item layout definition, this method should be overriden in the view
     * so that you may define the views toolbar entries.
     * @return {Object} this.tools
     * @template
     */
    createToolLayout: function createToolLayout() {
      return this.tools || (this.tools = {
        'tbar': [{
          id: 'new',
          cls: 'fa fa-plus fa-fw fa-lg',
          action: 'navigateToInsertView',
          security: this.app.getViewSecurity(this.insertView, 'insert')
        }]
      });
    },
    createErrorHandlers: function createErrorHandlers() {
      this.errorHandlers = this.errorHandlers || [{
        name: 'Aborted',
        test: function testAborted(error) {
          return error.aborted;
        },
        handle: function handleAborted(error, next) {
          this.clear();
          this.refreshRequired = true;
          next();
        }
      }, {
        name: 'AlertError',
        test: function testError(error) {
          return !error.aborted;
        },
        handle: function handleError(error, next) {
          alert(this.getErrorMessage(error)); // eslint-disable-line
          next();
        }
      }, {
        name: 'CatchAll',
        test: function testCatchAll() {
          return true;
        },
        handle: function handleCatchAll(error, next) {
          this._logError(error);
          this._clearLoading();
          next();
        }
      }];

      return this.errorHandlers;
    },
<span id='argos-_ListBase-method-createActionLayout'>    /**
</span>     * Sets and returns the list-action actions layout definition, this method should be overriden in the view
     * so that you may define the action entries for that view.
     * @return {Object} this.acttions
     */
    createActionLayout: function createActionLayout() {
      return this.actions || {};
    },
<span id='argos-_ListBase-method-createActions'>    /**
</span>     * Creates the action bar and adds it to the DOM. Note that it replaces `this.actions` with the passed
     * param as the passed param should be the result of the customization mixin and `this.actions` needs to be the
     * final actions state.
     * @param {Object[]} actions
     */
    createActions: function createActions(a) {
      var actions = a;
      this.actions = actions.reduce(this._removeActionDuplicates, []);
      this.visibleActions = [];

      if (!this.actionsNode) {
        return;
      }

      this.ensureQuickActionPrefs();

      // Pluck out our system actions that are NOT saved in preferences
      var systemActions = _array['default'].filter(actions, function (action) {
        return action &amp;&amp; action.systemAction;
      });

      systemActions = systemActions.reduce(this._removeActionDuplicates, []);

      // Grab quick actions from the users preferences (ordered and made visible according to user)
      var prefActions = undefined;
      if (this.app.preferences &amp;&amp; this.app.preferences.quickActions) {
        prefActions = this.app.preferences.quickActions[this.id];
      }

      if (systemActions &amp;&amp; prefActions) {
        // Display system actions first, then the order of what the user specified
        actions = systemActions.concat(prefActions);
      }

      var visibleActions = [];

      for (var i = 0; i &lt; actions.length; i++) {
        var action = actions[i];

        if (!action.visible) {
          continue;
        }

        var options = {
          actionIndex: visibleActions.length,
          hasAccess: !action.security || action.security &amp;&amp; this.app.hasAccessTo(this.expandExpression(action.security)) ? true : false
        };

        _lang['default'].mixin(action, options);

        var actionTemplate = action.template || this.listActionItemTemplate;
        _domConstruct['default'].place(actionTemplate.apply(action, action.id), this.actionsNode, 'last');

        visibleActions.push(action);
      }

      this.visibleActions = visibleActions;
    },
    createSystemActionLayout: function createSystemActionLayout(actions) {
      var systemActions = _array['default'].filter(actions, function (action) {
        return action.systemAction === true;
      });

      var others = _array['default'].filter(actions, function (action) {
        return !action.systemAction;
      });

      if (!others.length) {
        return [];
      }

      if (systemActions.length) {
        return systemActions.concat(others);
      }

      return [{
        id: '__editPrefs__',
        cls: 'fa fa-cog fa-2x',
        label: this.configureText,
        action: 'configureQuickActions',
        systemAction: true,
        visible: true
      }].concat(others);
    },
    configureQuickActions: function configureQuickActions() {
      var view = App.getView(this.quickActionConfigureView);
      if (view) {
        view.show({
          viewId: this.id,
          actions: _array['default'].filter(this.actions, function (action) {
            // Exclude system actions
            return action &amp;&amp; action.systemAction !== true;
          })
        });
      }
    },
    selectEntrySilent: function selectEntrySilent(key) {
      var enableActions = this.enableActions; // preserve the original value
      var selectionModel = this.get('selectionModel');
      var selection = undefined;

      if (key) {
        this.enableActions = false; // Set to false so the quick actions menu doesn't pop up
        selectionModel.clear();
        selectionModel.toggle(key, this.entries[key]);
        var selectedItems = selectionModel.getSelections();
        this.enableActions = enableActions;

        // We know we are single select, so just grab the first selection
        for (var prop in selectedItems) {
          if (selectedItems.hasOwnProperty(prop)) {
            selection = selectedItems[prop];
            break;
          }
        }
      }

      return selection;
    },
    invokeActionItemBy: function invokeActionItemBy(actionPredicate, key) {
      var actions = _array['default'].filter(this.visibleActions, actionPredicate);
      var selection = this.selectEntrySilent(key);
      this.checkActionState();
      _array['default'].forEach(actions, function forEach(action) {
        this._invokeAction(action, selection);
      }, this);
    },
<span id='argos-_ListBase-method-invokeActionItem'>    /**
</span>     * This is the data-action handler for list-actions, it will locate the action instance viw the data-id attribute
     * and invoke either the `fn` with `scope` or the named `action` on the current view.
     *
     * The resulting function being called will be passed not only the action item definition but also
     * the first (only) selection from the lists selection model.
     *
     * @param {Object} parameters Collection of data- attributes already gathered from the node
     * @param {Event} evt The click/tap event
     * @param {HTMLElement} node The node that invoked the action
     */
    invokeActionItem: function invokeActionItem(parameters /*, evt, node*/) {
      var index = parameters.id;
      var action = this.visibleActions[index];
      var selectedItems = this.get('selectionModel').getSelections();
      var selection = null;

      for (var key in selectedItems) {
        if (selectedItems.hasOwnProperty(key)) {
          selection = selectedItems[key];
          break;
        }
      }

      this._invokeAction(action, selection);
    },
    _invokeAction: function _invokeAction(action, selection) {
      if (!action.isEnabled) {
        return;
      }

      if (action.fn) {
        action.fn.call(action.scope || this, action, selection);
      } else {
        if (action.action) {
          if (this.hasAction(action.action)) {
            this.invokeAction(action.action, action, selection);
          }
        }
      }
    },
<span id='argos-_ListBase-method-checkActionState'>    /**
</span>     * Called when showing the action bar for a newly selected row, it sets the disabled state for each action
     * item using the currently selected row as context by passing the action instance the selected row to the
     * action items `enabled` property.
     */
    checkActionState: function checkActionState() {
      var selectedItems = this.get('selectionModel').getSelections();
      var selection = null;

      for (var key in selectedItems) {
        if (selectedItems.hasOwnProperty(key)) {
          selection = selectedItems[key];
          break;
        }
      }

      this._applyStateToActions(selection);
    },
    _clearActions: function _clearActions() {
      var children = this.actionsNode &amp;&amp; this.actionsNode.children || [];
      children = Array.prototype.slice.call(children);
      _array['default'].forEach(children, function (child) {
        if (child.parentNode) {
          child.parentNode.removeChild(child);
        }
      });
    },
    getQuickActionPrefs: function getQuickActionPrefs() {
      return this.app &amp;&amp; this.app.preferences &amp;&amp; this.app.preferences.quickActions;
    },
    _removeActionDuplicates: function _removeActionDuplicates(acc, cur) {
      var hasID = acc.some(function (item) {
        return item.id === cur.id;
      });

      if (!hasID) {
        acc.push(cur);
      }

      return acc;
    },
    ensureQuickActionPrefs: function ensureQuickActionPrefs() {
      var appPrefs = this.app &amp;&amp; this.app.preferences;
      var actionPrefs = this.getQuickActionPrefs();
      var filtered = _array['default'].filter(this.actions, function (action) {
        return action &amp;&amp; action.systemAction !== true;
      });

      if (!this.actions || !appPrefs) {
        return;
      }

      if (!actionPrefs) {
        appPrefs.quickActions = {};
        actionPrefs = appPrefs.quickActions;
      }

      // If it doesn't exist, or there is a count mismatch (actions created on upgrades perhaps?)
      // re-create the preferences store
      if (!actionPrefs[this.id] || actionPrefs[this.id] &amp;&amp; actionPrefs[this.id].length !== filtered.length) {
        actionPrefs[this.id] = _array['default'].map(filtered, function (action) {
          action.visible = true;
          return action;
        });

        this.app.persistPreferences();
      }
    },
<span id='argos-_ListBase-method-_applyStateToActions'>    /**
</span>     * Called from checkActionState method and sets the state of the actions from what was selected from the selected row, it sets the disabled state for each action
     * item using the currently selected row as context by passing the action instance the selected row to the
     * action items `enabled` property.
     * @param {Object} selection
     */
    _applyStateToActions: function _applyStateToActions(selection) {
      this._clearActions();
      this.createActions(this._createCustomizedLayout(this.createSystemActionLayout(this.createActionLayout()), 'actions'));

      for (var i = 0; i &lt; this.visibleActions.length; i++) {
        // The visible action is from our local storage preferences, where the action from the layout
        // contains functions that will get stripped out converting it to JSON, get the original action
        // and mix it into the visible so we can work with it.
        // TODO: This will be a problem throughout visible actions, come up with a better solution
        var visibleAction = this.visibleActions[i];
        var action = _lang['default'].mixin(visibleAction, this._getActionById(visibleAction.id));
        var actionNode = this.actionsNode.childNodes[i];

        action.isEnabled = typeof action.enabled === 'undefined' ? true : this.expandExpression(action.enabled, action, selection);

        if (!action.hasAccess) {
          action.isEnabled = false;
        }

        if (actionNode) {
          _domClass['default'].toggle(actionNode, 'toolButton-disabled', !action.isEnabled);
        }
      }
    },
    _getActionById: function _getActionById(id) {
      return _array['default'].filter(this.actions, function (action) {
        return action &amp;&amp; action.id === id;
      })[0];
    },
<span id='argos-_ListBase-method-showActionPanel'>    /**
</span>     * Handler for showing the list-action panel/bar - it needs to do several things:
     *
     * 1. Check each item for context-enabledment
     * 1. Move the action panel to the current row and show it
     * 1. Adjust the scrolling if needed (if selected row is at bottom of screen, the action-bar shows off screen
     * which is bad)
     *
     * @param {HTMLElement} rowNode The currently selected row node
     */
    showActionPanel: function showActionPanel(rowNode) {
      this.checkActionState();
      _domClass['default'].add(rowNode, 'list-action-selected');

      this.onApplyRowActionPanel(this.actionsNode, rowNode);

      _domConstruct['default'].place(this.actionsNode, rowNode, 'after');
    },
    onApplyRowActionPanel: function onApplyRowActionPanel() /*actionNodePanel, rowNode*/{},
<span id='argos-_ListBase-method-setSource'>    /**
</span>     * Sets the `this.options.source` to passed param after adding the views resourceKind. This function is used so
     * that when the next view queries the navigation context we can include the passed param as a data point.
     *
     * @param {Object} source The object to set as the options.source.
     */
    setSource: function setSource(source) {
      _lang['default'].mixin(source, {
        resourceKind: this.resourceKind
      });

      this.options.source = source;
    },
<span id='argos-_ListBase-method-hideActionPanel'>    /**
</span>     * Hides the passed list-action row/panel by removing the selected styling
     * @param {HTMLElement} rowNode The currently selected row.
     */
    hideActionPanel: function hideActionPanel(rowNode) {
      _domClass['default'].remove(rowNode, 'list-action-selected');
    },
<span id='argos-_ListBase-method-isNavigationDisabled'>    /**
</span>     * Determines if the view is a navigatible view or a selection view by returning `this.selectionOnly` or the
     * navigation `this.options.selectionOnly`.
     * @return {Boolean}
     */
    isNavigationDisabled: function isNavigationDisabled() {
      return this.options &amp;&amp; this.options.selectionOnly || this.selectionOnly;
    },
<span id='argos-_ListBase-method-isSelectionDisabled'>    /**
</span>     * Determines if the selections are disabled by checking the `allowSelection` and `enableActions`
     * @return {Boolean}
     */
    isSelectionDisabled: function isSelectionDisabled() {
      return !(this.options &amp;&amp; this.options.selectionOnly || this.enableActions || this.allowSelection);
    },
<span id='argos-_ListBase-method-_onSelectionModelSelect'>    /**
</span>     * Handler for when the selection model adds an item. Adds the selected state to the row or shows the list
     * actions panel.
     * @param {String} key The extracted key from the selected row.
     * @param {Object} data The actual row's matching data point
     * @param {String/HTMLElement} tag An indentifier, may be the actual row node or some other id.
     * @private
     */
    _onSelectionModelSelect: function _onSelectionModelSelect(key, data, tag) {
      var node = _dom['default'].byId(tag) || (0, _query['default'])('li[data-key=&quot;' + key + '&quot;]', this.contentNode)[0];
      if (!node) {
        return;
      }

      if (this.enableActions) {
        this.showActionPanel(node);
        return;
      }

      _domClass['default'].add(node, 'list-item-selected');
    },
<span id='argos-_ListBase-method-_onSelectionModelDeselect'>    /**
</span>     * Handler for when the selection model removes an item. Removes the selected state to the row or hides the list
     * actions panel.
     * @param {String} key The extracted key from the de-selected row.
     * @param {Object} data The actual row's matching data point
     * @param {String/HTMLElement} tag An indentifier, may be the actual row node or some other id.
     * @private
     */
    _onSelectionModelDeselect: function _onSelectionModelDeselect(key, data, tag) {
      var node = _dom['default'].byId(tag) || (0, _query['default'])('li[data-key=&quot;' + key + '&quot;]', this.contentNode)[0];
      if (!node) {
        return;
      }

      if (this.enableActions) {
        this.hideActionPanel(node);
        return;
      }

      _domClass['default'].remove(node, 'list-item-selected');
    },
<span id='argos-_ListBase-method-_onSelectionModelClear'>    /**
</span>     * Handler for when the selection model clears the selections.
     * @private
     */
    _onSelectionModelClear: function _onSelectionModelClear() {},
<span id='argos-_ListBase-method-_loadPreviousSelections'>    /**
</span>     * Attempts to activate entries passed in `this.options.previousSelections` where previousSelections is an array
     * of data-keys or data-descriptors to search the list rows for.
     * @private
     */
    _loadPreviousSelections: function _loadPreviousSelections() {
      var previousSelections = this.options &amp;&amp; this.options.previousSelections;
      if (previousSelections) {
        for (var i = 0; i &lt; previousSelections.length; i++) {
          var row = (0, _query['default'])(_string['default'].substitute('[data-key=&quot;${0}&quot;], [data-descriptor=&quot;${0}&quot;]', [previousSelections[i]]), this.contentNode)[0];

          if (row) {
            this.activateEntry({
              key: previousSelections[i],
              descriptor: previousSelections[i],
              $source: row
            });
          }
        }
      }
    },
<span id='argos-_ListBase-method-_onRefresh'>    /**
</span>     * Handler for the global `/app/refresh` event. Sets `refreshRequired` to true if the resourceKind matches.
     * @param {Object} options The object published by the event.
     * @private
     */
    _onRefresh: function _onRefresh() /*options*/{},
    onScroll: function onScroll() /*evt*/{
      var scrollerNode = this.get('scroller');
      var pos = _domGeom['default'].position(scrollerNode, true);
      var height = pos.h; // viewport height (what user sees)
      var scrollHeight = scrollerNode.scrollHeight; // Entire container height
      var scrollTop = scrollerNode.scrollTop; // How far we are scrolled down
      var remaining = scrollHeight - scrollTop; // Height we have remaining to scroll
      var selected = _domAttr['default'].get(this.domNode, 'selected');
      var diff = Math.abs(remaining - height);

      // Start auto fetching more data if the user is on the last half of the remaining screen
      if (diff &lt;= height / 2) {
        if (selected === 'true' &amp;&amp; this.hasMoreData() &amp;&amp; !this.listLoading) {
          this.more();
        }
      }
    },
<span id='argos-_ListBase-method-selectEntry'>    /**
</span>     * Handler for the select or action node data-action. Finds the nearest node with the data-key attribute and
     * toggles it in the views selection model.
     *
     * If singleSelectAction is defined, invoke the singleSelectionAction.
     *
     * @param {Object} params Collection of `data-` attributes from the node.
     * @param {Event} evt The click/tap event.
     * @param {HTMLElement} node The element that initiated the event.
     */
    selectEntry: function selectEntry(params, evt, node) {
      var row = (0, _query['default'])(node).closest('[data-key]')[0];
      var key = row ? row.getAttribute('data-key') : false;

      if (this._selectionModel &amp;&amp; key) {
        this._selectionModel.toggle(key, this.entries[key], row);
      }

      if (this.options.singleSelect &amp;&amp; this.options.singleSelectAction &amp;&amp; !this.enableActions) {
        this.invokeSingleSelectAction();
      }
    },
<span id='argos-_ListBase-method-activateEntry'>    /**
</span>     * Handler for each row.
     *
     * If a selection model is defined and navigation is disabled then toggle the entry/row
     * in the model and if singleSelectionAction is true invoke the singleSelectAction.
     *
     * Else navigate to the detail view for the extracted data-key.
     *
     * @param {Object} params Collection of `data-` attributes from the node.
     */
    activateEntry: function activateEntry(params) {
      if (params.key) {
        if (this._selectionModel &amp;&amp; this.isNavigationDisabled()) {
          this._selectionModel.toggle(params.key, this.entries[params.key] || params.descriptor, params.$source);
          if (this.options.singleSelect &amp;&amp; this.options.singleSelectAction) {
            this.invokeSingleSelectAction();
          }
        } else {
          this.navigateToDetailView(params.key, params.descriptor);
        }
      }
    },
<span id='argos-_ListBase-method-invokeSingleSelectAction'>    /**
</span>     * Invokes the corresponding top toolbar tool using `this.options.singleSelectAction` as the name.
     * If autoClearSelection is true, clear the selection model.
     */
    invokeSingleSelectAction: function invokeSingleSelectAction() {
      if (this.app.bars.tbar) {
        this.app.bars.tbar.invokeTool({
          tool: this.options.singleSelectAction
        });
      }

      if (this.autoClearSelection) {
        this._selectionModel.clear();
      }
    },
<span id='argos-_ListBase-method-formatSearchQuery'>    /**
</span>     * Called to transform a textual query into an SData query compatible search expression.
     *
     * Views should override this function to provide their own formatting tailored to their entity.
     *
     * @param {String} searchQuery User inputted text from the search widget.
     * @return {String/Boolean} An SData query compatible search expression.
     * @template
     */
    formatSearchQuery: function formatSearchQuery() /*searchQuery*/{
      return false;
    },
<span id='argos-_ListBase-method-escapeSearchQuery'>    /**
</span>     * Replaces a single `&quot;` with two `&quot;&quot;` for proper SData query expressions.
     * @param {String} searchQuery Search expression to be escaped.
     * @return {String}
     */
    escapeSearchQuery: function escapeSearchQuery(searchQuery) {
      return _Utility2['default'].escapeSearchQuery(searchQuery);
    },
<span id='argos-_ListBase-method-_onSearchExpression'>    /**
</span>     * Handler for the search widgets search.
     *
     * Prepares the view by clearing it and setting `this.query` to the given search expression. Then calls
     * {@link #requestData requestData} which start the request process.
     *
     * @param {String} expression String expression as returned from the search widget
     * @private
     */
    _onSearchExpression: function _onSearchExpression(expression) {
      this.clear(false);
      this.queryText = '';
      this.query = expression;

      this.requestData();
    },
<span id='argos-_ListBase-method-configureSearch'>    /**
</span>     * Sets the default search expression (acting as a pre-filter) to `this.options.query` and configures the
     * search widget by passing in the current view context.
     */
    configureSearch: function configureSearch() {
      this.query = this.options &amp;&amp; this.options.query || this.query || null;
      if (this.searchWidget) {
        this.searchWidget.configure({
          'context': this.getContext()
        });
      }

      this._setDefaultSearchTerm();
    },
    _setDefaultSearchTerm: function _setDefaultSearchTerm() {
      if (!this.defaultSearchTerm || this.defaultSearchTermSet) {
        return;
      }

      if (typeof this.defaultSearchTerm === 'function') {
        this.setSearchTerm(this.defaultSearchTerm());
      } else {
        this.setSearchTerm(this.defaultSearchTerm);
      }

      this._updateQuery();

      this.defaultSearchTermSet = true;
    },
    _updateQuery: function _updateQuery() {
      var searchQuery = this.getSearchQuery();
      if (searchQuery) {
        this.query = searchQuery;
      } else {
        this.query = '';
      }
    },
    getSearchQuery: function getSearchQuery() {
      var results = null;

      if (this.searchWidget) {
        results = this.searchWidget.getFormattedSearchQuery();
      }

      return results;
    },
<span id='argos-_ListBase-method-navigateToRelatedView'>    /**
</span>     * Helper method for list actions. Takes a view id, data point and where format string, sets the nav options
     * `where` to the formatted expression using the data point and shows the given view id with that option.
     * @param {Object} action Action instance, not used.
     * @param {Object} selection Data entry for the selection.
     * @param {String} viewId View id to be shown
     * @param {String} whereQueryFmt Where expression format string to be passed. `${0}` will be the `idProperty`
     * @param {Object} additionalOptions Additional options to be passed into the next view
     * property of the passed selection data.
     */
    navigateToRelatedView: function navigateToRelatedView(action, selection, viewId, whereQueryFmt, additionalOptions) {
      var view = this.app.getView(viewId);
      var options = {
        where: _string['default'].substitute(whereQueryFmt, [selection.data[this.idProperty]]),
        selectedEntry: selection.data
      };

      if (additionalOptions) {
        options = _lang['default'].mixin(options, additionalOptions);
      }

      this.setSource({
        entry: selection.data,
        descriptor: selection.data[this.labelProperty],
        key: selection.data[this.idProperty]
      });

      if (view) {
        view.show(options);
      }
    },
<span id='argos-_ListBase-method-navigateToDetailView'>    /**
</span>     * Navigates to the defined `this.detailView` passing the params as navigation options.
     * @param {String} key Key of the entry to be shown in detail
     * @param {String} descriptor Description of the entry, will be used as the top toolbar title text
     * @param {Object} additionalOptions Additional options to be passed into the next view
     */
    navigateToDetailView: function navigateToDetailView(key, descriptor, additionalOptions) {
      var view = this.app.getView(this.detailView);
      var options = {
        descriptor: descriptor, // keep for backwards compat
        title: descriptor,
        key: key,
        fromContext: this
      };

      if (additionalOptions) {
        options = _lang['default'].mixin(options, additionalOptions);
      }

      if (view) {
        view.show(options);
      }
    },
<span id='argos-_ListBase-method-navigateToEditView'>    /**
</span>     * Helper method for list-actions. Navigates to the defined `this.editView` passing the given selections `idProperty`
     * property in the navigation options (which is then requested and result used as default data).
     * @param {Object} action Action instance, not used.
     * @param {Object} selection Data entry for the selection.
     * @param {Object} additionalOptions Additional options to be passed into the next view.
     */
    navigateToEditView: function navigateToEditView(action, selection, additionalOptions) {
      var view = this.app.getView(this.editView || this.insertView);
      var key = selection.data[this.idProperty];
      var options = {
        key: key,
        selectedEntry: selection.data,
        fromContext: this
      };

      if (additionalOptions) {
        options = _lang['default'].mixin(options, additionalOptions);
      }

      if (view) {
        view.show(options);
      }
    },
<span id='argos-_ListBase-method-navigateToInsertView'>    /**
</span>     * Navigates to the defined `this.insertView`, or `this.editView` passing the current views id as the `returnTo`
     * option and setting `insert` to true.
     * @param {HTMLElement} el Node that initiated the event.
     * @param {Object} additionalOptions Additional options to be passed into the next view.
     */
    navigateToInsertView: function navigateToInsertView(el, additionalOptions) {
      var view = this.app.getView(this.insertView || this.editView);
      var options = {
        returnTo: this.id,
        insert: true
      };

      // Pass along the selected entry (related list could get it from a quick action)
      if (this.options.selectedEntry) {
        options.selectedEntry = this.options.selectedEntry;
      }

      if (additionalOptions) {
        options = _lang['default'].mixin(options, additionalOptions);
      }

      if (view) {
        view.show(options);
      }
    },
<span id='argos-_ListBase-method-hasMoreData'>    /**
</span>     * Deterimines if there is more data to be shown.
     * @return {Boolean} True if the list has more data; False otherwise. Default is true.
     */
    hasMoreData: function hasMoreData() {},
    _setLoading: function _setLoading() {
      _domClass['default'].add(this.domNode, 'list-loading');
      this.listLoading = true;
    },
    _clearLoading: function _clearLoading() {
      _domClass['default'].remove(this.domNode, 'list-loading');
      this.listLoading = false;
    },
<span id='argos-_ListBase-method-requestData'>    /**
</span>     * Initiates the data request.
     */
    requestData: function requestData() {
      var store = this.get('store');

      if (!store &amp;&amp; !this._model) {
        console.warn('Error requesting data, no store was defined. Did you mean to mixin _SDataListMixin to your list view?'); // eslint-disable-line
        return null;
      }

      this._setLoading();

      var queryResults = undefined;
      var queryOptions = undefined;
      var queryExpression = undefined;
      if (this._model) {
        // Todo: find a better way to transfer this state.
        this.options.count = this.pageSize;
        this.options.start = this.position;
        queryOptions = {};
        this._applyStateToQueryOptions(queryOptions);
        queryExpression = this._buildQueryExpression() || null;
        queryResults = this.requestDataUsingModel(queryExpression, queryOptions);
      } else {
        queryOptions = {};
        this._applyStateToQueryOptions(queryOptions);

        queryExpression = this._buildQueryExpression() || null;
        queryResults = this.requestDataUsingStore(queryExpression, queryOptions);
      }

      (0, _when['default'])(queryResults, this._onQueryComplete.bind(this, queryResults), this._onQueryError.bind(this, queryOptions));

      return queryResults;
    },
    requestDataUsingModel: function requestDataUsingModel(queryExpression, options) {
      var queryOptions = {
        returnQueryResults: true,
        queryModelName: this.queryModelName
      };
      _lang['default'].mixin(queryOptions, options);
      return this._model.getEntries(queryExpression, queryOptions);
    },
    requestDataUsingStore: function requestDataUsingStore(queryExpression, queryOptions) {
      var store = this.get('store');
      return store.query(queryExpression, queryOptions);
    },
    _onQueryComplete: function _onQueryComplete(queryResults, entries) {
      try {
        var start = this.position;
        var scrollerNode = this.get('scroller');

        try {
          (0, _when['default'])(queryResults.total, this._onQueryTotal.bind(this), this._onQueryTotalError.bind(this));

          /* todo: move to a more appropriate location */
          if (this.options &amp;&amp; this.options.allowEmptySelection) {
            _domClass['default'].add(this.domNode, 'list-has-empty-opt');
          }

          /* remove the loading indicator so that it does not get re-shown while requesting more data */
          if (start === 0) {
            // Check entries.length so we don't clear out the &quot;noData&quot; template
            if (entries &amp;&amp; entries.length &gt; 0) {
              this.set('listContent', '');
            }

            _domConstruct['default'].destroy(this.loadingIndicatorNode);
          }

          this.processData(entries);
        } finally {
          this._clearLoading();
        }

        if (!this._onScrollHandle &amp;&amp; this.continuousScrolling) {
          this._onScrollHandle = this.connect(scrollerNode, 'onscroll', this.onScroll);
        }

        this.onContentChange();
        _connect['default'].publish('/app/toolbar/update', []);

        if (this._selectionModel) {
          this._loadPreviousSelections();
        }
      } catch (e) {
        console.error(e); // eslint-disable-line
        this._logError({
          message: e.message,
          stack: e.stack
        }, e.message);
      }
    },
    createStore: function createStore() {
      return null;
    },
    onContentChange: function onContentChange() {},
    _processEntry: function _processEntry(entry) {
      return entry;
    },
    _onQueryTotalError: function _onQueryTotalError(error) {
      this.handleError(error);
    },
    _onQueryTotal: function _onQueryTotal(size) {
      this.total = size;
      if (size === 0) {
        this.set('listContent', this.noDataTemplate.apply(this));
      } else {
        var remaining = this.getRemainingCount();
        if (remaining !== -1) {
          this.set('remainingContent', _string['default'].substitute(this.remainingText, [remaining]));
          this.remaining = remaining;
        }

        _domClass['default'].toggle(this.domNode, 'list-has-more', remaining === -1 || remaining &gt; 0);

        this.position = this.position + this.pageSize;
      }
    },
    getRemainingCount: function getRemainingCount() {
      var remaining = this.total &gt; -1 ? this.total - (this.position + this.pageSize) : -1;
      return remaining;
    },
    onApplyRowTemplate: function onApplyRowTemplate() /*entry, rowNode*/{},
    processData: function processData(entries) {
      if (!entries) {
        return;
      }

      var count = entries.length;

      if (count &gt; 0) {
        var docfrag = document.createDocumentFragment();
        for (var i = 0; i &lt; count; i++) {
          var entry = this._processEntry(entries[i]);
          // If key comes back with nothing, check that the store is properly
          // setup with an idProperty
          this.entries[this.getIdentity(entry)] = entry;

          var rowNode = this.createItemRowNode(entry);

          docfrag.appendChild(rowNode);
          this.onApplyRowTemplate(entry, rowNode);
        }

        if (docfrag.childNodes.length &gt; 0) {
          _domConstruct['default'].place(docfrag, this.contentNode, 'last');
        }
      }
    },
    createItemRowNode: function createItemRowNode(entry) {
      var rowNode = null;
      try {
        rowNode = _domConstruct['default'].toDom(this.rowTemplate.apply(entry, this));
      } catch (err) {
        console.error(err); // eslint-disable-line
        rowNode = _domConstruct['default'].toDom(this.rowTemplateError.apply(entry, this));
      }
      return rowNode;
    },
    getIdentity: function getIdentity(entry) {
      if (this._model) {
        return this._model.getEntityId(entry);
      }

      var store = this.get('store');
      return store.getIdentity(entry, this.idProperty);
    },
    _logError: function _logError(error, message) {
      var fromContext = this.options.fromContext;
      this.options.fromContext = null;
      var errorItem = {
        viewOptions: this.options,
        serverError: error
      };

      _ErrorManager2['default'].addError(message || this.getErrorMessage(error), errorItem);
      this.options.fromContext = fromContext;
    },
    _onQueryError: function _onQueryError(queryOptions, error) {
      this.handleError(error);
    },
    _buildQueryExpression: function _buildQueryExpression() {
      return _lang['default'].mixin(this.query || {}, this.options &amp;&amp; (this.options.query || this.options.where));
    },
    _applyStateToQueryOptions: function _applyStateToQueryOptions() /*queryOptions*/{},
<span id='argos-_ListBase-method-more'>    /**
</span>     * Handler for the more button. Simply calls {@link #requestData requestData} which already has the info for
     * setting the start index as needed.
     */
    more: function more() {
      if (this.continuousScrolling) {
        this.set('remainingContent', this.loadingTemplate.apply(this));
      }

      this.requestData();
    },
<span id='argos-_ListBase-method-emptySelection'>    /**
</span>     * Handler for the none/no selection button is pressed. Used in selection views when not selecting is an option.
     * Invokes the `this.options.singleSelectAction` tool.
     */
    emptySelection: function emptySelection() {
      this._selectionModel.clear();

      if (this.app.bars.tbar) {
        this.app.bars.tbar.invokeTool({
          tool: this.options.singleSelectAction
        }); // invoke action of tool
      }
    },
<span id='argos-_ListBase-method-refreshRequiredFor'>    /**
</span>     * Determines if the view should be refresh by inspecting and comparing the passed navigation options with current values.
     * @param {Object} options Passed navigation options.
     * @return {Boolean} True if the view should be refreshed, false if not.
     */
    refreshRequiredFor: function refreshRequiredFor(options) {
      if (this.options) {
        if (options) {
          if (this.expandExpression(this.options.stateKey) !== this.expandExpression(options.stateKey)) {
            return true;
          }
          if (this.expandExpression(this.options.where) !== this.expandExpression(options.where)) {
            return true;
          }
          if (this.expandExpression(this.options.query) !== this.expandExpression(options.query)) {
            return true;
          }
          if (this.expandExpression(this.options.resourceKind) !== this.expandExpression(options.resourceKind)) {
            return true;
          }
          if (this.expandExpression(this.options.resourcePredicate) !== this.expandExpression(options.resourcePredicate)) {
            return true;
          }
        }

        return false;
      }

      return this.inherited(arguments);
    },
<span id='argos-_ListBase-method-getContext'>    /**
</span>     * Returns the current views context by expanding upon the {@link View#getContext parent implementation} to include
     * the views resourceKind.
     * @return {Object} context.
     */
    getContext: function getContext() {
      return this.inherited(arguments);
    },
<span id='argos-_ListBase-method-beforeTransitionTo'>    /**
</span>     * Extends the {@link View#beforeTransitionTo parent implementation} by also toggling the visibility of the views
     * components and clearing the view and selection model as needed.
     */
    beforeTransitionTo: function beforeTransitionTo() {
      this.inherited(arguments);

      _domClass['default'].toggle(this.domNode, 'list-hide-search', this.options &amp;&amp; typeof this.options.hideSearch !== 'undefined' ? this.options.hideSearch : this.hideSearch || !this.enableSearch);

      _domClass['default'].toggle(this.domNode, 'list-show-selectors', !this.isSelectionDisabled() &amp;&amp; !this.options.singleSelect);

      if (this._selectionModel &amp;&amp; !this.isSelectionDisabled()) {
        this._selectionModel.useSingleSelection(this.options.singleSelect);
      }

      if (typeof this.options.enableActions !== 'undefined') {
        this.enableActions = this.options.enableActions;
      }

      _domClass['default'].toggle(this.domNode, 'list-show-actions', this.enableActions);
      if (this.enableActions) {
        this._selectionModel.useSingleSelection(true);
      }

      if (this.refreshRequired) {
        this.clear();
      } else {
        // if enabled, clear any pre-existing selections
        if (this._selectionModel &amp;&amp; this.autoClearSelection &amp;&amp; !this.enableActions) {
          this._selectionModel.clear();
        }
      }
    },
<span id='argos-_ListBase-method-transitionTo'>    /**
</span>     * Extends the {@link View#transitionTo parent implementation} to also configure the search widget and
     * load previous selections into the selection model.
     */
    transitionTo: function transitionTo() {
      this.configureSearch();

      if (this._selectionModel) {
        this._loadPreviousSelections();
      }

      this.inherited(arguments);
    },
<span id='argos-_ListBase-method-createHashTagQueryLayout'>    /**
</span>     * Generates the hash tag layout by taking the hash tags defined in `this.hashTagQueries` and converting them
     * into individual objects in an array to be used in the customization engine.
     * @return {Object[]}
     */
    createHashTagQueryLayout: function createHashTagQueryLayout() {
      // todo: always regenerate this layout? always regenerating allows for all existing customizations
      // to still work, at expense of potential (rare) performance issues if many customizations are registered.
      var layout = [];
      for (var _name in this.hashTagQueries) {
        if (this.hashTagQueries.hasOwnProperty(_name)) {
          layout.push({
            'key': _name,
            'tag': this.hashTagQueriesText &amp;&amp; this.hashTagQueriesText[_name] || _name,
            'query': this.hashTagQueries[_name]
          });
        }
      }

      return layout;
    },
<span id='argos-_ListBase-method-refresh'>    /**
</span>     * Called when the view needs to be reset. Invokes the request data process.
     */
    refresh: function refresh() {
      this.query = this.getSearchQuery() || this.query;
      this.requestData();
    },
<span id='argos-_ListBase-method-clear'>    /**
</span>     * Clears the view by:
     *
     *  * clearing the selection model, but without it invoking the event handlers;
     *  * clears the views data such as `this.entries` and `this.entries`;
     *  * clears the search width if passed true; and
     *  * applies the default template.
     *
     * @param {Boolean} all If true, also clear the search widget.
     */
    clear: function clear(all) {
      if (this._selectionModel) {
        this._selectionModel.suspendEvents();
        this._selectionModel.clear();
        this._selectionModel.resumeEvents();
      }

      this.requestedFirstPage = false;
      this.entries = {};
      this.position = 0;

      if (this._onScrollHandle) {
        this.disconnect(this._onScrollHandle);
        this._onScrollHandle = null;
      }

      if (all === true &amp;&amp; this.searchWidget) {
        this.searchWidget.clear();
        this.query = false; // todo: rename to searchQuery
        this.hasSearched = false;
      }

      _domClass['default'].remove(this.domNode, 'list-has-more');

      this.set('listContent', this.loadingTemplate.apply(this));
    },
    search: function search() {
      if (this.searchWidget) {
        this.searchWidget.search();
      }
    },
<span id='argos-_ListBase-method-setSearchTerm'>    /**
</span>     * Sets the query value on the serach widget
     */
    setSearchTerm: function setSearchTerm(value) {
      if (this.searchWidget) {
        this.searchWidget.set('queryValue', value);
      }
    },
<span id='argos-_ListBase-method-getListCount'>    /**
</span>     * Returns a promise with the list's count.
     */
    getListCount: function getListCount() /*options, callback*/{}
  });

  _lang['default'].setObject('Sage.Platform.Mobile._ListBase', __class);
  module.exports = __class;
});
//# sourceMappingURL=data:application/json;base64,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O0FBQ3RDLFlBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDO09BQzdCOztBQUVELFVBQUksR0FBRyxLQUFLLElBQUksSUFBSSxJQUFJLENBQUMsWUFBWSxFQUFFO0FBQ3JDLFlBQUksQ0FBQyxZQUFZLENBQUMsS0FBSyxFQUFFLENBQUM7QUFDMUIsWUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7QUFDbkIsWUFBSSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUM7T0FDMUI7O0FBRUQsMkJBQVMsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsZUFBZSxDQUFDLENBQUM7O0FBRS9DLFVBQUksQ0FBQyxHQUFHLENBQUMsYUFBYSxFQUFFLElBQUksQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7S0FDM0Q7QUFDRCxVQUFNLEVBQUUsU0FBUyxNQUFNLEdBQUc7QUFDeEIsVUFBSSxJQUFJLENBQUMsWUFBWSxFQUFFO0FBQ3JCLFlBQUksQ0FBQyxZQUFZLENBQUMsTUFBTSxFQUFFLENBQUM7T0FDNUI7S0FDRjs7OztBQUlELGlCQUFhLEVBQUUsU0FBUyxhQUFhLENBQUMsS0FBSyxFQUFFO0FBQzNDLFVBQUksSUFBSSxDQUFDLFlBQVksRUFBRTtBQUNyQixZQUFJLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxZQUFZLEVBQUUsS0FBSyxDQUFDLENBQUM7T0FDNUM7S0FDRjs7OztBQUlELGdCQUFZLEVBQUUsU0FBUyxZQUFZLHdCQUEwQixFQUFFO0dBQ2hFLENBQUMsQ0FBQzs7QUFFSCxtQkFBSyxTQUFTLENBQUMsZ0NBQWdDLEVBQUUsT0FBTyxDQUFDLENBQUM7bUJBQzNDLE9BQU8iLCJmaWxlIjoic3JjL19MaXN0QmFzZS5qcyIsInNvdXJjZVJvb3QiOiJzcmMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBDb3B5cmlnaHQgKGMpIDIwMTAsIFNhZ2UgU29mdHdhcmUsIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5pbXBvcnQgZGVjbGFyZSBmcm9tICdkb2pvL19iYXNlL2RlY2xhcmUnO1xyXG5pbXBvcnQgbGFuZyBmcm9tICdkb2pvL19iYXNlL2xhbmcnO1xyXG5pbXBvcnQgYXJyYXkgZnJvbSAnZG9qby9fYmFzZS9hcnJheSc7XHJcbmltcG9ydCBjb25uZWN0IGZyb20gJ2Rvam8vX2Jhc2UvY29ubmVjdCc7XHJcbmltcG9ydCBxdWVyeSBmcm9tICdkb2pvL3F1ZXJ5JztcclxuaW1wb3J0IGRvbUF0dHIgZnJvbSAnZG9qby9kb20tYXR0cic7XHJcbmltcG9ydCBkb21DbGFzcyBmcm9tICdkb2pvL2RvbS1jbGFzcyc7XHJcbmltcG9ydCBkb21Db25zdHJ1Y3QgZnJvbSAnZG9qby9kb20tY29uc3RydWN0JztcclxuaW1wb3J0IGRvbUdlb20gZnJvbSAnZG9qby9kb20tZ2VvbWV0cnknO1xyXG5pbXBvcnQgZG9tIGZyb20gJ2Rvam8vZG9tJztcclxuaW1wb3J0IHN0cmluZyBmcm9tICdkb2pvL3N0cmluZyc7XHJcbmltcG9ydCB3aGVuIGZyb20gJ2Rvam8vd2hlbic7XHJcbmltcG9ydCBVdGlsaXR5IGZyb20gJy4vVXRpbGl0eSc7XHJcbmltcG9ydCBFcnJvck1hbmFnZXIgZnJvbSAnLi9FcnJvck1hbmFnZXInO1xyXG5pbXBvcnQgVmlldyBmcm9tICcuL1ZpZXcnO1xyXG5pbXBvcnQgU2VhcmNoV2lkZ2V0IGZyb20gJy4vU2VhcmNoV2lkZ2V0JztcclxuaW1wb3J0IENvbmZpZ3VyYWJsZVNlbGVjdGlvbk1vZGVsIGZyb20gJy4vQ29uZmlndXJhYmxlU2VsZWN0aW9uTW9kZWwnO1xyXG5pbXBvcnQgX1B1bGxUb1JlZnJlc2hNaXhpbiBmcm9tICcuL19QdWxsVG9SZWZyZXNoTWl4aW4nO1xyXG5pbXBvcnQgZ2V0UmVzb3VyY2UgZnJvbSAnLi9JMThuJztcclxuXHJcbmNvbnN0IHJlc291cmNlID0gZ2V0UmVzb3VyY2UoJ2xpc3RCYXNlJyk7XHJcblxyXG4vKipcclxuICogQGNsYXNzIGFyZ29zLl9MaXN0QmFzZVxyXG4gKiBBIExpc3QgVmlldyBpcyBhIHZpZXcgdXNlZCB0byBkaXNwbGF5IGEgY29sbGVjdGlvbiBvZiBlbnRyaWVzIGluIGFuIGVhc3kgdG8gc2tpbSBsaXN0LiBUaGUgTGlzdCBWaWV3IGFsc28gaGFzIGFcclxuICogc2VsZWN0aW9uIG1vZGVsIGJ1aWx0IGluIGZvciBzZWxlY3Rpbmcgcm93cyBmcm9tIHRoZSBsaXN0IGFuZCBtYXkgYmUgdXNlZCBpbiBhIG51bWJlciBvZiBkaWZmZXJlbnQgbWFubmVycy5cclxuICogQGV4dGVuZHMgYXJnb3MuVmlld1xyXG4gKiBAYWx0ZXJuYXRlQ2xhc3NOYW1lIF9MaXN0QmFzZVxyXG4gKiBAcmVxdWlyZXMgYXJnb3MuRXJyb3JNYW5hZ2VyXHJcbiAqIEByZXF1aXJlcyBhcmdvcy5VdGlsaXR5XHJcbiAqIEByZXF1aXJlcyBhcmdvcy5TZWFyY2hXaWRnZXRcclxuICogQG1peGlucyBhcmdvcy5fUHVsbFRvUmVmcmVzaE1peGluXHJcbiAqL1xyXG5jb25zdCBfX2NsYXNzID0gZGVjbGFyZSgnYXJnb3MuX0xpc3RCYXNlJywgW1ZpZXcsIF9QdWxsVG9SZWZyZXNoTWl4aW5dLCB7XHJcbiAgLyoqXHJcbiAgICogQHByb3BlcnR5IHtPYmplY3R9XHJcbiAgICogQ3JlYXRlcyBhIHNldHRlciBtYXAgdG8gaHRtbCBub2RlcywgbmFtZWx5OlxyXG4gICAqXHJcbiAgICogKiBsaXN0Q29udGVudCA9PiBjb250ZW50Tm9kZSdzIGlubmVySFRNTFxyXG4gICAqICogcmVtYWluaW5nQ29udGVudCA9PiByZW1haW5pbmdDb250ZW50Tm9kZSdzIGlubmVySFRNTFxyXG4gICAqL1xyXG4gIGF0dHJpYnV0ZU1hcDoge1xyXG4gICAgbGlzdENvbnRlbnQ6IHtcclxuICAgICAgbm9kZTogJ2NvbnRlbnROb2RlJyxcclxuICAgICAgdHlwZTogJ2lubmVySFRNTCcsXHJcbiAgICB9LFxyXG4gICAgcmVtYWluaW5nQ29udGVudDoge1xyXG4gICAgICBub2RlOiAncmVtYWluaW5nQ29udGVudE5vZGUnLFxyXG4gICAgICB0eXBlOiAnaW5uZXJIVE1MJyxcclxuICAgIH0sXHJcbiAgfSxcclxuICAvKipcclxuICAgKiBAcHJvcGVydHkge1NpbXBsYXRlfVxyXG4gICAqIFRoZSB0ZW1wbGF0ZSB1c2VkIHRvIHJlbmRlciB0aGUgdmlldydzIG1haW4gRE9NIGVsZW1lbnQgd2hlbiB0aGUgdmlldyBpcyBpbml0aWFsaXplZC5cclxuICAgKiBUaGlzIHRlbXBsYXRlIGluY2x1ZGVzIGVtcHR5U2VsZWN0aW9uVGVtcGxhdGUsIG1vcmVUZW1wbGF0ZSBhbmQgbGlzdEFjdGlvblRlbXBsYXRlLlxyXG4gICAqXHJcbiAgICogVGhlIGRlZmF1bHQgdGVtcGxhdGUgdXNlcyB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XHJcbiAgICpcclxuICAgKiAgICAgIG5hbWUgICAgICAgICAgICAgICAgZGVzY3JpcHRpb25cclxuICAgKiAgICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgKiAgICAgIGlkICAgICAgICAgICAgICAgICAgIG1haW4gY29udGFpbmVyIGRpdiBpZFxyXG4gICAqICAgICAgdGl0bGUgICAgICAgICAgICAgICAgbWFpbiBjb250YWluZXIgZGl2IHRpdGxlIGF0dHJcclxuICAgKiAgICAgIGNscyAgICAgICAgICAgICAgICAgIGFkZGl0aW9uYWwgY2xhc3Mgc3RyaW5nIGFkZGVkIHRvIHRoZSBtYWluIGNvbnRhaW5lciBkaXZcclxuICAgKiAgICAgIHJlc291cmNlS2luZCAgICAgICAgIHNldCB0byBkYXRhLXJlc291cmNlLWtpbmRcclxuICAgKlxyXG4gICAqL1xyXG4gIHdpZGdldFRlbXBsYXRlOiBuZXcgU2ltcGxhdGUoW1xyXG4gICAgJzxkaXYgaWQ9XCJ7JT0gJC5pZCAlfVwiIHRpdGxlPVwieyU9ICQudGl0bGVUZXh0ICV9XCIgY2xhc3M9XCJvdmVydGhyb3cgbGlzdCB7JT0gJC5jbHMgJX1cIiB7JSBpZiAoJC5yZXNvdXJjZUtpbmQpIHsgJX1kYXRhLXJlc291cmNlLWtpbmQ9XCJ7JT0gJC5yZXNvdXJjZUtpbmQgJX1cInslIH0gJX0+JyxcclxuICAgICc8ZGl2IGRhdGEtZG9qby1hdHRhY2gtcG9pbnQ9XCJzZWFyY2hOb2RlXCI+PC9kaXY+JyxcclxuICAgICc8ZGl2IGNsYXNzPVwib3ZlcnRocm93IHNjcm9sbGVyXCIgZGF0YS1kb2pvLWF0dGFjaC1wb2ludD1cInNjcm9sbGVyTm9kZVwiPicsXHJcbiAgICAneyUhICQuZW1wdHlTZWxlY3Rpb25UZW1wbGF0ZSAlfScsXHJcbiAgICAnPHVsIGNsYXNzPVwibGlzdC1jb250ZW50XCIgZGF0YS1kb2pvLWF0dGFjaC1wb2ludD1cImNvbnRlbnROb2RlXCI+PC91bD4nLFxyXG4gICAgJ3slISAkLm1vcmVUZW1wbGF0ZSAlfScsXHJcbiAgICAneyUhICQubGlzdEFjdGlvblRlbXBsYXRlICV9JyxcclxuICAgICc8L2Rpdj4nLFxyXG4gICAgJzwvZGl2PicsXHJcbiAgXSksXHJcbiAgLyoqXHJcbiAgICogQHByb3BlcnR5IHtTaW1wbGF0ZX1cclxuICAgKiBUaGUgdGVtcGxhdGUgdXNlZCB0byByZW5kZXIgdGhlIGxvYWRpbmcgbWVzc2FnZSB3aGVuIHRoZSB2aWV3IGlzIHJlcXVlc3RpbmcgbW9yZSBkYXRhLlxyXG4gICAqXHJcbiAgICogVGhlIGRlZmF1bHQgdGVtcGxhdGUgdXNlcyB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XHJcbiAgICpcclxuICAgKiAgICAgIG5hbWUgICAgICAgICAgICAgICAgZGVzY3JpcHRpb25cclxuICAgKiAgICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgKiAgICAgIGxvYWRpbmdUZXh0ICAgICAgICAgVGhlIHRleHQgdG8gZGlzcGxheSB3aGlsZSBsb2FkaW5nLlxyXG4gICAqL1xyXG4gIGxvYWRpbmdUZW1wbGF0ZTogbmV3IFNpbXBsYXRlKFtcclxuICAgICc8ZGl2IGNsYXNzPVwiYnVzeUluZGljYXRvcl9fY29udGFpbmVyIGJ1c3lJbmRpY2F0b3ItLWFjdGl2ZVwiIGFyaWEtbGl2ZT1cInBvbGl0ZVwiPicsXHJcbiAgICAgICc8ZGl2IGNsYXNzPVwiYnVzeUluZGljYXRvciBidXN5SW5kaWNhdG9yLS1sYXJnZVwiPicsXHJcbiAgICAgICAgJzxkaXYgY2xhc3M9XCJidXN5SW5kaWNhdG9yX19iYXIgYnVzeUluZGljYXRvcl9fYmFyLS1sYXJnZSBidXN5SW5kaWNhdG9yX19iYXItLW9uZVwiPjwvZGl2PicsXHJcbiAgICAgICAgJzxkaXYgY2xhc3M9XCJidXN5SW5kaWNhdG9yX19iYXIgYnVzeUluZGljYXRvcl9fYmFyLS1sYXJnZSBidXN5SW5kaWNhdG9yX19iYXItLXR3b1wiPjwvZGl2PicsXHJcbiAgICAgICAgJzxkaXYgY2xhc3M9XCJidXN5SW5kaWNhdG9yX19iYXIgYnVzeUluZGljYXRvcl9fYmFyLS1sYXJnZSBidXN5SW5kaWNhdG9yX19iYXItLXRocmVlXCI+PC9kaXY+JyxcclxuICAgICAgICAnPGRpdiBjbGFzcz1cImJ1c3lJbmRpY2F0b3JfX2JhciBidXN5SW5kaWNhdG9yX19iYXItLWxhcmdlIGJ1c3lJbmRpY2F0b3JfX2Jhci0tZm91clwiPjwvZGl2PicsXHJcbiAgICAgICAgJzxkaXYgY2xhc3M9XCJidXN5SW5kaWNhdG9yX19iYXIgYnVzeUluZGljYXRvcl9fYmFyLS1sYXJnZSBidXN5SW5kaWNhdG9yX19iYXItLWZpdmVcIj48L2Rpdj4nLFxyXG4gICAgICAnPC9kaXY+JyxcclxuICAgICAgJzxzcGFuIGNsYXNzPVwiYnVzeUluZGljYXRvcl9fbGFiZWxcIj57JTogJC5sb2FkaW5nVGV4dCAlfTwvc3Bhbj4nLFxyXG4gICAgJzwvZGl2PicsXHJcbiAgXSksXHJcbiAgLyoqXHJcbiAgICogQHByb3BlcnR5IHtTaW1wbGF0ZX1cclxuICAgKiBUaGUgdGVtcGxhdGUgdXNlZCB0byByZW5kZXIgdGhlIHBhZ2VyIGF0IHRoZSBib3R0b20gb2YgdGhlIHZpZXcuICBUaGlzIHRlbXBsYXRlIGlzIG5vdCBkaXJlY3RseSByZW5kZXJlZCwgYnV0IGlzXHJcbiAgICogaW5jbHVkZWQgaW4ge0BsaW5rICN2aWV3VGVtcGxhdGV9LlxyXG4gICAqXHJcbiAgICogVGhlIGRlZmF1bHQgdGVtcGxhdGUgdXNlcyB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XHJcbiAgICpcclxuICAgKiAgICAgIG5hbWUgICAgICAgICAgICAgICAgZGVzY3JpcHRpb25cclxuICAgKiAgICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgKiAgICAgIG1vcmVUZXh0ICAgICAgICAgICAgVGhlIHRleHQgdG8gZGlzcGxheSBvbiB0aGUgbW9yZSBidXR0b24uXHJcbiAgICpcclxuICAgKiBUaGUgZGVmYXVsdCB0ZW1wbGF0ZSBleHBvc2VzIHRoZSBmb2xsb3dpbmcgYWN0aW9uczpcclxuICAgKlxyXG4gICAqICogbW9yZVxyXG4gICAqL1xyXG4gIG1vcmVUZW1wbGF0ZTogbmV3IFNpbXBsYXRlKFtcclxuICAgICc8ZGl2IGNsYXNzPVwibGlzdC1tb3JlXCIgZGF0YS1kb2pvLWF0dGFjaC1wb2ludD1cIm1vcmVOb2RlXCI+JyxcclxuICAgICc8ZGl2IGNsYXNzPVwibGlzdC1yZW1haW5pbmdcIj48c3BhbiBkYXRhLWRvam8tYXR0YWNoLXBvaW50PVwicmVtYWluaW5nQ29udGVudE5vZGVcIj48L3NwYW4+PC9kaXY+JyxcclxuICAgICc8YnV0dG9uIGNsYXNzPVwiYnV0dG9uXCIgZGF0YS1hY3Rpb249XCJtb3JlXCI+JyxcclxuICAgICc8c3Bhbj57JT0gJC5tb3JlVGV4dCAlfTwvc3Bhbj4nLFxyXG4gICAgJzwvYnV0dG9uPicsXHJcbiAgICAnPC9kaXY+JyxcclxuICBdKSxcclxuICAvKipcclxuICAgKiBAcHJvcGVydHkge1NpbXBsYXRlfVxyXG4gICAqIFRlbXBsYXRlIHVzZWQgb24gbG9va3VwcyB0byBoYXZlIGVtcHR5IFNlbGVjdGlvbiBvcHRpb24uXHJcbiAgICogVGhpcyB0ZW1wbGF0ZSBpcyBub3QgZGlyZWN0bHkgcmVuZGVyZWQgYnV0IGluY2x1ZGVkIGluIHtAbGluayAjdmlld1RlbXBsYXRlfS5cclxuICAgKlxyXG4gICAqIFRoZSBkZWZhdWx0IHRlbXBsYXRlIHVzZXMgdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxyXG4gICAqXHJcbiAgICogICAgICBuYW1lICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uXHJcbiAgICogICAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICogICAgICBlbXB0eVNlbGVjdGlvblRleHQgIFRoZSB0ZXh0IHRvIGRpc3BsYXkgb24gdGhlIGVtcHR5IFNlbGVjdGlvbiBidXR0b24uXHJcbiAgICpcclxuICAgKiBUaGUgZGVmYXVsdCB0ZW1wbGF0ZSBleHBvc2VzIHRoZSBmb2xsb3dpbmcgYWN0aW9uczpcclxuICAgKlxyXG4gICAqICogZW1wdHlTZWxlY3Rpb25cclxuICAgKi9cclxuICBlbXB0eVNlbGVjdGlvblRlbXBsYXRlOiBuZXcgU2ltcGxhdGUoW1xyXG4gICAgJzxkaXYgY2xhc3M9XCJsaXN0LWVtcHR5LW9wdFwiIGRhdGEtZG9qby1hdHRhY2gtcG9pbnQ9XCJlbXB0eVNlbGVjdGlvbk5vZGVcIj4nLFxyXG4gICAgJzxidXR0b24gY2xhc3M9XCJidXR0b25cIiBkYXRhLWFjdGlvbj1cImVtcHR5U2VsZWN0aW9uXCI+JyxcclxuICAgICc8c3Bhbj57JT0gJC5lbXB0eVNlbGVjdGlvblRleHQgJX08L3NwYW4+JyxcclxuICAgICc8L2J1dHRvbj4nLFxyXG4gICAgJzwvZGl2PicsXHJcbiAgXSksXHJcbiAgLyoqXHJcbiAgICogQHByb3BlcnR5IHtTaW1wbGF0ZX1cclxuICAgKiBUaGUgdGVtcGxhdGUgdXNlZCB0byByZW5kZXIgYSByb3cgaW4gdGhlIHZpZXcuICBUaGlzIHRlbXBsYXRlIGluY2x1ZGVzIHtAbGluayAjaXRlbVRlbXBsYXRlfS5cclxuICAgKi9cclxuICByb3dUZW1wbGF0ZTogbmV3IFNpbXBsYXRlKFtcclxuICAgICc8bGkgZGF0YS1hY3Rpb249XCJhY3RpdmF0ZUVudHJ5XCIgZGF0YS1rZXk9XCJ7JT0gJFskJC5pZFByb3BlcnR5XSAlfVwiIGRhdGEtZGVzY3JpcHRvcj1cInslOiAkWyQkLmxhYmVsUHJvcGVydHldICV9XCI+JyxcclxuICAgICc8YnV0dG9uIGRhdGEtYWN0aW9uPVwic2VsZWN0RW50cnlcIiBjbGFzcz1cImxpc3QtaXRlbS1zZWxlY3RvciBidXR0b25cIj4nLFxyXG4gICAgJ3slIGlmICgkJC5zZWxlY3RJY29uQ2xhc3MpIHsgJX0nLFxyXG4gICAgJzxzcGFuIGNsYXNzPVwieyU9ICQkLnNlbGVjdEljb25DbGFzcyAlfVwiPjwvc3Bhbj4nLFxyXG4gICAgJ3slIH0gZWxzZSBpZiAoJCQuaWNvbiB8fCAkJC5zZWxlY3RJY29uKSB7ICV9JyxcclxuICAgICc8aW1nIHNyYz1cInslPSAkJC5pY29uIHx8ICQkLnNlbGVjdEljb24gJX1cIiBjbGFzcz1cImljb25cIiAvPicsXHJcbiAgICAneyUgfSAlfScsXHJcbiAgICAnPC9idXR0b24+JyxcclxuICAgICc8ZGl2IGNsYXNzPVwibGlzdC1pdGVtLWNvbnRlbnRcIiBkYXRhLXNuYXAtaWdub3JlPVwidHJ1ZVwiPnslISAkJC5pdGVtVGVtcGxhdGUgJX08L2Rpdj4nLFxyXG4gICAgJzwvbGk+JyxcclxuICBdKSxcclxuICAvKipcclxuICAgKiBAY2ZnIHtTaW1wbGF0ZX1cclxuICAgKiBUaGUgdGVtcGxhdGUgdXNlZCB0byByZW5kZXIgdGhlIGNvbnRlbnQgb2YgYSByb3cuICBUaGlzIHRlbXBsYXRlIGlzIG5vdCBkaXJlY3RseSByZW5kZXJlZCwgYnV0IGlzXHJcbiAgICogaW5jbHVkZWQgaW4ge0BsaW5rICNyb3dUZW1wbGF0ZX0uXHJcbiAgICpcclxuICAgKiBUaGlzIHByb3BlcnR5IHNob3VsZCBiZSBvdmVycmlkZGVuIGluIHRoZSBkZXJpdmVkIGNsYXNzLlxyXG4gICAqIEB0ZW1wbGF0ZVxyXG4gICAqL1xyXG4gIGl0ZW1UZW1wbGF0ZTogbmV3IFNpbXBsYXRlKFtcclxuICAgICc8aDM+eyU6ICRbJCQubGFiZWxQcm9wZXJ0eV0gJX08L2gzPicsXHJcbiAgICAnPGg0PnslOiAkWyQkLmlkUHJvcGVydHldICV9PC9oND4nLFxyXG4gIF0pLFxyXG4gIC8qKlxyXG4gICAqIEBwcm9wZXJ0eSB7U2ltcGxhdGV9XHJcbiAgICogVGhlIHRlbXBsYXRlIHVzZWQgdG8gcmVuZGVyIGEgbWVzc2FnZSBpZiB0aGVyZSBpcyBubyBkYXRhIGF2YWlsYWJsZS5cclxuICAgKiBUaGUgZGVmYXVsdCB0ZW1wbGF0ZSB1c2VzIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcclxuICAgKlxyXG4gICAqICAgICAgbmFtZSAgICAgICAgICAgICAgICBkZXNjcmlwdGlvblxyXG4gICAqICAgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAqICAgICAgbm9EYXRhVGV4dCAgICAgICAgICBUaGUgdGV4dCB0byBkaXNwbGF5IGlmIHRoZXJlIGlzIG5vIGRhdGEuXHJcbiAgICovXHJcbiAgbm9EYXRhVGVtcGxhdGU6IG5ldyBTaW1wbGF0ZShbXHJcbiAgICAnPGxpIGNsYXNzPVwibm8tZGF0YVwiPicsXHJcbiAgICAnPGgyPnslPSAkLm5vRGF0YVRleHQgJX08L2gyPicsXHJcbiAgICAnPC9saT4nLFxyXG4gIF0pLFxyXG4gIC8qKlxyXG4gICAqIEBwcm9wZXJ0eSB7U2ltcGxhdGV9XHJcbiAgICogVGhlIHRlbXBsYXRlIHVzZWQgdG8gcmVuZGVyIHRoZSBzaW5nbGUgbGlzdCBhY3Rpb24gcm93LlxyXG4gICAqL1xyXG4gIGxpc3RBY3Rpb25UZW1wbGF0ZTogbmV3IFNpbXBsYXRlKFtcclxuICAgICc8bGkgZGF0YS1kb2pvLWF0dGFjaC1wb2ludD1cImFjdGlvbnNOb2RlXCIgY2xhc3M9XCJhY3Rpb25zLXJvd1wiPjwvbGk+JyxcclxuICBdKSxcclxuICAvKipcclxuICAgKiBAcHJvcGVydHkge1NpbXBsYXRlfVxyXG4gICAqIFRoZSB0ZW1wbGF0ZSB1c2VkIHRvIHJlbmRlciBhIGxpc3QgYWN0aW9uIGl0ZW0uXHJcbiAgICogVGhlIGRlZmF1bHQgdGVtcGxhdGUgdXNlcyB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XHJcbiAgICpcclxuICAgKiAgICAgIG5hbWUgICAgICAgICAgICAgICAgZGVzY3JpcHRpb25cclxuICAgKiAgICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgKiAgICAgIGFjdGlvbkluZGV4ICAgICAgICAgVGhlIGNvcnJlbGF0aW5nIGluZGV4IG51bWJlciBvZiB0aGUgYWN0aW9uIGNvbGxlY3Rpb25cclxuICAgKiAgICAgIHRpdGxlICAgICAgICAgICAgICAgVGV4dCB1c2VkIGZvciBBUklBLWxhYmVsaW5nXHJcbiAgICogICAgICBpY29uICAgICAgICAgICAgICAgIFJlbGF0aXZlIHBhdGggdG8gdGhlIGljb24gdG8gdXNlXHJcbiAgICogICAgICBjbHMgICAgICAgICAgICAgICAgIENTUyBjbGFzcyB0byB1c2UgaW5zdGVhZCBvZiBhbiBpY29uXHJcbiAgICogICAgICBpZCAgICAgICAgICAgICAgICAgIFVuaXF1ZSBuYW1lIG9mIGFjdGlvbiwgYWxzbyB1c2VkIGZvciBhbHQgaW1hZ2UgdGV4dFxyXG4gICAqICAgICAgbGFiZWwgICAgICAgICAgICAgICBUZXh0IGFkZGVkIGJlbG93IHRoZSBpY29uXHJcbiAgICovXHJcbiAgbGlzdEFjdGlvbkl0ZW1UZW1wbGF0ZTogbmV3IFNpbXBsYXRlKFtcclxuICAgICc8YnV0dG9uIGRhdGEtYWN0aW9uPVwiaW52b2tlQWN0aW9uSXRlbVwiIGRhdGEtaWQ9XCJ7JT0gJC5hY3Rpb25JbmRleCAlfVwiIGFyaWEtbGFiZWw9XCJ7JTogJC50aXRsZSB8fCAkLmlkICV9XCI+JyxcclxuICAgICd7JSBpZiAoJC5jbHMpIHsgJX0nLFxyXG4gICAgJzxzcGFuIGNsYXNzPVwieyU9ICQuY2xzICV9XCI+PC9zcGFuPicsXHJcbiAgICAneyUgfSBlbHNlIGlmICgkLmljb24pIHsgJX0nLFxyXG4gICAgJzxpbWcgc3JjPVwieyU9ICQuaWNvbiAlfVwiIGFsdD1cInslPSAkLmlkICV9XCIgLz4nLFxyXG4gICAgJ3slIH0gZWxzZSB7ICV9JyxcclxuICAgICc8c3BhbiBjbGFzcz1cImZhIGZhLWxldmVsLWRvd24gZmEtMnhcIj48L3NwYW4+JyxcclxuICAgICd7JSB9ICV9JyxcclxuICAgICc8bGFiZWw+eyU6ICQubGFiZWwgJX08L2xhYmVsPicsXHJcbiAgICAnPC9idXR0b24+JyxcclxuICBdKSxcclxuICAvKipcclxuICAgKiBAcHJvcGVydHkge0hUTUxFbGVtZW50fVxyXG4gICAqIEF0dGFjaCBwb2ludCBmb3IgdGhlIG1haW4gdmlldyBjb250ZW50XHJcbiAgICovXHJcbiAgY29udGVudE5vZGU6IG51bGwsXHJcbiAgLyoqXHJcbiAgICogQHByb3BlcnR5IHtIVE1MRWxlbWVudH1cclxuICAgKiBBdHRhY2ggcG9pbnQgZm9yIHRoZSByZW1haW5pbmcgZW50cmllcyBjb250ZW50XHJcbiAgICovXHJcbiAgcmVtYWluaW5nQ29udGVudE5vZGU6IG51bGwsXHJcbiAgLyoqXHJcbiAgICogQHByb3BlcnR5IHtIVE1MRWxlbWVudH1cclxuICAgKiBBdHRhY2ggcG9pbnQgZm9yIHRoZSBzZWFyY2ggd2lkZ2V0XHJcbiAgICovXHJcbiAgc2VhcmNoTm9kZTogbnVsbCxcclxuICAvKipcclxuICAgKiBAcHJvcGVydHkge0hUTUxFbGVtZW50fVxyXG4gICAqIEF0dGFjaCBwb2ludCBmb3IgdGhlIGVtcHR5LCBvciBubyBzZWxlY3Rpb24sIGNvbnRhaW5lclxyXG4gICAqL1xyXG4gIGVtcHR5U2VsZWN0aW9uTm9kZTogbnVsbCxcclxuICAvKipcclxuICAgKiBAcHJvcGVydHkge0hUTUxFbGVtZW50fVxyXG4gICAqIEF0dGFjaCBwb2ludCBmb3IgdGhlIHJlbWFpbmluZyBlbnRyaWVzIGNvbnRhaW5lclxyXG4gICAqL1xyXG4gIHJlbWFpbmluZ05vZGU6IG51bGwsXHJcbiAgLyoqXHJcbiAgICogQHByb3BlcnR5IHtIVE1MRWxlbWVudH1cclxuICAgKiBBdHRhY2ggcG9pbnQgZm9yIHRoZSByZXF1ZXN0IG1vcmUgZW50cmllcyBjb250YWluZXJcclxuICAgKi9cclxuICBtb3JlTm9kZTogbnVsbCxcclxuICAvKipcclxuICAgKiBAcHJvcGVydHkge0hUTUxFbGVtZW50fVxyXG4gICAqIEF0dGFjaCBwb2ludCBmb3IgdGhlIGxpc3QgYWN0aW9ucyBjb250YWluZXJcclxuICAgKi9cclxuICBhY3Rpb25zTm9kZTogbnVsbCxcclxuXHJcbiAgLyoqXHJcbiAgICogQGNmZyB7U3RyaW5nfSBpZFxyXG4gICAqIFRoZSBpZCBmb3IgdGhlIHZpZXcsIGFuZCBpdCdzIG1haW4gRE9NIGVsZW1lbnQuXHJcbiAgICovXHJcbiAgaWQ6ICdnZW5lcmljX2xpc3QnLFxyXG5cclxuICAvKipcclxuICAgKiBAY2ZnIHtTdHJpbmd9XHJcbiAgICogVGhlIFNEYXRhIHJlc291cmNlIGtpbmQgdGhlIHZpZXcgaXMgcmVzcG9uc2libGUgZm9yLiAgVGhpcyB3aWxsIGJlIHVzZWQgYXMgdGhlIGRlZmF1bHQgcmVzb3VyY2Uga2luZFxyXG4gICAqIGZvciBhbGwgU0RhdGEgcmVxdWVzdHMuXHJcbiAgICovXHJcbiAgcmVzb3VyY2VLaW5kOiAnJyxcclxuICBzdG9yZTogbnVsbCxcclxuICBlbnRyaWVzOiBudWxsLFxyXG4gIC8qKlxyXG4gICAqIEBwcm9wZXJ0eSB7TnVtYmVyfVxyXG4gICAqIFRoZSBudW1iZXIgb2YgZW50cmllcyB0byByZXF1ZXN0IHBlciBTRGF0YSBwYXlsb2FkLlxyXG4gICAqL1xyXG4gIHBhZ2VTaXplOiAyMCxcclxuICAvKipcclxuICAgKiBAcHJvcGVydHkge0Jvb2xlYW59XHJcbiAgICogQ29udHJvbHMgdGhlIGFkZGl0aW9uIG9mIGEgc2VhcmNoIHdpZGdldC5cclxuICAgKi9cclxuICBlbmFibGVTZWFyY2g6IHRydWUsXHJcbiAgLyoqXHJcbiAgICogQHByb3BlcnR5IHtCb29sZWFufVxyXG4gICAqIEZsYWcgdGhhdCBkZXRlcm1pbmVzIGlmIHRoZSBsaXN0IGFjdGlvbnMgcGFuZWwgc2hvdWxkIGJlIGluIHVzZS5cclxuICAgKi9cclxuICBlbmFibGVBY3Rpb25zOiBmYWxzZSxcclxuICAvKipcclxuICAgKiBAcHJvcGVydHkge0Jvb2xlYW59XHJcbiAgICogQ29udHJvbHMgdGhlIHZpc2liaWxpdHkgb2YgdGhlIHNlYXJjaCB3aWRnZXQuXHJcbiAgICovXHJcbiAgaGlkZVNlYXJjaDogZmFsc2UsXHJcbiAgLyoqXHJcbiAgICogQHByb3BlcnR5IHtCb29sZWFufVxyXG4gICAqIFRydWUgdG8gYWxsb3cgc2VsZWN0aW9ucyB2aWEgdGhlIFNlbGVjdGlvbk1vZGVsIGluIHRoZSB2aWV3LlxyXG4gICAqL1xyXG4gIGFsbG93U2VsZWN0aW9uOiBmYWxzZSxcclxuICAvKipcclxuICAgKiBAcHJvcGVydHkge0Jvb2xlYW59XHJcbiAgICogVHJ1ZSB0byBjbGVhciB0aGUgc2VsZWN0aW9uIG1vZGVsIHdoZW4gdGhlIHZpZXcgaXMgc2hvd24uXHJcbiAgICovXHJcbiAgYXV0b0NsZWFyU2VsZWN0aW9uOiB0cnVlLFxyXG4gIC8qKlxyXG4gICAqIEBwcm9wZXJ0eSB7U3RyaW5nL1ZpZXd9XHJcbiAgICogVGhlIGlkIG9mIHRoZSBkZXRhaWwgdmlldywgb3IgdmlldyBpbnN0YW5jZSwgdG8gc2hvdyB3aGVuIGEgcm93IGlzIGNsaWNrZWQuXHJcbiAgICovXHJcbiAgZGV0YWlsVmlldzogbnVsbCxcclxuXHJcbiAgLyoqXHJcbiAgICogQHByb3BlcnR5IHtTdHJpbmd9XHJcbiAgICogVGhlIGlkIG9mIHRoZSBjb25maWd1cmUgdmlldyBmb3IgcXVpY2sgYWN0aW9uIHByZWZlcmVuY2VzXHJcbiAgICovXHJcbiAgcXVpY2tBY3Rpb25Db25maWd1cmVWaWV3OiAnY29uZmlndXJlX3F1aWNrYWN0aW9ucycsXHJcbiAgLyoqXHJcbiAgICogQHByb3BlcnR5IHtTdHJpbmd9XHJcbiAgICogVGhlIHZpZXcgaWQgdG8gc2hvdyBpZiB0aGVyZSBpcyBubyBgaW5zZXJ0Vmlld2Agc3BlY2lmaWVkLCB3aGVuXHJcbiAgICogdGhlIHtAbGluayAjbmF2aWdhdGVUb0luc2VydFZpZXd9IGFjdGlvbiBpcyBpbnZva2VkLlxyXG4gICAqL1xyXG4gIGVkaXRWaWV3OiBudWxsLFxyXG4gIC8qKlxyXG4gICAqIEBwcm9wZXJ0eSB7U3RyaW5nfVxyXG4gICAqIFRoZSB2aWV3IGlkIHRvIHNob3cgd2hlbiB0aGUge0BsaW5rICNuYXZpZ2F0ZVRvSW5zZXJ0Vmlld30gYWN0aW9uIGlzIGludm9rZWQuXHJcbiAgICovXHJcbiAgaW5zZXJ0VmlldzogbnVsbCxcclxuICAvKipcclxuICAgKiBAcHJvcGVydHkge1N0cmluZ31cclxuICAgKiBUaGUgdmlldyBpZCB0byBzaG93IHdoZW4gdGhlIHtAbGluayAjbmF2aWdhdGVUb0NvbnRleHRWaWV3fSBhY3Rpb24gaXMgaW52b2tlZC5cclxuICAgKi9cclxuICBjb250ZXh0VmlldzogZmFsc2UsXHJcbiAgLyoqXHJcbiAgICogQHByb3BlcnR5IHtPYmplY3R9XHJcbiAgICogQSBkaWN0aW9uYXJ5IG9mIGhhc2ggdGFnIHNlYXJjaCBxdWVyaWVzLiAgVGhlIGtleSBpcyB0aGUgaGFzaCB0YWcsIHdpdGhvdXQgdGhlIHN5bWJvbCwgYW5kIHRoZSB2YWx1ZSBpc1xyXG4gICAqIGVpdGhlciBhIHF1ZXJ5IHN0cmluZywgb3IgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBxdWVyeSBzdHJpbmcuXHJcbiAgICovXHJcbiAgaGFzaFRhZ1F1ZXJpZXM6IG51bGwsXHJcbiAgLyoqXHJcbiAgICogVGhlIHRleHQgZGlzcGxheWVkIGluIHRoZSBtb3JlIGJ1dHRvbi5cclxuICAgKiBAdHlwZSB7U3RyaW5nfVxyXG4gICAqL1xyXG4gIG1vcmVUZXh0OiByZXNvdXJjZS5tb3JlVGV4dCxcclxuICAvKipcclxuICAgKiBAcHJvcGVydHkge1N0cmluZ31cclxuICAgKiBUaGUgdGV4dCBkaXNwbGF5ZWQgaW4gdGhlIGVtcHR5U2VsZWN0aW9uIGJ1dHRvbi5cclxuICAgKi9cclxuICBlbXB0eVNlbGVjdGlvblRleHQ6IHJlc291cmNlLmVtcHR5U2VsZWN0aW9uVGV4dCxcclxuICAvKipcclxuICAgKiBAcHJvcGVydHkge1N0cmluZ31cclxuICAgKiBUaGUgdGV4dCBkaXNwbGF5ZWQgYXMgdGhlIGRlZmF1bHQgdGl0bGUuXHJcbiAgICovXHJcbiAgdGl0bGVUZXh0OiByZXNvdXJjZS50aXRsZVRleHQsXHJcbiAgLyoqXHJcbiAgICogQHByb3BlcnR5IHtTdHJpbmd9XHJcbiAgICogVGhlIHRleHQgZGlzcGxheWVkIGZvciBxdWljayBhY3Rpb24gY29uZmlndXJlLlxyXG4gICAqL1xyXG4gIGNvbmZpZ3VyZVRleHQ6IHJlc291cmNlLmNvbmZpZ3VyZVRleHQsXHJcbiAgLyoqXHJcbiAgICogQHByb3BlcnR5IHtTdHJpbmd9XHJcbiAgICogVGhlIGVycm9yIG1lc3NhZ2UgdG8gZGlzcGxheSBpZiByZW5kZXJpbmcgYSByb3cgdGVtcGxhdGUgaXMgbm90IHN1Y2Nlc3NmdWwuXHJcbiAgICovXHJcbiAgZXJyb3JSZW5kZXJUZXh0OiByZXNvdXJjZS5lcnJvclJlbmRlclRleHQsXHJcbiAgLyoqXHJcbiAgICogQHByb3BlcnR5IHtTaW1wbGF0ZX1cclxuICAgKlxyXG4gICAqL1xyXG4gIHJvd1RlbXBsYXRlRXJyb3I6IG5ldyBTaW1wbGF0ZShbXHJcbiAgICAnPGxpIGRhdGEtYWN0aW9uPVwiYWN0aXZhdGVFbnRyeVwiIGRhdGEta2V5PVwieyU9ICRbJCQuaWRQcm9wZXJ0eV0gJX1cIiBkYXRhLWRlc2NyaXB0b3I9XCJ7JTogJFskJC5sYWJlbFByb3BlcnR5XSAlfVwiPicsXHJcbiAgICAnPGRpdiBjbGFzcz1cImxpc3QtaXRlbS1jb250ZW50XCIgZGF0YS1zbmFwLWlnbm9yZT1cInRydWVcIj57JTogJCQuZXJyb3JSZW5kZXJUZXh0ICV9PC9kaXY+JyxcclxuICAgICc8L2xpPicsXHJcbiAgXSksXHJcbiAgLyoqXHJcbiAgICogQHByb3BlcnR5IHtTdHJpbmd9XHJcbiAgICogVGhlIGZvcm1hdCBzdHJpbmcgZm9yIHRoZSB0ZXh0IGRpc3BsYXllZCBmb3IgdGhlIHJlbWFpbmluZyByZWNvcmQgY291bnQuICBUaGlzIGlzIHVzZWQgaW4gYSB7QGxpbmsgU3RyaW5nI2Zvcm1hdH0gY2FsbC5cclxuICAgKi9cclxuICByZW1haW5pbmdUZXh0OiByZXNvdXJjZS5yZW1haW5pbmdUZXh0LFxyXG4gIC8qKlxyXG4gICAqIEBwcm9wZXJ0eSB7U3RyaW5nfVxyXG4gICAqIFRoZSB0ZXh0IGRpc3BsYXllZCBvbiB0aGUgY2FuY2VsIGJ1dHRvbi5cclxuICAgKiBAZGVwcmVjYXRlZFxyXG4gICAqL1xyXG4gIGNhbmNlbFRleHQ6IHJlc291cmNlLmNhbmNlbFRleHQsXHJcbiAgLyoqXHJcbiAgICogQHByb3BlcnR5IHtTdHJpbmd9XHJcbiAgICogVGhlIHRleHQgZGlzcGxheWVkIG9uIHRoZSBpbnNlcnQgYnV0dG9uLlxyXG4gICAqIEBkZXByZWNhdGVkXHJcbiAgICovXHJcbiAgaW5zZXJ0VGV4dDogcmVzb3VyY2UuaW5zZXJ0VGV4dCxcclxuICAvKipcclxuICAgKiBAcHJvcGVydHkge1N0cmluZ31cclxuICAgKiBUaGUgdGV4dCBkaXNwbGF5ZWQgd2hlbiBubyByZWNvcmRzIGFyZSBhdmFpbGFibGUuXHJcbiAgICovXHJcbiAgbm9EYXRhVGV4dDogcmVzb3VyY2Uubm9EYXRhVGV4dCxcclxuICAvKipcclxuICAgKiBAcHJvcGVydHkge1N0cmluZ31cclxuICAgKiBUaGUgdGV4dCBkaXNwbGF5ZWQgd2hlbiBkYXRhIGlzIGJlaW5nIHJlcXVlc3RlZC5cclxuICAgKi9cclxuICBsb2FkaW5nVGV4dDogcmVzb3VyY2UubG9hZGluZ1RleHQsXHJcbiAgLyoqXHJcbiAgICogQHByb3BlcnR5IHtTdHJpbmd9XHJcbiAgICogVGhlIGN1c3RvbWl6YXRpb24gaWRlbnRpZmllciBmb3IgdGhpcyBjbGFzcy4gV2hlbiBhIGN1c3RvbWl6YXRpb24gaXMgcmVnaXN0ZXJlZCBpdCBpcyBwYXNzZWRcclxuICAgKiBhIHBhdGgvaWRlbnRpZmllciB3aGljaCBpcyB0aGVuIG1hdGNoZWQgdG8gdGhpcyBwcm9wZXJ0eS5cclxuICAgKi9cclxuICBjdXN0b21pemF0aW9uU2V0OiAnbGlzdCcsXHJcbiAgLyoqXHJcbiAgICogQHByb3BlcnR5IHtTdHJpbmd9XHJcbiAgICogVGhlIHJlbGF0aXZlIHBhdGggdG8gdGhlIGNoZWNrbWFyayBvciBzZWxlY3QgaWNvbiBmb3Igcm93IHNlbGVjdG9yXHJcbiAgICovXHJcbiAgc2VsZWN0SWNvbjogJycsXHJcbiAgLyoqXHJcbiAgICogQHByb3BlcnR5IHtTdHJpbmd9XHJcbiAgICogQ1NTIGNsYXNzIHRvIHVzZSBmb3IgY2hlY2ttYXJrIG9yIHNlbGVjdCBpY29uIGZvciByb3cgc2VsZWN0b3IuIE92ZXJyaWRlcyBzZWxlY3RJY29uLlxyXG4gICAqL1xyXG4gIHNlbGVjdEljb25DbGFzczogJ2ZhIGZhLWNoZWNrIGZhLWxnJyxcclxuICAvKipcclxuICAgKiBAcHJvcGVydHkge09iamVjdH1cclxuICAgKiBUaGUgc2VhcmNoIHdpZGdldCBpbnN0YW5jZSBmb3IgdGhlIHZpZXdcclxuICAgKi9cclxuICBzZWFyY2hXaWRnZXQ6IG51bGwsXHJcbiAgLyoqXHJcbiAgICogQHByb3BlcnR5IHtTZWFyY2hXaWRnZXR9XHJcbiAgICogVGhlIGNsYXNzIGNvbnN0cnVjdG9yIHRvIHVzZSBmb3IgdGhlIHNlYXJjaCB3aWRnZXRcclxuICAgKi9cclxuICBzZWFyY2hXaWRnZXRDbGFzczogU2VhcmNoV2lkZ2V0LFxyXG4gIC8qKlxyXG4gICAqIEBwcm9wZXJ0eSB7Qm9vbGVhbn1cclxuICAgKiBGbGFnIHRvIGluZGljYXRlIHRoZSBkZWZhdWx0IHNlYXJjaCB0ZXJtIGhhcyBiZWVuIHNldC5cclxuICAgKi9cclxuICBkZWZhdWx0U2VhcmNoVGVybVNldDogZmFsc2UsXHJcblxyXG4gIC8qKlxyXG4gICAqIEBwcm9wZXJ0eSB7U3RyaW5nfVxyXG4gICAqIFRoZSBkZWZhdWx0IHNlYXJjaCB0ZXJtIHRvIHVzZVxyXG4gICAqL1xyXG4gIGRlZmF1bHRTZWFyY2hUZXJtOiAnJyxcclxuICAvKipcclxuICAgKiBAcHJvcGVydHkge09iamVjdH1cclxuICAgKiBUaGUgc2VsZWN0aW9uIG1vZGVsIGZvciB0aGUgdmlld1xyXG4gICAqL1xyXG4gIF9zZWxlY3Rpb25Nb2RlbDogbnVsbCxcclxuICAvKipcclxuICAgKiBAcHJvcGVydHkge09iamVjdH1cclxuICAgKiBUaGUgc2VsZWN0aW9uIGV2ZW50IGNvbm5lY3Rpb25zXHJcbiAgICovXHJcbiAgX3NlbGVjdGlvbkNvbm5lY3RzOiBudWxsLFxyXG4gIC8qKlxyXG4gICAqIEBwcm9wZXJ0eSB7T2JqZWN0fVxyXG4gICAqIFRoZSB0b29sYmFyIGxheW91dCBkZWZpbml0aW9uIGZvciBhbGwgdG9vbGJhciBlbnRyaWVzLlxyXG4gICAqL1xyXG4gIHRvb2xzOiBudWxsLFxyXG4gIC8qKlxyXG4gICAqIFRoZSBsaXN0IGFjdGlvbiBsYXlvdXQgZGVmaW5pdGlvbiBmb3IgdGhlIGxpc3QgYWN0aW9uIGJhci5cclxuICAgKi9cclxuICBhY3Rpb25zOiBudWxsLFxyXG4gIC8qKlxyXG4gICAqIEBwcm9wZXJ0eSB7Qm9vbGVhbn0gSWYgdHJ1ZSwgd2lsbCByZW1vdmUgdGhlIGxvYWRpbmcgYnV0dG9uIGFuZCBhdXRvIGZldGNoIG1vcmUgZGF0YSB3aGVuIHRoZSB1c2VyIHNjcm9sbHMgdG8gdGhlIGJvdHRvbSBvZiB0aGUgcGFnZS5cclxuICAgKi9cclxuICBjb250aW51b3VzU2Nyb2xsaW5nOiB0cnVlLFxyXG4gIC8qKlxyXG4gICAqIEBwcm9wZXJ0eSB7Qm9vbGVhbn0gSW5kaWNhdGVzIGlmIHRoZSBsaXN0IGlzIGxvYWRpbmdcclxuICAgKi9cclxuICBsaXN0TG9hZGluZzogZmFsc2UsXHJcbiAgdmlld1R5cGU6ICdsaXN0JyxcclxuICAvLyBTdG9yZSBwcm9wZXJ0aWVzXHJcbiAgaXRlbXNQcm9wZXJ0eTogJycsXHJcbiAgaWRQcm9wZXJ0eTogJycsXHJcbiAgbGFiZWxQcm9wZXJ0eTogJycsXHJcbiAgZW50aXR5UHJvcGVydHk6ICcnLFxyXG4gIHZlcnNpb25Qcm9wZXJ0eTogJycsXHJcbiAgLyoqXHJcbiAgICogU2V0dGVyIG1ldGhvZCBmb3IgdGhlIHNlbGVjdGlvbiBtb2RlbCwgYWxzbyBiaW5kcyB0aGUgdmFyaW91cyBzZWxlY3Rpb24gbW9kZWwgc2VsZWN0IGV2ZW50c1xyXG4gICAqIHRvIHRoZSByZXNwZWN0aXZlIExpc3QgZXZlbnQgaGFuZGxlciBmb3IgZWFjaC5cclxuICAgKiBAcGFyYW0ge1NlbGVjdGlvbk1vZGVsfSBzZWxlY3Rpb25Nb2RlbCBUaGUgc2VsZWN0aW9uIG1vZGVsIGluc3RhbmNlIHRvIHNhdmUgdG8gdGhlIHZpZXdcclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIF9zZXRTZWxlY3Rpb25Nb2RlbEF0dHI6IGZ1bmN0aW9uIF9zZXRTZWxlY3Rpb25Nb2RlbEF0dHIoc2VsZWN0aW9uTW9kZWwpIHtcclxuICAgIGlmICh0aGlzLl9zZWxlY3Rpb25Db25uZWN0cykge1xyXG4gICAgICBhcnJheS5mb3JFYWNoKHRoaXMuX3NlbGVjdGlvbkNvbm5lY3RzLCB0aGlzLmRpc2Nvbm5lY3QsIHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX3NlbGVjdGlvbk1vZGVsID0gc2VsZWN0aW9uTW9kZWw7XHJcbiAgICB0aGlzLl9zZWxlY3Rpb25Db25uZWN0cyA9IFtdO1xyXG5cclxuICAgIGlmICh0aGlzLl9zZWxlY3Rpb25Nb2RlbCkge1xyXG4gICAgICB0aGlzLl9zZWxlY3Rpb25Db25uZWN0cy5wdXNoKFxyXG4gICAgICAgIHRoaXMuY29ubmVjdCh0aGlzLl9zZWxlY3Rpb25Nb2RlbCwgJ29uU2VsZWN0JywgdGhpcy5fb25TZWxlY3Rpb25Nb2RlbFNlbGVjdCksXHJcbiAgICAgICAgdGhpcy5jb25uZWN0KHRoaXMuX3NlbGVjdGlvbk1vZGVsLCAnb25EZXNlbGVjdCcsIHRoaXMuX29uU2VsZWN0aW9uTW9kZWxEZXNlbGVjdCksXHJcbiAgICAgICAgdGhpcy5jb25uZWN0KHRoaXMuX3NlbGVjdGlvbk1vZGVsLCAnb25DbGVhcicsIHRoaXMuX29uU2VsZWN0aW9uTW9kZWxDbGVhcilcclxuICAgICAgKTtcclxuICAgIH1cclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIEdldHRlciBubWV0aG9kIGZvciB0aGUgc2VsZWN0aW9uIG1vZGVsXHJcbiAgICogQHJldHVybiB7U2VsZWN0aW9uTW9kZWx9XHJcbiAgICogQHByaXZhdGVcclxuICAgKi9cclxuICBfZ2V0U2VsZWN0aW9uTW9kZWxBdHRyOiBmdW5jdGlvbiBfZ2V0U2VsZWN0aW9uTW9kZWxBdHRyKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3NlbGVjdGlvbk1vZGVsO1xyXG4gIH0sXHJcbiAgY29uc3RydWN0b3I6IGZ1bmN0aW9uIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy5lbnRyaWVzID0ge307XHJcbiAgfSxcclxuICBwb3N0Q3JlYXRlOiBmdW5jdGlvbiBwb3N0Q3JlYXRlKCkge1xyXG4gICAgdGhpcy5pbmhlcml0ZWQoYXJndW1lbnRzKTtcclxuXHJcbiAgICBjb25zdCBzY3JvbGxlck5vZGUgPSB0aGlzLmdldCgnc2Nyb2xsZXInKTtcclxuXHJcbiAgICBpZiAodGhpcy5fc2VsZWN0aW9uTW9kZWwgPT09IG51bGwpIHtcclxuICAgICAgdGhpcy5zZXQoJ3NlbGVjdGlvbk1vZGVsJywgbmV3IENvbmZpZ3VyYWJsZVNlbGVjdGlvbk1vZGVsKCkpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5zdWJzY3JpYmUoJy9hcHAvcmVmcmVzaCcsIHRoaXMuX29uUmVmcmVzaCk7XHJcblxyXG4gICAgaWYgKHRoaXMuZW5hYmxlU2VhcmNoKSB7XHJcbiAgICAgIGNvbnN0IFNlYXJjaFdpZGdldEN0b3IgPSBsYW5nLmlzU3RyaW5nKHRoaXMuc2VhcmNoV2lkZ2V0Q2xhc3MpID8gbGFuZy5nZXRPYmplY3QodGhpcy5zZWFyY2hXaWRnZXRDbGFzcywgZmFsc2UpIDogdGhpcy5zZWFyY2hXaWRnZXRDbGFzcztcclxuXHJcbiAgICAgIHRoaXMuc2VhcmNoV2lkZ2V0ID0gdGhpcy5zZWFyY2hXaWRnZXQgfHwgbmV3IFNlYXJjaFdpZGdldEN0b3Ioe1xyXG4gICAgICAgICdjbGFzcyc6ICdsaXN0LXNlYXJjaCcsXHJcbiAgICAgICAgJ293bmVyJzogdGhpcyxcclxuICAgICAgICAnb25TZWFyY2hFeHByZXNzaW9uJzogdGhpcy5fb25TZWFyY2hFeHByZXNzaW9uLmJpbmQodGhpcyksXHJcbiAgICAgIH0pO1xyXG4gICAgICB0aGlzLnNlYXJjaFdpZGdldC5wbGFjZUF0KHRoaXMuc2VhcmNoTm9kZSwgJ3JlcGxhY2UnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuc2VhcmNoV2lkZ2V0ID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBkb21DbGFzcy50b2dnbGUodGhpcy5kb21Ob2RlLCAnbGlzdC1oaWRlLXNlYXJjaCcsIHRoaXMuaGlkZVNlYXJjaCB8fCAhdGhpcy5lbmFibGVTZWFyY2gpO1xyXG4gICAgdGhpcy5jbGVhcigpO1xyXG5cclxuICAgIHRoaXMuaW5pdFB1bGxUb1JlZnJlc2goc2Nyb2xsZXJOb2RlKTtcclxuICB9LFxyXG4gIHNob3VsZFN0YXJ0UHVsbFRvUmVmcmVzaDogZnVuY3Rpb24gc2hvdWxkU3RhcnRQdWxsVG9SZWZyZXNoKCkge1xyXG4gICAgLy8gR2V0IHRoZSBiYXNlIHJlc3VsdHNcclxuICAgIGNvbnN0IHNob3VsZFN0YXJ0ID0gdGhpcy5pbmhlcml0ZWQoYXJndW1lbnRzKTtcclxuICAgIGNvbnN0IHNlbGVjdGVkID0gZG9tQXR0ci5nZXQodGhpcy5kb21Ob2RlLCAnc2VsZWN0ZWQnKTtcclxuICAgIHJldHVybiBzaG91bGRTdGFydCAmJiBzZWxlY3RlZCA9PT0gJ3RydWUnICYmICF0aGlzLmxpc3RMb2FkaW5nO1xyXG4gIH0sXHJcbiAgZm9yY2VSZWZyZXNoOiBmdW5jdGlvbiBmb3JjZVJlZnJlc2goKSB7XHJcbiAgICB0aGlzLmNsZWFyKCk7XHJcbiAgICB0aGlzLnJlZnJlc2hSZXF1aXJlZCA9IHRydWU7XHJcbiAgICB0aGlzLnJlZnJlc2goKTtcclxuICB9LFxyXG4gIG9uUHVsbFRvUmVmcmVzaENvbXBsZXRlOiBmdW5jdGlvbiBvblB1bGxUb1JlZnJlc2hDb21wbGV0ZSgpIHtcclxuICAgIHRoaXMuZm9yY2VSZWZyZXNoKCk7XHJcbiAgfSxcclxuICBvbkNvbm5lY3Rpb25TdGF0ZUNoYW5nZTogZnVuY3Rpb24gb25Db25uZWN0aW9uU3RhdGVDaGFuZ2Uoc3RhdGUpIHtcclxuICAgIGlmIChzdGF0ZSA9PT0gdHJ1ZSAmJiB0aGlzLmVuYWJsZU9mZmxpbmVTdXBwb3J0KSB7XHJcbiAgICAgIHRoaXMucmVmcmVzaFJlcXVpcmVkID0gdHJ1ZTtcclxuICAgIH1cclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIENhbGxlZCBvbiBhcHBsaWNhdGlvbiBzdGFydHVwIHRvIGNvbmZpZ3VyZSB0aGUgc2VhcmNoIHdpZGdldCBpZiBwcmVzZW50IGFuZCBjcmVhdGUgdGhlIGxpc3QgYWN0aW9ucy5cclxuICAgKi9cclxuICBzdGFydHVwOiBmdW5jdGlvbiBzdGFydHVwKCkge1xyXG4gICAgdGhpcy5pbmhlcml0ZWQoYXJndW1lbnRzKTtcclxuXHJcbiAgICBpZiAodGhpcy5zZWFyY2hXaWRnZXQpIHtcclxuICAgICAgdGhpcy5zZWFyY2hXaWRnZXQuY29uZmlndXJlKHtcclxuICAgICAgICAnaGFzaFRhZ1F1ZXJpZXMnOiB0aGlzLl9jcmVhdGVDdXN0b21pemVkTGF5b3V0KHRoaXMuY3JlYXRlSGFzaFRhZ1F1ZXJ5TGF5b3V0KCksICdoYXNoVGFnUXVlcmllcycpLFxyXG4gICAgICAgICdmb3JtYXRTZWFyY2hRdWVyeSc6IHRoaXMuZm9ybWF0U2VhcmNoUXVlcnkuYmluZCh0aGlzKSxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5jcmVhdGVBY3Rpb25zKHRoaXMuX2NyZWF0ZUN1c3RvbWl6ZWRMYXlvdXQodGhpcy5jcmVhdGVTeXN0ZW1BY3Rpb25MYXlvdXQodGhpcy5jcmVhdGVBY3Rpb25MYXlvdXQoKSksICdhY3Rpb25zJykpO1xyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kcyBkaWppdCBXaWRnZXQgdG8gZGVzdHJveSB0aGUgc2VhcmNoIHdpZGdldCBiZWZvcmUgZGVzdHJveWluZyB0aGUgdmlldy5cclxuICAgKi9cclxuICBkZXN0cm95OiBmdW5jdGlvbiBkZXN0cm95KCkge1xyXG4gICAgaWYgKHRoaXMuc2VhcmNoV2lkZ2V0KSB7XHJcbiAgICAgIGlmICghdGhpcy5zZWFyY2hXaWRnZXQuX2Rlc3Ryb3llZCkge1xyXG4gICAgICAgIHRoaXMuc2VhcmNoV2lkZ2V0LmRlc3Ryb3lSZWN1cnNpdmUoKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZGVsZXRlIHRoaXMuc2VhcmNoV2lkZ2V0O1xyXG4gICAgfVxyXG5cclxuICAgIGRlbGV0ZSB0aGlzLnN0b3JlO1xyXG4gICAgdGhpcy5pbmhlcml0ZWQoYXJndW1lbnRzKTtcclxuICB9LFxyXG4gIF9nZXRTdG9yZUF0dHI6IGZ1bmN0aW9uIF9nZXRTdG9yZUF0dHIoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5zdG9yZSB8fCAodGhpcy5zdG9yZSA9IHRoaXMuY3JlYXRlU3RvcmUoKSk7XHJcbiAgfSxcclxuICAvKipcclxuICAgKiBTaG93cyBvdmVycmlkZXMgdGhlIHZpZXcgY2xhc3MgdG8gc2V0IG9wdGlvbnMgZm9yIHRoZSBsaXN0IHZpZXcgYW5kIHRoZW4gY2FsbHMgdGhlIGluaGVyaXRlZCBzaG93IG1ldGhvZCBvbiB0aGUgdmlldy5cclxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBUaGUgbmF2aWdhdGlvbiBvcHRpb25zIHBhc3NlZCBmcm9tIHRoZSBwcmV2aW91cyB2aWV3LlxyXG4gICAqIEBwYXJhbSB0cmFuc2l0aW9uT3B0aW9ucyB7T2JqZWN0fSBPcHRpb25hbCB0cmFuc2l0aW9uIG9iamVjdCB0aGF0IGlzIGZvcndhcmRlZCB0byBSZVVJLlxyXG4gICAqL1xyXG4gIHNob3c6IGZ1bmN0aW9uIHNob3cob3B0aW9ucyAvKiwgdHJhbnNpdGlvbk9wdGlvbnMqLyApIHtcclxuICAgIGlmIChvcHRpb25zKSB7XHJcbiAgICAgIGlmIChvcHRpb25zLnJlc2V0U2VhcmNoKSB7XHJcbiAgICAgICAgdGhpcy5kZWZhdWx0U2VhcmNoVGVybVNldCA9IGZhbHNlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAob3B0aW9ucy5hbGxvd0VtcHR5U2VsZWN0aW9uID09PSBmYWxzZSAmJiB0aGlzLl9zZWxlY3Rpb25Nb2RlbCkge1xyXG4gICAgICAgIHRoaXMuX3NlbGVjdGlvbk1vZGVsLnJlcXVpcmVTZWxlY3Rpb24gPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5pbmhlcml0ZWQoYXJndW1lbnRzKTtcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIFNldHMgYW5kIHJldHVybnMgdGhlIHRvb2xiYXIgaXRlbSBsYXlvdXQgZGVmaW5pdGlvbiwgdGhpcyBtZXRob2Qgc2hvdWxkIGJlIG92ZXJyaWRlbiBpbiB0aGUgdmlld1xyXG4gICAqIHNvIHRoYXQgeW91IG1heSBkZWZpbmUgdGhlIHZpZXdzIHRvb2xiYXIgZW50cmllcy5cclxuICAgKiBAcmV0dXJuIHtPYmplY3R9IHRoaXMudG9vbHNcclxuICAgKiBAdGVtcGxhdGVcclxuICAgKi9cclxuICBjcmVhdGVUb29sTGF5b3V0OiBmdW5jdGlvbiBjcmVhdGVUb29sTGF5b3V0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMudG9vbHMgfHwgKHRoaXMudG9vbHMgPSB7XHJcbiAgICAgICd0YmFyJzogW3tcclxuICAgICAgICBpZDogJ25ldycsXHJcbiAgICAgICAgY2xzOiAnZmEgZmEtcGx1cyBmYS1mdyBmYS1sZycsXHJcbiAgICAgICAgYWN0aW9uOiAnbmF2aWdhdGVUb0luc2VydFZpZXcnLFxyXG4gICAgICAgIHNlY3VyaXR5OiB0aGlzLmFwcC5nZXRWaWV3U2VjdXJpdHkodGhpcy5pbnNlcnRWaWV3LCAnaW5zZXJ0JyksXHJcbiAgICAgIH1dLFxyXG4gICAgfSk7XHJcbiAgfSxcclxuICBjcmVhdGVFcnJvckhhbmRsZXJzOiBmdW5jdGlvbiBjcmVhdGVFcnJvckhhbmRsZXJzKCkge1xyXG4gICAgdGhpcy5lcnJvckhhbmRsZXJzID0gdGhpcy5lcnJvckhhbmRsZXJzIHx8IFt7XHJcbiAgICAgIG5hbWU6ICdBYm9ydGVkJyxcclxuICAgICAgdGVzdDogZnVuY3Rpb24gdGVzdEFib3J0ZWQoZXJyb3IpIHtcclxuICAgICAgICByZXR1cm4gZXJyb3IuYWJvcnRlZDtcclxuICAgICAgfSxcclxuICAgICAgaGFuZGxlOiBmdW5jdGlvbiBoYW5kbGVBYm9ydGVkKGVycm9yLCBuZXh0KSB7XHJcbiAgICAgICAgdGhpcy5jbGVhcigpO1xyXG4gICAgICAgIHRoaXMucmVmcmVzaFJlcXVpcmVkID0gdHJ1ZTtcclxuICAgICAgICBuZXh0KCk7XHJcbiAgICAgIH0sXHJcbiAgICB9LCB7XHJcbiAgICAgIG5hbWU6ICdBbGVydEVycm9yJyxcclxuICAgICAgdGVzdDogZnVuY3Rpb24gdGVzdEVycm9yKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuICFlcnJvci5hYm9ydGVkO1xyXG4gICAgICB9LFxyXG4gICAgICBoYW5kbGU6IGZ1bmN0aW9uIGhhbmRsZUVycm9yKGVycm9yLCBuZXh0KSB7XHJcbiAgICAgICAgYWxlcnQodGhpcy5nZXRFcnJvck1lc3NhZ2UoZXJyb3IpKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxyXG4gICAgICAgIG5leHQoKTtcclxuICAgICAgfSxcclxuICAgIH0sIHtcclxuICAgICAgbmFtZTogJ0NhdGNoQWxsJyxcclxuICAgICAgdGVzdDogZnVuY3Rpb24gdGVzdENhdGNoQWxsKCkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9LFxyXG4gICAgICBoYW5kbGU6IGZ1bmN0aW9uIGhhbmRsZUNhdGNoQWxsKGVycm9yLCBuZXh0KSB7XHJcbiAgICAgICAgdGhpcy5fbG9nRXJyb3IoZXJyb3IpO1xyXG4gICAgICAgIHRoaXMuX2NsZWFyTG9hZGluZygpO1xyXG4gICAgICAgIG5leHQoKTtcclxuICAgICAgfSxcclxuICAgIH1dO1xyXG5cclxuICAgIHJldHVybiB0aGlzLmVycm9ySGFuZGxlcnM7XHJcbiAgfSxcclxuICAvKipcclxuICAgKiBTZXRzIGFuZCByZXR1cm5zIHRoZSBsaXN0LWFjdGlvbiBhY3Rpb25zIGxheW91dCBkZWZpbml0aW9uLCB0aGlzIG1ldGhvZCBzaG91bGQgYmUgb3ZlcnJpZGVuIGluIHRoZSB2aWV3XHJcbiAgICogc28gdGhhdCB5b3UgbWF5IGRlZmluZSB0aGUgYWN0aW9uIGVudHJpZXMgZm9yIHRoYXQgdmlldy5cclxuICAgKiBAcmV0dXJuIHtPYmplY3R9IHRoaXMuYWN0dGlvbnNcclxuICAgKi9cclxuICBjcmVhdGVBY3Rpb25MYXlvdXQ6IGZ1bmN0aW9uIGNyZWF0ZUFjdGlvbkxheW91dCgpIHtcclxuICAgIHJldHVybiB0aGlzLmFjdGlvbnMgfHwge307XHJcbiAgfSxcclxuICAvKipcclxuICAgKiBDcmVhdGVzIHRoZSBhY3Rpb24gYmFyIGFuZCBhZGRzIGl0IHRvIHRoZSBET00uIE5vdGUgdGhhdCBpdCByZXBsYWNlcyBgdGhpcy5hY3Rpb25zYCB3aXRoIHRoZSBwYXNzZWRcclxuICAgKiBwYXJhbSBhcyB0aGUgcGFzc2VkIHBhcmFtIHNob3VsZCBiZSB0aGUgcmVzdWx0IG9mIHRoZSBjdXN0b21pemF0aW9uIG1peGluIGFuZCBgdGhpcy5hY3Rpb25zYCBuZWVkcyB0byBiZSB0aGVcclxuICAgKiBmaW5hbCBhY3Rpb25zIHN0YXRlLlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0W119IGFjdGlvbnNcclxuICAgKi9cclxuICBjcmVhdGVBY3Rpb25zOiBmdW5jdGlvbiBjcmVhdGVBY3Rpb25zKGEpIHtcclxuICAgIGxldCBhY3Rpb25zID0gYTtcclxuICAgIHRoaXMuYWN0aW9ucyA9IGFjdGlvbnMucmVkdWNlKHRoaXMuX3JlbW92ZUFjdGlvbkR1cGxpY2F0ZXMsIFtdKTtcclxuICAgIHRoaXMudmlzaWJsZUFjdGlvbnMgPSBbXTtcclxuXHJcbiAgICBpZiAoIXRoaXMuYWN0aW9uc05vZGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuZW5zdXJlUXVpY2tBY3Rpb25QcmVmcygpO1xyXG5cclxuICAgIC8vIFBsdWNrIG91dCBvdXIgc3lzdGVtIGFjdGlvbnMgdGhhdCBhcmUgTk9UIHNhdmVkIGluIHByZWZlcmVuY2VzXHJcbiAgICBsZXQgc3lzdGVtQWN0aW9ucyA9IGFycmF5LmZpbHRlcihhY3Rpb25zLCAoYWN0aW9uKSA9PiB7XHJcbiAgICAgIHJldHVybiBhY3Rpb24gJiYgYWN0aW9uLnN5c3RlbUFjdGlvbjtcclxuICAgIH0pO1xyXG5cclxuICAgIHN5c3RlbUFjdGlvbnMgPSBzeXN0ZW1BY3Rpb25zLnJlZHVjZSh0aGlzLl9yZW1vdmVBY3Rpb25EdXBsaWNhdGVzLCBbXSk7XHJcblxyXG4gICAgLy8gR3JhYiBxdWljayBhY3Rpb25zIGZyb20gdGhlIHVzZXJzIHByZWZlcmVuY2VzIChvcmRlcmVkIGFuZCBtYWRlIHZpc2libGUgYWNjb3JkaW5nIHRvIHVzZXIpXHJcbiAgICBsZXQgcHJlZkFjdGlvbnM7XHJcbiAgICBpZiAodGhpcy5hcHAucHJlZmVyZW5jZXMgJiYgdGhpcy5hcHAucHJlZmVyZW5jZXMucXVpY2tBY3Rpb25zKSB7XHJcbiAgICAgIHByZWZBY3Rpb25zID0gdGhpcy5hcHAucHJlZmVyZW5jZXMucXVpY2tBY3Rpb25zW3RoaXMuaWRdO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChzeXN0ZW1BY3Rpb25zICYmIHByZWZBY3Rpb25zKSB7XHJcbiAgICAgIC8vIERpc3BsYXkgc3lzdGVtIGFjdGlvbnMgZmlyc3QsIHRoZW4gdGhlIG9yZGVyIG9mIHdoYXQgdGhlIHVzZXIgc3BlY2lmaWVkXHJcbiAgICAgIGFjdGlvbnMgPSBzeXN0ZW1BY3Rpb25zLmNvbmNhdChwcmVmQWN0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdmlzaWJsZUFjdGlvbnMgPSBbXTtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFjdGlvbnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgY29uc3QgYWN0aW9uID0gYWN0aW9uc1tpXTtcclxuXHJcbiAgICAgIGlmICghYWN0aW9uLnZpc2libGUpIHtcclxuICAgICAgICBjb250aW51ZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcclxuICAgICAgICBhY3Rpb25JbmRleDogdmlzaWJsZUFjdGlvbnMubGVuZ3RoLFxyXG4gICAgICAgIGhhc0FjY2VzczogKCFhY3Rpb24uc2VjdXJpdHkgfHwgKGFjdGlvbi5zZWN1cml0eSAmJiB0aGlzLmFwcC5oYXNBY2Nlc3NUbyh0aGlzLmV4cGFuZEV4cHJlc3Npb24oYWN0aW9uLnNlY3VyaXR5KSkpKSA/IHRydWUgOiBmYWxzZSxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGxhbmcubWl4aW4oYWN0aW9uLCBvcHRpb25zKTtcclxuXHJcbiAgICAgIGNvbnN0IGFjdGlvblRlbXBsYXRlID0gYWN0aW9uLnRlbXBsYXRlIHx8IHRoaXMubGlzdEFjdGlvbkl0ZW1UZW1wbGF0ZTtcclxuICAgICAgZG9tQ29uc3RydWN0LnBsYWNlKGFjdGlvblRlbXBsYXRlLmFwcGx5KGFjdGlvbiwgYWN0aW9uLmlkKSwgdGhpcy5hY3Rpb25zTm9kZSwgJ2xhc3QnKTtcclxuXHJcbiAgICAgIHZpc2libGVBY3Rpb25zLnB1c2goYWN0aW9uKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnZpc2libGVBY3Rpb25zID0gdmlzaWJsZUFjdGlvbnM7XHJcbiAgfSxcclxuICBjcmVhdGVTeXN0ZW1BY3Rpb25MYXlvdXQ6IGZ1bmN0aW9uIGNyZWF0ZVN5c3RlbUFjdGlvbkxheW91dChhY3Rpb25zKSB7XHJcbiAgICBjb25zdCBzeXN0ZW1BY3Rpb25zID0gYXJyYXkuZmlsdGVyKGFjdGlvbnMsIChhY3Rpb24pID0+IHtcclxuICAgICAgcmV0dXJuIGFjdGlvbi5zeXN0ZW1BY3Rpb24gPT09IHRydWU7XHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCBvdGhlcnMgPSBhcnJheS5maWx0ZXIoYWN0aW9ucywgKGFjdGlvbikgPT4ge1xyXG4gICAgICByZXR1cm4gIWFjdGlvbi5zeXN0ZW1BY3Rpb247XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoIW90aGVycy5sZW5ndGgpIHtcclxuICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChzeXN0ZW1BY3Rpb25zLmxlbmd0aCkge1xyXG4gICAgICByZXR1cm4gc3lzdGVtQWN0aW9ucy5jb25jYXQob3RoZXJzKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gW3tcclxuICAgICAgaWQ6ICdfX2VkaXRQcmVmc19fJyxcclxuICAgICAgY2xzOiAnZmEgZmEtY29nIGZhLTJ4JyxcclxuICAgICAgbGFiZWw6IHRoaXMuY29uZmlndXJlVGV4dCxcclxuICAgICAgYWN0aW9uOiAnY29uZmlndXJlUXVpY2tBY3Rpb25zJyxcclxuICAgICAgc3lzdGVtQWN0aW9uOiB0cnVlLFxyXG4gICAgICB2aXNpYmxlOiB0cnVlLFxyXG4gICAgfV0uY29uY2F0KG90aGVycyk7XHJcbiAgfSxcclxuICBjb25maWd1cmVRdWlja0FjdGlvbnM6IGZ1bmN0aW9uIGNvbmZpZ3VyZVF1aWNrQWN0aW9ucygpIHtcclxuICAgIGNvbnN0IHZpZXcgPSBBcHAuZ2V0Vmlldyh0aGlzLnF1aWNrQWN0aW9uQ29uZmlndXJlVmlldyk7XHJcbiAgICBpZiAodmlldykge1xyXG4gICAgICB2aWV3LnNob3coe1xyXG4gICAgICAgIHZpZXdJZDogdGhpcy5pZCxcclxuICAgICAgICBhY3Rpb25zOiBhcnJheS5maWx0ZXIodGhpcy5hY3Rpb25zLCAoYWN0aW9uKSA9PiB7XHJcbiAgICAgICAgICAvLyBFeGNsdWRlIHN5c3RlbSBhY3Rpb25zXHJcbiAgICAgICAgICByZXR1cm4gYWN0aW9uICYmIGFjdGlvbi5zeXN0ZW1BY3Rpb24gIT09IHRydWU7XHJcbiAgICAgICAgfSksXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgc2VsZWN0RW50cnlTaWxlbnQ6IGZ1bmN0aW9uIHNlbGVjdEVudHJ5U2lsZW50KGtleSkge1xyXG4gICAgY29uc3QgZW5hYmxlQWN0aW9ucyA9IHRoaXMuZW5hYmxlQWN0aW9uczsgLy8gcHJlc2VydmUgdGhlIG9yaWdpbmFsIHZhbHVlXHJcbiAgICBjb25zdCBzZWxlY3Rpb25Nb2RlbCA9IHRoaXMuZ2V0KCdzZWxlY3Rpb25Nb2RlbCcpO1xyXG4gICAgbGV0IHNlbGVjdGlvbjtcclxuXHJcbiAgICBpZiAoa2V5KSB7XHJcbiAgICAgIHRoaXMuZW5hYmxlQWN0aW9ucyA9IGZhbHNlOyAvLyBTZXQgdG8gZmFsc2Ugc28gdGhlIHF1aWNrIGFjdGlvbnMgbWVudSBkb2Vzbid0IHBvcCB1cFxyXG4gICAgICBzZWxlY3Rpb25Nb2RlbC5jbGVhcigpO1xyXG4gICAgICBzZWxlY3Rpb25Nb2RlbC50b2dnbGUoa2V5LCB0aGlzLmVudHJpZXNba2V5XSk7XHJcbiAgICAgIGNvbnN0IHNlbGVjdGVkSXRlbXMgPSBzZWxlY3Rpb25Nb2RlbC5nZXRTZWxlY3Rpb25zKCk7XHJcbiAgICAgIHRoaXMuZW5hYmxlQWN0aW9ucyA9IGVuYWJsZUFjdGlvbnM7XHJcblxyXG4gICAgICAvLyBXZSBrbm93IHdlIGFyZSBzaW5nbGUgc2VsZWN0LCBzbyBqdXN0IGdyYWIgdGhlIGZpcnN0IHNlbGVjdGlvblxyXG4gICAgICBmb3IgKGNvbnN0IHByb3AgaW4gc2VsZWN0ZWRJdGVtcykge1xyXG4gICAgICAgIGlmIChzZWxlY3RlZEl0ZW1zLmhhc093blByb3BlcnR5KHByb3ApKSB7XHJcbiAgICAgICAgICBzZWxlY3Rpb24gPSBzZWxlY3RlZEl0ZW1zW3Byb3BdO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHNlbGVjdGlvbjtcclxuICB9LFxyXG4gIGludm9rZUFjdGlvbkl0ZW1CeTogZnVuY3Rpb24gaW52b2tlQWN0aW9uSXRlbUJ5KGFjdGlvblByZWRpY2F0ZSwga2V5KSB7XHJcbiAgICBjb25zdCBhY3Rpb25zID0gYXJyYXkuZmlsdGVyKHRoaXMudmlzaWJsZUFjdGlvbnMsIGFjdGlvblByZWRpY2F0ZSk7XHJcbiAgICBjb25zdCBzZWxlY3Rpb24gPSB0aGlzLnNlbGVjdEVudHJ5U2lsZW50KGtleSk7XHJcbiAgICB0aGlzLmNoZWNrQWN0aW9uU3RhdGUoKTtcclxuICAgIGFycmF5LmZvckVhY2goYWN0aW9ucywgZnVuY3Rpb24gZm9yRWFjaChhY3Rpb24pIHtcclxuICAgICAgdGhpcy5faW52b2tlQWN0aW9uKGFjdGlvbiwgc2VsZWN0aW9uKTtcclxuICAgIH0sIHRoaXMpO1xyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogVGhpcyBpcyB0aGUgZGF0YS1hY3Rpb24gaGFuZGxlciBmb3IgbGlzdC1hY3Rpb25zLCBpdCB3aWxsIGxvY2F0ZSB0aGUgYWN0aW9uIGluc3RhbmNlIHZpdyB0aGUgZGF0YS1pZCBhdHRyaWJ1dGVcclxuICAgKiBhbmQgaW52b2tlIGVpdGhlciB0aGUgYGZuYCB3aXRoIGBzY29wZWAgb3IgdGhlIG5hbWVkIGBhY3Rpb25gIG9uIHRoZSBjdXJyZW50IHZpZXcuXHJcbiAgICpcclxuICAgKiBUaGUgcmVzdWx0aW5nIGZ1bmN0aW9uIGJlaW5nIGNhbGxlZCB3aWxsIGJlIHBhc3NlZCBub3Qgb25seSB0aGUgYWN0aW9uIGl0ZW0gZGVmaW5pdGlvbiBidXQgYWxzb1xyXG4gICAqIHRoZSBmaXJzdCAob25seSkgc2VsZWN0aW9uIGZyb20gdGhlIGxpc3RzIHNlbGVjdGlvbiBtb2RlbC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbWV0ZXJzIENvbGxlY3Rpb24gb2YgZGF0YS0gYXR0cmlidXRlcyBhbHJlYWR5IGdhdGhlcmVkIGZyb20gdGhlIG5vZGVcclxuICAgKiBAcGFyYW0ge0V2ZW50fSBldnQgVGhlIGNsaWNrL3RhcCBldmVudFxyXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IG5vZGUgVGhlIG5vZGUgdGhhdCBpbnZva2VkIHRoZSBhY3Rpb25cclxuICAgKi9cclxuICBpbnZva2VBY3Rpb25JdGVtOiBmdW5jdGlvbiBpbnZva2VBY3Rpb25JdGVtKHBhcmFtZXRlcnMgLyosIGV2dCwgbm9kZSovICkge1xyXG4gICAgY29uc3QgaW5kZXggPSBwYXJhbWV0ZXJzLmlkO1xyXG4gICAgY29uc3QgYWN0aW9uID0gdGhpcy52aXNpYmxlQWN0aW9uc1tpbmRleF07XHJcbiAgICBjb25zdCBzZWxlY3RlZEl0ZW1zID0gdGhpcy5nZXQoJ3NlbGVjdGlvbk1vZGVsJylcclxuICAgICAgLmdldFNlbGVjdGlvbnMoKTtcclxuICAgIGxldCBzZWxlY3Rpb24gPSBudWxsO1xyXG5cclxuXHJcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBzZWxlY3RlZEl0ZW1zKSB7XHJcbiAgICAgIGlmIChzZWxlY3RlZEl0ZW1zLmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgICBzZWxlY3Rpb24gPSBzZWxlY3RlZEl0ZW1zW2tleV07XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl9pbnZva2VBY3Rpb24oYWN0aW9uLCBzZWxlY3Rpb24pO1xyXG4gIH0sXHJcbiAgX2ludm9rZUFjdGlvbjogZnVuY3Rpb24gX2ludm9rZUFjdGlvbihhY3Rpb24sIHNlbGVjdGlvbikge1xyXG4gICAgaWYgKCFhY3Rpb24uaXNFbmFibGVkKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoYWN0aW9uLmZuKSB7XHJcbiAgICAgIGFjdGlvbi5mbi5jYWxsKGFjdGlvbi5zY29wZSB8fCB0aGlzLCBhY3Rpb24sIHNlbGVjdGlvbik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAoYWN0aW9uLmFjdGlvbikge1xyXG4gICAgICAgIGlmICh0aGlzLmhhc0FjdGlvbihhY3Rpb24uYWN0aW9uKSkge1xyXG4gICAgICAgICAgdGhpcy5pbnZva2VBY3Rpb24oYWN0aW9uLmFjdGlvbiwgYWN0aW9uLCBzZWxlY3Rpb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogQ2FsbGVkIHdoZW4gc2hvd2luZyB0aGUgYWN0aW9uIGJhciBmb3IgYSBuZXdseSBzZWxlY3RlZCByb3csIGl0IHNldHMgdGhlIGRpc2FibGVkIHN0YXRlIGZvciBlYWNoIGFjdGlvblxyXG4gICAqIGl0ZW0gdXNpbmcgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCByb3cgYXMgY29udGV4dCBieSBwYXNzaW5nIHRoZSBhY3Rpb24gaW5zdGFuY2UgdGhlIHNlbGVjdGVkIHJvdyB0byB0aGVcclxuICAgKiBhY3Rpb24gaXRlbXMgYGVuYWJsZWRgIHByb3BlcnR5LlxyXG4gICAqL1xyXG4gIGNoZWNrQWN0aW9uU3RhdGU6IGZ1bmN0aW9uIGNoZWNrQWN0aW9uU3RhdGUoKSB7XHJcbiAgICBjb25zdCBzZWxlY3RlZEl0ZW1zID0gdGhpcy5nZXQoJ3NlbGVjdGlvbk1vZGVsJylcclxuICAgICAgLmdldFNlbGVjdGlvbnMoKTtcclxuICAgIGxldCBzZWxlY3Rpb24gPSBudWxsO1xyXG5cclxuICAgIGZvciAoY29uc3Qga2V5IGluIHNlbGVjdGVkSXRlbXMpIHtcclxuICAgICAgaWYgKHNlbGVjdGVkSXRlbXMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICAgIHNlbGVjdGlvbiA9IHNlbGVjdGVkSXRlbXNba2V5XTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX2FwcGx5U3RhdGVUb0FjdGlvbnMoc2VsZWN0aW9uKTtcclxuICB9LFxyXG4gIF9jbGVhckFjdGlvbnM6IGZ1bmN0aW9uIF9jbGVhckFjdGlvbnMoKSB7XHJcbiAgICBsZXQgY2hpbGRyZW4gPSB0aGlzLmFjdGlvbnNOb2RlICYmIHRoaXMuYWN0aW9uc05vZGUuY2hpbGRyZW4gfHwgW107XHJcbiAgICBjaGlsZHJlbiA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGNoaWxkcmVuKTtcclxuICAgIGFycmF5LmZvckVhY2goY2hpbGRyZW4sIChjaGlsZCkgPT4ge1xyXG4gICAgICBpZiAoY2hpbGQucGFyZW50Tm9kZSkge1xyXG4gICAgICAgIGNoaWxkLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoY2hpbGQpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9LFxyXG4gIGdldFF1aWNrQWN0aW9uUHJlZnM6IGZ1bmN0aW9uIGdldFF1aWNrQWN0aW9uUHJlZnMoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5hcHAgJiYgdGhpcy5hcHAucHJlZmVyZW5jZXMgJiYgdGhpcy5hcHAucHJlZmVyZW5jZXMucXVpY2tBY3Rpb25zO1xyXG4gIH0sXHJcbiAgX3JlbW92ZUFjdGlvbkR1cGxpY2F0ZXM6IGZ1bmN0aW9uIF9yZW1vdmVBY3Rpb25EdXBsaWNhdGVzKGFjYywgY3VyKSB7XHJcbiAgICBjb25zdCBoYXNJRCA9IGFjYy5zb21lKChpdGVtKSA9PiB7XHJcbiAgICAgIHJldHVybiBpdGVtLmlkID09PSBjdXIuaWQ7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoIWhhc0lEKSB7XHJcbiAgICAgIGFjYy5wdXNoKGN1cik7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGFjYztcclxuICB9LFxyXG4gIGVuc3VyZVF1aWNrQWN0aW9uUHJlZnM6IGZ1bmN0aW9uIGVuc3VyZVF1aWNrQWN0aW9uUHJlZnMoKSB7XHJcbiAgICBjb25zdCBhcHBQcmVmcyA9IHRoaXMuYXBwICYmIHRoaXMuYXBwLnByZWZlcmVuY2VzO1xyXG4gICAgbGV0IGFjdGlvblByZWZzID0gdGhpcy5nZXRRdWlja0FjdGlvblByZWZzKCk7XHJcbiAgICBjb25zdCBmaWx0ZXJlZCA9IGFycmF5LmZpbHRlcih0aGlzLmFjdGlvbnMsIChhY3Rpb24pID0+IHtcclxuICAgICAgcmV0dXJuIGFjdGlvbiAmJiBhY3Rpb24uc3lzdGVtQWN0aW9uICE9PSB0cnVlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKCF0aGlzLmFjdGlvbnMgfHwgIWFwcFByZWZzKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIWFjdGlvblByZWZzKSB7XHJcbiAgICAgIGFwcFByZWZzLnF1aWNrQWN0aW9ucyA9IHt9O1xyXG4gICAgICBhY3Rpb25QcmVmcyA9IGFwcFByZWZzLnF1aWNrQWN0aW9ucztcclxuICAgIH1cclxuXHJcbiAgICAvLyBJZiBpdCBkb2Vzbid0IGV4aXN0LCBvciB0aGVyZSBpcyBhIGNvdW50IG1pc21hdGNoIChhY3Rpb25zIGNyZWF0ZWQgb24gdXBncmFkZXMgcGVyaGFwcz8pXHJcbiAgICAvLyByZS1jcmVhdGUgdGhlIHByZWZlcmVuY2VzIHN0b3JlXHJcbiAgICBpZiAoIWFjdGlvblByZWZzW3RoaXMuaWRdIHx8XHJcbiAgICAgIChhY3Rpb25QcmVmc1t0aGlzLmlkXSAmJiBhY3Rpb25QcmVmc1t0aGlzLmlkXS5sZW5ndGggIT09IGZpbHRlcmVkLmxlbmd0aCkpIHtcclxuICAgICAgYWN0aW9uUHJlZnNbdGhpcy5pZF0gPSBhcnJheS5tYXAoZmlsdGVyZWQsIChhY3Rpb24pID0+IHtcclxuICAgICAgICBhY3Rpb24udmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgcmV0dXJuIGFjdGlvbjtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICB0aGlzLmFwcC5wZXJzaXN0UHJlZmVyZW5jZXMoKTtcclxuICAgIH1cclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIENhbGxlZCBmcm9tIGNoZWNrQWN0aW9uU3RhdGUgbWV0aG9kIGFuZCBzZXRzIHRoZSBzdGF0ZSBvZiB0aGUgYWN0aW9ucyBmcm9tIHdoYXQgd2FzIHNlbGVjdGVkIGZyb20gdGhlIHNlbGVjdGVkIHJvdywgaXQgc2V0cyB0aGUgZGlzYWJsZWQgc3RhdGUgZm9yIGVhY2ggYWN0aW9uXHJcbiAgICogaXRlbSB1c2luZyB0aGUgY3VycmVudGx5IHNlbGVjdGVkIHJvdyBhcyBjb250ZXh0IGJ5IHBhc3NpbmcgdGhlIGFjdGlvbiBpbnN0YW5jZSB0aGUgc2VsZWN0ZWQgcm93IHRvIHRoZVxyXG4gICAqIGFjdGlvbiBpdGVtcyBgZW5hYmxlZGAgcHJvcGVydHkuXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IHNlbGVjdGlvblxyXG4gICAqL1xyXG4gIF9hcHBseVN0YXRlVG9BY3Rpb25zOiBmdW5jdGlvbiBfYXBwbHlTdGF0ZVRvQWN0aW9ucyhzZWxlY3Rpb24pIHtcclxuICAgIHRoaXMuX2NsZWFyQWN0aW9ucygpO1xyXG4gICAgdGhpcy5jcmVhdGVBY3Rpb25zKHRoaXMuX2NyZWF0ZUN1c3RvbWl6ZWRMYXlvdXQodGhpcy5jcmVhdGVTeXN0ZW1BY3Rpb25MYXlvdXQodGhpcy5jcmVhdGVBY3Rpb25MYXlvdXQoKSksICdhY3Rpb25zJykpO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy52aXNpYmxlQWN0aW9ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAvLyBUaGUgdmlzaWJsZSBhY3Rpb24gaXMgZnJvbSBvdXIgbG9jYWwgc3RvcmFnZSBwcmVmZXJlbmNlcywgd2hlcmUgdGhlIGFjdGlvbiBmcm9tIHRoZSBsYXlvdXRcclxuICAgICAgLy8gY29udGFpbnMgZnVuY3Rpb25zIHRoYXQgd2lsbCBnZXQgc3RyaXBwZWQgb3V0IGNvbnZlcnRpbmcgaXQgdG8gSlNPTiwgZ2V0IHRoZSBvcmlnaW5hbCBhY3Rpb25cclxuICAgICAgLy8gYW5kIG1peCBpdCBpbnRvIHRoZSB2aXNpYmxlIHNvIHdlIGNhbiB3b3JrIHdpdGggaXQuXHJcbiAgICAgIC8vIFRPRE86IFRoaXMgd2lsbCBiZSBhIHByb2JsZW0gdGhyb3VnaG91dCB2aXNpYmxlIGFjdGlvbnMsIGNvbWUgdXAgd2l0aCBhIGJldHRlciBzb2x1dGlvblxyXG4gICAgICBjb25zdCB2aXNpYmxlQWN0aW9uID0gdGhpcy52aXNpYmxlQWN0aW9uc1tpXTtcclxuICAgICAgY29uc3QgYWN0aW9uID0gbGFuZy5taXhpbih2aXNpYmxlQWN0aW9uLCB0aGlzLl9nZXRBY3Rpb25CeUlkKHZpc2libGVBY3Rpb24uaWQpKTtcclxuICAgICAgY29uc3QgYWN0aW9uTm9kZSA9IHRoaXMuYWN0aW9uc05vZGUuY2hpbGROb2Rlc1tpXTtcclxuXHJcbiAgICAgIGFjdGlvbi5pc0VuYWJsZWQgPSAodHlwZW9mIGFjdGlvbi5lbmFibGVkID09PSAndW5kZWZpbmVkJykgPyB0cnVlIDogdGhpcy5leHBhbmRFeHByZXNzaW9uKGFjdGlvbi5lbmFibGVkLCBhY3Rpb24sIHNlbGVjdGlvbik7XHJcblxyXG4gICAgICBpZiAoIWFjdGlvbi5oYXNBY2Nlc3MpIHtcclxuICAgICAgICBhY3Rpb24uaXNFbmFibGVkID0gZmFsc2U7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChhY3Rpb25Ob2RlKSB7XHJcbiAgICAgICAgZG9tQ2xhc3MudG9nZ2xlKGFjdGlvbk5vZGUsICd0b29sQnV0dG9uLWRpc2FibGVkJywgIWFjdGlvbi5pc0VuYWJsZWQpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSxcclxuICBfZ2V0QWN0aW9uQnlJZDogZnVuY3Rpb24gX2dldEFjdGlvbkJ5SWQoaWQpIHtcclxuICAgIHJldHVybiBhcnJheS5maWx0ZXIodGhpcy5hY3Rpb25zLCAoYWN0aW9uKSA9PiB7XHJcbiAgICAgIHJldHVybiBhY3Rpb24gJiYgYWN0aW9uLmlkID09PSBpZDtcclxuICAgIH0pWzBdO1xyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogSGFuZGxlciBmb3Igc2hvd2luZyB0aGUgbGlzdC1hY3Rpb24gcGFuZWwvYmFyIC0gaXQgbmVlZHMgdG8gZG8gc2V2ZXJhbCB0aGluZ3M6XHJcbiAgICpcclxuICAgKiAxLiBDaGVjayBlYWNoIGl0ZW0gZm9yIGNvbnRleHQtZW5hYmxlZG1lbnRcclxuICAgKiAxLiBNb3ZlIHRoZSBhY3Rpb24gcGFuZWwgdG8gdGhlIGN1cnJlbnQgcm93IGFuZCBzaG93IGl0XHJcbiAgICogMS4gQWRqdXN0IHRoZSBzY3JvbGxpbmcgaWYgbmVlZGVkIChpZiBzZWxlY3RlZCByb3cgaXMgYXQgYm90dG9tIG9mIHNjcmVlbiwgdGhlIGFjdGlvbi1iYXIgc2hvd3Mgb2ZmIHNjcmVlblxyXG4gICAqIHdoaWNoIGlzIGJhZClcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHJvd05vZGUgVGhlIGN1cnJlbnRseSBzZWxlY3RlZCByb3cgbm9kZVxyXG4gICAqL1xyXG4gIHNob3dBY3Rpb25QYW5lbDogZnVuY3Rpb24gc2hvd0FjdGlvblBhbmVsKHJvd05vZGUpIHtcclxuICAgIHRoaXMuY2hlY2tBY3Rpb25TdGF0ZSgpO1xyXG4gICAgZG9tQ2xhc3MuYWRkKHJvd05vZGUsICdsaXN0LWFjdGlvbi1zZWxlY3RlZCcpO1xyXG5cclxuICAgIHRoaXMub25BcHBseVJvd0FjdGlvblBhbmVsKHRoaXMuYWN0aW9uc05vZGUsIHJvd05vZGUpO1xyXG5cclxuICAgIGRvbUNvbnN0cnVjdC5wbGFjZSh0aGlzLmFjdGlvbnNOb2RlLCByb3dOb2RlLCAnYWZ0ZXInKTtcclxuICB9LFxyXG4gIG9uQXBwbHlSb3dBY3Rpb25QYW5lbDogZnVuY3Rpb24gb25BcHBseVJvd0FjdGlvblBhbmVsKCAvKmFjdGlvbk5vZGVQYW5lbCwgcm93Tm9kZSovICkge30sXHJcbiAgLyoqXHJcbiAgICogU2V0cyB0aGUgYHRoaXMub3B0aW9ucy5zb3VyY2VgIHRvIHBhc3NlZCBwYXJhbSBhZnRlciBhZGRpbmcgdGhlIHZpZXdzIHJlc291cmNlS2luZC4gVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHNvXHJcbiAgICogdGhhdCB3aGVuIHRoZSBuZXh0IHZpZXcgcXVlcmllcyB0aGUgbmF2aWdhdGlvbiBjb250ZXh0IHdlIGNhbiBpbmNsdWRlIHRoZSBwYXNzZWQgcGFyYW0gYXMgYSBkYXRhIHBvaW50LlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZSBUaGUgb2JqZWN0IHRvIHNldCBhcyB0aGUgb3B0aW9ucy5zb3VyY2UuXHJcbiAgICovXHJcbiAgc2V0U291cmNlOiBmdW5jdGlvbiBzZXRTb3VyY2Uoc291cmNlKSB7XHJcbiAgICBsYW5nLm1peGluKHNvdXJjZSwge1xyXG4gICAgICByZXNvdXJjZUtpbmQ6IHRoaXMucmVzb3VyY2VLaW5kLFxyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5vcHRpb25zLnNvdXJjZSA9IHNvdXJjZTtcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIEhpZGVzIHRoZSBwYXNzZWQgbGlzdC1hY3Rpb24gcm93L3BhbmVsIGJ5IHJlbW92aW5nIHRoZSBzZWxlY3RlZCBzdHlsaW5nXHJcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gcm93Tm9kZSBUaGUgY3VycmVudGx5IHNlbGVjdGVkIHJvdy5cclxuICAgKi9cclxuICBoaWRlQWN0aW9uUGFuZWw6IGZ1bmN0aW9uIGhpZGVBY3Rpb25QYW5lbChyb3dOb2RlKSB7XHJcbiAgICBkb21DbGFzcy5yZW1vdmUocm93Tm9kZSwgJ2xpc3QtYWN0aW9uLXNlbGVjdGVkJyk7XHJcbiAgfSxcclxuICAvKipcclxuICAgKiBEZXRlcm1pbmVzIGlmIHRoZSB2aWV3IGlzIGEgbmF2aWdhdGlibGUgdmlldyBvciBhIHNlbGVjdGlvbiB2aWV3IGJ5IHJldHVybmluZyBgdGhpcy5zZWxlY3Rpb25Pbmx5YCBvciB0aGVcclxuICAgKiBuYXZpZ2F0aW9uIGB0aGlzLm9wdGlvbnMuc2VsZWN0aW9uT25seWAuXHJcbiAgICogQHJldHVybiB7Qm9vbGVhbn1cclxuICAgKi9cclxuICBpc05hdmlnYXRpb25EaXNhYmxlZDogZnVuY3Rpb24gaXNOYXZpZ2F0aW9uRGlzYWJsZWQoKSB7XHJcbiAgICByZXR1cm4gKCh0aGlzLm9wdGlvbnMgJiYgdGhpcy5vcHRpb25zLnNlbGVjdGlvbk9ubHkpIHx8ICh0aGlzLnNlbGVjdGlvbk9ubHkpKTtcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIERldGVybWluZXMgaWYgdGhlIHNlbGVjdGlvbnMgYXJlIGRpc2FibGVkIGJ5IGNoZWNraW5nIHRoZSBgYWxsb3dTZWxlY3Rpb25gIGFuZCBgZW5hYmxlQWN0aW9uc2BcclxuICAgKiBAcmV0dXJuIHtCb29sZWFufVxyXG4gICAqL1xyXG4gIGlzU2VsZWN0aW9uRGlzYWJsZWQ6IGZ1bmN0aW9uIGlzU2VsZWN0aW9uRGlzYWJsZWQoKSB7XHJcbiAgICByZXR1cm4gISgodGhpcy5vcHRpb25zICYmIHRoaXMub3B0aW9ucy5zZWxlY3Rpb25Pbmx5KSB8fCB0aGlzLmVuYWJsZUFjdGlvbnMgfHwgdGhpcy5hbGxvd1NlbGVjdGlvbik7XHJcbiAgfSxcclxuICAvKipcclxuICAgKiBIYW5kbGVyIGZvciB3aGVuIHRoZSBzZWxlY3Rpb24gbW9kZWwgYWRkcyBhbiBpdGVtLiBBZGRzIHRoZSBzZWxlY3RlZCBzdGF0ZSB0byB0aGUgcm93IG9yIHNob3dzIHRoZSBsaXN0XHJcbiAgICogYWN0aW9ucyBwYW5lbC5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5IFRoZSBleHRyYWN0ZWQga2V5IGZyb20gdGhlIHNlbGVjdGVkIHJvdy5cclxuICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YSBUaGUgYWN0dWFsIHJvdydzIG1hdGNoaW5nIGRhdGEgcG9pbnRcclxuICAgKiBAcGFyYW0ge1N0cmluZy9IVE1MRWxlbWVudH0gdGFnIEFuIGluZGVudGlmaWVyLCBtYXkgYmUgdGhlIGFjdHVhbCByb3cgbm9kZSBvciBzb21lIG90aGVyIGlkLlxyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgX29uU2VsZWN0aW9uTW9kZWxTZWxlY3Q6IGZ1bmN0aW9uIF9vblNlbGVjdGlvbk1vZGVsU2VsZWN0KGtleSwgZGF0YSwgdGFnKSB7XHJcbiAgICBjb25zdCBub2RlID0gZG9tLmJ5SWQodGFnKSB8fCBxdWVyeSgnbGlbZGF0YS1rZXk9XCInICsga2V5ICsgJ1wiXScsIHRoaXMuY29udGVudE5vZGUpWzBdO1xyXG4gICAgaWYgKCFub2RlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5lbmFibGVBY3Rpb25zKSB7XHJcbiAgICAgIHRoaXMuc2hvd0FjdGlvblBhbmVsKG5vZGUpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgZG9tQ2xhc3MuYWRkKG5vZGUsICdsaXN0LWl0ZW0tc2VsZWN0ZWQnKTtcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIEhhbmRsZXIgZm9yIHdoZW4gdGhlIHNlbGVjdGlvbiBtb2RlbCByZW1vdmVzIGFuIGl0ZW0uIFJlbW92ZXMgdGhlIHNlbGVjdGVkIHN0YXRlIHRvIHRoZSByb3cgb3IgaGlkZXMgdGhlIGxpc3RcclxuICAgKiBhY3Rpb25zIHBhbmVsLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBrZXkgVGhlIGV4dHJhY3RlZCBrZXkgZnJvbSB0aGUgZGUtc2VsZWN0ZWQgcm93LlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhIFRoZSBhY3R1YWwgcm93J3MgbWF0Y2hpbmcgZGF0YSBwb2ludFxyXG4gICAqIEBwYXJhbSB7U3RyaW5nL0hUTUxFbGVtZW50fSB0YWcgQW4gaW5kZW50aWZpZXIsIG1heSBiZSB0aGUgYWN0dWFsIHJvdyBub2RlIG9yIHNvbWUgb3RoZXIgaWQuXHJcbiAgICogQHByaXZhdGVcclxuICAgKi9cclxuICBfb25TZWxlY3Rpb25Nb2RlbERlc2VsZWN0OiBmdW5jdGlvbiBfb25TZWxlY3Rpb25Nb2RlbERlc2VsZWN0KGtleSwgZGF0YSwgdGFnKSB7XHJcbiAgICBjb25zdCBub2RlID0gZG9tLmJ5SWQodGFnKSB8fCBxdWVyeSgnbGlbZGF0YS1rZXk9XCInICsga2V5ICsgJ1wiXScsIHRoaXMuY29udGVudE5vZGUpWzBdO1xyXG4gICAgaWYgKCFub2RlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5lbmFibGVBY3Rpb25zKSB7XHJcbiAgICAgIHRoaXMuaGlkZUFjdGlvblBhbmVsKG5vZGUpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgZG9tQ2xhc3MucmVtb3ZlKG5vZGUsICdsaXN0LWl0ZW0tc2VsZWN0ZWQnKTtcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIEhhbmRsZXIgZm9yIHdoZW4gdGhlIHNlbGVjdGlvbiBtb2RlbCBjbGVhcnMgdGhlIHNlbGVjdGlvbnMuXHJcbiAgICogQHByaXZhdGVcclxuICAgKi9cclxuICBfb25TZWxlY3Rpb25Nb2RlbENsZWFyOiBmdW5jdGlvbiBfb25TZWxlY3Rpb25Nb2RlbENsZWFyKCkge30sXHJcbiAgLyoqXHJcbiAgICogQXR0ZW1wdHMgdG8gYWN0aXZhdGUgZW50cmllcyBwYXNzZWQgaW4gYHRoaXMub3B0aW9ucy5wcmV2aW91c1NlbGVjdGlvbnNgIHdoZXJlIHByZXZpb3VzU2VsZWN0aW9ucyBpcyBhbiBhcnJheVxyXG4gICAqIG9mIGRhdGEta2V5cyBvciBkYXRhLWRlc2NyaXB0b3JzIHRvIHNlYXJjaCB0aGUgbGlzdCByb3dzIGZvci5cclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIF9sb2FkUHJldmlvdXNTZWxlY3Rpb25zOiBmdW5jdGlvbiBfbG9hZFByZXZpb3VzU2VsZWN0aW9ucygpIHtcclxuICAgIGNvbnN0IHByZXZpb3VzU2VsZWN0aW9ucyA9IHRoaXMub3B0aW9ucyAmJiB0aGlzLm9wdGlvbnMucHJldmlvdXNTZWxlY3Rpb25zO1xyXG4gICAgaWYgKHByZXZpb3VzU2VsZWN0aW9ucykge1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHByZXZpb3VzU2VsZWN0aW9ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IHJvdyA9IHF1ZXJ5KChzdHJpbmcuc3Vic3RpdHV0ZSgnW2RhdGEta2V5PVwiJHswfVwiXSwgW2RhdGEtZGVzY3JpcHRvcj1cIiR7MH1cIl0nLCBbcHJldmlvdXNTZWxlY3Rpb25zW2ldXSkpLCB0aGlzLmNvbnRlbnROb2RlKVswXTtcclxuXHJcbiAgICAgICAgaWYgKHJvdykge1xyXG4gICAgICAgICAgdGhpcy5hY3RpdmF0ZUVudHJ5KHtcclxuICAgICAgICAgICAga2V5OiBwcmV2aW91c1NlbGVjdGlvbnNbaV0sXHJcbiAgICAgICAgICAgIGRlc2NyaXB0b3I6IHByZXZpb3VzU2VsZWN0aW9uc1tpXSxcclxuICAgICAgICAgICAgJHNvdXJjZTogcm93LFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSxcclxuICAvKipcclxuICAgKiBIYW5kbGVyIGZvciB0aGUgZ2xvYmFsIGAvYXBwL3JlZnJlc2hgIGV2ZW50LiBTZXRzIGByZWZyZXNoUmVxdWlyZWRgIHRvIHRydWUgaWYgdGhlIHJlc291cmNlS2luZCBtYXRjaGVzLlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIFRoZSBvYmplY3QgcHVibGlzaGVkIGJ5IHRoZSBldmVudC5cclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIF9vblJlZnJlc2g6IGZ1bmN0aW9uIF9vblJlZnJlc2goIC8qb3B0aW9ucyovICkge30sXHJcbiAgb25TY3JvbGw6IGZ1bmN0aW9uIG9uU2Nyb2xsKCAvKmV2dCovICkge1xyXG4gICAgY29uc3Qgc2Nyb2xsZXJOb2RlID0gdGhpcy5nZXQoJ3Njcm9sbGVyJyk7XHJcbiAgICBjb25zdCBwb3MgPSBkb21HZW9tLnBvc2l0aW9uKHNjcm9sbGVyTm9kZSwgdHJ1ZSk7XHJcbiAgICBjb25zdCBoZWlnaHQgPSBwb3MuaDsgLy8gdmlld3BvcnQgaGVpZ2h0ICh3aGF0IHVzZXIgc2VlcylcclxuICAgIGNvbnN0IHNjcm9sbEhlaWdodCA9IHNjcm9sbGVyTm9kZS5zY3JvbGxIZWlnaHQ7IC8vIEVudGlyZSBjb250YWluZXIgaGVpZ2h0XHJcbiAgICBjb25zdCBzY3JvbGxUb3AgPSBzY3JvbGxlck5vZGUuc2Nyb2xsVG9wOyAvLyBIb3cgZmFyIHdlIGFyZSBzY3JvbGxlZCBkb3duXHJcbiAgICBjb25zdCByZW1haW5pbmcgPSBzY3JvbGxIZWlnaHQgLSBzY3JvbGxUb3A7IC8vIEhlaWdodCB3ZSBoYXZlIHJlbWFpbmluZyB0byBzY3JvbGxcclxuICAgIGNvbnN0IHNlbGVjdGVkID0gZG9tQXR0ci5nZXQodGhpcy5kb21Ob2RlLCAnc2VsZWN0ZWQnKTtcclxuICAgIGNvbnN0IGRpZmYgPSBNYXRoLmFicyhyZW1haW5pbmcgLSBoZWlnaHQpO1xyXG5cclxuICAgIC8vIFN0YXJ0IGF1dG8gZmV0Y2hpbmcgbW9yZSBkYXRhIGlmIHRoZSB1c2VyIGlzIG9uIHRoZSBsYXN0IGhhbGYgb2YgdGhlIHJlbWFpbmluZyBzY3JlZW5cclxuICAgIGlmIChkaWZmIDw9IGhlaWdodCAvIDIpIHtcclxuICAgICAgaWYgKHNlbGVjdGVkID09PSAndHJ1ZScgJiYgdGhpcy5oYXNNb3JlRGF0YSgpICYmICF0aGlzLmxpc3RMb2FkaW5nKSB7XHJcbiAgICAgICAgdGhpcy5tb3JlKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIEhhbmRsZXIgZm9yIHRoZSBzZWxlY3Qgb3IgYWN0aW9uIG5vZGUgZGF0YS1hY3Rpb24uIEZpbmRzIHRoZSBuZWFyZXN0IG5vZGUgd2l0aCB0aGUgZGF0YS1rZXkgYXR0cmlidXRlIGFuZFxyXG4gICAqIHRvZ2dsZXMgaXQgaW4gdGhlIHZpZXdzIHNlbGVjdGlvbiBtb2RlbC5cclxuICAgKlxyXG4gICAqIElmIHNpbmdsZVNlbGVjdEFjdGlvbiBpcyBkZWZpbmVkLCBpbnZva2UgdGhlIHNpbmdsZVNlbGVjdGlvbkFjdGlvbi5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXMgQ29sbGVjdGlvbiBvZiBgZGF0YS1gIGF0dHJpYnV0ZXMgZnJvbSB0aGUgbm9kZS5cclxuICAgKiBAcGFyYW0ge0V2ZW50fSBldnQgVGhlIGNsaWNrL3RhcCBldmVudC5cclxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBub2RlIFRoZSBlbGVtZW50IHRoYXQgaW5pdGlhdGVkIHRoZSBldmVudC5cclxuICAgKi9cclxuICBzZWxlY3RFbnRyeTogZnVuY3Rpb24gc2VsZWN0RW50cnkocGFyYW1zLCBldnQsIG5vZGUpIHtcclxuICAgIGNvbnN0IHJvdyA9IHF1ZXJ5KG5vZGUpXHJcbiAgICAgIC5jbG9zZXN0KCdbZGF0YS1rZXldJylbMF07XHJcbiAgICBjb25zdCBrZXkgPSByb3cgPyByb3cuZ2V0QXR0cmlidXRlKCdkYXRhLWtleScpIDogZmFsc2U7XHJcblxyXG4gICAgaWYgKHRoaXMuX3NlbGVjdGlvbk1vZGVsICYmIGtleSkge1xyXG4gICAgICB0aGlzLl9zZWxlY3Rpb25Nb2RlbC50b2dnbGUoa2V5LCB0aGlzLmVudHJpZXNba2V5XSwgcm93KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5vcHRpb25zLnNpbmdsZVNlbGVjdCAmJiB0aGlzLm9wdGlvbnMuc2luZ2xlU2VsZWN0QWN0aW9uICYmICF0aGlzLmVuYWJsZUFjdGlvbnMpIHtcclxuICAgICAgdGhpcy5pbnZva2VTaW5nbGVTZWxlY3RBY3Rpb24oKTtcclxuICAgIH1cclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIEhhbmRsZXIgZm9yIGVhY2ggcm93LlxyXG4gICAqXHJcbiAgICogSWYgYSBzZWxlY3Rpb24gbW9kZWwgaXMgZGVmaW5lZCBhbmQgbmF2aWdhdGlvbiBpcyBkaXNhYmxlZCB0aGVuIHRvZ2dsZSB0aGUgZW50cnkvcm93XHJcbiAgICogaW4gdGhlIG1vZGVsIGFuZCBpZiBzaW5nbGVTZWxlY3Rpb25BY3Rpb24gaXMgdHJ1ZSBpbnZva2UgdGhlIHNpbmdsZVNlbGVjdEFjdGlvbi5cclxuICAgKlxyXG4gICAqIEVsc2UgbmF2aWdhdGUgdG8gdGhlIGRldGFpbCB2aWV3IGZvciB0aGUgZXh0cmFjdGVkIGRhdGEta2V5LlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IHBhcmFtcyBDb2xsZWN0aW9uIG9mIGBkYXRhLWAgYXR0cmlidXRlcyBmcm9tIHRoZSBub2RlLlxyXG4gICAqL1xyXG4gIGFjdGl2YXRlRW50cnk6IGZ1bmN0aW9uIGFjdGl2YXRlRW50cnkocGFyYW1zKSB7XHJcbiAgICBpZiAocGFyYW1zLmtleSkge1xyXG4gICAgICBpZiAodGhpcy5fc2VsZWN0aW9uTW9kZWwgJiYgdGhpcy5pc05hdmlnYXRpb25EaXNhYmxlZCgpKSB7XHJcbiAgICAgICAgdGhpcy5fc2VsZWN0aW9uTW9kZWwudG9nZ2xlKHBhcmFtcy5rZXksIHRoaXMuZW50cmllc1twYXJhbXMua2V5XSB8fCBwYXJhbXMuZGVzY3JpcHRvciwgcGFyYW1zLiRzb3VyY2UpO1xyXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc2luZ2xlU2VsZWN0ICYmIHRoaXMub3B0aW9ucy5zaW5nbGVTZWxlY3RBY3Rpb24pIHtcclxuICAgICAgICAgIHRoaXMuaW52b2tlU2luZ2xlU2VsZWN0QWN0aW9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMubmF2aWdhdGVUb0RldGFpbFZpZXcocGFyYW1zLmtleSwgcGFyYW1zLmRlc2NyaXB0b3IpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSxcclxuICAvKipcclxuICAgKiBJbnZva2VzIHRoZSBjb3JyZXNwb25kaW5nIHRvcCB0b29sYmFyIHRvb2wgdXNpbmcgYHRoaXMub3B0aW9ucy5zaW5nbGVTZWxlY3RBY3Rpb25gIGFzIHRoZSBuYW1lLlxyXG4gICAqIElmIGF1dG9DbGVhclNlbGVjdGlvbiBpcyB0cnVlLCBjbGVhciB0aGUgc2VsZWN0aW9uIG1vZGVsLlxyXG4gICAqL1xyXG4gIGludm9rZVNpbmdsZVNlbGVjdEFjdGlvbjogZnVuY3Rpb24gaW52b2tlU2luZ2xlU2VsZWN0QWN0aW9uKCkge1xyXG4gICAgaWYgKHRoaXMuYXBwLmJhcnMudGJhcikge1xyXG4gICAgICB0aGlzLmFwcC5iYXJzLnRiYXIuaW52b2tlVG9vbCh7XHJcbiAgICAgICAgdG9vbDogdGhpcy5vcHRpb25zLnNpbmdsZVNlbGVjdEFjdGlvbixcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuYXV0b0NsZWFyU2VsZWN0aW9uKSB7XHJcbiAgICAgIHRoaXMuX3NlbGVjdGlvbk1vZGVsLmNsZWFyKCk7XHJcbiAgICB9XHJcbiAgfSxcclxuICAvKipcclxuICAgKiBDYWxsZWQgdG8gdHJhbnNmb3JtIGEgdGV4dHVhbCBxdWVyeSBpbnRvIGFuIFNEYXRhIHF1ZXJ5IGNvbXBhdGlibGUgc2VhcmNoIGV4cHJlc3Npb24uXHJcbiAgICpcclxuICAgKiBWaWV3cyBzaG91bGQgb3ZlcnJpZGUgdGhpcyBmdW5jdGlvbiB0byBwcm92aWRlIHRoZWlyIG93biBmb3JtYXR0aW5nIHRhaWxvcmVkIHRvIHRoZWlyIGVudGl0eS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzZWFyY2hRdWVyeSBVc2VyIGlucHV0dGVkIHRleHQgZnJvbSB0aGUgc2VhcmNoIHdpZGdldC5cclxuICAgKiBAcmV0dXJuIHtTdHJpbmcvQm9vbGVhbn0gQW4gU0RhdGEgcXVlcnkgY29tcGF0aWJsZSBzZWFyY2ggZXhwcmVzc2lvbi5cclxuICAgKiBAdGVtcGxhdGVcclxuICAgKi9cclxuICBmb3JtYXRTZWFyY2hRdWVyeTogZnVuY3Rpb24gZm9ybWF0U2VhcmNoUXVlcnkoIC8qc2VhcmNoUXVlcnkqLyApIHtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIFJlcGxhY2VzIGEgc2luZ2xlIGBcImAgd2l0aCB0d28gYFwiXCJgIGZvciBwcm9wZXIgU0RhdGEgcXVlcnkgZXhwcmVzc2lvbnMuXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IHNlYXJjaFF1ZXJ5IFNlYXJjaCBleHByZXNzaW9uIHRvIGJlIGVzY2FwZWQuXHJcbiAgICogQHJldHVybiB7U3RyaW5nfVxyXG4gICAqL1xyXG4gIGVzY2FwZVNlYXJjaFF1ZXJ5OiBmdW5jdGlvbiBlc2NhcGVTZWFyY2hRdWVyeShzZWFyY2hRdWVyeSkge1xyXG4gICAgcmV0dXJuIFV0aWxpdHkuZXNjYXBlU2VhcmNoUXVlcnkoc2VhcmNoUXVlcnkpO1xyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogSGFuZGxlciBmb3IgdGhlIHNlYXJjaCB3aWRnZXRzIHNlYXJjaC5cclxuICAgKlxyXG4gICAqIFByZXBhcmVzIHRoZSB2aWV3IGJ5IGNsZWFyaW5nIGl0IGFuZCBzZXR0aW5nIGB0aGlzLnF1ZXJ5YCB0byB0aGUgZ2l2ZW4gc2VhcmNoIGV4cHJlc3Npb24uIFRoZW4gY2FsbHNcclxuICAgKiB7QGxpbmsgI3JlcXVlc3REYXRhIHJlcXVlc3REYXRhfSB3aGljaCBzdGFydCB0aGUgcmVxdWVzdCBwcm9jZXNzLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGV4cHJlc3Npb24gU3RyaW5nIGV4cHJlc3Npb24gYXMgcmV0dXJuZWQgZnJvbSB0aGUgc2VhcmNoIHdpZGdldFxyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgX29uU2VhcmNoRXhwcmVzc2lvbjogZnVuY3Rpb24gX29uU2VhcmNoRXhwcmVzc2lvbihleHByZXNzaW9uKSB7XHJcbiAgICB0aGlzLmNsZWFyKGZhbHNlKTtcclxuICAgIHRoaXMucXVlcnlUZXh0ID0gJyc7XHJcbiAgICB0aGlzLnF1ZXJ5ID0gZXhwcmVzc2lvbjtcclxuXHJcbiAgICB0aGlzLnJlcXVlc3REYXRhKCk7XHJcbiAgfSxcclxuICAvKipcclxuICAgKiBTZXRzIHRoZSBkZWZhdWx0IHNlYXJjaCBleHByZXNzaW9uIChhY3RpbmcgYXMgYSBwcmUtZmlsdGVyKSB0byBgdGhpcy5vcHRpb25zLnF1ZXJ5YCBhbmQgY29uZmlndXJlcyB0aGVcclxuICAgKiBzZWFyY2ggd2lkZ2V0IGJ5IHBhc3NpbmcgaW4gdGhlIGN1cnJlbnQgdmlldyBjb250ZXh0LlxyXG4gICAqL1xyXG4gIGNvbmZpZ3VyZVNlYXJjaDogZnVuY3Rpb24gY29uZmlndXJlU2VhcmNoKCkge1xyXG4gICAgdGhpcy5xdWVyeSA9IHRoaXMub3B0aW9ucyAmJiB0aGlzLm9wdGlvbnMucXVlcnkgfHwgdGhpcy5xdWVyeSB8fCBudWxsO1xyXG4gICAgaWYgKHRoaXMuc2VhcmNoV2lkZ2V0KSB7XHJcbiAgICAgIHRoaXMuc2VhcmNoV2lkZ2V0LmNvbmZpZ3VyZSh7XHJcbiAgICAgICAgJ2NvbnRleHQnOiB0aGlzLmdldENvbnRleHQoKSxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5fc2V0RGVmYXVsdFNlYXJjaFRlcm0oKTtcclxuICB9LFxyXG4gIF9zZXREZWZhdWx0U2VhcmNoVGVybTogZnVuY3Rpb24gX3NldERlZmF1bHRTZWFyY2hUZXJtKCkge1xyXG4gICAgaWYgKCF0aGlzLmRlZmF1bHRTZWFyY2hUZXJtIHx8IHRoaXMuZGVmYXVsdFNlYXJjaFRlcm1TZXQpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0eXBlb2YgdGhpcy5kZWZhdWx0U2VhcmNoVGVybSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICB0aGlzLnNldFNlYXJjaFRlcm0odGhpcy5kZWZhdWx0U2VhcmNoVGVybSgpKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuc2V0U2VhcmNoVGVybSh0aGlzLmRlZmF1bHRTZWFyY2hUZXJtKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl91cGRhdGVRdWVyeSgpO1xyXG5cclxuICAgIHRoaXMuZGVmYXVsdFNlYXJjaFRlcm1TZXQgPSB0cnVlO1xyXG4gIH0sXHJcbiAgX3VwZGF0ZVF1ZXJ5OiBmdW5jdGlvbiBfdXBkYXRlUXVlcnkoKSB7XHJcbiAgICBjb25zdCBzZWFyY2hRdWVyeSA9IHRoaXMuZ2V0U2VhcmNoUXVlcnkoKTtcclxuICAgIGlmIChzZWFyY2hRdWVyeSkge1xyXG4gICAgICB0aGlzLnF1ZXJ5ID0gc2VhcmNoUXVlcnk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnF1ZXJ5ID0gJyc7XHJcbiAgICB9XHJcbiAgfSxcclxuICBnZXRTZWFyY2hRdWVyeTogZnVuY3Rpb24gZ2V0U2VhcmNoUXVlcnkoKSB7XHJcbiAgICBsZXQgcmVzdWx0cyA9IG51bGw7XHJcblxyXG4gICAgaWYgKHRoaXMuc2VhcmNoV2lkZ2V0KSB7XHJcbiAgICAgIHJlc3VsdHMgPSB0aGlzLnNlYXJjaFdpZGdldC5nZXRGb3JtYXR0ZWRTZWFyY2hRdWVyeSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZXN1bHRzO1xyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogSGVscGVyIG1ldGhvZCBmb3IgbGlzdCBhY3Rpb25zLiBUYWtlcyBhIHZpZXcgaWQsIGRhdGEgcG9pbnQgYW5kIHdoZXJlIGZvcm1hdCBzdHJpbmcsIHNldHMgdGhlIG5hdiBvcHRpb25zXHJcbiAgICogYHdoZXJlYCB0byB0aGUgZm9ybWF0dGVkIGV4cHJlc3Npb24gdXNpbmcgdGhlIGRhdGEgcG9pbnQgYW5kIHNob3dzIHRoZSBnaXZlbiB2aWV3IGlkIHdpdGggdGhhdCBvcHRpb24uXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IGFjdGlvbiBBY3Rpb24gaW5zdGFuY2UsIG5vdCB1c2VkLlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBzZWxlY3Rpb24gRGF0YSBlbnRyeSBmb3IgdGhlIHNlbGVjdGlvbi5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gdmlld0lkIFZpZXcgaWQgdG8gYmUgc2hvd25cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gd2hlcmVRdWVyeUZtdCBXaGVyZSBleHByZXNzaW9uIGZvcm1hdCBzdHJpbmcgdG8gYmUgcGFzc2VkLiBgJHswfWAgd2lsbCBiZSB0aGUgYGlkUHJvcGVydHlgXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IGFkZGl0aW9uYWxPcHRpb25zIEFkZGl0aW9uYWwgb3B0aW9ucyB0byBiZSBwYXNzZWQgaW50byB0aGUgbmV4dCB2aWV3XHJcbiAgICogcHJvcGVydHkgb2YgdGhlIHBhc3NlZCBzZWxlY3Rpb24gZGF0YS5cclxuICAgKi9cclxuICBuYXZpZ2F0ZVRvUmVsYXRlZFZpZXc6IGZ1bmN0aW9uIG5hdmlnYXRlVG9SZWxhdGVkVmlldyhhY3Rpb24sIHNlbGVjdGlvbiwgdmlld0lkLCB3aGVyZVF1ZXJ5Rm10LCBhZGRpdGlvbmFsT3B0aW9ucykge1xyXG4gICAgY29uc3QgdmlldyA9IHRoaXMuYXBwLmdldFZpZXcodmlld0lkKTtcclxuICAgIGxldCBvcHRpb25zID0ge1xyXG4gICAgICB3aGVyZTogc3RyaW5nLnN1YnN0aXR1dGUod2hlcmVRdWVyeUZtdCwgW3NlbGVjdGlvbi5kYXRhW3RoaXMuaWRQcm9wZXJ0eV1dKSxcclxuICAgICAgc2VsZWN0ZWRFbnRyeTogc2VsZWN0aW9uLmRhdGEsXHJcbiAgICB9O1xyXG5cclxuICAgIGlmIChhZGRpdGlvbmFsT3B0aW9ucykge1xyXG4gICAgICBvcHRpb25zID0gbGFuZy5taXhpbihvcHRpb25zLCBhZGRpdGlvbmFsT3B0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zZXRTb3VyY2Uoe1xyXG4gICAgICBlbnRyeTogc2VsZWN0aW9uLmRhdGEsXHJcbiAgICAgIGRlc2NyaXB0b3I6IHNlbGVjdGlvbi5kYXRhW3RoaXMubGFiZWxQcm9wZXJ0eV0sXHJcbiAgICAgIGtleTogc2VsZWN0aW9uLmRhdGFbdGhpcy5pZFByb3BlcnR5XSxcclxuICAgIH0pO1xyXG5cclxuICAgIGlmICh2aWV3KSB7XHJcbiAgICAgIHZpZXcuc2hvdyhvcHRpb25zKTtcclxuICAgIH1cclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIE5hdmlnYXRlcyB0byB0aGUgZGVmaW5lZCBgdGhpcy5kZXRhaWxWaWV3YCBwYXNzaW5nIHRoZSBwYXJhbXMgYXMgbmF2aWdhdGlvbiBvcHRpb25zLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBrZXkgS2V5IG9mIHRoZSBlbnRyeSB0byBiZSBzaG93biBpbiBkZXRhaWxcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gZGVzY3JpcHRvciBEZXNjcmlwdGlvbiBvZiB0aGUgZW50cnksIHdpbGwgYmUgdXNlZCBhcyB0aGUgdG9wIHRvb2xiYXIgdGl0bGUgdGV4dFxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBhZGRpdGlvbmFsT3B0aW9ucyBBZGRpdGlvbmFsIG9wdGlvbnMgdG8gYmUgcGFzc2VkIGludG8gdGhlIG5leHQgdmlld1xyXG4gICAqL1xyXG4gIG5hdmlnYXRlVG9EZXRhaWxWaWV3OiBmdW5jdGlvbiBuYXZpZ2F0ZVRvRGV0YWlsVmlldyhrZXksIGRlc2NyaXB0b3IsIGFkZGl0aW9uYWxPcHRpb25zKSB7XHJcbiAgICBjb25zdCB2aWV3ID0gdGhpcy5hcHAuZ2V0Vmlldyh0aGlzLmRldGFpbFZpZXcpO1xyXG4gICAgbGV0IG9wdGlvbnMgPSB7XHJcbiAgICAgIGRlc2NyaXB0b3I6IGRlc2NyaXB0b3IsIC8vIGtlZXAgZm9yIGJhY2t3YXJkcyBjb21wYXRcclxuICAgICAgdGl0bGU6IGRlc2NyaXB0b3IsXHJcbiAgICAgIGtleToga2V5LFxyXG4gICAgICBmcm9tQ29udGV4dDogdGhpcyxcclxuICAgIH07XHJcblxyXG4gICAgaWYgKGFkZGl0aW9uYWxPcHRpb25zKSB7XHJcbiAgICAgIG9wdGlvbnMgPSBsYW5nLm1peGluKG9wdGlvbnMsIGFkZGl0aW9uYWxPcHRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodmlldykge1xyXG4gICAgICB2aWV3LnNob3cob3B0aW9ucyk7XHJcbiAgICB9XHJcbiAgfSxcclxuICAvKipcclxuICAgKiBIZWxwZXIgbWV0aG9kIGZvciBsaXN0LWFjdGlvbnMuIE5hdmlnYXRlcyB0byB0aGUgZGVmaW5lZCBgdGhpcy5lZGl0Vmlld2AgcGFzc2luZyB0aGUgZ2l2ZW4gc2VsZWN0aW9ucyBgaWRQcm9wZXJ0eWBcclxuICAgKiBwcm9wZXJ0eSBpbiB0aGUgbmF2aWdhdGlvbiBvcHRpb25zICh3aGljaCBpcyB0aGVuIHJlcXVlc3RlZCBhbmQgcmVzdWx0IHVzZWQgYXMgZGVmYXVsdCBkYXRhKS5cclxuICAgKiBAcGFyYW0ge09iamVjdH0gYWN0aW9uIEFjdGlvbiBpbnN0YW5jZSwgbm90IHVzZWQuXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IHNlbGVjdGlvbiBEYXRhIGVudHJ5IGZvciB0aGUgc2VsZWN0aW9uLlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBhZGRpdGlvbmFsT3B0aW9ucyBBZGRpdGlvbmFsIG9wdGlvbnMgdG8gYmUgcGFzc2VkIGludG8gdGhlIG5leHQgdmlldy5cclxuICAgKi9cclxuICBuYXZpZ2F0ZVRvRWRpdFZpZXc6IGZ1bmN0aW9uIG5hdmlnYXRlVG9FZGl0VmlldyhhY3Rpb24sIHNlbGVjdGlvbiwgYWRkaXRpb25hbE9wdGlvbnMpIHtcclxuICAgIGNvbnN0IHZpZXcgPSB0aGlzLmFwcC5nZXRWaWV3KHRoaXMuZWRpdFZpZXcgfHwgdGhpcy5pbnNlcnRWaWV3KTtcclxuICAgIGNvbnN0IGtleSA9IHNlbGVjdGlvbi5kYXRhW3RoaXMuaWRQcm9wZXJ0eV07XHJcbiAgICBsZXQgb3B0aW9ucyA9IHtcclxuICAgICAga2V5OiBrZXksXHJcbiAgICAgIHNlbGVjdGVkRW50cnk6IHNlbGVjdGlvbi5kYXRhLFxyXG4gICAgICBmcm9tQ29udGV4dDogdGhpcyxcclxuICAgIH07XHJcblxyXG4gICAgaWYgKGFkZGl0aW9uYWxPcHRpb25zKSB7XHJcbiAgICAgIG9wdGlvbnMgPSBsYW5nLm1peGluKG9wdGlvbnMsIGFkZGl0aW9uYWxPcHRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodmlldykge1xyXG4gICAgICB2aWV3LnNob3cob3B0aW9ucyk7XHJcbiAgICB9XHJcbiAgfSxcclxuICAvKipcclxuICAgKiBOYXZpZ2F0ZXMgdG8gdGhlIGRlZmluZWQgYHRoaXMuaW5zZXJ0Vmlld2AsIG9yIGB0aGlzLmVkaXRWaWV3YCBwYXNzaW5nIHRoZSBjdXJyZW50IHZpZXdzIGlkIGFzIHRoZSBgcmV0dXJuVG9gXHJcbiAgICogb3B0aW9uIGFuZCBzZXR0aW5nIGBpbnNlcnRgIHRvIHRydWUuXHJcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWwgTm9kZSB0aGF0IGluaXRpYXRlZCB0aGUgZXZlbnQuXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IGFkZGl0aW9uYWxPcHRpb25zIEFkZGl0aW9uYWwgb3B0aW9ucyB0byBiZSBwYXNzZWQgaW50byB0aGUgbmV4dCB2aWV3LlxyXG4gICAqL1xyXG4gIG5hdmlnYXRlVG9JbnNlcnRWaWV3OiBmdW5jdGlvbiBuYXZpZ2F0ZVRvSW5zZXJ0VmlldyhlbCwgYWRkaXRpb25hbE9wdGlvbnMpIHtcclxuICAgIGNvbnN0IHZpZXcgPSB0aGlzLmFwcC5nZXRWaWV3KHRoaXMuaW5zZXJ0VmlldyB8fCB0aGlzLmVkaXRWaWV3KTtcclxuICAgIGxldCBvcHRpb25zID0ge1xyXG4gICAgICByZXR1cm5UbzogdGhpcy5pZCxcclxuICAgICAgaW5zZXJ0OiB0cnVlLFxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBQYXNzIGFsb25nIHRoZSBzZWxlY3RlZCBlbnRyeSAocmVsYXRlZCBsaXN0IGNvdWxkIGdldCBpdCBmcm9tIGEgcXVpY2sgYWN0aW9uKVxyXG4gICAgaWYgKHRoaXMub3B0aW9ucy5zZWxlY3RlZEVudHJ5KSB7XHJcbiAgICAgIG9wdGlvbnMuc2VsZWN0ZWRFbnRyeSA9IHRoaXMub3B0aW9ucy5zZWxlY3RlZEVudHJ5O1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChhZGRpdGlvbmFsT3B0aW9ucykge1xyXG4gICAgICBvcHRpb25zID0gbGFuZy5taXhpbihvcHRpb25zLCBhZGRpdGlvbmFsT3B0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHZpZXcpIHtcclxuICAgICAgdmlldy5zaG93KG9wdGlvbnMpO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogRGV0ZXJpbWluZXMgaWYgdGhlcmUgaXMgbW9yZSBkYXRhIHRvIGJlIHNob3duLlxyXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59IFRydWUgaWYgdGhlIGxpc3QgaGFzIG1vcmUgZGF0YTsgRmFsc2Ugb3RoZXJ3aXNlLiBEZWZhdWx0IGlzIHRydWUuXHJcbiAgICovXHJcbiAgaGFzTW9yZURhdGE6IGZ1bmN0aW9uIGhhc01vcmVEYXRhKCkge30sXHJcbiAgX3NldExvYWRpbmc6IGZ1bmN0aW9uIF9zZXRMb2FkaW5nKCkge1xyXG4gICAgZG9tQ2xhc3MuYWRkKHRoaXMuZG9tTm9kZSwgJ2xpc3QtbG9hZGluZycpO1xyXG4gICAgdGhpcy5saXN0TG9hZGluZyA9IHRydWU7XHJcbiAgfSxcclxuICBfY2xlYXJMb2FkaW5nOiBmdW5jdGlvbiBfY2xlYXJMb2FkaW5nKCkge1xyXG4gICAgZG9tQ2xhc3MucmVtb3ZlKHRoaXMuZG9tTm9kZSwgJ2xpc3QtbG9hZGluZycpO1xyXG4gICAgdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlO1xyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogSW5pdGlhdGVzIHRoZSBkYXRhIHJlcXVlc3QuXHJcbiAgICovXHJcbiAgcmVxdWVzdERhdGE6IGZ1bmN0aW9uIHJlcXVlc3REYXRhKCkge1xyXG4gICAgY29uc3Qgc3RvcmUgPSB0aGlzLmdldCgnc3RvcmUnKTtcclxuXHJcbiAgICBpZiAoIXN0b3JlICYmICF0aGlzLl9tb2RlbCkge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ0Vycm9yIHJlcXVlc3RpbmcgZGF0YSwgbm8gc3RvcmUgd2FzIGRlZmluZWQuIERpZCB5b3UgbWVhbiB0byBtaXhpbiBfU0RhdGFMaXN0TWl4aW4gdG8geW91ciBsaXN0IHZpZXc/Jyk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5fc2V0TG9hZGluZygpO1xyXG5cclxuICAgIGxldCBxdWVyeVJlc3VsdHM7XHJcbiAgICBsZXQgcXVlcnlPcHRpb25zO1xyXG4gICAgbGV0IHF1ZXJ5RXhwcmVzc2lvbjtcclxuICAgIGlmICh0aGlzLl9tb2RlbCkge1xyXG4gICAgICAvLyBUb2RvOiBmaW5kIGEgYmV0dGVyIHdheSB0byB0cmFuc2ZlciB0aGlzIHN0YXRlLlxyXG4gICAgICB0aGlzLm9wdGlvbnMuY291bnQgPSB0aGlzLnBhZ2VTaXplO1xyXG4gICAgICB0aGlzLm9wdGlvbnMuc3RhcnQgPSB0aGlzLnBvc2l0aW9uO1xyXG4gICAgICBxdWVyeU9wdGlvbnMgPSB7fTtcclxuICAgICAgdGhpcy5fYXBwbHlTdGF0ZVRvUXVlcnlPcHRpb25zKHF1ZXJ5T3B0aW9ucyk7XHJcbiAgICAgIHF1ZXJ5RXhwcmVzc2lvbiA9IHRoaXMuX2J1aWxkUXVlcnlFeHByZXNzaW9uKCkgfHwgbnVsbDtcclxuICAgICAgcXVlcnlSZXN1bHRzID0gdGhpcy5yZXF1ZXN0RGF0YVVzaW5nTW9kZWwocXVlcnlFeHByZXNzaW9uLCBxdWVyeU9wdGlvbnMpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcXVlcnlPcHRpb25zID0ge307XHJcbiAgICAgIHRoaXMuX2FwcGx5U3RhdGVUb1F1ZXJ5T3B0aW9ucyhxdWVyeU9wdGlvbnMpO1xyXG5cclxuICAgICAgcXVlcnlFeHByZXNzaW9uID0gdGhpcy5fYnVpbGRRdWVyeUV4cHJlc3Npb24oKSB8fCBudWxsO1xyXG4gICAgICBxdWVyeVJlc3VsdHMgPSB0aGlzLnJlcXVlc3REYXRhVXNpbmdTdG9yZShxdWVyeUV4cHJlc3Npb24sIHF1ZXJ5T3B0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgd2hlbihxdWVyeVJlc3VsdHMsXHJcbiAgICAgIHRoaXMuX29uUXVlcnlDb21wbGV0ZS5iaW5kKHRoaXMsIHF1ZXJ5UmVzdWx0cyksXHJcbiAgICAgIHRoaXMuX29uUXVlcnlFcnJvci5iaW5kKHRoaXMsIHF1ZXJ5T3B0aW9ucylcclxuICAgICk7XHJcblxyXG4gICAgcmV0dXJuIHF1ZXJ5UmVzdWx0cztcclxuICB9LFxyXG4gIHJlcXVlc3REYXRhVXNpbmdNb2RlbDogZnVuY3Rpb24gcmVxdWVzdERhdGFVc2luZ01vZGVsKHF1ZXJ5RXhwcmVzc2lvbiwgb3B0aW9ucykge1xyXG4gICAgY29uc3QgcXVlcnlPcHRpb25zID0ge1xyXG4gICAgICByZXR1cm5RdWVyeVJlc3VsdHM6IHRydWUsXHJcbiAgICAgIHF1ZXJ5TW9kZWxOYW1lOiB0aGlzLnF1ZXJ5TW9kZWxOYW1lLFxyXG4gICAgfTtcclxuICAgIGxhbmcubWl4aW4ocXVlcnlPcHRpb25zLCBvcHRpb25zKTtcclxuICAgIHJldHVybiB0aGlzLl9tb2RlbC5nZXRFbnRyaWVzKHF1ZXJ5RXhwcmVzc2lvbiwgcXVlcnlPcHRpb25zKTtcclxuICB9LFxyXG4gIHJlcXVlc3REYXRhVXNpbmdTdG9yZTogZnVuY3Rpb24gcmVxdWVzdERhdGFVc2luZ1N0b3JlKHF1ZXJ5RXhwcmVzc2lvbiwgcXVlcnlPcHRpb25zKSB7XHJcbiAgICBjb25zdCBzdG9yZSA9IHRoaXMuZ2V0KCdzdG9yZScpO1xyXG4gICAgcmV0dXJuIHN0b3JlLnF1ZXJ5KHF1ZXJ5RXhwcmVzc2lvbiwgcXVlcnlPcHRpb25zKTtcclxuICB9LFxyXG4gIF9vblF1ZXJ5Q29tcGxldGU6IGZ1bmN0aW9uIF9vblF1ZXJ5Q29tcGxldGUocXVlcnlSZXN1bHRzLCBlbnRyaWVzKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBzdGFydCA9IHRoaXMucG9zaXRpb247XHJcbiAgICAgIGNvbnN0IHNjcm9sbGVyTm9kZSA9IHRoaXMuZ2V0KCdzY3JvbGxlcicpO1xyXG5cclxuICAgICAgdHJ5IHtcclxuICAgICAgICB3aGVuKHF1ZXJ5UmVzdWx0cy50b3RhbCxcclxuICAgICAgICAgIHRoaXMuX29uUXVlcnlUb3RhbC5iaW5kKHRoaXMpLFxyXG4gICAgICAgICAgdGhpcy5fb25RdWVyeVRvdGFsRXJyb3IuYmluZCh0aGlzKSk7XHJcblxyXG4gICAgICAgIC8qIHRvZG86IG1vdmUgdG8gYSBtb3JlIGFwcHJvcHJpYXRlIGxvY2F0aW9uICovXHJcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucyAmJiB0aGlzLm9wdGlvbnMuYWxsb3dFbXB0eVNlbGVjdGlvbikge1xyXG4gICAgICAgICAgZG9tQ2xhc3MuYWRkKHRoaXMuZG9tTm9kZSwgJ2xpc3QtaGFzLWVtcHR5LW9wdCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyogcmVtb3ZlIHRoZSBsb2FkaW5nIGluZGljYXRvciBzbyB0aGF0IGl0IGRvZXMgbm90IGdldCByZS1zaG93biB3aGlsZSByZXF1ZXN0aW5nIG1vcmUgZGF0YSAqL1xyXG4gICAgICAgIGlmIChzdGFydCA9PT0gMCkge1xyXG4gICAgICAgICAgLy8gQ2hlY2sgZW50cmllcy5sZW5ndGggc28gd2UgZG9uJ3QgY2xlYXIgb3V0IHRoZSBcIm5vRGF0YVwiIHRlbXBsYXRlXHJcbiAgICAgICAgICBpZiAoZW50cmllcyAmJiBlbnRyaWVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy5zZXQoJ2xpc3RDb250ZW50JywgJycpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGRvbUNvbnN0cnVjdC5kZXN0cm95KHRoaXMubG9hZGluZ0luZGljYXRvck5vZGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5wcm9jZXNzRGF0YShlbnRyaWVzKTtcclxuICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICB0aGlzLl9jbGVhckxvYWRpbmcoKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKCF0aGlzLl9vblNjcm9sbEhhbmRsZSAmJiB0aGlzLmNvbnRpbnVvdXNTY3JvbGxpbmcpIHtcclxuICAgICAgICB0aGlzLl9vblNjcm9sbEhhbmRsZSA9IHRoaXMuY29ubmVjdChzY3JvbGxlck5vZGUsICdvbnNjcm9sbCcsIHRoaXMub25TY3JvbGwpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLm9uQ29udGVudENoYW5nZSgpO1xyXG4gICAgICBjb25uZWN0LnB1Ymxpc2goJy9hcHAvdG9vbGJhci91cGRhdGUnLCBbXSk7XHJcblxyXG4gICAgICBpZiAodGhpcy5fc2VsZWN0aW9uTW9kZWwpIHtcclxuICAgICAgICB0aGlzLl9sb2FkUHJldmlvdXNTZWxlY3Rpb25zKCk7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihlKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxyXG4gICAgICB0aGlzLl9sb2dFcnJvcih7XHJcbiAgICAgICAgbWVzc2FnZTogZS5tZXNzYWdlLFxyXG4gICAgICAgIHN0YWNrOiBlLnN0YWNrLFxyXG4gICAgICB9LCBlLm1lc3NhZ2UpO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgY3JlYXRlU3RvcmU6IGZ1bmN0aW9uIGNyZWF0ZVN0b3JlKCkge1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfSxcclxuICBvbkNvbnRlbnRDaGFuZ2U6IGZ1bmN0aW9uIG9uQ29udGVudENoYW5nZSgpIHt9LFxyXG4gIF9wcm9jZXNzRW50cnk6IGZ1bmN0aW9uIF9wcm9jZXNzRW50cnkoZW50cnkpIHtcclxuICAgIHJldHVybiBlbnRyeTtcclxuICB9LFxyXG4gIF9vblF1ZXJ5VG90YWxFcnJvcjogZnVuY3Rpb24gX29uUXVlcnlUb3RhbEVycm9yKGVycm9yKSB7XHJcbiAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yKTtcclxuICB9LFxyXG4gIF9vblF1ZXJ5VG90YWw6IGZ1bmN0aW9uIF9vblF1ZXJ5VG90YWwoc2l6ZSkge1xyXG4gICAgdGhpcy50b3RhbCA9IHNpemU7XHJcbiAgICBpZiAoc2l6ZSA9PT0gMCkge1xyXG4gICAgICB0aGlzLnNldCgnbGlzdENvbnRlbnQnLCB0aGlzLm5vRGF0YVRlbXBsYXRlLmFwcGx5KHRoaXMpKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IHJlbWFpbmluZyA9IHRoaXMuZ2V0UmVtYWluaW5nQ291bnQoKTtcclxuICAgICAgaWYgKHJlbWFpbmluZyAhPT0gLTEpIHtcclxuICAgICAgICB0aGlzLnNldCgncmVtYWluaW5nQ29udGVudCcsIHN0cmluZy5zdWJzdGl0dXRlKHRoaXMucmVtYWluaW5nVGV4dCwgW3JlbWFpbmluZ10pKTtcclxuICAgICAgICB0aGlzLnJlbWFpbmluZyA9IHJlbWFpbmluZztcclxuICAgICAgfVxyXG5cclxuICAgICAgZG9tQ2xhc3MudG9nZ2xlKHRoaXMuZG9tTm9kZSwgJ2xpc3QtaGFzLW1vcmUnLCAocmVtYWluaW5nID09PSAtMSB8fCByZW1haW5pbmcgPiAwKSk7XHJcblxyXG4gICAgICB0aGlzLnBvc2l0aW9uID0gdGhpcy5wb3NpdGlvbiArIHRoaXMucGFnZVNpemU7XHJcbiAgICB9XHJcbiAgfSxcclxuICBnZXRSZW1haW5pbmdDb3VudDogZnVuY3Rpb24gZ2V0UmVtYWluaW5nQ291bnQoKSB7XHJcbiAgICBjb25zdCByZW1haW5pbmcgPSB0aGlzLnRvdGFsID4gLTEgPyB0aGlzLnRvdGFsIC0gKHRoaXMucG9zaXRpb24gKyB0aGlzLnBhZ2VTaXplKSA6IC0xO1xyXG4gICAgcmV0dXJuIHJlbWFpbmluZztcclxuICB9LFxyXG4gIG9uQXBwbHlSb3dUZW1wbGF0ZTogZnVuY3Rpb24gb25BcHBseVJvd1RlbXBsYXRlKCAvKmVudHJ5LCByb3dOb2RlKi8gKSB7fSxcclxuICBwcm9jZXNzRGF0YTogZnVuY3Rpb24gcHJvY2Vzc0RhdGEoZW50cmllcykge1xyXG4gICAgaWYgKCFlbnRyaWVzKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBjb3VudCA9IGVudHJpZXMubGVuZ3RoO1xyXG5cclxuICAgIGlmIChjb3VudCA+IDApIHtcclxuICAgICAgY29uc3QgZG9jZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XHJcbiAgICAgICAgY29uc3QgZW50cnkgPSB0aGlzLl9wcm9jZXNzRW50cnkoZW50cmllc1tpXSk7XHJcbiAgICAgICAgLy8gSWYga2V5IGNvbWVzIGJhY2sgd2l0aCBub3RoaW5nLCBjaGVjayB0aGF0IHRoZSBzdG9yZSBpcyBwcm9wZXJseVxyXG4gICAgICAgIC8vIHNldHVwIHdpdGggYW4gaWRQcm9wZXJ0eVxyXG4gICAgICAgIHRoaXMuZW50cmllc1t0aGlzLmdldElkZW50aXR5KGVudHJ5KV0gPSBlbnRyeTtcclxuXHJcbiAgICAgICAgY29uc3Qgcm93Tm9kZSA9IHRoaXMuY3JlYXRlSXRlbVJvd05vZGUoZW50cnkpO1xyXG5cclxuICAgICAgICBkb2NmcmFnLmFwcGVuZENoaWxkKHJvd05vZGUpO1xyXG4gICAgICAgIHRoaXMub25BcHBseVJvd1RlbXBsYXRlKGVudHJ5LCByb3dOb2RlKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGRvY2ZyYWcuY2hpbGROb2Rlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgZG9tQ29uc3RydWN0LnBsYWNlKGRvY2ZyYWcsIHRoaXMuY29udGVudE5vZGUsICdsYXN0Jyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LFxyXG4gIGNyZWF0ZUl0ZW1Sb3dOb2RlOiBmdW5jdGlvbiBjcmVhdGVJdGVtUm93Tm9kZShlbnRyeSkge1xyXG4gICAgbGV0IHJvd05vZGUgPSBudWxsO1xyXG4gICAgdHJ5IHtcclxuICAgICAgcm93Tm9kZSA9IGRvbUNvbnN0cnVjdC50b0RvbSh0aGlzLnJvd1RlbXBsYXRlLmFwcGx5KGVudHJ5LCB0aGlzKSk7XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnIpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXHJcbiAgICAgIHJvd05vZGUgPSBkb21Db25zdHJ1Y3QudG9Eb20odGhpcy5yb3dUZW1wbGF0ZUVycm9yLmFwcGx5KGVudHJ5LCB0aGlzKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcm93Tm9kZTtcclxuICB9LFxyXG4gIGdldElkZW50aXR5OiBmdW5jdGlvbiBnZXRJZGVudGl0eShlbnRyeSkge1xyXG4gICAgaWYgKHRoaXMuX21vZGVsKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9tb2RlbC5nZXRFbnRpdHlJZChlbnRyeSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgc3RvcmUgPSB0aGlzLmdldCgnc3RvcmUnKTtcclxuICAgIHJldHVybiBzdG9yZS5nZXRJZGVudGl0eShlbnRyeSwgdGhpcy5pZFByb3BlcnR5KTtcclxuICB9LFxyXG4gIF9sb2dFcnJvcjogZnVuY3Rpb24gX2xvZ0Vycm9yKGVycm9yLCBtZXNzYWdlKSB7XHJcbiAgICBjb25zdCBmcm9tQ29udGV4dCA9IHRoaXMub3B0aW9ucy5mcm9tQ29udGV4dDtcclxuICAgIHRoaXMub3B0aW9ucy5mcm9tQ29udGV4dCA9IG51bGw7XHJcbiAgICBjb25zdCBlcnJvckl0ZW0gPSB7XHJcbiAgICAgIHZpZXdPcHRpb25zOiB0aGlzLm9wdGlvbnMsXHJcbiAgICAgIHNlcnZlckVycm9yOiBlcnJvcixcclxuICAgIH07XHJcblxyXG4gICAgRXJyb3JNYW5hZ2VyLmFkZEVycm9yKG1lc3NhZ2UgfHwgdGhpcy5nZXRFcnJvck1lc3NhZ2UoZXJyb3IpLCBlcnJvckl0ZW0pO1xyXG4gICAgdGhpcy5vcHRpb25zLmZyb21Db250ZXh0ID0gZnJvbUNvbnRleHQ7XHJcbiAgfSxcclxuICBfb25RdWVyeUVycm9yOiBmdW5jdGlvbiBfb25RdWVyeUVycm9yKHF1ZXJ5T3B0aW9ucywgZXJyb3IpIHtcclxuICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IpO1xyXG4gIH0sXHJcbiAgX2J1aWxkUXVlcnlFeHByZXNzaW9uOiBmdW5jdGlvbiBfYnVpbGRRdWVyeUV4cHJlc3Npb24oKSB7XHJcbiAgICByZXR1cm4gbGFuZy5taXhpbih0aGlzLnF1ZXJ5IHx8IHt9LCB0aGlzLm9wdGlvbnMgJiYgKHRoaXMub3B0aW9ucy5xdWVyeSB8fCB0aGlzLm9wdGlvbnMud2hlcmUpKTtcclxuICB9LFxyXG4gIF9hcHBseVN0YXRlVG9RdWVyeU9wdGlvbnM6IGZ1bmN0aW9uIF9hcHBseVN0YXRlVG9RdWVyeU9wdGlvbnMoIC8qcXVlcnlPcHRpb25zKi8gKSB7fSxcclxuICAvKipcclxuICAgKiBIYW5kbGVyIGZvciB0aGUgbW9yZSBidXR0b24uIFNpbXBseSBjYWxscyB7QGxpbmsgI3JlcXVlc3REYXRhIHJlcXVlc3REYXRhfSB3aGljaCBhbHJlYWR5IGhhcyB0aGUgaW5mbyBmb3JcclxuICAgKiBzZXR0aW5nIHRoZSBzdGFydCBpbmRleCBhcyBuZWVkZWQuXHJcbiAgICovXHJcbiAgbW9yZTogZnVuY3Rpb24gbW9yZSgpIHtcclxuICAgIGlmICh0aGlzLmNvbnRpbnVvdXNTY3JvbGxpbmcpIHtcclxuICAgICAgdGhpcy5zZXQoJ3JlbWFpbmluZ0NvbnRlbnQnLCB0aGlzLmxvYWRpbmdUZW1wbGF0ZS5hcHBseSh0aGlzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5yZXF1ZXN0RGF0YSgpO1xyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogSGFuZGxlciBmb3IgdGhlIG5vbmUvbm8gc2VsZWN0aW9uIGJ1dHRvbiBpcyBwcmVzc2VkLiBVc2VkIGluIHNlbGVjdGlvbiB2aWV3cyB3aGVuIG5vdCBzZWxlY3RpbmcgaXMgYW4gb3B0aW9uLlxyXG4gICAqIEludm9rZXMgdGhlIGB0aGlzLm9wdGlvbnMuc2luZ2xlU2VsZWN0QWN0aW9uYCB0b29sLlxyXG4gICAqL1xyXG4gIGVtcHR5U2VsZWN0aW9uOiBmdW5jdGlvbiBlbXB0eVNlbGVjdGlvbigpIHtcclxuICAgIHRoaXMuX3NlbGVjdGlvbk1vZGVsLmNsZWFyKCk7XHJcblxyXG4gICAgaWYgKHRoaXMuYXBwLmJhcnMudGJhcikge1xyXG4gICAgICB0aGlzLmFwcC5iYXJzLnRiYXIuaW52b2tlVG9vbCh7XHJcbiAgICAgICAgdG9vbDogdGhpcy5vcHRpb25zLnNpbmdsZVNlbGVjdEFjdGlvbixcclxuICAgICAgfSk7IC8vIGludm9rZSBhY3Rpb24gb2YgdG9vbFxyXG4gICAgfVxyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogRGV0ZXJtaW5lcyBpZiB0aGUgdmlldyBzaG91bGQgYmUgcmVmcmVzaCBieSBpbnNwZWN0aW5nIGFuZCBjb21wYXJpbmcgdGhlIHBhc3NlZCBuYXZpZ2F0aW9uIG9wdGlvbnMgd2l0aCBjdXJyZW50IHZhbHVlcy5cclxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBQYXNzZWQgbmF2aWdhdGlvbiBvcHRpb25zLlxyXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59IFRydWUgaWYgdGhlIHZpZXcgc2hvdWxkIGJlIHJlZnJlc2hlZCwgZmFsc2UgaWYgbm90LlxyXG4gICAqL1xyXG4gIHJlZnJlc2hSZXF1aXJlZEZvcjogZnVuY3Rpb24gcmVmcmVzaFJlcXVpcmVkRm9yKG9wdGlvbnMpIHtcclxuICAgIGlmICh0aGlzLm9wdGlvbnMpIHtcclxuICAgICAgaWYgKG9wdGlvbnMpIHtcclxuICAgICAgICBpZiAodGhpcy5leHBhbmRFeHByZXNzaW9uKHRoaXMub3B0aW9ucy5zdGF0ZUtleSkgIT09IHRoaXMuZXhwYW5kRXhwcmVzc2lvbihvcHRpb25zLnN0YXRlS2V5KSkge1xyXG4gICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmV4cGFuZEV4cHJlc3Npb24odGhpcy5vcHRpb25zLndoZXJlKSAhPT0gdGhpcy5leHBhbmRFeHByZXNzaW9uKG9wdGlvbnMud2hlcmUpKSB7XHJcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuZXhwYW5kRXhwcmVzc2lvbih0aGlzLm9wdGlvbnMucXVlcnkpICE9PSB0aGlzLmV4cGFuZEV4cHJlc3Npb24ob3B0aW9ucy5xdWVyeSkpIHtcclxuICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5leHBhbmRFeHByZXNzaW9uKHRoaXMub3B0aW9ucy5yZXNvdXJjZUtpbmQpICE9PSB0aGlzLmV4cGFuZEV4cHJlc3Npb24ob3B0aW9ucy5yZXNvdXJjZUtpbmQpKSB7XHJcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuZXhwYW5kRXhwcmVzc2lvbih0aGlzLm9wdGlvbnMucmVzb3VyY2VQcmVkaWNhdGUpICE9PSB0aGlzLmV4cGFuZEV4cHJlc3Npb24ob3B0aW9ucy5yZXNvdXJjZVByZWRpY2F0ZSkpIHtcclxuICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0aGlzLmluaGVyaXRlZChhcmd1bWVudHMpO1xyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogUmV0dXJucyB0aGUgY3VycmVudCB2aWV3cyBjb250ZXh0IGJ5IGV4cGFuZGluZyB1cG9uIHRoZSB7QGxpbmsgVmlldyNnZXRDb250ZXh0IHBhcmVudCBpbXBsZW1lbnRhdGlvbn0gdG8gaW5jbHVkZVxyXG4gICAqIHRoZSB2aWV3cyByZXNvdXJjZUtpbmQuXHJcbiAgICogQHJldHVybiB7T2JqZWN0fSBjb250ZXh0LlxyXG4gICAqL1xyXG4gIGdldENvbnRleHQ6IGZ1bmN0aW9uIGdldENvbnRleHQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5pbmhlcml0ZWQoYXJndW1lbnRzKTtcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIEV4dGVuZHMgdGhlIHtAbGluayBWaWV3I2JlZm9yZVRyYW5zaXRpb25UbyBwYXJlbnQgaW1wbGVtZW50YXRpb259IGJ5IGFsc28gdG9nZ2xpbmcgdGhlIHZpc2liaWxpdHkgb2YgdGhlIHZpZXdzXHJcbiAgICogY29tcG9uZW50cyBhbmQgY2xlYXJpbmcgdGhlIHZpZXcgYW5kIHNlbGVjdGlvbiBtb2RlbCBhcyBuZWVkZWQuXHJcbiAgICovXHJcbiAgYmVmb3JlVHJhbnNpdGlvblRvOiBmdW5jdGlvbiBiZWZvcmVUcmFuc2l0aW9uVG8oKSB7XHJcbiAgICB0aGlzLmluaGVyaXRlZChhcmd1bWVudHMpO1xyXG5cclxuICAgIGRvbUNsYXNzLnRvZ2dsZSh0aGlzLmRvbU5vZGUsICdsaXN0LWhpZGUtc2VhcmNoJywgKHRoaXMub3B0aW9ucyAmJiB0eXBlb2YgdGhpcy5vcHRpb25zLmhpZGVTZWFyY2ggIT09ICd1bmRlZmluZWQnKSA/IHRoaXMub3B0aW9ucy5oaWRlU2VhcmNoIDogdGhpcy5oaWRlU2VhcmNoIHx8ICF0aGlzLmVuYWJsZVNlYXJjaCk7XHJcblxyXG4gICAgZG9tQ2xhc3MudG9nZ2xlKHRoaXMuZG9tTm9kZSwgJ2xpc3Qtc2hvdy1zZWxlY3RvcnMnLCAhdGhpcy5pc1NlbGVjdGlvbkRpc2FibGVkKCkgJiYgIXRoaXMub3B0aW9ucy5zaW5nbGVTZWxlY3QpO1xyXG5cclxuICAgIGlmICh0aGlzLl9zZWxlY3Rpb25Nb2RlbCAmJiAhdGhpcy5pc1NlbGVjdGlvbkRpc2FibGVkKCkpIHtcclxuICAgICAgdGhpcy5fc2VsZWN0aW9uTW9kZWwudXNlU2luZ2xlU2VsZWN0aW9uKHRoaXMub3B0aW9ucy5zaW5nbGVTZWxlY3QpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLmVuYWJsZUFjdGlvbnMgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgIHRoaXMuZW5hYmxlQWN0aW9ucyA9IHRoaXMub3B0aW9ucy5lbmFibGVBY3Rpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIGRvbUNsYXNzLnRvZ2dsZSh0aGlzLmRvbU5vZGUsICdsaXN0LXNob3ctYWN0aW9ucycsIHRoaXMuZW5hYmxlQWN0aW9ucyk7XHJcbiAgICBpZiAodGhpcy5lbmFibGVBY3Rpb25zKSB7XHJcbiAgICAgIHRoaXMuX3NlbGVjdGlvbk1vZGVsLnVzZVNpbmdsZVNlbGVjdGlvbih0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5yZWZyZXNoUmVxdWlyZWQpIHtcclxuICAgICAgdGhpcy5jbGVhcigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gaWYgZW5hYmxlZCwgY2xlYXIgYW55IHByZS1leGlzdGluZyBzZWxlY3Rpb25zXHJcbiAgICAgIGlmICh0aGlzLl9zZWxlY3Rpb25Nb2RlbCAmJiB0aGlzLmF1dG9DbGVhclNlbGVjdGlvbiAmJiAhdGhpcy5lbmFibGVBY3Rpb25zKSB7XHJcbiAgICAgICAgdGhpcy5fc2VsZWN0aW9uTW9kZWwuY2xlYXIoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kcyB0aGUge0BsaW5rIFZpZXcjdHJhbnNpdGlvblRvIHBhcmVudCBpbXBsZW1lbnRhdGlvbn0gdG8gYWxzbyBjb25maWd1cmUgdGhlIHNlYXJjaCB3aWRnZXQgYW5kXHJcbiAgICogbG9hZCBwcmV2aW91cyBzZWxlY3Rpb25zIGludG8gdGhlIHNlbGVjdGlvbiBtb2RlbC5cclxuICAgKi9cclxuICB0cmFuc2l0aW9uVG86IGZ1bmN0aW9uIHRyYW5zaXRpb25UbygpIHtcclxuICAgIHRoaXMuY29uZmlndXJlU2VhcmNoKCk7XHJcblxyXG4gICAgaWYgKHRoaXMuX3NlbGVjdGlvbk1vZGVsKSB7XHJcbiAgICAgIHRoaXMuX2xvYWRQcmV2aW91c1NlbGVjdGlvbnMoKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmluaGVyaXRlZChhcmd1bWVudHMpO1xyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogR2VuZXJhdGVzIHRoZSBoYXNoIHRhZyBsYXlvdXQgYnkgdGFraW5nIHRoZSBoYXNoIHRhZ3MgZGVmaW5lZCBpbiBgdGhpcy5oYXNoVGFnUXVlcmllc2AgYW5kIGNvbnZlcnRpbmcgdGhlbVxyXG4gICAqIGludG8gaW5kaXZpZHVhbCBvYmplY3RzIGluIGFuIGFycmF5IHRvIGJlIHVzZWQgaW4gdGhlIGN1c3RvbWl6YXRpb24gZW5naW5lLlxyXG4gICAqIEByZXR1cm4ge09iamVjdFtdfVxyXG4gICAqL1xyXG4gIGNyZWF0ZUhhc2hUYWdRdWVyeUxheW91dDogZnVuY3Rpb24gY3JlYXRlSGFzaFRhZ1F1ZXJ5TGF5b3V0KCkge1xyXG4gICAgLy8gdG9kbzogYWx3YXlzIHJlZ2VuZXJhdGUgdGhpcyBsYXlvdXQ/IGFsd2F5cyByZWdlbmVyYXRpbmcgYWxsb3dzIGZvciBhbGwgZXhpc3RpbmcgY3VzdG9taXphdGlvbnNcclxuICAgIC8vIHRvIHN0aWxsIHdvcmssIGF0IGV4cGVuc2Ugb2YgcG90ZW50aWFsIChyYXJlKSBwZXJmb3JtYW5jZSBpc3N1ZXMgaWYgbWFueSBjdXN0b21pemF0aW9ucyBhcmUgcmVnaXN0ZXJlZC5cclxuICAgIGNvbnN0IGxheW91dCA9IFtdO1xyXG4gICAgZm9yIChjb25zdCBuYW1lIGluIHRoaXMuaGFzaFRhZ1F1ZXJpZXMpIHtcclxuICAgICAgaWYgKHRoaXMuaGFzaFRhZ1F1ZXJpZXMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcclxuICAgICAgICBsYXlvdXQucHVzaCh7XHJcbiAgICAgICAgICAna2V5JzogbmFtZSxcclxuICAgICAgICAgICd0YWcnOiAodGhpcy5oYXNoVGFnUXVlcmllc1RleHQgJiYgdGhpcy5oYXNoVGFnUXVlcmllc1RleHRbbmFtZV0pIHx8IG5hbWUsXHJcbiAgICAgICAgICAncXVlcnknOiB0aGlzLmhhc2hUYWdRdWVyaWVzW25hbWVdLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGxheW91dDtcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIENhbGxlZCB3aGVuIHRoZSB2aWV3IG5lZWRzIHRvIGJlIHJlc2V0LiBJbnZva2VzIHRoZSByZXF1ZXN0IGRhdGEgcHJvY2Vzcy5cclxuICAgKi9cclxuICByZWZyZXNoOiBmdW5jdGlvbiByZWZyZXNoKCkge1xyXG4gICAgdGhpcy5xdWVyeSA9IHRoaXMuZ2V0U2VhcmNoUXVlcnkoKSB8fCB0aGlzLnF1ZXJ5O1xyXG4gICAgdGhpcy5yZXF1ZXN0RGF0YSgpO1xyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogQ2xlYXJzIHRoZSB2aWV3IGJ5OlxyXG4gICAqXHJcbiAgICogICogY2xlYXJpbmcgdGhlIHNlbGVjdGlvbiBtb2RlbCwgYnV0IHdpdGhvdXQgaXQgaW52b2tpbmcgdGhlIGV2ZW50IGhhbmRsZXJzO1xyXG4gICAqICAqIGNsZWFycyB0aGUgdmlld3MgZGF0YSBzdWNoIGFzIGB0aGlzLmVudHJpZXNgIGFuZCBgdGhpcy5lbnRyaWVzYDtcclxuICAgKiAgKiBjbGVhcnMgdGhlIHNlYXJjaCB3aWR0aCBpZiBwYXNzZWQgdHJ1ZTsgYW5kXHJcbiAgICogICogYXBwbGllcyB0aGUgZGVmYXVsdCB0ZW1wbGF0ZS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gYWxsIElmIHRydWUsIGFsc28gY2xlYXIgdGhlIHNlYXJjaCB3aWRnZXQuXHJcbiAgICovXHJcbiAgY2xlYXI6IGZ1bmN0aW9uIGNsZWFyKGFsbCkge1xyXG4gICAgaWYgKHRoaXMuX3NlbGVjdGlvbk1vZGVsKSB7XHJcbiAgICAgIHRoaXMuX3NlbGVjdGlvbk1vZGVsLnN1c3BlbmRFdmVudHMoKTtcclxuICAgICAgdGhpcy5fc2VsZWN0aW9uTW9kZWwuY2xlYXIoKTtcclxuICAgICAgdGhpcy5fc2VsZWN0aW9uTW9kZWwucmVzdW1lRXZlbnRzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5yZXF1ZXN0ZWRGaXJzdFBhZ2UgPSBmYWxzZTtcclxuICAgIHRoaXMuZW50cmllcyA9IHt9O1xyXG4gICAgdGhpcy5wb3NpdGlvbiA9IDA7XHJcblxyXG4gICAgaWYgKHRoaXMuX29uU2Nyb2xsSGFuZGxlKSB7XHJcbiAgICAgIHRoaXMuZGlzY29ubmVjdCh0aGlzLl9vblNjcm9sbEhhbmRsZSk7XHJcbiAgICAgIHRoaXMuX29uU2Nyb2xsSGFuZGxlID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoYWxsID09PSB0cnVlICYmIHRoaXMuc2VhcmNoV2lkZ2V0KSB7XHJcbiAgICAgIHRoaXMuc2VhcmNoV2lkZ2V0LmNsZWFyKCk7XHJcbiAgICAgIHRoaXMucXVlcnkgPSBmYWxzZTsgLy8gdG9kbzogcmVuYW1lIHRvIHNlYXJjaFF1ZXJ5XHJcbiAgICAgIHRoaXMuaGFzU2VhcmNoZWQgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBkb21DbGFzcy5yZW1vdmUodGhpcy5kb21Ob2RlLCAnbGlzdC1oYXMtbW9yZScpO1xyXG5cclxuICAgIHRoaXMuc2V0KCdsaXN0Q29udGVudCcsIHRoaXMubG9hZGluZ1RlbXBsYXRlLmFwcGx5KHRoaXMpKTtcclxuICB9LFxyXG4gIHNlYXJjaDogZnVuY3Rpb24gc2VhcmNoKCkge1xyXG4gICAgaWYgKHRoaXMuc2VhcmNoV2lkZ2V0KSB7XHJcbiAgICAgIHRoaXMuc2VhcmNoV2lkZ2V0LnNlYXJjaCgpO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogU2V0cyB0aGUgcXVlcnkgdmFsdWUgb24gdGhlIHNlcmFjaCB3aWRnZXRcclxuICAgKi9cclxuICBzZXRTZWFyY2hUZXJtOiBmdW5jdGlvbiBzZXRTZWFyY2hUZXJtKHZhbHVlKSB7XHJcbiAgICBpZiAodGhpcy5zZWFyY2hXaWRnZXQpIHtcclxuICAgICAgdGhpcy5zZWFyY2hXaWRnZXQuc2V0KCdxdWVyeVZhbHVlJywgdmFsdWUpO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogUmV0dXJucyBhIHByb21pc2Ugd2l0aCB0aGUgbGlzdCdzIGNvdW50LlxyXG4gICAqL1xyXG4gIGdldExpc3RDb3VudDogZnVuY3Rpb24gZ2V0TGlzdENvdW50KCAvKm9wdGlvbnMsIGNhbGxiYWNrKi8gKSB7fSxcclxufSk7XHJcblxyXG5sYW5nLnNldE9iamVjdCgnU2FnZS5QbGF0Zm9ybS5Nb2JpbGUuX0xpc3RCYXNlJywgX19jbGFzcyk7XHJcbmV4cG9ydCBkZWZhdWx0IF9fY2xhc3M7XHJcbiJdfQ==
</pre>
</body>
</html>
