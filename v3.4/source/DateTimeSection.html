<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">define('argos/Groups/DateTimeSection', ['exports', 'module', 'dojo/_base/declare', 'dojo/_base/lang', '../Utility', './_GroupBySection', '../I18n'], function (exports, module, _dojo_baseDeclare, _dojo_baseLang, _Utility, _GroupBySection2, _I18n) {
  function _interopRequireDefault(obj) { return obj &amp;&amp; obj.__esModule ? obj : { 'default': obj }; }

  var _declare = _interopRequireDefault(_dojo_baseDeclare);

  var _lang = _interopRequireDefault(_dojo_baseLang);

  var _Utility2 = _interopRequireDefault(_Utility);

  var _GroupBySection3 = _interopRequireDefault(_GroupBySection2);

  var _getResource = _interopRequireDefault(_I18n);

  var resource = (0, _getResource['default'])('dateTimeSection');

<span id='argos-Groups-DateTimeSection'>  /**
</span>   * @class argos.Groups.DateTimeSection
   */
  var __class = (0, _declare['default'])('argos.Groups.DateTimeSection', [_GroupBySection3['default']], {
    name: 'DateTimeSectionFilter',
    displayNameText: resource.displayNameText,
    todayText: resource.todayText,
    tomorrowText: resource.tomorrowText,
    laterThisWeekText: resource.laterThisWeekText,
    earlierThisWeekText: resource.earlierThisWeekText,
    thisLaterMonthText: resource.thisLaterMonthText,
    thisEarlierMonthText: resource.thisEarlierMonthText,
    thisYearEarlierText: resource.thisYearEarlierText,
    thisYearLaterText: resource.thisYearLaterText,
    yesterdayText: resource.yesterdayText,
    lastWeekText: resource.lastWeekText,
    lastMonthText: resource.lastMonthText,
    pastYearText: resource.pastYearText,
    nextYearText: resource.nextYearText,
    nextMonthText: resource.nextMonthText,
    nextWeekText: resource.nextWeekText,
    futureText: resource.futureText,
    twoWeeksAgoText: resource.twoWeeksAgoText,
    threeWeeksAgoText: resource.threeWeeksAgoText,
    twoMonthsAgoText: resource.twoMonthsAgoText,
    threeMonthsAgoText: resource.threeMonthsAgoText,
    unknownText: resource.unknownText,

    constructor: function constructor(o) {
      _declare['default'].safeMixin(this, o);
      this.init();
    },
    init: function init() {
      this.inherited(arguments);
      this.sections = [];

      this.sections.push({
        key: 'Today',
        title: this.todayText,
        value: null
      });
      this.sections.push({
        key: 'Tomorrow',
        title: this.tomorrowText,
        value: null
      });
      this.sections.push({
        key: 'LaterThisWeek',
        title: this.laterThisWeekText,
        value: null
      });
      this.sections.push({
        key: 'EarlierThisWeek',
        title: this.earlierThisWeekText,
        value: null
      });
      this.sections.push({
        key: 'EarlierThisMonth',
        title: this.thisEarlierMonthText,
        value: null,
        collapsed: true
      });
      this.sections.push({
        key: 'LaterThisMonth',
        title: this.thisLaterMonthText,
        value: null,
        collapsed: true
      });
      this.sections.push({
        key: 'EarlierThisYear',
        title: this.thisYearEarlierText,
        value: null,
        collapsed: true
      });
      this.sections.push({
        key: 'LaterThisYear',
        title: this.thisYearLaterText,
        value: null,
        collapsed: true
      });
      this.sections.push({
        key: 'Yesterday',
        title: this.yesterdayText,
        value: null
      });
      this.sections.push({
        key: 'LastWeek',
        title: this.lastWeekText,
        value: null,
        collapsed: true
      });
      this.sections.push({
        key: 'LastMonth',
        title: this.lastMonthText,
        value: null,
        collapsed: true
      });
      this.sections.push({
        key: 'PastYear',
        title: this.pastYearText,
        value: null,
        collapsed: true
      });
      this.sections.push({
        key: 'NextYear',
        title: this.nextYearText,
        value: null,
        collapsed: true
      });
      this.sections.push({
        key: 'NextMonth',
        title: this.nextMonthText,
        value: null,
        collapsed: true
      });
      this.sections.push({
        key: 'NextWeek',
        title: this.nextWeekText,
        value: null,
        collapsed: true
      });
      this.sections.push({
        key: 'Future',
        title: this.futureText,
        value: null,
        collapsed: true
      });
    },
    getSection: function getSection(entry) {
      if (this.groupByProperty &amp;&amp; entry) {
        var value = _Utility2['default'].getValue(entry, this.groupByProperty);
        if (value) {
          return this.getSectionByDateTime(value);
        }

        return this.getDefaultSection();
      }

      return null;
    },
    getDefaultSection: function getDefaultSection() {
      return {
        key: 'Unknown',
        title: this.unknownText,
        collapsed: true
      };
    },
    getSectionKey: function getSectionKey(value) {
      var valueDate = undefined;

      if (!this.currentDate) {
        this.currentDate = moment();
      }

      if (value) {
        valueDate = moment(value);
      } else {
        return 'Unknown';
      }

      if (this.momentLang) {
        valueDate.locale(this.momentLang);
        this.currentDate.locale(this.momentLang);
      }

      if (this.isLastMonth(valueDate)) {
        return 'LastMonth';
      }

      if (this.isEarlierThisMonth(valueDate)) {
        return 'EarlierThisMonth';
      }

      if (this.isLastWeek(valueDate)) {
        return 'LastWeek';
      }

      if (this.isEarlierThisWeek(valueDate)) {
        return 'EarlierThisWeek';
      }

      if (this.isYesterday(valueDate)) {
        return 'Yesterday';
      }

      if (this.isPastYear(valueDate)) {
        return 'PastYear';
      }

      if (this.isToday(valueDate)) {
        return 'Today';
      }

      if (this.isTomorrow(valueDate)) {
        return 'Tomorrow';
      }

      if (this.isLaterThisWeek(valueDate)) {
        return 'LaterThisWeek';
      }

      if (this.isNextWeek(valueDate)) {
        return 'NextWeek';
      }

      if (this.isLaterThisMonth(valueDate)) {
        return 'LaterThisMonth';
      }

      if (this.isNextMonth(valueDate)) {
        return 'NextMonth';
      }

      if (this.isEarlierThisYear(valueDate)) {
        return 'EarlierThisYear';
      }

      if (this.isLaterThisYear(valueDate)) {
        return 'LaterThisYear';
      }

      if (this.isNextYear(valueDate)) {
        return 'NextYear';
      }

      return 'Future';
    },
    isNextYear: function isNextYear(value) {
      // Next year excluding anything that could be within the next month (next week, later this week, tomorrow)
      return value.year() === this.currentDate.year() + 1 &amp;&amp; !this.isNextMonth(value);
    },
    isPastYear: function isPastYear(value) {
      return value.year() &lt; this.currentDate.year() &amp;&amp; !this.isLastMonth(value);
    },
    isLaterThisYear: function isLaterThisYear(value) {
      // Anything from the end of next month to the end of the year
      var yearEnd = this.currentDate.clone().endOf('year');
      var nextMonthEnd = this.currentDate.clone().add(1, 'month').endOf('month');

      return value.isAfter(nextMonthEnd) &amp;&amp; value.isBefore(yearEnd);
    },
    isEarlierThisYear: function isEarlierThisYear(value) {
      // Anything at the start of the year up until last month
      var yearStart = this.currentDate.clone().startOf('year');
      var lastMonthStart = this.currentDate.clone().subtract(1, 'month').startOf('month');
      return value.isAfter(yearStart) &amp;&amp; value.isBefore(lastMonthStart);
    },
    isNextMonth: function isNextMonth(value) {
      // next month, excluding any potential upcoming days (next week, later this week, tomorrow)
      var nextMonthStart = this.currentDate.clone().add(1, 'month').startOf('month');
      var nextMonthEnd = nextMonthStart.clone().endOf('month');

      return value.isAfter(nextMonthStart) &amp;&amp; value.isBefore(nextMonthEnd) &amp;&amp; !this.isNextWeek(value) &amp;&amp; !this.isEarlierThisWeek(value) &amp;&amp; !this.isTomorrow(value);
    },
    isEarlierThisMonth: function isEarlierThisMonth(value) {
      // Excludes last week
      var monthStart = this.currentDate.clone().startOf('month');
      var lastWeekStart = this.currentDate.clone().subtract(1, 'week').startOf('week');

      return value.isAfter(monthStart) &amp;&amp; value.isBefore(lastWeekStart);
    },
    isLaterThisMonth: function isLaterThisMonth(value) {
      // Excludes next week
      var monthEnd = this.currentDate.clone().endOf('month');
      var nextWeekEnd = this.currentDate.clone().add(1, 'week').endOf('week');

      return value.isAfter(nextWeekEnd) &amp;&amp; value.isBefore(monthEnd);
    },
    isNextWeek: function isNextWeek(value) {
      var nextWeekStart = this.currentDate.clone().add(1, 'week').startOf('week');
      var nextWeekEnd = nextWeekStart.clone().endOf('week');

      return value.isAfter(nextWeekStart) &amp;&amp; value.isBefore(nextWeekEnd) &amp;&amp; !this.isTomorrow(value);
    },
    isTomorrow: function isTomorrow(value) {
      var tomorrow = this.currentDate.clone().add(1, 'days').startOf('day');
      var newValue = value.clone().startOf('day');
      return tomorrow.isSame(newValue);
    },
    isToday: function isToday(value) {
      var now = this.currentDate.clone().startOf('day');
      var newValue = value.clone().startOf('day');
      return now.isSame(newValue);
    },
    isYesterday: function isYesterday(value) {
      var yesterday = this.currentDate.clone().subtract(1, 'days').startOf('day');
      var newValue = value.clone().startOf('day');
      return yesterday.isSame(newValue);
    },
    isLaterThisWeek: function isLaterThisWeek(value) {
      // Excludes today, tomorrow, and yesterday
      var later = this.currentDate.clone().add(2, 'days').startOf('day');
      var endWeek = this.currentDate.clone().endOf('week');

      return value.isAfter(later) &amp;&amp; value.isBefore(endWeek);
    },
    isEarlierThisWeek: function isEarlierThisWeek(value) {
      // Start of week to yesterday
      var yesterday = this.currentDate.clone().subtract(1, 'days').startOf('day');
      var weekStart = this.currentDate.clone().startOf('week');

      return value.isAfter(weekStart) &amp;&amp; value.isBefore(yesterday);
    },
    isLastWeek: function isLastWeek(value) {
      var lastWeekStart = this.currentDate.clone().subtract(1, 'week').startOf('week');
      var lastWeekEnd = lastWeekStart.clone().endOf('week');

      return value.isAfter(lastWeekStart) &amp;&amp; value.isBefore(lastWeekEnd) &amp;&amp; !this.isYesterday(value);
    },
    isLastMonth: function isLastMonth(value) {
      // Last month, excluding any potential past days (earlier this week, last week, yesterday)
      var lastMonthStart = this.currentDate.clone().subtract(1, 'month').startOf('month');
      var lastMonthEnd = lastMonthStart.clone().endOf('month');

      return value.isAfter(lastMonthStart) &amp;&amp; value.isBefore(lastMonthEnd) &amp;&amp; !this.isEarlierThisWeek(value) &amp;&amp; !this.isLastWeek(value) &amp;&amp; !this.isYesterday(value);
    },
    getSectionByKey: function getSectionByKey(key) {
      for (var section in this.sections) {
        if (this.sections[section].key === key) {
          return this.sections[section];
        }
      }
      return this.getDefaultSection();
    },
    getSectionByDateTime: function getSectionByDateTime(value) {
      var key = this.getSectionKey(value);
      var section = this.getSectionByKey(key, value);
      return section;
    }
  });

  _lang['default'].setObject('Sage.Platform.Mobile.Groups.DateTimeSection', __class);
  module.exports = __class;
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9Hcm91cHMvRGF0ZVRpbWVTZWN0aW9uLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFNQSxNQUFNLFFBQVEsR0FBRyw2QkFBWSxpQkFBaUIsQ0FBQyxDQUFDOzs7OztBQUtoRCxNQUFNLE9BQU8sR0FBRyx5QkFBUSw4QkFBOEIsRUFBRSw2QkFBaUIsRUFBRTtBQUN6RSxRQUFJLEVBQUUsdUJBQXVCO0FBQzdCLG1CQUFlLEVBQUUsUUFBUSxDQUFDLGVBQWU7QUFDekMsYUFBUyxFQUFFLFFBQVEsQ0FBQyxTQUFTO0FBQzdCLGdCQUFZLEVBQUUsUUFBUSxDQUFDLFlBQVk7QUFDbkMscUJBQWlCLEVBQUUsUUFBUSxDQUFDLGlCQUFpQjtBQUM3Qyx1QkFBbUIsRUFBRSxRQUFRLENBQUMsbUJBQW1CO0FBQ2pELHNCQUFrQixFQUFFLFFBQVEsQ0FBQyxrQkFBa0I7QUFDL0Msd0JBQW9CLEVBQUUsUUFBUSxDQUFDLG9CQUFvQjtBQUNuRCx1QkFBbUIsRUFBRSxRQUFRLENBQUMsbUJBQW1CO0FBQ2pELHFCQUFpQixFQUFFLFFBQVEsQ0FBQyxpQkFBaUI7QUFDN0MsaUJBQWEsRUFBRSxRQUFRLENBQUMsYUFBYTtBQUNyQyxnQkFBWSxFQUFFLFFBQVEsQ0FBQyxZQUFZO0FBQ25DLGlCQUFhLEVBQUUsUUFBUSxDQUFDLGFBQWE7QUFDckMsZ0JBQVksRUFBRSxRQUFRLENBQUMsWUFBWTtBQUNuQyxnQkFBWSxFQUFFLFFBQVEsQ0FBQyxZQUFZO0FBQ25DLGlCQUFhLEVBQUUsUUFBUSxDQUFDLGFBQWE7QUFDckMsZ0JBQVksRUFBRSxRQUFRLENBQUMsWUFBWTtBQUNuQyxjQUFVLEVBQUUsUUFBUSxDQUFDLFVBQVU7QUFDL0IsbUJBQWUsRUFBRSxRQUFRLENBQUMsZUFBZTtBQUN6QyxxQkFBaUIsRUFBRSxRQUFRLENBQUMsaUJBQWlCO0FBQzdDLG9CQUFnQixFQUFFLFFBQVEsQ0FBQyxnQkFBZ0I7QUFDM0Msc0JBQWtCLEVBQUUsUUFBUSxD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T0FBTyxDQUFDLGNBQWMsQ0FBQyxJQUNsQyxLQUFLLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQyxJQUM1QixDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxLQUFLLENBQUMsSUFDOUIsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxJQUN2QixDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLENBQUM7S0FDNUI7QUFDRCxtQkFBZSxFQUFFLFNBQVMsZUFBZSxDQUFDLEdBQUcsRUFBRTtBQUM3QyxXQUFLLElBQU0sT0FBTyxJQUFJLElBQUksQ0FBQyxRQUFRLEVBQUU7QUFDbkMsWUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDLEdBQUcsS0FBSyxHQUFHLEVBQUU7QUFDdEMsaUJBQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQztTQUMvQjtPQUNGO0FBQ0QsYUFBTyxJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztLQUNqQztBQUNELHdCQUFvQixFQUFFLFNBQVMsb0JBQW9CLENBQUMsS0FBSyxFQUFFO0FBQ3pELFVBQU0sR0FBRyxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDdEMsVUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDakQsYUFBTyxPQUFPLENBQUM7S0FDaEI7R0FDRixDQUFDLENBQUM7O0FBRUgsbUJBQUssU0FBUyxDQUFDLDZDQUE2QyxFQUFFLE9BQU8sQ0FBQyxDQUFDO21CQUN4RCxPQUFPIiwiZmlsZSI6InNyYy9Hcm91cHMvRGF0ZVRpbWVTZWN0aW9uLmpzIiwic291cmNlUm9vdCI6InNyYyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBkZWNsYXJlIGZyb20gJ2Rvam8vX2Jhc2UvZGVjbGFyZSc7XHJcbmltcG9ydCBsYW5nIGZyb20gJ2Rvam8vX2Jhc2UvbGFuZyc7XHJcbmltcG9ydCBVdGlsaXR5IGZyb20gJy4uL1V0aWxpdHknO1xyXG5pbXBvcnQgX0dyb3VwQnlTZWN0aW9uIGZyb20gJy4vX0dyb3VwQnlTZWN0aW9uJztcclxuaW1wb3J0IGdldFJlc291cmNlIGZyb20gJy4uL0kxOG4nO1xyXG5cclxuY29uc3QgcmVzb3VyY2UgPSBnZXRSZXNvdXJjZSgnZGF0ZVRpbWVTZWN0aW9uJyk7XHJcblxyXG4vKipcclxuICogQGNsYXNzIGFyZ29zLkdyb3Vwcy5EYXRlVGltZVNlY3Rpb25cclxuICovXHJcbmNvbnN0IF9fY2xhc3MgPSBkZWNsYXJlKCdhcmdvcy5Hcm91cHMuRGF0ZVRpbWVTZWN0aW9uJywgW19Hcm91cEJ5U2VjdGlvbl0sIHtcclxuICBuYW1lOiAnRGF0ZVRpbWVTZWN0aW9uRmlsdGVyJyxcclxuICBkaXNwbGF5TmFtZVRleHQ6IHJlc291cmNlLmRpc3BsYXlOYW1lVGV4dCxcclxuICB0b2RheVRleHQ6IHJlc291cmNlLnRvZGF5VGV4dCxcclxuICB0b21vcnJvd1RleHQ6IHJlc291cmNlLnRvbW9ycm93VGV4dCxcclxuICBsYXRlclRoaXNXZWVrVGV4dDogcmVzb3VyY2UubGF0ZXJUaGlzV2Vla1RleHQsXHJcbiAgZWFybGllclRoaXNXZWVrVGV4dDogcmVzb3VyY2UuZWFybGllclRoaXNXZWVrVGV4dCxcclxuICB0aGlzTGF0ZXJNb250aFRleHQ6IHJlc291cmNlLnRoaXNMYXRlck1vbnRoVGV4dCxcclxuICB0aGlzRWFybGllck1vbnRoVGV4dDogcmVzb3VyY2UudGhpc0VhcmxpZXJNb250aFRleHQsXHJcbiAgdGhpc1llYXJFYXJsaWVyVGV4dDogcmVzb3VyY2UudGhpc1llYXJFYXJsaWVyVGV4dCxcclxuICB0aGlzWWVhckxhdGVyVGV4dDogcmVzb3VyY2UudGhpc1llYXJMYXRlclRleHQsXHJcbiAgeWVzdGVyZGF5VGV4dDogcmVzb3VyY2UueWVzdGVyZGF5VGV4dCxcclxuICBsYXN0V2Vla1RleHQ6IHJlc291cmNlLmxhc3RXZWVrVGV4dCxcclxuICBsYXN0TW9udGhUZXh0OiByZXNvdXJjZS5sYXN0TW9udGhUZXh0LFxyXG4gIHBhc3RZZWFyVGV4dDogcmVzb3VyY2UucGFzdFllYXJUZXh0LFxyXG4gIG5leHRZZWFyVGV4dDogcmVzb3VyY2UubmV4dFllYXJUZXh0LFxyXG4gIG5leHRNb250aFRleHQ6IHJlc291cmNlLm5leHRNb250aFRleHQsXHJcbiAgbmV4dFdlZWtUZXh0OiByZXNvdXJjZS5uZXh0V2Vla1RleHQsXHJcbiAgZnV0dXJlVGV4dDogcmVzb3VyY2UuZnV0dXJlVGV4dCxcclxuICB0d29XZWVrc0Fnb1RleHQ6IHJlc291cmNlLnR3b1dlZWtzQWdvVGV4dCxcclxuICB0aHJlZVdlZWtzQWdvVGV4dDogcmVzb3VyY2UudGhyZWVXZWVrc0Fnb1RleHQsXHJcbiAgdHdvTW9udGhzQWdvVGV4dDogcmVzb3VyY2UudHdvTW9udGhzQWdvVGV4dCxcclxuICB0aHJlZU1vbnRoc0Fnb1RleHQ6IHJlc291cmNlLnRocmVlTW9udGhzQWdvVGV4dCxcclxuICB1bmtub3duVGV4dDogcmVzb3VyY2UudW5rbm93blRleHQsXHJcblxyXG4gIGNvbnN0cnVjdG9yOiBmdW5jdGlvbiBjb25zdHJ1Y3RvcihvKSB7XHJcbiAgICBkZWNsYXJlLnNhZmVNaXhpbih0aGlzLCBvKTtcclxuICAgIHRoaXMuaW5pdCgpO1xyXG4gIH0sXHJcbiAgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHtcclxuICAgIHRoaXMuaW5oZXJpdGVkKGFyZ3VtZW50cyk7XHJcbiAgICB0aGlzLnNlY3Rpb25zID0gW107XHJcblxyXG4gICAgdGhpcy5zZWN0aW9ucy5wdXNoKHtcclxuICAgICAga2V5OiAnVG9kYXknLFxyXG4gICAgICB0aXRsZTogdGhpcy50b2RheVRleHQsXHJcbiAgICAgIHZhbHVlOiBudWxsLFxyXG4gICAgfSk7XHJcbiAgICB0aGlzLnNlY3Rpb25zLnB1c2goe1xyXG4gICAgICBrZXk6ICdUb21vcnJvdycsXHJcbiAgICAgIHRpdGxlOiB0aGlzLnRvbW9ycm93VGV4dCxcclxuICAgICAgdmFsdWU6IG51bGwsXHJcbiAgICB9KTtcclxuICAgIHRoaXMuc2VjdGlvbnMucHVzaCh7XHJcbiAgICAgIGtleTogJ0xhdGVyVGhpc1dlZWsnLFxyXG4gICAgICB0aXRsZTogdGhpcy5sYXRlclRoaXNXZWVrVGV4dCxcclxuICAgICAgdmFsdWU6IG51bGwsXHJcbiAgICB9KTtcclxuICAgIHRoaXMuc2VjdGlvbnMucHVzaCh7XHJcbiAgICAgIGtleTogJ0VhcmxpZXJUaGlzV2VlaycsXHJcbiAgICAgIHRpdGxlOiB0aGlzLmVhcmxpZXJUaGlzV2Vla1RleHQsXHJcbiAgICAgIHZhbHVlOiBudWxsLFxyXG4gICAgfSk7XHJcbiAgICB0aGlzLnNlY3Rpb25zLnB1c2goe1xyXG4gICAgICBrZXk6ICdFYXJsaWVyVGhpc01vbnRoJyxcclxuICAgICAgdGl0bGU6IHRoaXMudGhpc0VhcmxpZXJNb250aFRleHQsXHJcbiAgICAgIHZhbHVlOiBudWxsLFxyXG4gICAgICBjb2xsYXBzZWQ6IHRydWUsXHJcbiAgICB9KTtcclxuICAgIHRoaXMuc2VjdGlvbnMucHVzaCh7XHJcbiAgICAgIGtleTogJ0xhdGVyVGhpc01vbnRoJyxcclxuICAgICAgdGl0bGU6IHRoaXMudGhpc0xhdGVyTW9udGhUZXh0LFxyXG4gICAgICB2YWx1ZTogbnVsbCxcclxuICAgICAgY29sbGFwc2VkOiB0cnVlLFxyXG4gICAgfSk7XHJcbiAgICB0aGlzLnNlY3Rpb25zLnB1c2goe1xyXG4gICAgICBrZXk6ICdFYXJsaWVyVGhpc1llYXInLFxyXG4gICAgICB0aXRsZTogdGhpcy50aGlzWWVhckVhcmxpZXJUZXh0LFxyXG4gICAgICB2YWx1ZTogbnVsbCxcclxuICAgICAgY29sbGFwc2VkOiB0cnVlLFxyXG4gICAgfSk7XHJcbiAgICB0aGlzLnNlY3Rpb25zLnB1c2goe1xyXG4gICAgICBrZXk6ICdMYXRlclRoaXNZZWFyJyxcclxuICAgICAgdGl0bGU6IHRoaXMudGhpc1llYXJMYXRlclRleHQsXHJcbiAgICAgIHZhbHVlOiBudWxsLFxyXG4gICAgICBjb2xsYXBzZWQ6IHRydWUsXHJcbiAgICB9KTtcclxuICAgIHRoaXMuc2VjdGlvbnMucHVzaCh7XHJcbiAgICAgIGtleTogJ1llc3RlcmRheScsXHJcbiAgICAgIHRpdGxlOiB0aGlzLnllc3RlcmRheVRleHQsXHJcbiAgICAgIHZhbHVlOiBudWxsLFxyXG4gICAgfSk7XHJcbiAgICB0aGlzLnNlY3Rpb25zLnB1c2goe1xyXG4gICAgICBrZXk6ICdMYXN0V2VlaycsXHJcbiAgICAgIHRpdGxlOiB0aGlzLmxhc3RXZWVrVGV4dCxcclxuICAgICAgdmFsdWU6IG51bGwsXHJcbiAgICAgIGNvbGxhcHNlZDogdHJ1ZSxcclxuICAgIH0pO1xyXG4gICAgdGhpcy5zZWN0aW9ucy5wdXNoKHtcclxuICAgICAga2V5OiAnTGFzdE1vbnRoJyxcclxuICAgICAgdGl0bGU6IHRoaXMubGFzdE1vbnRoVGV4dCxcclxuICAgICAgdmFsdWU6IG51bGwsXHJcbiAgICAgIGNvbGxhcHNlZDogdHJ1ZSxcclxuICAgIH0pO1xyXG4gICAgdGhpcy5zZWN0aW9ucy5wdXNoKHtcclxuICAgICAga2V5OiAnUGFzdFllYXInLFxyXG4gICAgICB0aXRsZTogdGhpcy5wYXN0WWVhclRleHQsXHJcbiAgICAgIHZhbHVlOiBudWxsLFxyXG4gICAgICBjb2xsYXBzZWQ6IHRydWUsXHJcbiAgICB9KTtcclxuICAgIHRoaXMuc2VjdGlvbnMucHVzaCh7XHJcbiAgICAgIGtleTogJ05leHRZZWFyJyxcclxuICAgICAgdGl0bGU6IHRoaXMubmV4dFllYXJUZXh0LFxyXG4gICAgICB2YWx1ZTogbnVsbCxcclxuICAgICAgY29sbGFwc2VkOiB0cnVlLFxyXG4gICAgfSk7XHJcbiAgICB0aGlzLnNlY3Rpb25zLnB1c2goe1xyXG4gICAgICBrZXk6ICdOZXh0TW9udGgnLFxyXG4gICAgICB0aXRsZTogdGhpcy5uZXh0TW9udGhUZXh0LFxyXG4gICAgICB2YWx1ZTogbnVsbCxcclxuICAgICAgY29sbGFwc2VkOiB0cnVlLFxyXG4gICAgfSk7XHJcbiAgICB0aGlzLnNlY3Rpb25zLnB1c2goe1xyXG4gICAgICBrZXk6ICdOZXh0V2VlaycsXHJcbiAgICAgIHRpdGxlOiB0aGlzLm5leHRXZWVrVGV4dCxcclxuICAgICAgdmFsdWU6IG51bGwsXHJcbiAgICAgIGNvbGxhcHNlZDogdHJ1ZSxcclxuICAgIH0pO1xyXG4gICAgdGhpcy5zZWN0aW9ucy5wdXNoKHtcclxuICAgICAga2V5OiAnRnV0dXJlJyxcclxuICAgICAgdGl0bGU6IHRoaXMuZnV0dXJlVGV4dCxcclxuICAgICAgdmFsdWU6IG51bGwsXHJcbiAgICAgIGNvbGxhcHNlZDogdHJ1ZSxcclxuICAgIH0pO1xyXG4gIH0sXHJcbiAgZ2V0U2VjdGlvbjogZnVuY3Rpb24gZ2V0U2VjdGlvbihlbnRyeSkge1xyXG4gICAgaWYgKCh0aGlzLmdyb3VwQnlQcm9wZXJ0eSkgJiYgKGVudHJ5KSkge1xyXG4gICAgICBjb25zdCB2YWx1ZSA9IFV0aWxpdHkuZ2V0VmFsdWUoZW50cnksIHRoaXMuZ3JvdXBCeVByb3BlcnR5KTtcclxuICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VjdGlvbkJ5RGF0ZVRpbWUodmFsdWUpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gdGhpcy5nZXREZWZhdWx0U2VjdGlvbigpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBudWxsO1xyXG4gIH0sXHJcbiAgZ2V0RGVmYXVsdFNlY3Rpb246IGZ1bmN0aW9uIGdldERlZmF1bHRTZWN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAga2V5OiAnVW5rbm93bicsXHJcbiAgICAgIHRpdGxlOiB0aGlzLnVua25vd25UZXh0LFxyXG4gICAgICBjb2xsYXBzZWQ6IHRydWUsXHJcbiAgICB9O1xyXG4gIH0sXHJcbiAgZ2V0U2VjdGlvbktleTogZnVuY3Rpb24gZ2V0U2VjdGlvbktleSh2YWx1ZSkge1xyXG4gICAgbGV0IHZhbHVlRGF0ZTtcclxuXHJcbiAgICBpZiAoIXRoaXMuY3VycmVudERhdGUpIHtcclxuICAgICAgdGhpcy5jdXJyZW50RGF0ZSA9IG1vbWVudCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICB2YWx1ZURhdGUgPSBtb21lbnQodmFsdWUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuICdVbmtub3duJztcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5tb21lbnRMYW5nKSB7XHJcbiAgICAgIHZhbHVlRGF0ZS5sb2NhbGUodGhpcy5tb21lbnRMYW5nKTtcclxuICAgICAgdGhpcy5jdXJyZW50RGF0ZS5sb2NhbGUodGhpcy5tb21lbnRMYW5nKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5pc0xhc3RNb250aCh2YWx1ZURhdGUpKSB7XHJcbiAgICAgIHJldHVybiAnTGFzdE1vbnRoJztcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5pc0VhcmxpZXJUaGlzTW9udGgodmFsdWVEYXRlKSkge1xyXG4gICAgICByZXR1cm4gJ0VhcmxpZXJUaGlzTW9udGgnO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLmlzTGFzdFdlZWsodmFsdWVEYXRlKSkge1xyXG4gICAgICByZXR1cm4gJ0xhc3RXZWVrJztcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5pc0VhcmxpZXJUaGlzV2Vlayh2YWx1ZURhdGUpKSB7XHJcbiAgICAgIHJldHVybiAnRWFybGllclRoaXNXZWVrJztcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5pc1llc3RlcmRheSh2YWx1ZURhdGUpKSB7XHJcbiAgICAgIHJldHVybiAnWWVzdGVyZGF5JztcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5pc1Bhc3RZZWFyKHZhbHVlRGF0ZSkpIHtcclxuICAgICAgcmV0dXJuICdQYXN0WWVhcic7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuaXNUb2RheSh2YWx1ZURhdGUpKSB7XHJcbiAgICAgIHJldHVybiAnVG9kYXknO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLmlzVG9tb3Jyb3codmFsdWVEYXRlKSkge1xyXG4gICAgICByZXR1cm4gJ1RvbW9ycm93JztcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5pc0xhdGVyVGhpc1dlZWsodmFsdWVEYXRlKSkge1xyXG4gICAgICByZXR1cm4gJ0xhdGVyVGhpc1dlZWsnO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLmlzTmV4dFdlZWsodmFsdWVEYXRlKSkge1xyXG4gICAgICByZXR1cm4gJ05leHRXZWVrJztcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5pc0xhdGVyVGhpc01vbnRoKHZhbHVlRGF0ZSkpIHtcclxuICAgICAgcmV0dXJuICdMYXRlclRoaXNNb250aCc7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuaXNOZXh0TW9udGgodmFsdWVEYXRlKSkge1xyXG4gICAgICByZXR1cm4gJ05leHRNb250aCc7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuaXNFYXJsaWVyVGhpc1llYXIodmFsdWVEYXRlKSkge1xyXG4gICAgICByZXR1cm4gJ0VhcmxpZXJUaGlzWWVhcic7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuaXNMYXRlclRoaXNZZWFyKHZhbHVlRGF0ZSkpIHtcclxuICAgICAgcmV0dXJuICdMYXRlclRoaXNZZWFyJztcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5pc05leHRZZWFyKHZhbHVlRGF0ZSkpIHtcclxuICAgICAgcmV0dXJuICdOZXh0WWVhcic7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuICdGdXR1cmUnO1xyXG4gIH0sXHJcbiAgaXNOZXh0WWVhcjogZnVuY3Rpb24gaXNOZXh0WWVhcih2YWx1ZSkge1xyXG4gICAgLy8gTmV4dCB5ZWFyIGV4Y2x1ZGluZyBhbnl0aGluZyB0aGF0IGNvdWxkIGJlIHdpdGhpbiB0aGUgbmV4dCBtb250aCAobmV4dCB3ZWVrLCBsYXRlciB0aGlzIHdlZWssIHRvbW9ycm93KVxyXG4gICAgcmV0dXJuIHZhbHVlLnllYXIoKSA9PT0gKHRoaXMuY3VycmVudERhdGUueWVhcigpICsgMSkgJiZcclxuICAgICAgIXRoaXMuaXNOZXh0TW9udGgodmFsdWUpO1xyXG4gIH0sXHJcbiAgaXNQYXN0WWVhcjogZnVuY3Rpb24gaXNQYXN0WWVhcih2YWx1ZSkge1xyXG4gICAgcmV0dXJuIHZhbHVlLnllYXIoKSA8IHRoaXMuY3VycmVudERhdGUueWVhcigpICYmXHJcbiAgICAgICF0aGlzLmlzTGFzdE1vbnRoKHZhbHVlKTtcclxuICB9LFxyXG4gIGlzTGF0ZXJUaGlzWWVhcjogZnVuY3Rpb24gaXNMYXRlclRoaXNZZWFyKHZhbHVlKSB7XHJcbiAgICAvLyBBbnl0aGluZyBmcm9tIHRoZSBlbmQgb2YgbmV4dCBtb250aCB0byB0aGUgZW5kIG9mIHRoZSB5ZWFyXHJcbiAgICBjb25zdCB5ZWFyRW5kID0gdGhpcy5jdXJyZW50RGF0ZS5jbG9uZSgpLmVuZE9mKCd5ZWFyJyk7XHJcbiAgICBjb25zdCBuZXh0TW9udGhFbmQgPSB0aGlzLmN1cnJlbnREYXRlLmNsb25lKCkuYWRkKDEsICdtb250aCcpLmVuZE9mKCdtb250aCcpO1xyXG5cclxuICAgIHJldHVybiB2YWx1ZS5pc0FmdGVyKG5leHRNb250aEVuZCkgJiZcclxuICAgICAgdmFsdWUuaXNCZWZvcmUoeWVhckVuZCk7XHJcbiAgfSxcclxuICBpc0VhcmxpZXJUaGlzWWVhcjogZnVuY3Rpb24gaXNFYXJsaWVyVGhpc1llYXIodmFsdWUpIHtcclxuICAgIC8vIEFueXRoaW5nIGF0IHRoZSBzdGFydCBvZiB0aGUgeWVhciB1cCB1bnRpbCBsYXN0IG1vbnRoXHJcbiAgICBjb25zdCB5ZWFyU3RhcnQgPSB0aGlzLmN1cnJlbnREYXRlLmNsb25lKCkuc3RhcnRPZigneWVhcicpO1xyXG4gICAgY29uc3QgbGFzdE1vbnRoU3RhcnQgPSB0aGlzLmN1cnJlbnREYXRlLmNsb25lKCkuc3VidHJhY3QoMSwgJ21vbnRoJykuc3RhcnRPZignbW9udGgnKTtcclxuICAgIHJldHVybiB2YWx1ZS5pc0FmdGVyKHllYXJTdGFydCkgJiZcclxuICAgICAgdmFsdWUuaXNCZWZvcmUobGFzdE1vbnRoU3RhcnQpO1xyXG4gIH0sXHJcbiAgaXNOZXh0TW9udGg6IGZ1bmN0aW9uIGlzTmV4dE1vbnRoKHZhbHVlKSB7XHJcbiAgICAvLyBuZXh0IG1vbnRoLCBleGNsdWRpbmcgYW55IHBvdGVudGlhbCB1cGNvbWluZyBkYXlzIChuZXh0IHdlZWssIGxhdGVyIHRoaXMgd2VlaywgdG9tb3Jyb3cpXHJcbiAgICBjb25zdCBuZXh0TW9udGhTdGFydCA9IHRoaXMuY3VycmVudERhdGUuY2xvbmUoKS5hZGQoMSwgJ21vbnRoJykuc3RhcnRPZignbW9udGgnKTtcclxuICAgIGNvbnN0IG5leHRNb250aEVuZCA9IG5leHRNb250aFN0YXJ0LmNsb25lKCkuZW5kT2YoJ21vbnRoJyk7XHJcblxyXG4gICAgcmV0dXJuIHZhbHVlLmlzQWZ0ZXIobmV4dE1vbnRoU3RhcnQpICYmXHJcbiAgICAgIHZhbHVlLmlzQmVmb3JlKG5leHRNb250aEVuZCkgJiZcclxuICAgICAgIXRoaXMuaXNOZXh0V2Vlayh2YWx1ZSkgJiZcclxuICAgICAgIXRoaXMuaXNFYXJsaWVyVGhpc1dlZWsodmFsdWUpICYmXHJcbiAgICAgICF0aGlzLmlzVG9tb3Jyb3codmFsdWUpO1xyXG4gIH0sXHJcbiAgaXNFYXJsaWVyVGhpc01vbnRoOiBmdW5jdGlvbiBpc0VhcmxpZXJUaGlzTW9udGgodmFsdWUpIHtcclxuICAgIC8vIEV4Y2x1ZGVzIGxhc3Qgd2Vla1xyXG4gICAgY29uc3QgbW9udGhTdGFydCA9IHRoaXMuY3VycmVudERhdGUuY2xvbmUoKS5zdGFydE9mKCdtb250aCcpO1xyXG4gICAgY29uc3QgbGFzdFdlZWtTdGFydCA9IHRoaXMuY3VycmVudERhdGUuY2xvbmUoKS5zdWJ0cmFjdCgxLCAnd2VlaycpLnN0YXJ0T2YoJ3dlZWsnKTtcclxuXHJcbiAgICByZXR1cm4gdmFsdWUuaXNBZnRlcihtb250aFN0YXJ0KSAmJlxyXG4gICAgICB2YWx1ZS5pc0JlZm9yZShsYXN0V2Vla1N0YXJ0KTtcclxuICB9LFxyXG4gIGlzTGF0ZXJUaGlzTW9udGg6IGZ1bmN0aW9uIGlzTGF0ZXJUaGlzTW9udGgodmFsdWUpIHtcclxuICAgIC8vIEV4Y2x1ZGVzIG5leHQgd2Vla1xyXG4gICAgY29uc3QgbW9udGhFbmQgPSB0aGlzLmN1cnJlbnREYXRlLmNsb25lKCkuZW5kT2YoJ21vbnRoJyk7XHJcbiAgICBjb25zdCBuZXh0V2Vla0VuZCA9IHRoaXMuY3VycmVudERhdGUuY2xvbmUoKS5hZGQoMSwgJ3dlZWsnKS5lbmRPZignd2VlaycpO1xyXG5cclxuICAgIHJldHVybiB2YWx1ZS5pc0FmdGVyKG5leHRXZWVrRW5kKSAmJlxyXG4gICAgICB2YWx1ZS5pc0JlZm9yZShtb250aEVuZCk7XHJcbiAgfSxcclxuICBpc05leHRXZWVrOiBmdW5jdGlvbiBpc05leHRXZWVrKHZhbHVlKSB7XHJcbiAgICBjb25zdCBuZXh0V2Vla1N0YXJ0ID0gdGhpcy5jdXJyZW50RGF0ZS5jbG9uZSgpLmFkZCgxLCAnd2VlaycpLnN0YXJ0T2YoJ3dlZWsnKTtcclxuICAgIGNvbnN0IG5leHRXZWVrRW5kID0gbmV4dFdlZWtTdGFydC5jbG9uZSgpLmVuZE9mKCd3ZWVrJyk7XHJcblxyXG4gICAgcmV0dXJuIHZhbHVlLmlzQWZ0ZXIobmV4dFdlZWtTdGFydCkgJiZcclxuICAgICAgdmFsdWUuaXNCZWZvcmUobmV4dFdlZWtFbmQpICYmXHJcbiAgICAgICF0aGlzLmlzVG9tb3Jyb3codmFsdWUpO1xyXG4gIH0sXHJcbiAgaXNUb21vcnJvdzogZnVuY3Rpb24gaXNUb21vcnJvdyh2YWx1ZSkge1xyXG4gICAgY29uc3QgdG9tb3Jyb3cgPSB0aGlzLmN1cnJlbnREYXRlLmNsb25lKCkuYWRkKDEsICdkYXlzJykuc3RhcnRPZignZGF5Jyk7XHJcbiAgICBjb25zdCBuZXdWYWx1ZSA9IHZhbHVlLmNsb25lKCkuc3RhcnRPZignZGF5Jyk7XHJcbiAgICByZXR1cm4gdG9tb3Jyb3cuaXNTYW1lKG5ld1ZhbHVlKTtcclxuICB9LFxyXG4gIGlzVG9kYXk6IGZ1bmN0aW9uIGlzVG9kYXkodmFsdWUpIHtcclxuICAgIGNvbnN0IG5vdyA9IHRoaXMuY3VycmVudERhdGUuY2xvbmUoKS5zdGFydE9mKCdkYXknKTtcclxuICAgIGNvbnN0IG5ld1ZhbHVlID0gdmFsdWUuY2xvbmUoKS5zdGFydE9mKCdkYXknKTtcclxuICAgIHJldHVybiBub3cuaXNTYW1lKG5ld1ZhbHVlKTtcclxuICB9LFxyXG4gIGlzWWVzdGVyZGF5OiBmdW5jdGlvbiBpc1llc3RlcmRheSh2YWx1ZSkge1xyXG4gICAgY29uc3QgeWVzdGVyZGF5ID0gdGhpcy5jdXJyZW50RGF0ZS5jbG9uZSgpLnN1YnRyYWN0KDEsICdkYXlzJykuc3RhcnRPZignZGF5Jyk7XHJcbiAgICBjb25zdCBuZXdWYWx1ZSA9IHZhbHVlLmNsb25lKCkuc3RhcnRPZignZGF5Jyk7XHJcbiAgICByZXR1cm4geWVzdGVyZGF5LmlzU2FtZShuZXdWYWx1ZSk7XHJcbiAgfSxcclxuICBpc0xhdGVyVGhpc1dlZWs6IGZ1bmN0aW9uIGlzTGF0ZXJUaGlzV2Vlayh2YWx1ZSkge1xyXG4gICAgLy8gRXhjbHVkZXMgdG9kYXksIHRvbW9ycm93LCBhbmQgeWVzdGVyZGF5XHJcbiAgICBjb25zdCBsYXRlciA9IHRoaXMuY3VycmVudERhdGUuY2xvbmUoKS5hZGQoMiwgJ2RheXMnKS5zdGFydE9mKCdkYXknKTtcclxuICAgIGNvbnN0IGVuZFdlZWsgPSB0aGlzLmN1cnJlbnREYXRlLmNsb25lKCkuZW5kT2YoJ3dlZWsnKTtcclxuXHJcbiAgICByZXR1cm4gdmFsdWUuaXNBZnRlcihsYXRlcikgJiYgdmFsdWUuaXNCZWZvcmUoZW5kV2Vlayk7XHJcbiAgfSxcclxuICBpc0VhcmxpZXJUaGlzV2VlazogZnVuY3Rpb24gaXNFYXJsaWVyVGhpc1dlZWsodmFsdWUpIHtcclxuICAgIC8vIFN0YXJ0IG9mIHdlZWsgdG8geWVzdGVyZGF5XHJcbiAgICBjb25zdCB5ZXN0ZXJkYXkgPSB0aGlzLmN1cnJlbnREYXRlLmNsb25lKCkuc3VidHJhY3QoMSwgJ2RheXMnKS5zdGFydE9mKCdkYXknKTtcclxuICAgIGNvbnN0IHdlZWtTdGFydCA9IHRoaXMuY3VycmVudERhdGUuY2xvbmUoKS5zdGFydE9mKCd3ZWVrJyk7XHJcblxyXG4gICAgcmV0dXJuIHZhbHVlLmlzQWZ0ZXIod2Vla1N0YXJ0KSAmJlxyXG4gICAgICB2YWx1ZS5pc0JlZm9yZSh5ZXN0ZXJkYXkpO1xyXG4gIH0sXHJcbiAgaXNMYXN0V2VlazogZnVuY3Rpb24gaXNMYXN0V2Vlayh2YWx1ZSkge1xyXG4gICAgY29uc3QgbGFzdFdlZWtTdGFydCA9IHRoaXMuY3VycmVudERhdGUuY2xvbmUoKS5zdWJ0cmFjdCgxLCAnd2VlaycpLnN0YXJ0T2YoJ3dlZWsnKTtcclxuICAgIGNvbnN0IGxhc3RXZWVrRW5kID0gbGFzdFdlZWtTdGFydC5jbG9uZSgpLmVuZE9mKCd3ZWVrJyk7XHJcblxyXG4gICAgcmV0dXJuIHZhbHVlLmlzQWZ0ZXIobGFzdFdlZWtTdGFydCkgJiZcclxuICAgICAgdmFsdWUuaXNCZWZvcmUobGFzdFdlZWtFbmQpICYmXHJcbiAgICAgICF0aGlzLmlzWWVzdGVyZGF5KHZhbHVlKTtcclxuICB9LFxyXG4gIGlzTGFzdE1vbnRoOiBmdW5jdGlvbiBpc0xhc3RNb250aCh2YWx1ZSkge1xyXG4gICAgLy8gTGFzdCBtb250aCwgZXhjbHVkaW5nIGFueSBwb3RlbnRpYWwgcGFzdCBkYXlzIChlYXJsaWVyIHRoaXMgd2VlaywgbGFzdCB3ZWVrLCB5ZXN0ZXJkYXkpXHJcbiAgICBjb25zdCBsYXN0TW9udGhTdGFydCA9IHRoaXMuY3VycmVudERhdGUuY2xvbmUoKS5zdWJ0cmFjdCgxLCAnbW9udGgnKS5zdGFydE9mKCdtb250aCcpO1xyXG4gICAgY29uc3QgbGFzdE1vbnRoRW5kID0gbGFzdE1vbnRoU3RhcnQuY2xvbmUoKS5lbmRPZignbW9udGgnKTtcclxuXHJcbiAgICByZXR1cm4gdmFsdWUuaXNBZnRlcihsYXN0TW9udGhTdGFydCkgJiZcclxuICAgICAgdmFsdWUuaXNCZWZvcmUobGFzdE1vbnRoRW5kKSAmJlxyXG4gICAgICAhdGhpcy5pc0VhcmxpZXJUaGlzV2Vlayh2YWx1ZSkgJiZcclxuICAgICAgIXRoaXMuaXNMYXN0V2Vlayh2YWx1ZSkgJiZcclxuICAgICAgIXRoaXMuaXNZZXN0ZXJkYXkodmFsdWUpO1xyXG4gIH0sXHJcbiAgZ2V0U2VjdGlvbkJ5S2V5OiBmdW5jdGlvbiBnZXRTZWN0aW9uQnlLZXkoa2V5KSB7XHJcbiAgICBmb3IgKGNvbnN0IHNlY3Rpb24gaW4gdGhpcy5zZWN0aW9ucykge1xyXG4gICAgICBpZiAodGhpcy5zZWN0aW9uc1tzZWN0aW9uXS5rZXkgPT09IGtleSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNlY3Rpb25zW3NlY3Rpb25dO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5nZXREZWZhdWx0U2VjdGlvbigpO1xyXG4gIH0sXHJcbiAgZ2V0U2VjdGlvbkJ5RGF0ZVRpbWU6IGZ1bmN0aW9uIGdldFNlY3Rpb25CeURhdGVUaW1lKHZhbHVlKSB7XHJcbiAgICBjb25zdCBrZXkgPSB0aGlzLmdldFNlY3Rpb25LZXkodmFsdWUpO1xyXG4gICAgY29uc3Qgc2VjdGlvbiA9IHRoaXMuZ2V0U2VjdGlvbkJ5S2V5KGtleSwgdmFsdWUpO1xyXG4gICAgcmV0dXJuIHNlY3Rpb247XHJcbiAgfSxcclxufSk7XHJcblxyXG5sYW5nLnNldE9iamVjdCgnU2FnZS5QbGF0Zm9ybS5Nb2JpbGUuR3JvdXBzLkRhdGVUaW1lU2VjdGlvbicsIF9fY2xhc3MpO1xyXG5leHBvcnQgZGVmYXVsdCBfX2NsYXNzO1xyXG4iXX0=
</pre>
</body>
</html>
