<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">define('crm/Views/Calendar/CalendarView', ['exports', 'module', 'dojo/_base/array', 'argos/Convert', 'dojo/_base/declare', 'dojo/dom-attr', 'dojo/dom-class', 'dojo/query', 'dojo/dom-construct', 'dojo/_base/lang', 'dojo/on', 'dojo/string', 'dojo/when', 'argos/Calendar', 'argos/List', '../../Utility', 'argos/I18n'], function (exports, module, _dojo_baseArray, _argosConvert, _dojo_baseDeclare, _dojoDomAttr, _dojoDomClass, _dojoQuery, _dojoDomConstruct, _dojo_baseLang, _dojoOn, _dojoString, _dojoWhen, _argosCalendar, _argosList, _Utility, _argosI18n) {
  function _interopRequireDefault(obj) { return obj &amp;&amp; obj.__esModule ? obj : { 'default': obj }; }

  var _array = _interopRequireDefault(_dojo_baseArray);

  var _convert = _interopRequireDefault(_argosConvert);

  var _declare = _interopRequireDefault(_dojo_baseDeclare);

  var _domAttr = _interopRequireDefault(_dojoDomAttr);

  var _domClass = _interopRequireDefault(_dojoDomClass);

  var _query = _interopRequireDefault(_dojoQuery);

  var _domConstruct = _interopRequireDefault(_dojoDomConstruct);

  var _lang = _interopRequireDefault(_dojo_baseLang);

  var _on = _interopRequireDefault(_dojoOn);

  var _string = _interopRequireDefault(_dojoString);

  var _when = _interopRequireDefault(_dojoWhen);

  var _Calendar = _interopRequireDefault(_argosCalendar);

  var _List = _interopRequireDefault(_argosList);

  var _Utility2 = _interopRequireDefault(_Utility);

  var _getResource = _interopRequireDefault(_argosI18n);

  var resource = (0, _getResource['default'])('calendarView');
  var dtFormatResource = (0, _getResource['default'])('calendarViewDateTimeFormat');

<span id='crm-Views-Calendar-CalendarView'>  /**
</span>   * @class crm.Views.Calendar.CalendarView
   *
   * @extends argos.List
   * @mixins argos.List
   *
   * @requires argos.List
   * @requires argos.Convert
   *
   * @requires crm.Format
   * @requires crm.Utility
   *
   * @requires moment
   *
   */
  var __class = (0, _declare['default'])('crm.Views.Calendar.CalendarView', [_List['default']], {
    // Localization
    titleText: resource.titleText,
    monthTitleFormatText: dtFormatResource.monthTitleFormatText,
    dayTitleFormatText: dtFormatResource.dayTitleFormatText,
    eventDateFormatText: dtFormatResource.eventDateFormatText,
    startTimeFormatText: dtFormatResource.startTimeFormatText,
    allDayText: resource.allDayText,
    eventText: resource.eventText,
    eventHeaderText: resource.eventHeaderText,
    countMoreText: resource.countMoreText,
    toggleCollapseText: resource.toggleCollapseText,
    withFromText: resource.withFromText,
    withText: resource.withText,
    unspecifiedText: resource.unspecifiedText,
    forText: resource.forText,
    dayText: resource.dayText,
    weekText: resource.weekText,

    enablePullToRefresh: true,
    string: _string['default'],
    Utility: _Utility2['default'],
    trimTo: 16,
    toggleCollapseClass: 'fa fa-chevron-down',
    toggleExpandClass: 'fa fa-chevron-right',

    // Templates
    widgetTemplate: new Simplate(['&lt;div id=&quot;{%= $.id %}&quot; title=&quot;{%= $.titleText %}&quot; class=&quot;overthrow panel {%= $.cls %}&quot; {% if ($.resourceKind) { %}data-resource-kind=&quot;{%= $.resourceKind %}&quot;{% } %}&gt;', '&lt;div class=&quot;overthrow scroller&quot; data-dojo-attach-point=&quot;scrollerNode&quot;&gt;', '&lt;div class=&quot;panel-content&quot;&gt;', '&lt;div class=&quot;calendarContainer&quot; data-dojo-attach-point=&quot;calendarNode&quot;&gt;&lt;/div&gt;', '&lt;div class=&quot;event-content event-hidden&quot; data-dojo-attach-point=&quot;eventContainerNode&quot;&gt;', '&lt;ul class=&quot;list-content&quot; data-dojo-attach-point=&quot;eventContentNode&quot;&gt;&lt;/ul&gt;', '{%! $.eventMoreTemplate %}', '&lt;/div&gt;', '&lt;div class=&quot;activity-content&quot; data-dojo-attach-point=&quot;activityContainerNode&quot;&gt;', '&lt;ul class=&quot;list-content&quot; data-dojo-attach-point=&quot;activityContentNode&quot;&gt;&lt;/ul&gt;', '{%! $.activityMoreTemplate %}', '&lt;/div&gt;', '&lt;div style=&quot;clear:both&quot;&gt;&lt;/div&gt;', '&lt;/div&gt;', '&lt;/div&gt;', '&lt;/div&gt;']),
    activityRowTemplate: new Simplate(['&lt;li class=&quot;activityEntry&quot; data-action=&quot;activateEntry&quot; data-key=&quot;{%= $.$key %}&quot; data-descriptor=&quot;{%: $.$descriptor %}&quot; data-activity-type=&quot;{%: $.Type %}&quot;&gt;', '{%! $$.activityIconTemplate %}', '{%! $$.activityHeaderTemplate %}', '{%! $$.activityContentTemplate %}', '{%! $$.activityFooterTemplate %}', '&lt;/li&gt;']),
    activityIconTemplate: new Simplate(['&lt;div class=&quot;activityEntry__icon&quot;&gt;', '&lt;button class=&quot;list-item-selector button {%= $$.activityIconByType[$.Type] %}&quot;&gt;', '&lt;/button&gt;', '&lt;/div&gt;']),
    activityHeaderTemplate: new Simplate(['&lt;div class=&quot;activityEntry__header&quot;&gt;', '&lt;div class=&quot;header__content&quot;&gt;', '&lt;h3 class=&quot;header__title&quot;&gt;{%: $.Description %}&lt;/h3&gt;', '&lt;h4 class=&quot;header__subTitle&quot;&gt;{%! $$.activityNameTemplate %}&lt;/h4&gt;', '&lt;/div&gt;', '&lt;div class=&quot;header__timeStamp&quot;&gt;', '&lt;span class=&quot;timeStamp__time&quot;&gt;', '{% if ($.Timeless) { %}', '{%= $$.allDayText %}', '{% } else if ($$.activityIconByType[$.Type]) { %}', '{%: crm.Format.date($.StartDate, $$.startTimeFormatText) %}', '{% } else { %}', '{%! $$.eventTimeTemplate %}', '{% } %}', '&lt;/span&gt;', '&lt;/div&gt;', '&lt;/div&gt;']),
    activityContentTemplate: new Simplate(['&lt;div class=&quot;activityEntry__content&quot;&gt;', '{% if ($.Notes) { %}', '{%: $$.Utility.trimText($.Notes, $$.trimTo) %}', '{% } %}', '&lt;/div&gt;']),
    activityFooterTemplate: new Simplate(['&lt;div class=&quot;activityEntry__footer&quot;&gt;', '&lt;/div&gt;']),
    activityNameTemplate: new Simplate(['{% if ($.ContactName) { %}', '{%= $$.string.substitute($$.withFromText, { contactName: $$.parseName($.ContactName), accountName: $.AccountName }) %}', '{% } else if ($.AccountName) { %}', '{%= $$.string.substitute($$.withText, { object: $.AccountName }) %}', '{% } else if ($.LeadName) { %}', '{%= $$.string.substitute($$.withText, { object: $.LeadName }) %}', '{% } else if ($$.activityIconByType[$.Type]) { %}', '{%= $$.string.substitute($$.withText, { object: $$.unspecifiedText }) %}', '{% } else { %}', '{%= $$.string.substitute($$.forText, { reason: $.Type }) %}', '{% } %}']),
    activityMoreTemplate: new Simplate(['&lt;div class=&quot;list-more&quot; data-dojo-attach-point=&quot;activityMoreNode&quot;&gt;', '&lt;button class=&quot;button&quot; data-action=&quot;activateActivityMore&quot;&gt;', '&lt;span data-dojo-attach-point=&quot;activityRemainingContentNode&quot;&gt;{%= $.countMoreText %}&lt;/span&gt;', '&lt;/button&gt;', '&lt;/div&gt;']),
    eventRowTemplate: new Simplate(['&lt;li data-action=&quot;activateEntry&quot; data-key=&quot;{%= $.$key %}&quot; data-descriptor=&quot;{%: $.$descriptor %}&quot; data-activity-type=&quot;Event&quot;&gt;', '{%! $$.eventIconTemplate %}', '{%! $$.activityHeaderTemplate %}', '{%! $$.activityFooterTemplate %}', '&lt;/li&gt;']),
    eventTimeTemplate: new Simplate(['{%: crm.Format.date($.StartDate, $$.eventDateFormatText) %}', '&amp;nbsp;-&amp;nbsp;', '{%: crm.Format.date($.EndDate, $$.eventDateFormatText) %}']),
    eventIconTemplate: new Simplate(['&lt;div class=&quot;activityEntry__icon&quot;&gt;', '&lt;button class=&quot;list-item-selector button {%= $$.eventIcon %}&quot;&gt;', '&lt;/button&gt;', '&lt;/div&gt;']),
    eventMoreTemplate: new Simplate(['&lt;div class=&quot;list-more&quot; data-dojo-attach-point=&quot;eventMoreNode&quot;&gt;', '&lt;button class=&quot;button&quot; data-action=&quot;activateEventMore&quot;&gt;', '&lt;span data-dojo-attach-point=&quot;eventRemainingContentNode&quot;&gt;{%= $.countMoreText %}&lt;/span&gt;', '&lt;/button&gt;', '&lt;/div&gt;']),
    headerRowTemplate: new Simplate(['&lt;li data-descriptor=&quot;{%: $.day %}&quot;&gt;', '&lt;div class=&quot;dayHeader&quot;&gt;', '&lt;h3 class=&quot;header__title&quot;&gt;{%: $.day %}&lt;/h3&gt;', '&lt;/div&gt;', '&lt;/li&gt;']),
    weekSelectTemplate: new Simplate(['&lt;div class=&quot;toggle toggle-horizontal calendar__weekToggle&quot;&gt;', '&lt;span class=&quot;thumb horizontal weekToggle__thumb&quot;&gt;&lt;/span&gt;', '&lt;span class=&quot;toggleOn weekToggle__on display-none&quot;&gt;{%= $.weekText %}&lt;/span&gt;', '&lt;span class=&quot;toggleOff weekToggle__off&quot;&gt;{%= $.dayText %}&lt;/span&gt;', '&lt;/div&gt;']),

    attributeMap: {
      calendarContent: {
        node: 'contentNode',
        type: 'innerHTML'
      },
      dateContent: {
        node: 'dateNode',
        type: 'innerHTML'
      },
      dayTitleContent: {
        node: 'dayTitleNode',
        type: 'innerHTML'
      },
      activityContent: {
        node: 'activityContentNode',
        type: 'innerHTML'
      },
      eventContent: {
        node: 'eventContentNode',
        type: 'innerHTML'
      },
      eventRemainingContent: {
        node: 'eventRemainingContentNode',
        type: 'innerHTML'
      },
      activityRemainingContent: {
        node: 'activityRemainingContentNode',
        type: 'innerHTML'
      }
    },
    eventContainerNode: null,
    activityContainerNode: null,

    // View Properties
    id: 'calendar_view',
    cls: 'activities-for-month',
    insertView: 'activity_types_list',
    activityDetailView: 'activity_detail',
    eventDetailView: 'event_detail',
    enableSearch: false,
    dayHeaderFormat: 'dddd, MMMM Do',
    dateCounts: null,
    currentDate: null,
    monthActivities: null,
    monthEvents: null,
    multiSelect: 7,
    _dataLoaded: false,
    _eventStore: null,
    _showMulti: false,
    _refreshAdded: false,

    activityIconByType: {
      'atToDo': 'fa fa-list-ul',
      'atPhoneCall': 'fa fa-phone',
      'atAppointment': 'fa fa-calendar-o',
      'atLiterature': 'fa fa-calendar-o',
      'atPersonal': 'fa fa-check-square-o',
      'atQuestion': 'fa fa-question',
      'atNote': 'fa fa-calendar-o',
      'atEMail': 'fa fa-envelope'
    },
    eventIcon: 'fa fa-calendar-o',

    queryOrderBy: 'StartDate asc',
    querySelect: ['StartDate', 'Description', 'Type', 'AccountName', 'ContactName', 'LeadId', 'LeadName', 'UserId', 'Timeless', 'Recurring', 'Notes'],
    queryInclude: ['$descriptors'],
    resourceKind: 'activities',
    contractName: 'system',
    pageSize: 500,
    eventQueryWhere: null,
    eventQuerySelect: ['StartDate', 'EndDate', 'Description', 'Type'],
    eventInclude: null,
    eventResourceKind: 'events',
    eventContractName: 'dynamic',

    _onRefresh: function _onRefresh(o) {
      this.inherited(arguments);
      if (o.resourceKind === 'activities' || o.resourceKind === 'events') {
        this.refreshRequired = true;
      }
    },
    changeDayActivities: function changeDayActivities() {
      _domClass['default'].remove(this.activityContainerNode, 'list-loading');
      var multiDays = [];
      var entries = undefined;

      if (this._showMulti) {
        var dateIterator = this.currentDate.clone().startOf('week');
        for (var i = 0; i &lt; this.multiSelect; i++) {
          entries = this.monthActivities[dateIterator.format('YYYY-MM-DD')];
          if (entries) {
            multiDays = multiDays.concat(entries);
          }
          this.createActivityRows(entries, dateIterator.format(this.dayHeaderFormat));
          dateIterator.add(1, 'days');
        }
        if (multiDays.length === 0) {
          this.set('activityContent', this.noDataTemplate.apply(this));
        }
      } else {
        entries = this.monthActivities[this.currentDate.format('YYYY-MM-DD')];
        this.createActivityRows(entries, this.currentDate.format(this.dayHeaderFormat));
        if (!entries) {
          this.set('activityContent', this.noDataTemplate.apply(this));
        }
      }

      return;
    },
    createActivityRows: function createActivityRows(entries, day) {
      if (entries === undefined) entries = [];

      var count = entries.length;

      if (count &gt; 0) {
        var activityDocfrag = document.createDocumentFragment();
        var eventDocfrag = document.createDocumentFragment();
        if (this._showMulti) {
          var headerNode = _domConstruct['default'].toDom(this.headerRowTemplate.apply({ day: day }, this));
          activityDocfrag.appendChild(headerNode);
        }
        for (var i = 0; i &lt; count; i++) {
          var entry = this.entries[entries[i]];
          var rowNode = undefined;
          if (this.activityIconByType[entry.Type]) {
            try {
              rowNode = _domConstruct['default'].toDom(this.activityRowTemplate.apply(entry, this));
            } catch (err) {
              console.error(err); // eslint-disable-line
              rowNode = _domConstruct['default'].toDom(this.rowTemplateError.apply(entry, this));
            }

            activityDocfrag.appendChild(rowNode);
          } else {
            try {
              rowNode = _domConstruct['default'].toDom(this.eventRowTemplate.apply(entry, this));
            } catch (err) {
              console.error(err); // eslint-disable-line
              rowNode = _domConstruct['default'].toDom(this.rowTemplateError.apply(entry, this));
            }

            eventDocfrag.appendChild(rowNode);
          }
          this.onApplyRowTemplate(entry, rowNode);
        }

        if (activityDocfrag.childNodes.length &gt; 0) {
          _domConstruct['default'].place(activityDocfrag, this.activityContentNode, 'last');
        }
        if (eventDocfrag.childNodes.length &gt; 0) {
          _domClass['default'].remove(this.eventContainerNode, 'event-hidden');
          _domConstruct['default'].place(eventDocfrag, this.eventContentNode, 'last');
        } else {
          _domClass['default'].add(this.eventContainerNode, 'event-hidden');
        }
      }
    },
    createEventStore: function createEventStore() {
      if (this._eventStore) {
        return this._eventStore;
      }
      var temp = this.get('store');
      var store = Object.assign({}, temp);
      Object.setPrototypeOf(store, Object.getPrototypeOf(temp));
      store.select = this.eventQuerySelect;
      store.resourceKind = this.eventResourceKind;
      store.contractName = this.eventContractName;
      store.orderBy = this.eventOrderBy;
      store.include = this.eventInclude;
      this._eventStore = store;
      return store;
    },
    formatQueryActivity: function formatQueryActivity(value) {
      var startDate = value.clone().startOf('month');
      var endDate = value.clone().endOf('month');
      return _string['default'].substitute(['UserActivities.UserId eq &quot;${0}&quot; and Type ne &quot;atLiterature&quot; and (', '(Timeless eq false and StartDate', ' between @${1}@ and @${2}@) or ', '(Timeless eq true and StartDate', ' between @${3}@ and @${4}@))'].join(''), [App.context.user &amp;&amp; App.context.user.$key, _convert['default'].toIsoStringFromDate(startDate.toDate()), _convert['default'].toIsoStringFromDate(endDate.toDate()), startDate.format('YYYY-MM-DDT00:00:00[Z]'), endDate.format('YYYY-MM-DDT23:59:59[Z]')]);
    },
    formatQueryEvent: function formatQueryEvent(value) {
      return _string['default'].substitute('UserId eq &quot;${user}&quot; and ((StartDate gt @${start}@ or EndDate gt @${start}@) and StartDate lt @${end}@)', {
        user: App.context.user &amp;&amp; App.context.user.$key,
        start: _convert['default'].toIsoStringFromDate(value.clone().startOf('month').toDate()),
        end: _convert['default'].toIsoStringFromDate(value.clone().endOf('month').toDate())
      });
    },
    highlightActivities: function highlightActivities() {
      var _this = this;

      _array['default'].forEach(this._calendar.weeksNode.childNodes, function (week) {
        _array['default'].forEach(week.childNodes, function (day) {
          if (!_this.monthActivities[_domAttr['default'].get(day, 'data-date')]) {
            _this._calendar.removeActive(day);
            return;
          }
          if (!_this._calendar.isActive(day)) {
            day.subValue = _this.monthActivities[_domAttr['default'].get(day, 'data-date')];
            _this._calendar.setActiveDay(day);
          }
        }, _this);
      }, this);
      return this;
    },
    navigateToDetailView: function navigateToDetailView(key, _descriptor) {
      var descriptor = _descriptor;
      var entry = this.entries[key];
      var detailView = entry.isEvent ? this.eventDetailView : this.activityDetailView;
      var view = App.getView(detailView);
      descriptor = entry.isEvent ? descriptor : entry.Description;
      if (view) {
        view.show({
          title: descriptor,
          key: key
        });
      }
    },
    navigateToInsertView: function navigateToInsertView() {
      var view = App.getView(this.insertView || this.editView);

      if (!this.options) {
        this.options = {};
      }

      this.options.currentDate = this.currentDate.toString('yyyy-MM-dd') || moment().startOf('day');
      if (view) {
        view.show({
          negateHistory: true,
          returnTo: this.id,
          insert: true,
          currentDate: this.options.currentDate.valueOf()
        });
      }
    },
    onToolLayoutCreated: function onToolLayoutCreated(tools) {
      if (tools &amp;&amp; !this._refreshAdded &amp;&amp; !window.App.supportsTouch()) {
        var refreshTool = {
          id: 'refresh',
          cls: 'fa fa-refresh fa-fw fa-lg',
          action: 'refresh'

        };
        if (tools.tbar) {
          tools.tbar.push(refreshTool);
          this._refreshAdded = true;
        }
      }
      this.inherited(arguments);
    },
    parseName: function parseName() {
      var name = arguments.length &lt;= 0 || arguments[0] === undefined ? {} : arguments[0];

      return name.split(' ').splice(-1)[0];
    },
    process: function process(store, entries, isEvent) {
      var _this2 = this;

      if (entries.length &gt; 0) {
        entries.forEach(function (entryPreProcess) {
          var entry = _this2._processEntry(entryPreProcess);
          // If key comes back with nothing, check that the store is properly
          // setup with an idProperty
          entry.isEvent = isEvent;
          var entryKey = store.getIdentity(entry);
          _this2.entries[entryKey] = entry;
          var startDate = moment(_convert['default'].toDateFromString(entry.StartDate));
          if (entry.Timeless) {
            startDate.subtract({
              minutes: startDate.utcOffset()
            });
          }
          var date = startDate.format('YYYY-MM-DD');
          if (_this2.monthActivities[date]) {
            _this2.monthActivities[date].push(entryKey);
          } else {
            _this2.monthActivities[date] = [entryKey];
          }
        });
      }
    },
    processData: function processData(entries) {
      if (!entries) {
        return;
      }

      var store = this.get('store');

      this.process(store, entries, false);
    },
    processEventData: function processEventData(entries) {
      if (!entries) {
        return;
      }
      var store = this.createEventStore();

      this.process(store, entries, true);
    },
    processShowOptions: function processShowOptions(options) {
      if (options.currentDate) {
        this.currentDate = moment(options.currentDate).startOf('day') || moment().clone().startOf('day');
        this.refreshRequired = true;
      }
    },
    refresh: function refresh() {
      this.renderCalendar();
      this.refreshData();
    },
    refreshData: function refreshData() {
      var _this3 = this;

      this._dataLoaded = false;
      this._eventStore = null;
      _domClass['default'].add(this.activityContainerNode, 'list-loading');
      this.set('activityContent', this.loadingTemplate.apply(this));
      _domConstruct['default'].empty(this.eventContentNode);
      this.currentDate = this._calendar.getSelectedDateMoment();
      this.queryText = '';
      this.monthActivities = [];
      this.activityQuery = this.formatQueryActivity(this.currentDate);
      this.eventQuery = this.formatQueryEvent(this.currentDate);
      Promise.all([this.requestData(), this.requestEventData()]).then(function () {
        _domConstruct['default'].empty(_this3.activityContentNode);
        _domConstruct['default'].empty(_this3.eventContentNode);
        _this3.highlightActivities();
        _this3.changeDayActivities();
        _this3._dataLoaded = true;
      });
    },
    render: function render() {
      this.inherited(arguments);
      this.renderCalendar();
    },
    renderCalendar: function renderCalendar() {
      if (!this._calendar) {
        this._calendar = new _Calendar['default']({ id: 'calendar-view__calendar', noClearButton: true });
        _domConstruct['default'].place(this._calendar.domNode, this.calendarNode);
        var toggle = _domConstruct['default'].toDom(this.weekSelectTemplate.apply(this));
        _domConstruct['default'].place(toggle, this._calendar.footerNode, 'last');
        (0, _on['default'])(toggle, 'click', this.toggleMultiSelect.bind(this));
        this._calendar.onChangeDay = this.onChangeDay.bind(this);
        this._calendar.show();
        this._calendar.onRefreshCalendar = this.onRefreshCalendar.bind(this); // Must be called after show because this will call requestData since show calls refreshCalendar
      } else {
          this.refreshingCalendar = true;
          this._calendar.refresh(false);
        }
    },
    onRefreshCalendar: function onRefreshCalendar(refresh) {
      if (refresh) {
        this.refreshData();
      }
    },
    onChangeDay: function onChangeDay() {
      this.selectDay();
    },
    requestData: function requestData() {
      var store = this.get('store');
      if (store) {
        // attempt to use a dojo store
        var queryOptions = {
          count: this.pageSize,
          start: this.position
        };

        this._applyStateToQueryOptions(queryOptions);

        var queryExpression = this._buildQueryExpression(this.activityQuery) || null;
        var queryResults = store.query(queryExpression, queryOptions);

        (0, _when['default'])(queryResults, this.processData.bind(this), this._onQueryError.bind(this, queryOptions));

        return queryResults;
      }

      console.warn('Error requesting data, no store was defined. Did you mean to mixin _SDataListMixin to your list view?'); // eslint-disable-line
    },
    requestEventData: function requestEventData() {
      var store = this.createEventStore();
      if (store) {
        // attempt to use a dojo store
        var queryOptions = {
          count: this.pageSize,
          start: this.position
        };

        this._applyStateToQueryOptions(queryOptions);

        var queryExpression = this._buildQueryExpression(this.eventQuery) || null;
        var queryResults = store.query(queryExpression, queryOptions);

        (0, _when['default'])(queryResults, this.processEventData.bind(this), this._onQueryError.bind(this, queryOptions));

        return queryResults;
      }

      console.warn('Error requesting data, no store was defined. Did you mean to mixin _SDataListMixin to your list view?'); // eslint-disable-line
    },
    selectDay: function selectDay() {
      var selected = this._calendar.getSelectedDateMoment();
      if (this.currentDate &amp;&amp; this._dataLoaded) {
        _domConstruct['default'].empty(this.activityContentNode);
        _domConstruct['default'].empty(this.eventContentNode);
        this.currentDate = selected;
        this.changeDayActivities();
      } else {
        this.currentDate = selected;
      }
    },
    show: function show(options) {
      this.inherited(arguments);

      if (options) {
        this.processShowOptions(options);
      } else {
        this.renderCalendar();
      }
    },
    startup: function startup() {
      this.inherited(arguments);
    },
    toggleMultiSelect: function toggleMultiSelect(_ref) {
      var currentTarget = _ref.currentTarget;

      this._showMulti = !this._showMulti;
      var toggleOnNode = (0, _query['default'])('.toggleOn', currentTarget).shift();
      var toggleOffNode = (0, _query['default'])('.toggleOff', currentTarget).shift();

      if (toggleOnNode &amp;&amp; toggleOffNode) {
        _domClass['default'].toggle(toggleOnNode, 'display-none', !this._showMulti);
        _domClass['default'].toggle(toggleOffNode, 'display-none', this._showMulti);
      }

      this._calendar.toggleSelectWeek();
      _domClass['default'].toggle(currentTarget, 'toggleStateOn');
      _domConstruct['default'].empty(this.activityContentNode);
      _domConstruct['default'].empty(this.eventContentNode);
      this.changeDayActivities();
    },
    _buildQueryExpression: function _buildQueryExpression() {
      var queryParam = arguments.length &lt;= 0 || arguments[0] === undefined ? {} : arguments[0];

      return _lang['default'].mixin(queryParam || {}, this.options &amp;&amp; (this.options.query || this.options.where));
    }
  });

  module.exports = __class;
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9WaWV3cy9DYWxlbmRhci9DYWxlbmRhclZpZXcuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBZ0JBLE1BQU0sUUFBUSxHQUFHLDZCQUFZLGNBQWMsQ0FBQyxDQUFDO0FBQzdDLE1BQU0sZ0JBQWdCLEdBQUcsNkJBQVksNEJBQTRCLENBQUMsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFpQm5FLE1BQU0sT0FBTyxHQUFHLHlCQUFRLGlDQUFpQyxFQUFFLGtCQUFNLEVBQUU7O0FBRWpFLGFBQVMsRUFBRSxRQUFRLENBQUMsU0FBUztBQUM3Qix3QkFBb0IsRUFBRSxnQkFBZ0IsQ0FBQyxvQkFBb0I7QUFDM0Qsc0JBQWtCLEVBQUUsZ0JBQWdCLENBQUMsa0JBQWtCO0FBQ3ZELHVCQUFtQixFQUFFLGdCQUFnQixDQUFDLG1CQUFtQjtBQUN6RCx1QkFBbUIsRUFBRSxnQkFBZ0IsQ0FBQyxtQkFBbUI7QUFDekQsY0FBVSxFQUFFLFFBQVEsQ0FBQyxVQUFVO0FBQy9CLGFBQVMsRUFBRSxRQUFRLENBQUMsU0FBUztBQUM3QixtQkFBZSxFQUFFLFFBQVEsQ0FBQyxlQUFlO0FBQ3pDLGlCQUFhLEVBQUUsUUFBUSxDQUFDLGFBQWE7QUFDckMsc0JBQWtCLEVBQUUsUUFBUSxDQUFDLGtCQUFrQjtBQUMvQyxnQkFBWSxFQUFFLFFBQVEsQ0FBQyxZQUFZO0FBQ25DLFlBQVEsRUFBRSxRQUFRLENBQUMsUUFBUTtBQUMzQixtQkFBZSxFQUFFLFFBQVEsQ0FBQyxlQUFlO0FBQ3pDLFdBQU8sRUFBRSxRQUFRLENBQUMsT0FBTztBQUN6QixXQUFPLEVBQUUsUUFBUSxDQUFDLE9BQU87QUFDekIsWUFBUSxFQUFFLFFBQVEsQ0FBQyxRQUFROztBQUUzQix1QkFBbUIsRUFBRSxJQUFJO0FBQ3pCLFVBQU0sb0JBQVE7QUFDZCxXQUFPLHNCQUFTO0FBQ2hCLFVBQU0sRUFBRSxFQUFFO0FBQ1YsdUJBQW1CLEVBQUUsb0JBQW9CO0FBQ3pDLHFCQUFpQixFQUFFLHFCQUFxQjs7O0FBR3hDLGtCQUFjLEVBQUUsSUFBSSxRQUFRLENBQUMsQ0FDM0IscUtBQXFLLEVBQ25LLHdFQUF3RSxFQUN0RSw2QkFBNkIsRUFDM0IsNkVBQTZFLEVBQzdFLHNGQUFzRixFQUNwRiwwRUFBMEUsRUFDMUUsNEJBQTRCLEVBQzlCLFFBQVEsRUFDUiwrRUFBK0UsRUFDN0UsNkVBQTZFLEVBQzdFLCtCQUErQixFQUNqQyxRQUFRLEVBQ1IsZ0NBQWdDLEVBQ2xDLFFBQVEsRUFDVixRQUFRLEVBQ1YsUUFBUSxDQUNULENBQUM7QUFDRix1QkFBbUIsRUFBRSxJQUFJLFFBQVEsQ0FBQyxDQUNoQywySkFBMkosRUFDekosZ0NBQWdDLEVBQ2hDLGtDQUFrQyxFQUNsQyxtQ0FBbUMsRUFDbkMsa0NBQWtDLEVBQ3BDLE9BQU8sQ0FDUixDQUFDO0FBQ0Ysd0JBQW9CLEVBQUUsSUFBSSxRQUFRLENBQUMsQ0FDakMsbUNBQW1DLEVBQ2pDLGlGQUFpRixFQUNqRixXQUFXLEVBQ2IsUUFBUSxDQUNULENBQUM7QUFDRiwwQkFBc0IsRUFBRSxJQUFJLFFBQVEsQ0FBQyxDQUNuQyxxQ0FBcUMsRUFDbkMsK0JBQStCLEVBQzdCLHFEQUFxRCxFQUNyRCxrRUFBa0UsRUFDcEUsUUFBUSxFQUNSLGlDQUFpQyxFQUMvQixnQ0FBZ0MsRUFDOUIseUJBQXlCLEVBQ3ZCLHNCQUFzQixFQUN4QixtREFBbUQsRUFDakQsNkRBQTZELEVBQy9ELGdCQUFnQixFQUNkLDZCQUE2QixFQUMvQixTQUFTLEVBQ1gsU0FBUyxFQUNYLFFBQVEsRUFDVixRQUFRLENBQ1QsQ0FBQztBQUNGLDJCQUF1QixFQUFFLElBQUksUUFBUSxDQUFDLENBQ3BDLHNDQUFzQyxFQUNwQyxzQkFBc0IsRUFDcEIsZ0RBQWdELEVBQ2xELFNBQVMsRUFDWCxRQUFRLENBQ1QsQ0FBQztBQUNGLDBCQUFzQixFQUFFLElBQUksUUFBUSxDQUFDLENBQ25DLHFDQUFxQyxFQUNyQyxRQUFRLENBQ1QsQ0FBQztBQUNGLHdCQUFvQixFQUFFLElBQUksUUFBUSxDQUFDLENBQ2pDLDRCQUE0QixFQUMxQix3SEFBd0gsRUFDMUgsbUNBQW1DLEVBQ2pDLHFFQUFxRSxFQUN2RSxnQ0FBZ0MsRUFDOUIsa0VBQWtFLEVBQ3BFLG1EQUFtRCxFQUNqRCwwRUFBMEUsRUFDNUUsZ0JBQWdCLEVBQ2QsNkRBQTZELEVBQy9ELFNBQVMsQ0FDVixDQUFDO0FBQ0Ysd0JBQW9CLEVBQUUsSUFBSSxRQUFRLENBQUMsQ0FDakMsbUVBQW1FLEVBQ2pFLDREQUE0RCxFQUMxRCwyRkFBMkYsRUFDN0YsV0FBVyxFQUNiLFFBQVEsQ0FDVCxDQUFDO0FBQ0Ysb0JBQWdCLEVBQUUsSUFBSSxRQUFRLENBQUMsQ0FDN0IsNkhBQTZILEVBQzNILDZCQUE2QixFQUM3QixrQ0FBa0MsRUFDbEMsa0NBQWtDLEVBQ3BDLE9BQU8sQ0FDUixDQUFDO0FBQ0YscUJBQWlCLEVBQUUsSUFBSSxRQUFRLENBQUMsQ0FDOUIsNkRBQTZELEVBQzdELGVBQWUsRUFDZiwyREFBMkQsQ0FDNUQsQ0FBQztBQUNGLHFCQUFpQixFQUFFLElBQUksUUFBUSxDQUFDLENBQzlCLG1DQUFtQyxFQUNqQyxnRUFBZ0UsRUFDaEUsV0FBVyxFQUNiLFFBQVEsQ0FDVCxDQUFDO0FBQ0YscUJBQWlCLEVBQUUsSUFBSSxRQUFRLENBQUMsQ0FDOUIsZ0VBQWdFLEVBQzlELHlEQUF5RCxFQUN2RCx3RkFBd0YsRUFDMUYsV0FBVyxFQUNiLFFBQVEsQ0FDVCxDQUFDO0FBQ0YscUJBQWlCLEVBQUUsSUFBSSxRQUFRLENBQUMsQ0FDOUIscUNBQXFDLEVBQ25DLHlCQUF5QixFQUN2Qiw2Q0FBNkMsRUFDL0MsUUFBUSxFQUNWLE9BQU8sQ0FDUixDQUFDO0FBQ0Ysc0JBQWtCLEVBQUUsSUFBSSxRQUFRLENBQUMsQ0FDL0IsNkRBQTZELEVBQ3pELDBEQUEwRCxFQUMxRCw2RUFBNkUsRUFDN0UsaUVBQWlFLEVBQ3JFLFFBQVEsQ0FDVCxDQUFDOztBQUVGLGdCQUFZLEVBQUU7QUFDWixxQkFBZSxFQUFFO0FBQ2YsWUFBSSxFQUFFLGFBQWE7QUFDbkIsWUFBSSxFQUFFLFdBQVc7T0FDbEI7QUFDRCxpQkFBVyxFQUFFO0FBQ1gsWUFBSSxFQUFFLFVBQVU7QUFDaEIsWUFBSSxFQUFFLFdBQVc7T0FDbEI7QUFDRCxxQkFBZSxFQUFFO0FBQ2YsWUFBSSxFQUFFLGNBQWM7QUFDcEIsWUFBSSxFQUFFLFdBQVc7T0FDbEI7QUFDRCxxQkFBZSxFQUFFO0FBQ2YsWUFBSSxFQUFFLHFCQUFxQjtBQUMzQixZQUFJLEVBQUUsV0FBVztPQUNsQjtBQUNELGtCQUFZLEVBQUU7QUFDWixZQUFJLEVBQUUsa0JBQWtCO0FBQ3hCLFlBQUksRUFBRSxXQUFXO09BQ2xCO0FBQ0QsMkJBQXFCLEVBQUU7QUFDckIsWUFBSSxFQUFFLDJCQUEyQjtBQUNqQyxZQUFJLEVBQUUsV0FBVztPQUNsQjtBQUNELDhCQUF3QixFQUFFO0FBQ3hCLFlBQUksRUFBRSw4QkFBOEI7QUFDcEMsWUFBSSxFQUFFLFdBQVc7T0FDbEI7S0FDRjtBQUNELHNCQUFrQixFQUFFLElBQUk7QUFDeEIseUJBQXFCLEVBQUUsSUFBSTs7O0FBRzNCLE1BQUUsRUFBRSxlQUFlO0FBQ25CLE9BQUcsRUFBRSxzQkFBc0I7QUFDM0IsY0FBVSxFQUFFLHFCQUFxQjtBQUNqQyxzQkFBa0IsRUFBRSxpQkFBaUI7QUFDckMsbUJBQWUsRUFBRSxjQUFjO0FBQy9CLGdCQUFZLEVBQUUsS0FBSztBQUNuQixtQkFBZSxFQUFFLGVBQWU7QUFDaEMsY0FBVSxFQUFFLElBQUk7QUFDaEIsZUFBVyxFQUFFLElBQUk7QUFDakIsbUJBQWUsRUFBRSxJQUFJO0FBQ3JCLGVBQVcsRUFBRSxJQUFJO0FBQ2pCLGVBQVcsRUFBRSxDQUFDO0FBQ2QsZUFBVyxFQUFFLEtBQUs7QUFDbEIsZUFBVyxFQUFFLElBQUk7QUFDakIsY0FBVSxFQUFFLEtBQUs7QUFDakIsaUJBQWEsRUFBRSxLQUFLOztBQUVwQixzQkFBa0IsRUFBRTtBQUNsQixjQUFRLEVBQUUsZUFBZTtBQUN6QixtQkFBYSxFQUFFLGFBQWE7QUFDNUIscUJBQWUsRUFBRSxrQkFBa0I7QUFDbkMsb0JBQWMsRUFBRSxrQkFBa0I7QUFDbEMsa0JBQVksRUFBRSxzQkFBc0I7QUFDcEMsa0JBQVksRUFBRSxnQkFBZ0I7QUFDOUIsY0FBUSxFQUFFLGtCQUFrQjtBQUM1QixlQUFTLEVBQUUsZ0JBQWdCO0tBQzVCO0FBQ0QsYUFBUyxFQUFFLGtCQUFrQjs7QUFFN0IsZ0JBQVksRUFBRSxlQUFlO0FBQzdCLGVBQVcsRUFBRSxDQUNYLFdBQVcsRUFDWCxhQUFhLEVBQ2IsTUFBTSxFQUNOLGFBQWEsRUFDYixhQUFhLEVBQ2IsUUFBUSxFQUNSLFVBQVUsRUFDVixRQUFRLEVBQ1IsVUFBVSxFQUNWLFdBQVcsRUFDWCxPQUFPLENBQ1I7QUFDRCxnQkFBWSxFQUFFLENBQ1osY0FBYyxDQUNmO0FBQ0QsZ0JBQVksRUFBRSxZQUFZO0FBQzFCLGdCQUFZLEVBQUUsUUFBUTtBQUN0QixZQUFRLEVBQUUsR0FBRztBQUNiLG1CQUFlLEVBQUUsSUFBSTtBQUNyQixvQkFBZ0IsRUFBRSxDQUNoQixXQUFXLEVBQ1gsU0FBUyxFQUNULGFBQWEsRUFDYixNQUFNLENBQ1A7QUFDRCxnQkFBWSxFQUFFLElBQUk7QUFDbEIscUJBQWlCLEVBQUUsUUFBUTtBQUMzQixxQkFBaUIsRUFBRSxTQUFTOztBQUU1QixjQUFVLEVBQUUsU0FBUyxVQUFVLENBQUMsQ0FBQyxFQUFFO0FBQ2pDLFVBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLENBQUM7QUFDMUIsVUFBSSxDQUFDLENBQUMsWUFBWSxLQUFLLFlBQVksSUFBSSxDQUFDLENBQUMsWUFBWSxLQUFLLFFBQVEsRUFBRTtBQUNsRSxZQUFJLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQztPQUM3QjtLQUNGO0FBQ0QsdUJBQW1CLEVBQUUsU0FBUyxtQkFBbUIsR0FBRztBQUNsRCwyQkFBUyxNQUFNLENBQUMsSUFBSSxDQUFDLHFCQUFxQixFQUFFLGNBQWMsQ0FBQyxDQUFDO0FBQzVELFVBQUksU0FBUyxHQUFHLEVBQUUsQ0FBQztBQUNuQixVQUFJLE9BQU8sWUFBQSxDQUFDOztBQUVaLFVBQUksSUFBSSxDQUFDLFVBQVUsRUFBRTtBQUNuQixZQUFNLFlBQVksR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUM5RCxhQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDLEVBQUUsRUFBRTtBQUN6QyxpQkFBTyxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDO0FBQ2xFLGNBQUksT0FBTyxFQUFFO0FBQ1gscUJBQVMsR0FBRyxTQUFTLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1dBQ3ZDO0FBQ0QsY0FBSSxDQUFDLGtCQUFrQixDQUFDLE9BQU8sRUFBRSxZQUFZLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDO0FBQzVFLHNCQUFZLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQztTQUM3QjtBQUNELFlBQUksU0FBUyxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUU7QUFDMUIsY0FBSSxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsRUFBRSxJQUFJLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1NBQzlEO09BQ0YsTUFBTTtBQUNMLGVBQU8sR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUM7QUFDdEUsWUFBSSxDQUFDLGtCQUFrQixDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQztBQUNoRixZQUFJLENBQUMsT0FBTyxFQUFFO0FBQ1osY0FBSSxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsRUFBRSxJQUFJLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1NBQzlEO09BQ0Y7O0FBRUQsYUFBTztLQUNSO0FBQ0Qsc0JBQWtCLEVBQUUsU0FBUyxrQkFBa0IsQ0FBQyxPQUFPLEVBQU8sR0FBRyxFQUFFO1VBQW5CLE9BQU8sZ0JBQVAsT0FBTyxHQUFHLEVBQUU7O0FBQzFELFVBQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUM7O0FBRTdCLFVBQUksS0FBSyxHQUFHLENBQUMsRUFBRTtBQUNiLFlBQU0sZUFBZSxHQUFHLFFBQVEsQ0FBQyxzQkFBc0IsRUFBRSxDQUFDO0FBQzFELFlBQU0sWUFBWSxHQUFHLFFBQVEsQ0FBQyxzQkFBc0IsRUFBRSxDQUFDO0FBQ3ZELFlBQUksSUFBSSxDQUFDLFVBQVUsRUFBRTtBQUNuQixjQUFNLFVBQVUsR0FBRyx5QkFBYSxLQUFLLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLEtBQUssQ0FBQyxFQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDO0FBQ3RGLHlCQUFlLENBQUMsV0FBVyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1NBQ3pDO0FBQ0QsYUFBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEtBQUssRUFBRSxDQUFDLEVBQUUsRUFBRTtBQUM5QixjQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3ZDLGNBQUksT0FBTyxZQUFBLENBQUM7QUFDWixjQUFJLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUU7QUFDdkMsZ0JBQUk7QUFDRixxQkFBTyxHQUFHLHlCQUFhLEtBQUssQ0FBQyxJQUFJLENBQUMsbUJBQW1CLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDO2FBQzNFLENBQUMsT0FBTyxHQUFHLEVBQUU7QUFDWixxQkFBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNuQixxQkFBTyxHQUFHLHlCQUFhLEtBQUssQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDO2FBQ3hFOztBQUVELDJCQUFlLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1dBQ3RDLE1BQU07QUFDTCxnQkFBSTtBQUNGLHFCQUFPLEdBQUcseUJBQWEsS0FBSyxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUM7YUFDeEUsQ0FBQyxPQUFPLEdBQUcsRUFBRTtBQUNaLHFCQUFPLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ25CLHFCQUFPLEdBQUcseUJBQWEsS0FBSyxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUM7YUFDeEU7O0FBRUQsd0JBQVksQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLENBQUM7V0FDbkM7QUFDRCxjQUFJLENBQUMsa0JBQWtCLENBQUMsS0FBSyxFQUFFLE9BQU8sQ0FBQyxDQUFDO1NBQ3pDOztBQUVELFlBQUksZUFBZSxDQUFDLFVBQVUsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO0FBQ3pDLG1DQUFhLEtBQUssQ0FBQyxlQUFlLEVBQUUsSUFBSSxDQUFDLG1CQUFtQixFQUFFLE1BQU0sQ0FBQyxDQUFDO1NBQ3ZFO0FBQ0QsWUFBSSxZQUFZLENBQUMsVUFBVSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7QUFDdEMsK0JBQVMsTUFBTSxDQUFDLElBQUksQ0FBQyxrQkFBa0IsRUFBRSxjQUFjLENBQUMsQ0FBQztBQUN6RCxtQ0FBYSxLQUFLLENBQUMsWUFBWSxFQUFFLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxNQUFNLENBQUMsQ0FBQztTQUNqRSxNQUFNO0FBQ0wsK0JBQVMsR0FBRyxDQUFDLElBQUksQ0FBQyxrQkFBa0IsRUFBRSxjQUFjLENBQUMsQ0FBQztTQUN2RDtPQUNGO0tBQ0Y7QUFDRCxvQkFBZ0IsRUFBRSxTQUFTLGdCQUFnQixHQUFHO0FBQzVDLFVBQUksSUFBSSxDQUFDLFdBQVcsRUFBRTtBQUNwQixlQUFPLElBQUksQ0FBQyxXQUFXLENBQUM7T0FDekI7QUFDRCxVQUFNLElBQUksR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQy9CLFVBQU0sS0FBSyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxDQUFDO0FBQ3RDLFlBQU0sQ0FBQyxjQUFjLENBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztBQUMxRCxXQUFLLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQztBQUNyQyxXQUFLLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxpQkFBaUIsQ0FBQztBQUM1QyxXQUFLLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxpQkFBaUIsQ0FBQztBQUM1QyxXQUFLLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUM7QUFDbEMsV0FBSyxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDO0FBQ2xDLFVBQUksQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDO0FBQ3pCLGFBQU8sS0FBSyxDQUFDO0tBQ2Q7QUFDRCx1QkFBbUIsRUFBRSxTQUFTLG1CQUFtQixDQUFDLEtBQUssRUFBRTtBQUN2RCxVQUFNLFNBQVMsR0FBRyxLQUFLLENBQUMsS0FBSyxFQUFFLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQ2pELFVBQU0sT0FBTyxHQUFHLEtBQUssQ0FBQyxLQUFLLEVBQUUsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDN0MsYUFBTyxtQkFBTyxVQUFVLENBQ3RCLENBQ0Usa0VBQWtFLEVBQ2xFLGtDQUFrQyxFQUNsQyxpQ0FBaUMsRUFDakMsaUNBQWlDLEVBQ2pDLDhCQUE4QixDQUMvQixDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxJQUFJLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksRUFDcEQsb0JBQVEsbUJBQW1CLENBQUMsU0FBUyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQy9DLG9CQUFRLG1CQUFtQixDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUM3QyxTQUFTLENBQUMsTUFBTSxDQUFDLHdCQUF3QixDQUFDLEVBQzFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsd0JBQXdCLENBQUMsQ0FDekMsQ0FDRixDQUFDO0tBQ0g7QUFDRCxvQkFBZ0IsRUFBRSxTQUFTLGdCQUFnQixDQUFDLEtBQUssRUFBRTtBQUNqRCxhQUFPLG1CQUFPLFVBQVUsQ0FBQyx3R0FBd0csRUFBRTtBQUM3SCxZQUFJLEVBQUUsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLElBQUksR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSTtBQUMvQyxhQUFLLEVBQUUsb0JBQVEsbUJBQW1CLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQztBQUMzRSxXQUFHLEVBQUUsb0JBQVEsbUJBQW1CLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQztPQUN4RSxDQUFDLENBQUM7S0FDUjtBQUNELHVCQUFtQixFQUFFLFNBQVMsbUJBQW1CLEdBQUc7OztBQUNsRCx3QkFBTSxPQUFPLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsVUFBVSxFQUFFLFVBQUMsSUFBSSxFQUFLO0FBQzNELDBCQUFNLE9BQU8sQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLFVBQUMsR0FBRyxFQUFLO0FBQ3RDLGNBQUksQ0FBQyxNQUFLLGVBQWUsQ0FBQyxvQkFBUSxHQUFHLENBQUMsR0FBRyxFQUFFLFdBQVcsQ0FBQyxDQUFDLEVBQUU7QUFDeEQsa0JBQUssU0FBUyxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNqQyxtQkFBTztXQUNSO0FBQ0QsY0FBSSxDQUFDLE1BQUssU0FBUyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsRUFBRTtBQUNqQyxlQUFHLENBQUMsUUFBUSxHQUFHLE1BQUssZUFBZSxDQUFDLG9CQUFRLEdBQUcsQ0FBQyxHQUFHLEVBQUUsV0FBVyxDQUFDLENBQUMsQ0FBQztBQUNuRSxrQkFBSyxTQUFTLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1dBQ2xDO1NBQ0YsUUFBTyxDQUFDO09BQ1YsRUFBRSxJQUFJLENBQUMsQ0FBQztBQUNULGFBQU8sSUFBSSxDQUFDO0tBQ2I7QUFDRCx3QkFBb0IsRUFBRSxTQUFTLG9CQUFvQixDQUFDLEdBQUcsRUFBRSxXQUFXLEVBQUU7QUFDcEUsVUFBSSxVQUFVLEdBQUcsV0FBVyxDQUFDO0FBQzdCLFVBQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDaEMsVUFBTSxVQUFVLEdBQUcsQUFBQyxLQUFLLENBQUMsT0FBTyxHQUFJLElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDLGtCQUFrQixDQUFDO0FBQ3BGLFVBQU0sSUFBSSxHQUFHLEdBQUcsQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDckMsZ0JBQVUsR0FBRyxBQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUksVUFBVSxHQUFHLEtBQUssQ0FBQyxXQUFXLENBQUM7QUFDOUQsVUFBSSxJQUFJLEVBQUU7QUFDUixZQUFJLENBQUMsSUFBSSxDQUFDO0FBQ1IsZUFBSyxFQUFFLFVBQVU7QUFDakIsYUFBRyxFQUFFLEdBQUc7U0FDVCxDQUFDLENBQUM7T0FDSjtLQUNGO0FBQ0Qsd0JBQW9CLEVBQUUsU0FBUyxvQkFBb0IsR0FBRztBQUNwRCxVQUFNLElBQUksR0FBRyxHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxVQUFVLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDOztBQUUzRCxVQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRTtBQUNqQixZQUFJLENBQUMsT0FBTyxHQUFHLEVBQUUsQ0FBQztPQUNuQjs7QUFFRCxVQUFJLENBQUMsT0FBTyxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxZQUFZLENBQUMsSUFBSSxNQUFNLEVBQUUsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDOUYsVUFBSSxJQUFJLEVBQUU7QUFDUixZQUFJLENBQUMsSUFBSSxDQUFDO0FBQ1IsdUJBQWEsRUFBRSxJQUFJO0FBQ25CLGtCQUFRLEVBQUUsSUFBSSxDQUFDLEVBQUU7QUFDakIsZ0JBQU0sRUFBRSxJQUFJO0FBQ1oscUJBQVcsRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxPQUFPLEVBQUU7U0FDaEQsQ0FBQyxDQUFDO09BQ0o7S0FDRjtBQUNELHVCQUFtQixFQUFFLFNBQVMsbUJBQW1CLENBQUMsS0FBSyxFQUFFO0FBQ3ZELFVBQUksQUFBQyxLQUFLLElBQUksQ0FBQyxJQUFJLENBQUMsYUFBYSxJQUFLLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxhQUFhLEVBQUUsRUFBRTtBQUNqRSxZQUFNLFdBQVcsR0FBRztBQUNsQixZQUFFLEVBQUUsU0FBUztBQUNiLGFBQUcsRUFBRSwyQkFBMkI7QUFDaEMsZ0JBQU0sRUFBRSxTQUFTOztTQUVsQixDQUFDO0FBQ0YsWUFBSSxLQUFLLENBQUMsSUFBSSxFQUFFO0FBQ2QsZUFBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDN0IsY0FBSSxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUM7U0FDM0I7T0FDRjtBQUNELFVBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLENBQUM7S0FDM0I7QUFDRCxhQUFTLEVBQUUsU0FBUyxTQUFTLEdBQVk7VUFBWCxJQUFJLHlEQUFHLEVBQUU7O0FBQ3JDLGFBQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztLQUN0QztBQUNELFdBQU8sRUFBRSxTQUFTLE9BQU8sQ0FBQyxLQUFLLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRTs7O0FBQ2pELFVBQUksT0FBTyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7QUFDdEIsZUFBTyxDQUFDLE9BQU8sQ0FBRSxVQUFDLGVBQWUsRUFBSztBQUNwQyxjQUFNLEtBQUssR0FBRyxPQUFLLGFBQWEsQ0FBQyxlQUFlLENBQUMsQ0FBQzs7O0FBR2xELGVBQUssQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDO0FBQ3hCLGNBQU0sUUFBUSxHQUFHLEtBQUssQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDMUMsaUJBQUssT0FBTyxDQUFDLFFBQVEsQ0FBQyxHQUFHLEtBQUssQ0FBQztBQUMvQixjQUFNLFNBQVMsR0FBRyxNQUFNLENBQUMsb0JBQVEsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7QUFDcEUsY0FBSSxLQUFLLENBQUMsUUFBUSxFQUFFO0FBQ2xCLHFCQUFTLENBQUMsUUFBUSxDQUFDO0FBQ2pCLHFCQUFPLEVBQUUsU0FBUyxDQUFDLFNBQVMsRUFBRTthQUMvQixDQUFDLENBQUM7V0FDSjtBQUNELGNBQU0sSUFBSSxHQUFHLFNBQVMsQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUM7QUFDNUMsY0FBSSxPQUFLLGVBQWUsQ0FBQyxJQUFJLENBQUMsRUFBRTtBQUM5QixtQkFBSyxlQUFlLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1dBQzNDLE1BQU07QUFDTCxtQkFBSyxlQUFlLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQztXQUN6QztTQUNGLENBQUMsQ0FBQztPQUNKO0tBQ0Y7QUFDRCxlQUFXLEVBQUUsU0FBUyxXQUFXLENBQUMsT0FBTyxFQUFFO0FBQ3pDLFVBQUksQ0FBQyxPQUFPLEVBQUU7QUFDWixlQUFPO09BQ1I7O0FBRUQsVUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQzs7QUFFaEMsVUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsT0FBTyxFQUFFLEtBQUssQ0FBQyxDQUFDO0tBQ3JDO0FBQ0Qsb0JBQWdCLEVBQUUsU0FBUyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUU7QUFDbkQsVUFBSSxDQUFDLE9BQU8sRUFBRTtBQUNaLGVBQU87T0FDUjtBQUNELFVBQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDOztBQUV0QyxVQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxPQUFPLEVBQUUsSUFBSSxDQUFDLENBQUM7S0FDcEM7QUFDRCxzQkFBa0IsRUFBRSxTQUFTLGtCQUFrQixDQUFDLE9BQU8sRUFBRTtBQUN2RCxVQUFJLE9BQU8sQ0FBQyxXQUFXLEVBQUU7QUFDdkIsWUFBSSxDQUFDLFdBQVcsR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsSUFBSSxNQUFNLEVBQUUsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDakcsWUFBSSxDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUM7T0FDN0I7S0FDRjtBQUNELFdBQU8sRUFBRSxTQUFTLE9BQU8sR0FBRztBQUMxQixVQUFJLENBQUMsY0FBYyxFQUFFLENBQUM7QUFDdEIsVUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO0tBQ3BCO0FBQ0QsZUFBVyxFQUFFLFNBQVMsV0FBVyxHQUFHOzs7QUFDbEMsVUFBSSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUM7QUFDekIsVUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUM7QUFDeEIsMkJBQVMsR0FBRyxDQUFDLElBQUksQ0FBQyxxQkFBcUIsRUFBRSxjQUFjLENBQUMsQ0FBQztBQUN6RCxVQUFJLENBQUMsR0FBRyxDQUFDLGlCQUFpQixFQUFFLElBQUksQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7QUFDOUQsK0JBQWEsS0FBSyxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0FBQzFDLFVBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxxQkFBcUIsRUFBRSxDQUFDO0FBQzFELFVBQUksQ0FBQyxTQUFTLEdBQUcsRUFBRSxDQUFDO0FBQ3BCLFVBQUksQ0FBQyxlQUFlLEdBQUcsRUFBRSxDQUFDO0FBQzFCLFVBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDLG1CQUFtQixDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztBQUNoRSxVQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDMUQsYUFBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsRUFBRSxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFlBQU07QUFDcEUsaUNBQWEsS0FBSyxDQUFDLE9BQUssbUJBQW1CLENBQUMsQ0FBQztBQUM3QyxpQ0FBYSxLQUFLLENBQUMsT0FBSyxnQkFBZ0IsQ0FBQyxDQUFDO0FBQzFDLGVBQUssbUJBQW1CLEVBQUUsQ0FBQztBQUMzQixlQUFLLG1CQUFtQixFQUFFLENBQUM7QUFDM0IsZUFBSyxXQUFXLEdBQUcsSUFBSSxDQUFDO09BQ3pCLENBQUMsQ0FBQztLQUNKO0FBQ0QsVUFBTSxFQUFFLFNBQVMsTUFBTSxHQUFHO0FBQ3hCLFVBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLENBQUM7QUFDMUIsVUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDO0tBQ3ZCO0FBQ0Qsa0JBQWMsRUFBRSxTQUFTLGNBQWMsR0FBRztBQUN4QyxVQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRTtBQUNuQixZQUFJLENBQUMsU0FBUyxHQUFHLHlCQUFhLEVBQUUsRUFBRSxFQUFFLHlCQUF5QixFQUFFLGFBQWEsRUFBRSxJQUFJLEVBQUMsQ0FBQyxDQUFDO0FBQ3JGLGlDQUFhLEtBQUssQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7QUFDOUQsWUFBTSxNQUFNLEdBQUcseUJBQWEsS0FBSyxDQUFDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztBQUN2RSxpQ0FBYSxLQUFLLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsVUFBVSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0FBQzlELDRCQUFHLE1BQU0sRUFBRSxPQUFPLEVBQUUsSUFBSSxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0FBQ3ZELFlBQUksQ0FBQyxTQUFTLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ3pELFlBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDdEIsWUFBSSxDQUFDLFNBQVMsQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO09BQ3RFLE1BQU07QUFDTCxjQUFJLENBQUUsa0JBQWtCLEdBQUcsSUFBSSxDQUFDO0FBQ2hDLGNBQUksQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDO1NBQy9CO0tBQ0Y7QUFDRCxxQkFBaUIsRUFBRSxTQUFTLGlCQUFpQixDQUFDLE9BQU8sRUFBRTtBQUNyRCxVQUFJLE9BQU8sRUFBRTtBQUNYLFlBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztPQUNwQjtLQUNGO0FBQ0QsZUFBVyxFQUFFLFNBQVMsV0FBVyxHQUFHO0FBQ2xDLFVBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQztLQUNsQjtBQUNELGVBQVcsRUFBRSxTQUFTLFdBQVcsR0FBRztBQUNsQyxVQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQ2hDLFVBQUksS0FBSyxFQUFFOztBQUVULFlBQU0sWUFBWSxHQUFHO0FBQ25CLGVBQUssRUFBRSxJQUFJLENBQUMsUUFBUTtBQUNwQixlQUFLLEVBQUUsSUFBSSxDQUFDLFFBQVE7U0FDckIsQ0FBQzs7QUFFRixZQUFJLENBQUMseUJBQXlCLENBQUMsWUFBWSxDQUFDLENBQUM7O0FBRTdDLFlBQU0sZUFBZSxHQUFHLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksSUFBSSxDQUFDO0FBQy9FLFlBQU0sWUFBWSxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsZUFBZSxFQUFFLFlBQVksQ0FBQyxDQUFDOztBQUVoRSw4QkFBSyxZQUFZLEVBQ2YsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQzNCLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxZQUFZLENBQUMsQ0FBQyxDQUFDOztBQUUvQyxlQUFPLFlBQVksQ0FBQztPQUNyQjs7QUFFRCxhQUFPLENBQUMsSUFBSSxDQUFDLHVHQUF1RyxDQUFDLENBQUM7S0FDdkg7QUFDRCxvQkFBZ0IsRUFBRSxTQUFTLGdCQUFnQixHQUFHO0FBQzVDLFVBQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO0FBQ3RDLFVBQUksS0FBSyxFQUFFOztBQUVULFlBQU0sWUFBWSxHQUFHO0FBQ25CLGVBQUssRUFBRSxJQUFJLENBQUMsUUFBUTtBQUNwQixlQUFLLEVBQUUsSUFBSSxDQUFDLFFBQVE7U0FDckIsQ0FBQzs7QUFFRixZQUFJLENBQUMseUJBQXlCLENBQUMsWUFBWSxDQUFDLENBQUM7O0FBRTdDLFlBQU0sZUFBZSxHQUFHLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksSUFBSSxDQUFDO0FBQzVFLFlBQU0sWUFBWSxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsZUFBZSxFQUFFLFlBQVksQ0FBQyxDQUFDOztBQUVoRSw4QkFBSyxZQUFZLEVBQ2YsSUFBSSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFDaEMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLFlBQVksQ0FBQyxDQUFDLENBQUM7O0FBRS9DLGVBQU8sWUFBWSxDQUFDO09BQ3JCOztBQUVELGFBQU8sQ0FBQyxJQUFJLENBQUMsdUdBQXVHLENBQUMsQ0FBQztLQUN2SDtBQUNELGFBQVMsRUFBRSxTQUFTLFNBQVMsR0FBRztBQUM5QixVQUFNLFFBQVEsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLHFCQUFxQixFQUFFLENBQUM7QUFDeEQsVUFBSSxJQUFJLENBQUMsV0FBVyxJQUFJLElBQUksQ0FBQyxXQUFXLEVBQUU7QUFDeEMsaUNBQWEsS0FBSyxDQUFDLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO0FBQzdDLGlDQUFhLEtBQUssQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztBQUMxQyxZQUFJLENBQUMsV0FBVyxHQUFHLFFBQVEsQ0FBQztBQUM1QixZQUFJLENBQUMsbUJBQW1CLEVBQUUsQ0FBQztPQUM1QixNQUFNO0FBQ0wsWUFBSSxDQUFDLFdBQVcsR0FBRyxRQUFRLENBQUM7T0FDN0I7S0FDRjtBQUNELFFBQUksRUFBRSxTQUFTLElBQUksQ0FBQyxPQUFPLEVBQUU7QUFDM0IsVUFBSSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsQ0FBQzs7QUFFMUIsVUFBSSxPQUFPLEVBQUU7QUFDWCxZQUFJLENBQUMsa0JBQWtCLENBQUMsT0FBTyxDQUFDLENBQUM7T0FDbEMsTUFBTTtBQUNMLFlBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQztPQUN2QjtLQUNGO0FBQ0QsV0FBTyxFQUFFLFNBQVMsT0FBTyxHQUFHO0FBQzFCLFVBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLENBQUM7S0FDM0I7QUFDRCxxQkFBaUIsRUFBRSxTQUFTLGlCQUFpQixDQUFDLElBQWUsRUFBRTtVQUFoQixhQUFhLEdBQWQsSUFBZSxDQUFkLGFBQWE7O0FBQzFELFVBQUksQ0FBQyxVQUFVLEdBQUcsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDO0FBQ25DLFVBQU0sWUFBWSxHQUFHLHVCQUFNLFdBQVcsRUFBRSxhQUFhLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQztBQUMvRCxVQUFNLGFBQWEsR0FBRyx1QkFBTSxZQUFZLEVBQUUsYUFBYSxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUM7O0FBRWpFLFVBQUksWUFBWSxJQUFJLGFBQWEsRUFBRTtBQUNqQyw2QkFBUyxNQUFNLENBQUMsWUFBWSxFQUFFLGNBQWMsRUFBRSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUNoRSw2QkFBUyxNQUFNLENBQUMsYUFBYSxFQUFFLGNBQWMsRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7T0FDakU7O0FBRUQsVUFBSSxDQUFDLFNBQVMsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO0FBQ2xDLDJCQUFTLE1BQU0sQ0FBQyxhQUFhLEVBQUUsZUFBZSxDQUFDLENBQUM7QUFDaEQsK0JBQWEsS0FBSyxDQUFDLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO0FBQzdDLCtCQUFhLEtBQUssQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztBQUMxQyxVQUFJLENBQUMsbUJBQW1CLEVBQUUsQ0FBQztLQUM1QjtBQUNELHlCQUFxQixFQUFFLFNBQVMscUJBQXFCLEdBQWtCO1VBQWpCLFVBQVUseURBQUcsRUFBRTs7QUFDbkUsYUFBTyxpQkFBSyxLQUFLLENBQUMsVUFBVSxJQUFJLEVBQUUsRUFBRSxJQUFJLENBQUMsT0FBTyxLQUFLLElBQUksQ0FBQyxPQUFPLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFBLEFBQUMsQ0FBQyxDQUFDO0tBQ2pHO0dBQ0YsQ0FBQyxDQUFDOzttQkFFWSxPQUFPIiwiZmlsZSI6InNyYy9WaWV3cy9DYWxlbmRhci9DYWxlbmRhclZpZXcuanMiLCJzb3VyY2VSb290Ijoic3JjIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGFycmF5IGZyb20gJ2Rvam8vX2Jhc2UvYXJyYXknO1xyXG5pbXBvcnQgY29udmVydCBmcm9tICdhcmdvcy9Db252ZXJ0JztcclxuaW1wb3J0IGRlY2xhcmUgZnJvbSAnZG9qby9fYmFzZS9kZWNsYXJlJztcclxuaW1wb3J0IGRvbUF0dHIgZnJvbSAnZG9qby9kb20tYXR0cic7XHJcbmltcG9ydCBkb21DbGFzcyBmcm9tICdkb2pvL2RvbS1jbGFzcyc7XHJcbmltcG9ydCBxdWVyeSBmcm9tICdkb2pvL3F1ZXJ5JztcclxuaW1wb3J0IGRvbUNvbnN0cnVjdCBmcm9tICdkb2pvL2RvbS1jb25zdHJ1Y3QnO1xyXG5pbXBvcnQgbGFuZyBmcm9tICdkb2pvL19iYXNlL2xhbmcnO1xyXG5pbXBvcnQgb24gZnJvbSdkb2pvL29uJztcclxuaW1wb3J0IHN0cmluZyBmcm9tICdkb2pvL3N0cmluZyc7XHJcbmltcG9ydCB3aGVuIGZyb20gJ2Rvam8vd2hlbic7XHJcbmltcG9ydCBDYWxlbmRhciBmcm9tICdhcmdvcy9DYWxlbmRhcic7XHJcbmltcG9ydCBMaXN0IGZyb20gJ2FyZ29zL0xpc3QnO1xyXG5pbXBvcnQgVXRpbGl0eSBmcm9tICcuLi8uLi9VdGlsaXR5JztcclxuaW1wb3J0IGdldFJlc291cmNlIGZyb20gJ2FyZ29zL0kxOG4nO1xyXG5cclxuY29uc3QgcmVzb3VyY2UgPSBnZXRSZXNvdXJjZSgnY2FsZW5kYXJWaWV3Jyk7XHJcbmNvbnN0IGR0Rm9ybWF0UmVzb3VyY2UgPSBnZXRSZXNvdXJjZSgnY2FsZW5kYXJWaWV3RGF0ZVRpbWVGb3JtYXQnKTtcclxuXHJcbi8qKlxyXG4gKiBAY2xhc3MgY3JtLlZpZXdzLkNhbGVuZGFyLkNhbGVuZGFyVmlld1xyXG4gKlxyXG4gKiBAZXh0ZW5kcyBhcmdvcy5MaXN0XHJcbiAqIEBtaXhpbnMgYXJnb3MuTGlzdFxyXG4gKlxyXG4gKiBAcmVxdWlyZXMgYXJnb3MuTGlzdFxyXG4gKiBAcmVxdWlyZXMgYXJnb3MuQ29udmVydFxyXG4gKlxyXG4gKiBAcmVxdWlyZXMgY3JtLkZvcm1hdFxyXG4gKiBAcmVxdWlyZXMgY3JtLlV0aWxpdHlcclxuICpcclxuICogQHJlcXVpcmVzIG1vbWVudFxyXG4gKlxyXG4gKi9cclxuY29uc3QgX19jbGFzcyA9IGRlY2xhcmUoJ2NybS5WaWV3cy5DYWxlbmRhci5DYWxlbmRhclZpZXcnLCBbTGlzdF0sIHtcclxuICAvLyBMb2NhbGl6YXRpb25cclxuICB0aXRsZVRleHQ6IHJlc291cmNlLnRpdGxlVGV4dCxcclxuICBtb250aFRpdGxlRm9ybWF0VGV4dDogZHRGb3JtYXRSZXNvdXJjZS5tb250aFRpdGxlRm9ybWF0VGV4dCxcclxuICBkYXlUaXRsZUZvcm1hdFRleHQ6IGR0Rm9ybWF0UmVzb3VyY2UuZGF5VGl0bGVGb3JtYXRUZXh0LFxyXG4gIGV2ZW50RGF0ZUZvcm1hdFRleHQ6IGR0Rm9ybWF0UmVzb3VyY2UuZXZlbnREYXRlRm9ybWF0VGV4dCxcclxuICBzdGFydFRpbWVGb3JtYXRUZXh0OiBkdEZvcm1hdFJlc291cmNlLnN0YXJ0VGltZUZvcm1hdFRleHQsXHJcbiAgYWxsRGF5VGV4dDogcmVzb3VyY2UuYWxsRGF5VGV4dCxcclxuICBldmVudFRleHQ6IHJlc291cmNlLmV2ZW50VGV4dCxcclxuICBldmVudEhlYWRlclRleHQ6IHJlc291cmNlLmV2ZW50SGVhZGVyVGV4dCxcclxuICBjb3VudE1vcmVUZXh0OiByZXNvdXJjZS5jb3VudE1vcmVUZXh0LFxyXG4gIHRvZ2dsZUNvbGxhcHNlVGV4dDogcmVzb3VyY2UudG9nZ2xlQ29sbGFwc2VUZXh0LFxyXG4gIHdpdGhGcm9tVGV4dDogcmVzb3VyY2Uud2l0aEZyb21UZXh0LFxyXG4gIHdpdGhUZXh0OiByZXNvdXJjZS53aXRoVGV4dCxcclxuICB1bnNwZWNpZmllZFRleHQ6IHJlc291cmNlLnVuc3BlY2lmaWVkVGV4dCxcclxuICBmb3JUZXh0OiByZXNvdXJjZS5mb3JUZXh0LFxyXG4gIGRheVRleHQ6IHJlc291cmNlLmRheVRleHQsXHJcbiAgd2Vla1RleHQ6IHJlc291cmNlLndlZWtUZXh0LFxyXG5cclxuICBlbmFibGVQdWxsVG9SZWZyZXNoOiB0cnVlLFxyXG4gIHN0cmluZzogc3RyaW5nLFxyXG4gIFV0aWxpdHk6IFV0aWxpdHksXHJcbiAgdHJpbVRvOiAxNixcclxuICB0b2dnbGVDb2xsYXBzZUNsYXNzOiAnZmEgZmEtY2hldnJvbi1kb3duJyxcclxuICB0b2dnbGVFeHBhbmRDbGFzczogJ2ZhIGZhLWNoZXZyb24tcmlnaHQnLFxyXG5cclxuICAvLyBUZW1wbGF0ZXNcclxuICB3aWRnZXRUZW1wbGF0ZTogbmV3IFNpbXBsYXRlKFtcclxuICAgICc8ZGl2IGlkPVwieyU9ICQuaWQgJX1cIiB0aXRsZT1cInslPSAkLnRpdGxlVGV4dCAlfVwiIGNsYXNzPVwib3ZlcnRocm93IHBhbmVsIHslPSAkLmNscyAlfVwiIHslIGlmICgkLnJlc291cmNlS2luZCkgeyAlfWRhdGEtcmVzb3VyY2Uta2luZD1cInslPSAkLnJlc291cmNlS2luZCAlfVwieyUgfSAlfT4nLFxyXG4gICAgICAnPGRpdiBjbGFzcz1cIm92ZXJ0aHJvdyBzY3JvbGxlclwiIGRhdGEtZG9qby1hdHRhY2gtcG9pbnQ9XCJzY3JvbGxlck5vZGVcIj4nLFxyXG4gICAgICAgICc8ZGl2IGNsYXNzPVwicGFuZWwtY29udGVudFwiPicsXHJcbiAgICAgICAgICAnPGRpdiBjbGFzcz1cImNhbGVuZGFyQ29udGFpbmVyXCIgZGF0YS1kb2pvLWF0dGFjaC1wb2ludD1cImNhbGVuZGFyTm9kZVwiPjwvZGl2PicsXHJcbiAgICAgICAgICAnPGRpdiBjbGFzcz1cImV2ZW50LWNvbnRlbnQgZXZlbnQtaGlkZGVuXCIgZGF0YS1kb2pvLWF0dGFjaC1wb2ludD1cImV2ZW50Q29udGFpbmVyTm9kZVwiPicsXHJcbiAgICAgICAgICAgICc8dWwgY2xhc3M9XCJsaXN0LWNvbnRlbnRcIiBkYXRhLWRvam8tYXR0YWNoLXBvaW50PVwiZXZlbnRDb250ZW50Tm9kZVwiPjwvdWw+JyxcclxuICAgICAgICAgICAgJ3slISAkLmV2ZW50TW9yZVRlbXBsYXRlICV9JyxcclxuICAgICAgICAgICc8L2Rpdj4nLFxyXG4gICAgICAgICAgJzxkaXYgY2xhc3M9XCJhY3Rpdml0eS1jb250ZW50XCIgZGF0YS1kb2pvLWF0dGFjaC1wb2ludD1cImFjdGl2aXR5Q29udGFpbmVyTm9kZVwiPicsXHJcbiAgICAgICAgICAgICc8dWwgY2xhc3M9XCJsaXN0LWNvbnRlbnRcIiBkYXRhLWRvam8tYXR0YWNoLXBvaW50PVwiYWN0aXZpdHlDb250ZW50Tm9kZVwiPjwvdWw+JyxcclxuICAgICAgICAgICAgJ3slISAkLmFjdGl2aXR5TW9yZVRlbXBsYXRlICV9JyxcclxuICAgICAgICAgICc8L2Rpdj4nLFxyXG4gICAgICAgICAgJzxkaXYgc3R5bGU9XCJjbGVhcjpib3RoXCI+PC9kaXY+JyxcclxuICAgICAgICAnPC9kaXY+JyxcclxuICAgICAgJzwvZGl2PicsXHJcbiAgICAnPC9kaXY+JyxcclxuICBdKSxcclxuICBhY3Rpdml0eVJvd1RlbXBsYXRlOiBuZXcgU2ltcGxhdGUoW1xyXG4gICAgJzxsaSBjbGFzcz1cImFjdGl2aXR5RW50cnlcIiBkYXRhLWFjdGlvbj1cImFjdGl2YXRlRW50cnlcIiBkYXRhLWtleT1cInslPSAkLiRrZXkgJX1cIiBkYXRhLWRlc2NyaXB0b3I9XCJ7JTogJC4kZGVzY3JpcHRvciAlfVwiIGRhdGEtYWN0aXZpdHktdHlwZT1cInslOiAkLlR5cGUgJX1cIj4nLFxyXG4gICAgICAneyUhICQkLmFjdGl2aXR5SWNvblRlbXBsYXRlICV9JyxcclxuICAgICAgJ3slISAkJC5hY3Rpdml0eUhlYWRlclRlbXBsYXRlICV9JyxcclxuICAgICAgJ3slISAkJC5hY3Rpdml0eUNvbnRlbnRUZW1wbGF0ZSAlfScsXHJcbiAgICAgICd7JSEgJCQuYWN0aXZpdHlGb290ZXJUZW1wbGF0ZSAlfScsXHJcbiAgICAnPC9saT4nLFxyXG4gIF0pLFxyXG4gIGFjdGl2aXR5SWNvblRlbXBsYXRlOiBuZXcgU2ltcGxhdGUoW1xyXG4gICAgJzxkaXYgY2xhc3M9XCJhY3Rpdml0eUVudHJ5X19pY29uXCI+JyxcclxuICAgICAgJzxidXR0b24gY2xhc3M9XCJsaXN0LWl0ZW0tc2VsZWN0b3IgYnV0dG9uIHslPSAkJC5hY3Rpdml0eUljb25CeVR5cGVbJC5UeXBlXSAlfVwiPicsXHJcbiAgICAgICc8L2J1dHRvbj4nLFxyXG4gICAgJzwvZGl2PicsXHJcbiAgXSksXHJcbiAgYWN0aXZpdHlIZWFkZXJUZW1wbGF0ZTogbmV3IFNpbXBsYXRlKFtcclxuICAgICc8ZGl2IGNsYXNzPVwiYWN0aXZpdHlFbnRyeV9faGVhZGVyXCI+JyxcclxuICAgICAgJzxkaXYgY2xhc3M9XCJoZWFkZXJfX2NvbnRlbnRcIj4nLFxyXG4gICAgICAgICc8aDMgY2xhc3M9XCJoZWFkZXJfX3RpdGxlXCI+eyU6ICQuRGVzY3JpcHRpb24gJX08L2gzPicsXHJcbiAgICAgICAgJzxoNCBjbGFzcz1cImhlYWRlcl9fc3ViVGl0bGVcIj57JSEgJCQuYWN0aXZpdHlOYW1lVGVtcGxhdGUgJX08L2g0PicsXHJcbiAgICAgICc8L2Rpdj4nLFxyXG4gICAgICAnPGRpdiBjbGFzcz1cImhlYWRlcl9fdGltZVN0YW1wXCI+JyxcclxuICAgICAgICAnPHNwYW4gY2xhc3M9XCJ0aW1lU3RhbXBfX3RpbWVcIj4nLFxyXG4gICAgICAgICAgJ3slIGlmICgkLlRpbWVsZXNzKSB7ICV9JyxcclxuICAgICAgICAgICAgJ3slPSAkJC5hbGxEYXlUZXh0ICV9JyxcclxuICAgICAgICAgICd7JSB9IGVsc2UgaWYgKCQkLmFjdGl2aXR5SWNvbkJ5VHlwZVskLlR5cGVdKSB7ICV9JyxcclxuICAgICAgICAgICAgJ3slOiBjcm0uRm9ybWF0LmRhdGUoJC5TdGFydERhdGUsICQkLnN0YXJ0VGltZUZvcm1hdFRleHQpICV9JyxcclxuICAgICAgICAgICd7JSB9IGVsc2UgeyAlfScsXHJcbiAgICAgICAgICAgICd7JSEgJCQuZXZlbnRUaW1lVGVtcGxhdGUgJX0nLFxyXG4gICAgICAgICAgJ3slIH0gJX0nLFxyXG4gICAgICAgICc8L3NwYW4+JyxcclxuICAgICAgJzwvZGl2PicsXHJcbiAgICAnPC9kaXY+JyxcclxuICBdKSxcclxuICBhY3Rpdml0eUNvbnRlbnRUZW1wbGF0ZTogbmV3IFNpbXBsYXRlKFtcclxuICAgICc8ZGl2IGNsYXNzPVwiYWN0aXZpdHlFbnRyeV9fY29udGVudFwiPicsXHJcbiAgICAgICd7JSBpZiAoJC5Ob3RlcykgeyAlfScsXHJcbiAgICAgICAgJ3slOiAkJC5VdGlsaXR5LnRyaW1UZXh0KCQuTm90ZXMsICQkLnRyaW1UbykgJX0nLFxyXG4gICAgICAneyUgfSAlfScsXHJcbiAgICAnPC9kaXY+JyxcclxuICBdKSxcclxuICBhY3Rpdml0eUZvb3RlclRlbXBsYXRlOiBuZXcgU2ltcGxhdGUoW1xyXG4gICAgJzxkaXYgY2xhc3M9XCJhY3Rpdml0eUVudHJ5X19mb290ZXJcIj4nLFxyXG4gICAgJzwvZGl2PicsXHJcbiAgXSksXHJcbiAgYWN0aXZpdHlOYW1lVGVtcGxhdGU6IG5ldyBTaW1wbGF0ZShbXHJcbiAgICAneyUgaWYgKCQuQ29udGFjdE5hbWUpIHsgJX0nLFxyXG4gICAgICAneyU9ICQkLnN0cmluZy5zdWJzdGl0dXRlKCQkLndpdGhGcm9tVGV4dCwgeyBjb250YWN0TmFtZTogJCQucGFyc2VOYW1lKCQuQ29udGFjdE5hbWUpLCBhY2NvdW50TmFtZTogJC5BY2NvdW50TmFtZSB9KSAlfScsXHJcbiAgICAneyUgfSBlbHNlIGlmICgkLkFjY291bnROYW1lKSB7ICV9JyxcclxuICAgICAgJ3slPSAkJC5zdHJpbmcuc3Vic3RpdHV0ZSgkJC53aXRoVGV4dCwgeyBvYmplY3Q6ICQuQWNjb3VudE5hbWUgfSkgJX0nLFxyXG4gICAgJ3slIH0gZWxzZSBpZiAoJC5MZWFkTmFtZSkgeyAlfScsXHJcbiAgICAgICd7JT0gJCQuc3RyaW5nLnN1YnN0aXR1dGUoJCQud2l0aFRleHQsIHsgb2JqZWN0OiAkLkxlYWROYW1lIH0pICV9JyxcclxuICAgICd7JSB9IGVsc2UgaWYgKCQkLmFjdGl2aXR5SWNvbkJ5VHlwZVskLlR5cGVdKSB7ICV9JyxcclxuICAgICAgJ3slPSAkJC5zdHJpbmcuc3Vic3RpdHV0ZSgkJC53aXRoVGV4dCwgeyBvYmplY3Q6ICQkLnVuc3BlY2lmaWVkVGV4dCB9KSAlfScsXHJcbiAgICAneyUgfSBlbHNlIHsgJX0nLFxyXG4gICAgICAneyU9ICQkLnN0cmluZy5zdWJzdGl0dXRlKCQkLmZvclRleHQsIHsgcmVhc29uOiAkLlR5cGUgfSkgJX0nLFxyXG4gICAgJ3slIH0gJX0nLFxyXG4gIF0pLFxyXG4gIGFjdGl2aXR5TW9yZVRlbXBsYXRlOiBuZXcgU2ltcGxhdGUoW1xyXG4gICAgJzxkaXYgY2xhc3M9XCJsaXN0LW1vcmVcIiBkYXRhLWRvam8tYXR0YWNoLXBvaW50PVwiYWN0aXZpdHlNb3JlTm9kZVwiPicsXHJcbiAgICAgICc8YnV0dG9uIGNsYXNzPVwiYnV0dG9uXCIgZGF0YS1hY3Rpb249XCJhY3RpdmF0ZUFjdGl2aXR5TW9yZVwiPicsXHJcbiAgICAgICAgJzxzcGFuIGRhdGEtZG9qby1hdHRhY2gtcG9pbnQ9XCJhY3Rpdml0eVJlbWFpbmluZ0NvbnRlbnROb2RlXCI+eyU9ICQuY291bnRNb3JlVGV4dCAlfTwvc3Bhbj4nLFxyXG4gICAgICAnPC9idXR0b24+JyxcclxuICAgICc8L2Rpdj4nLFxyXG4gIF0pLFxyXG4gIGV2ZW50Um93VGVtcGxhdGU6IG5ldyBTaW1wbGF0ZShbXHJcbiAgICAnPGxpIGRhdGEtYWN0aW9uPVwiYWN0aXZhdGVFbnRyeVwiIGRhdGEta2V5PVwieyU9ICQuJGtleSAlfVwiIGRhdGEtZGVzY3JpcHRvcj1cInslOiAkLiRkZXNjcmlwdG9yICV9XCIgZGF0YS1hY3Rpdml0eS10eXBlPVwiRXZlbnRcIj4nLFxyXG4gICAgICAneyUhICQkLmV2ZW50SWNvblRlbXBsYXRlICV9JyxcclxuICAgICAgJ3slISAkJC5hY3Rpdml0eUhlYWRlclRlbXBsYXRlICV9JyxcclxuICAgICAgJ3slISAkJC5hY3Rpdml0eUZvb3RlclRlbXBsYXRlICV9JyxcclxuICAgICc8L2xpPicsXHJcbiAgXSksXHJcbiAgZXZlbnRUaW1lVGVtcGxhdGU6IG5ldyBTaW1wbGF0ZShbXHJcbiAgICAneyU6IGNybS5Gb3JtYXQuZGF0ZSgkLlN0YXJ0RGF0ZSwgJCQuZXZlbnREYXRlRm9ybWF0VGV4dCkgJX0nLFxyXG4gICAgJyZuYnNwOy0mbmJzcDsnLFxyXG4gICAgJ3slOiBjcm0uRm9ybWF0LmRhdGUoJC5FbmREYXRlLCAkJC5ldmVudERhdGVGb3JtYXRUZXh0KSAlfScsXHJcbiAgXSksXHJcbiAgZXZlbnRJY29uVGVtcGxhdGU6IG5ldyBTaW1wbGF0ZShbXHJcbiAgICAnPGRpdiBjbGFzcz1cImFjdGl2aXR5RW50cnlfX2ljb25cIj4nLFxyXG4gICAgICAnPGJ1dHRvbiBjbGFzcz1cImxpc3QtaXRlbS1zZWxlY3RvciBidXR0b24geyU9ICQkLmV2ZW50SWNvbiAlfVwiPicsXHJcbiAgICAgICc8L2J1dHRvbj4nLFxyXG4gICAgJzwvZGl2PicsXHJcbiAgXSksXHJcbiAgZXZlbnRNb3JlVGVtcGxhdGU6IG5ldyBTaW1wbGF0ZShbXHJcbiAgICAnPGRpdiBjbGFzcz1cImxpc3QtbW9yZVwiIGRhdGEtZG9qby1hdHRhY2gtcG9pbnQ9XCJldmVudE1vcmVOb2RlXCI+JyxcclxuICAgICAgJzxidXR0b24gY2xhc3M9XCJidXR0b25cIiBkYXRhLWFjdGlvbj1cImFjdGl2YXRlRXZlbnRNb3JlXCI+JyxcclxuICAgICAgICAnPHNwYW4gZGF0YS1kb2pvLWF0dGFjaC1wb2ludD1cImV2ZW50UmVtYWluaW5nQ29udGVudE5vZGVcIj57JT0gJC5jb3VudE1vcmVUZXh0ICV9PC9zcGFuPicsXHJcbiAgICAgICc8L2J1dHRvbj4nLFxyXG4gICAgJzwvZGl2PicsXHJcbiAgXSksXHJcbiAgaGVhZGVyUm93VGVtcGxhdGU6IG5ldyBTaW1wbGF0ZShbXHJcbiAgICAnPGxpIGRhdGEtZGVzY3JpcHRvcj1cInslOiAkLmRheSAlfVwiPicsXHJcbiAgICAgICc8ZGl2IGNsYXNzPVwiZGF5SGVhZGVyXCI+JyxcclxuICAgICAgICAnPGgzIGNsYXNzPVwiaGVhZGVyX190aXRsZVwiPnslOiAkLmRheSAlfTwvaDM+JyxcclxuICAgICAgJzwvZGl2PicsXHJcbiAgICAnPC9saT4nLFxyXG4gIF0pLFxyXG4gIHdlZWtTZWxlY3RUZW1wbGF0ZTogbmV3IFNpbXBsYXRlKFtcclxuICAgICc8ZGl2IGNsYXNzPVwidG9nZ2xlIHRvZ2dsZS1ob3Jpem9udGFsIGNhbGVuZGFyX193ZWVrVG9nZ2xlXCI+JyxcclxuICAgICAgICAnPHNwYW4gY2xhc3M9XCJ0aHVtYiBob3Jpem9udGFsIHdlZWtUb2dnbGVfX3RodW1iXCI+PC9zcGFuPicsXHJcbiAgICAgICAgJzxzcGFuIGNsYXNzPVwidG9nZ2xlT24gd2Vla1RvZ2dsZV9fb24gZGlzcGxheS1ub25lXCI+eyU9ICQud2Vla1RleHQgJX08L3NwYW4+JyxcclxuICAgICAgICAnPHNwYW4gY2xhc3M9XCJ0b2dnbGVPZmYgd2Vla1RvZ2dsZV9fb2ZmXCI+eyU9ICQuZGF5VGV4dCAlfTwvc3Bhbj4nLFxyXG4gICAgJzwvZGl2PicsXHJcbiAgXSksXHJcblxyXG4gIGF0dHJpYnV0ZU1hcDoge1xyXG4gICAgY2FsZW5kYXJDb250ZW50OiB7XHJcbiAgICAgIG5vZGU6ICdjb250ZW50Tm9kZScsXHJcbiAgICAgIHR5cGU6ICdpbm5lckhUTUwnLFxyXG4gICAgfSxcclxuICAgIGRhdGVDb250ZW50OiB7XHJcbiAgICAgIG5vZGU6ICdkYXRlTm9kZScsXHJcbiAgICAgIHR5cGU6ICdpbm5lckhUTUwnLFxyXG4gICAgfSxcclxuICAgIGRheVRpdGxlQ29udGVudDoge1xyXG4gICAgICBub2RlOiAnZGF5VGl0bGVOb2RlJyxcclxuICAgICAgdHlwZTogJ2lubmVySFRNTCcsXHJcbiAgICB9LFxyXG4gICAgYWN0aXZpdHlDb250ZW50OiB7XHJcbiAgICAgIG5vZGU6ICdhY3Rpdml0eUNvbnRlbnROb2RlJyxcclxuICAgICAgdHlwZTogJ2lubmVySFRNTCcsXHJcbiAgICB9LFxyXG4gICAgZXZlbnRDb250ZW50OiB7XHJcbiAgICAgIG5vZGU6ICdldmVudENvbnRlbnROb2RlJyxcclxuICAgICAgdHlwZTogJ2lubmVySFRNTCcsXHJcbiAgICB9LFxyXG4gICAgZXZlbnRSZW1haW5pbmdDb250ZW50OiB7XHJcbiAgICAgIG5vZGU6ICdldmVudFJlbWFpbmluZ0NvbnRlbnROb2RlJyxcclxuICAgICAgdHlwZTogJ2lubmVySFRNTCcsXHJcbiAgICB9LFxyXG4gICAgYWN0aXZpdHlSZW1haW5pbmdDb250ZW50OiB7XHJcbiAgICAgIG5vZGU6ICdhY3Rpdml0eVJlbWFpbmluZ0NvbnRlbnROb2RlJyxcclxuICAgICAgdHlwZTogJ2lubmVySFRNTCcsXHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgZXZlbnRDb250YWluZXJOb2RlOiBudWxsLFxyXG4gIGFjdGl2aXR5Q29udGFpbmVyTm9kZTogbnVsbCxcclxuXHJcbiAgLy8gVmlldyBQcm9wZXJ0aWVzXHJcbiAgaWQ6ICdjYWxlbmRhcl92aWV3JyxcclxuICBjbHM6ICdhY3Rpdml0aWVzLWZvci1tb250aCcsXHJcbiAgaW5zZXJ0VmlldzogJ2FjdGl2aXR5X3R5cGVzX2xpc3QnLFxyXG4gIGFjdGl2aXR5RGV0YWlsVmlldzogJ2FjdGl2aXR5X2RldGFpbCcsXHJcbiAgZXZlbnREZXRhaWxWaWV3OiAnZXZlbnRfZGV0YWlsJyxcclxuICBlbmFibGVTZWFyY2g6IGZhbHNlLFxyXG4gIGRheUhlYWRlckZvcm1hdDogJ2RkZGQsIE1NTU0gRG8nLFxyXG4gIGRhdGVDb3VudHM6IG51bGwsXHJcbiAgY3VycmVudERhdGU6IG51bGwsXHJcbiAgbW9udGhBY3Rpdml0aWVzOiBudWxsLFxyXG4gIG1vbnRoRXZlbnRzOiBudWxsLFxyXG4gIG11bHRpU2VsZWN0OiA3LFxyXG4gIF9kYXRhTG9hZGVkOiBmYWxzZSxcclxuICBfZXZlbnRTdG9yZTogbnVsbCxcclxuICBfc2hvd011bHRpOiBmYWxzZSxcclxuICBfcmVmcmVzaEFkZGVkOiBmYWxzZSxcclxuXHJcbiAgYWN0aXZpdHlJY29uQnlUeXBlOiB7XHJcbiAgICAnYXRUb0RvJzogJ2ZhIGZhLWxpc3QtdWwnLFxyXG4gICAgJ2F0UGhvbmVDYWxsJzogJ2ZhIGZhLXBob25lJyxcclxuICAgICdhdEFwcG9pbnRtZW50JzogJ2ZhIGZhLWNhbGVuZGFyLW8nLFxyXG4gICAgJ2F0TGl0ZXJhdHVyZSc6ICdmYSBmYS1jYWxlbmRhci1vJyxcclxuICAgICdhdFBlcnNvbmFsJzogJ2ZhIGZhLWNoZWNrLXNxdWFyZS1vJyxcclxuICAgICdhdFF1ZXN0aW9uJzogJ2ZhIGZhLXF1ZXN0aW9uJyxcclxuICAgICdhdE5vdGUnOiAnZmEgZmEtY2FsZW5kYXItbycsXHJcbiAgICAnYXRFTWFpbCc6ICdmYSBmYS1lbnZlbG9wZScsXHJcbiAgfSxcclxuICBldmVudEljb246ICdmYSBmYS1jYWxlbmRhci1vJyxcclxuXHJcbiAgcXVlcnlPcmRlckJ5OiAnU3RhcnREYXRlIGFzYycsXHJcbiAgcXVlcnlTZWxlY3Q6IFtcclxuICAgICdTdGFydERhdGUnLFxyXG4gICAgJ0Rlc2NyaXB0aW9uJyxcclxuICAgICdUeXBlJyxcclxuICAgICdBY2NvdW50TmFtZScsXHJcbiAgICAnQ29udGFjdE5hbWUnLFxyXG4gICAgJ0xlYWRJZCcsXHJcbiAgICAnTGVhZE5hbWUnLFxyXG4gICAgJ1VzZXJJZCcsXHJcbiAgICAnVGltZWxlc3MnLFxyXG4gICAgJ1JlY3VycmluZycsXHJcbiAgICAnTm90ZXMnLFxyXG4gIF0sXHJcbiAgcXVlcnlJbmNsdWRlOiBbXHJcbiAgICAnJGRlc2NyaXB0b3JzJyxcclxuICBdLFxyXG4gIHJlc291cmNlS2luZDogJ2FjdGl2aXRpZXMnLFxyXG4gIGNvbnRyYWN0TmFtZTogJ3N5c3RlbScsXHJcbiAgcGFnZVNpemU6IDUwMCxcclxuICBldmVudFF1ZXJ5V2hlcmU6IG51bGwsXHJcbiAgZXZlbnRRdWVyeVNlbGVjdDogW1xyXG4gICAgJ1N0YXJ0RGF0ZScsXHJcbiAgICAnRW5kRGF0ZScsXHJcbiAgICAnRGVzY3JpcHRpb24nLFxyXG4gICAgJ1R5cGUnLFxyXG4gIF0sXHJcbiAgZXZlbnRJbmNsdWRlOiBudWxsLFxyXG4gIGV2ZW50UmVzb3VyY2VLaW5kOiAnZXZlbnRzJyxcclxuICBldmVudENvbnRyYWN0TmFtZTogJ2R5bmFtaWMnLFxyXG5cclxuICBfb25SZWZyZXNoOiBmdW5jdGlvbiBfb25SZWZyZXNoKG8pIHtcclxuICAgIHRoaXMuaW5oZXJpdGVkKGFyZ3VtZW50cyk7XHJcbiAgICBpZiAoby5yZXNvdXJjZUtpbmQgPT09ICdhY3Rpdml0aWVzJyB8fCBvLnJlc291cmNlS2luZCA9PT0gJ2V2ZW50cycpIHtcclxuICAgICAgdGhpcy5yZWZyZXNoUmVxdWlyZWQgPSB0cnVlO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgY2hhbmdlRGF5QWN0aXZpdGllczogZnVuY3Rpb24gY2hhbmdlRGF5QWN0aXZpdGllcygpIHtcclxuICAgIGRvbUNsYXNzLnJlbW92ZSh0aGlzLmFjdGl2aXR5Q29udGFpbmVyTm9kZSwgJ2xpc3QtbG9hZGluZycpO1xyXG4gICAgbGV0IG11bHRpRGF5cyA9IFtdO1xyXG4gICAgbGV0IGVudHJpZXM7XHJcblxyXG4gICAgaWYgKHRoaXMuX3Nob3dNdWx0aSkge1xyXG4gICAgICBjb25zdCBkYXRlSXRlcmF0b3IgPSB0aGlzLmN1cnJlbnREYXRlLmNsb25lKCkuc3RhcnRPZignd2VlaycpO1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubXVsdGlTZWxlY3Q7IGkrKykge1xyXG4gICAgICAgIGVudHJpZXMgPSB0aGlzLm1vbnRoQWN0aXZpdGllc1tkYXRlSXRlcmF0b3IuZm9ybWF0KCdZWVlZLU1NLUREJyldO1xyXG4gICAgICAgIGlmIChlbnRyaWVzKSB7XHJcbiAgICAgICAgICBtdWx0aURheXMgPSBtdWx0aURheXMuY29uY2F0KGVudHJpZXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNyZWF0ZUFjdGl2aXR5Um93cyhlbnRyaWVzLCBkYXRlSXRlcmF0b3IuZm9ybWF0KHRoaXMuZGF5SGVhZGVyRm9ybWF0KSk7XHJcbiAgICAgICAgZGF0ZUl0ZXJhdG9yLmFkZCgxLCAnZGF5cycpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChtdWx0aURheXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgdGhpcy5zZXQoJ2FjdGl2aXR5Q29udGVudCcsIHRoaXMubm9EYXRhVGVtcGxhdGUuYXBwbHkodGhpcykpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBlbnRyaWVzID0gdGhpcy5tb250aEFjdGl2aXRpZXNbdGhpcy5jdXJyZW50RGF0ZS5mb3JtYXQoJ1lZWVktTU0tREQnKV07XHJcbiAgICAgIHRoaXMuY3JlYXRlQWN0aXZpdHlSb3dzKGVudHJpZXMsIHRoaXMuY3VycmVudERhdGUuZm9ybWF0KHRoaXMuZGF5SGVhZGVyRm9ybWF0KSk7XHJcbiAgICAgIGlmICghZW50cmllcykge1xyXG4gICAgICAgIHRoaXMuc2V0KCdhY3Rpdml0eUNvbnRlbnQnLCB0aGlzLm5vRGF0YVRlbXBsYXRlLmFwcGx5KHRoaXMpKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybjtcclxuICB9LFxyXG4gIGNyZWF0ZUFjdGl2aXR5Um93czogZnVuY3Rpb24gY3JlYXRlQWN0aXZpdHlSb3dzKGVudHJpZXMgPSBbXSwgZGF5KSB7XHJcbiAgICBjb25zdCBjb3VudCA9IGVudHJpZXMubGVuZ3RoO1xyXG5cclxuICAgIGlmIChjb3VudCA+IDApIHtcclxuICAgICAgY29uc3QgYWN0aXZpdHlEb2NmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xyXG4gICAgICBjb25zdCBldmVudERvY2ZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcbiAgICAgIGlmICh0aGlzLl9zaG93TXVsdGkpIHtcclxuICAgICAgICBjb25zdCBoZWFkZXJOb2RlID0gZG9tQ29uc3RydWN0LnRvRG9tKHRoaXMuaGVhZGVyUm93VGVtcGxhdGUuYXBwbHkoe2RheTogZGF5fSwgdGhpcykpO1xyXG4gICAgICAgIGFjdGl2aXR5RG9jZnJhZy5hcHBlbmRDaGlsZChoZWFkZXJOb2RlKTtcclxuICAgICAgfVxyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyBpKyspIHtcclxuICAgICAgICBjb25zdCBlbnRyeSA9IHRoaXMuZW50cmllc1tlbnRyaWVzW2ldXTtcclxuICAgICAgICBsZXQgcm93Tm9kZTtcclxuICAgICAgICBpZiAodGhpcy5hY3Rpdml0eUljb25CeVR5cGVbZW50cnkuVHlwZV0pIHtcclxuICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJvd05vZGUgPSBkb21Db25zdHJ1Y3QudG9Eb20odGhpcy5hY3Rpdml0eVJvd1RlbXBsYXRlLmFwcGx5KGVudHJ5LCB0aGlzKSk7XHJcbiAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXHJcbiAgICAgICAgICAgIHJvd05vZGUgPSBkb21Db25zdHJ1Y3QudG9Eb20odGhpcy5yb3dUZW1wbGF0ZUVycm9yLmFwcGx5KGVudHJ5LCB0aGlzKSk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgYWN0aXZpdHlEb2NmcmFnLmFwcGVuZENoaWxkKHJvd05vZGUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByb3dOb2RlID0gZG9tQ29uc3RydWN0LnRvRG9tKHRoaXMuZXZlbnRSb3dUZW1wbGF0ZS5hcHBseShlbnRyeSwgdGhpcykpO1xyXG4gICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxyXG4gICAgICAgICAgICByb3dOb2RlID0gZG9tQ29uc3RydWN0LnRvRG9tKHRoaXMucm93VGVtcGxhdGVFcnJvci5hcHBseShlbnRyeSwgdGhpcykpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGV2ZW50RG9jZnJhZy5hcHBlbmRDaGlsZChyb3dOb2RlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vbkFwcGx5Um93VGVtcGxhdGUoZW50cnksIHJvd05vZGUpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoYWN0aXZpdHlEb2NmcmFnLmNoaWxkTm9kZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGRvbUNvbnN0cnVjdC5wbGFjZShhY3Rpdml0eURvY2ZyYWcsIHRoaXMuYWN0aXZpdHlDb250ZW50Tm9kZSwgJ2xhc3QnKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoZXZlbnREb2NmcmFnLmNoaWxkTm9kZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGRvbUNsYXNzLnJlbW92ZSh0aGlzLmV2ZW50Q29udGFpbmVyTm9kZSwgJ2V2ZW50LWhpZGRlbicpO1xyXG4gICAgICAgIGRvbUNvbnN0cnVjdC5wbGFjZShldmVudERvY2ZyYWcsIHRoaXMuZXZlbnRDb250ZW50Tm9kZSwgJ2xhc3QnKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBkb21DbGFzcy5hZGQodGhpcy5ldmVudENvbnRhaW5lck5vZGUsICdldmVudC1oaWRkZW4nKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0sXHJcbiAgY3JlYXRlRXZlbnRTdG9yZTogZnVuY3Rpb24gY3JlYXRlRXZlbnRTdG9yZSgpIHtcclxuICAgIGlmICh0aGlzLl9ldmVudFN0b3JlKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9ldmVudFN0b3JlO1xyXG4gICAgfVxyXG4gICAgY29uc3QgdGVtcCA9IHRoaXMuZ2V0KCdzdG9yZScpO1xyXG4gICAgY29uc3Qgc3RvcmUgPSBPYmplY3QuYXNzaWduKHt9LCB0ZW1wKTtcclxuICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihzdG9yZSwgT2JqZWN0LmdldFByb3RvdHlwZU9mKHRlbXApKTtcclxuICAgIHN0b3JlLnNlbGVjdCA9IHRoaXMuZXZlbnRRdWVyeVNlbGVjdDtcclxuICAgIHN0b3JlLnJlc291cmNlS2luZCA9IHRoaXMuZXZlbnRSZXNvdXJjZUtpbmQ7XHJcbiAgICBzdG9yZS5jb250cmFjdE5hbWUgPSB0aGlzLmV2ZW50Q29udHJhY3ROYW1lO1xyXG4gICAgc3RvcmUub3JkZXJCeSA9IHRoaXMuZXZlbnRPcmRlckJ5O1xyXG4gICAgc3RvcmUuaW5jbHVkZSA9IHRoaXMuZXZlbnRJbmNsdWRlO1xyXG4gICAgdGhpcy5fZXZlbnRTdG9yZSA9IHN0b3JlO1xyXG4gICAgcmV0dXJuIHN0b3JlO1xyXG4gIH0sXHJcbiAgZm9ybWF0UXVlcnlBY3Rpdml0eTogZnVuY3Rpb24gZm9ybWF0UXVlcnlBY3Rpdml0eSh2YWx1ZSkge1xyXG4gICAgY29uc3Qgc3RhcnREYXRlID0gdmFsdWUuY2xvbmUoKS5zdGFydE9mKCdtb250aCcpO1xyXG4gICAgY29uc3QgZW5kRGF0ZSA9IHZhbHVlLmNsb25lKCkuZW5kT2YoJ21vbnRoJyk7XHJcbiAgICByZXR1cm4gc3RyaW5nLnN1YnN0aXR1dGUoXHJcbiAgICAgIFtcclxuICAgICAgICAnVXNlckFjdGl2aXRpZXMuVXNlcklkIGVxIFwiJHswfVwiIGFuZCBUeXBlIG5lIFwiYXRMaXRlcmF0dXJlXCIgYW5kICgnLFxyXG4gICAgICAgICcoVGltZWxlc3MgZXEgZmFsc2UgYW5kIFN0YXJ0RGF0ZScsXHJcbiAgICAgICAgJyBiZXR3ZWVuIEAkezF9QCBhbmQgQCR7Mn1AKSBvciAnLFxyXG4gICAgICAgICcoVGltZWxlc3MgZXEgdHJ1ZSBhbmQgU3RhcnREYXRlJyxcclxuICAgICAgICAnIGJldHdlZW4gQCR7M31AIGFuZCBAJHs0fUApKScsXHJcbiAgICAgIF0uam9pbignJyksIFtBcHAuY29udGV4dC51c2VyICYmIEFwcC5jb250ZXh0LnVzZXIuJGtleSxcclxuICAgICAgICBjb252ZXJ0LnRvSXNvU3RyaW5nRnJvbURhdGUoc3RhcnREYXRlLnRvRGF0ZSgpKSxcclxuICAgICAgICBjb252ZXJ0LnRvSXNvU3RyaW5nRnJvbURhdGUoZW5kRGF0ZS50b0RhdGUoKSksXHJcbiAgICAgICAgc3RhcnREYXRlLmZvcm1hdCgnWVlZWS1NTS1ERFQwMDowMDowMFtaXScpLFxyXG4gICAgICAgIGVuZERhdGUuZm9ybWF0KCdZWVlZLU1NLUREVDIzOjU5OjU5W1pdJyksXHJcbiAgICAgIF1cclxuICAgICk7XHJcbiAgfSxcclxuICBmb3JtYXRRdWVyeUV2ZW50OiBmdW5jdGlvbiBmb3JtYXRRdWVyeUV2ZW50KHZhbHVlKSB7XHJcbiAgICByZXR1cm4gc3RyaW5nLnN1YnN0aXR1dGUoJ1VzZXJJZCBlcSBcIiR7dXNlcn1cIiBhbmQgKChTdGFydERhdGUgZ3QgQCR7c3RhcnR9QCBvciBFbmREYXRlIGd0IEAke3N0YXJ0fUApIGFuZCBTdGFydERhdGUgbHQgQCR7ZW5kfUApJywge1xyXG4gICAgICAgICAgdXNlcjogQXBwLmNvbnRleHQudXNlciAmJiBBcHAuY29udGV4dC51c2VyLiRrZXksXHJcbiAgICAgICAgICBzdGFydDogY29udmVydC50b0lzb1N0cmluZ0Zyb21EYXRlKHZhbHVlLmNsb25lKCkuc3RhcnRPZignbW9udGgnKS50b0RhdGUoKSksXHJcbiAgICAgICAgICBlbmQ6IGNvbnZlcnQudG9Jc29TdHJpbmdGcm9tRGF0ZSh2YWx1ZS5jbG9uZSgpLmVuZE9mKCdtb250aCcpLnRvRGF0ZSgpKSxcclxuICAgICAgICB9KTtcclxuICB9LFxyXG4gIGhpZ2hsaWdodEFjdGl2aXRpZXM6IGZ1bmN0aW9uIGhpZ2hsaWdodEFjdGl2aXRpZXMoKSB7XHJcbiAgICBhcnJheS5mb3JFYWNoKHRoaXMuX2NhbGVuZGFyLndlZWtzTm9kZS5jaGlsZE5vZGVzLCAod2VlaykgPT4ge1xyXG4gICAgICBhcnJheS5mb3JFYWNoKHdlZWsuY2hpbGROb2RlcywgKGRheSkgPT4ge1xyXG4gICAgICAgIGlmICghdGhpcy5tb250aEFjdGl2aXRpZXNbZG9tQXR0ci5nZXQoZGF5LCAnZGF0YS1kYXRlJyldKSB7XHJcbiAgICAgICAgICB0aGlzLl9jYWxlbmRhci5yZW1vdmVBY3RpdmUoZGF5KTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLl9jYWxlbmRhci5pc0FjdGl2ZShkYXkpKSB7XHJcbiAgICAgICAgICBkYXkuc3ViVmFsdWUgPSB0aGlzLm1vbnRoQWN0aXZpdGllc1tkb21BdHRyLmdldChkYXksICdkYXRhLWRhdGUnKV07XHJcbiAgICAgICAgICB0aGlzLl9jYWxlbmRhci5zZXRBY3RpdmVEYXkoZGF5KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sIHRoaXMpO1xyXG4gICAgfSwgdGhpcyk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9LFxyXG4gIG5hdmlnYXRlVG9EZXRhaWxWaWV3OiBmdW5jdGlvbiBuYXZpZ2F0ZVRvRGV0YWlsVmlldyhrZXksIF9kZXNjcmlwdG9yKSB7XHJcbiAgICBsZXQgZGVzY3JpcHRvciA9IF9kZXNjcmlwdG9yO1xyXG4gICAgY29uc3QgZW50cnkgPSB0aGlzLmVudHJpZXNba2V5XTtcclxuICAgIGNvbnN0IGRldGFpbFZpZXcgPSAoZW50cnkuaXNFdmVudCkgPyB0aGlzLmV2ZW50RGV0YWlsVmlldyA6IHRoaXMuYWN0aXZpdHlEZXRhaWxWaWV3O1xyXG4gICAgY29uc3QgdmlldyA9IEFwcC5nZXRWaWV3KGRldGFpbFZpZXcpO1xyXG4gICAgZGVzY3JpcHRvciA9IChlbnRyeS5pc0V2ZW50KSA/IGRlc2NyaXB0b3IgOiBlbnRyeS5EZXNjcmlwdGlvbjtcclxuICAgIGlmICh2aWV3KSB7XHJcbiAgICAgIHZpZXcuc2hvdyh7XHJcbiAgICAgICAgdGl0bGU6IGRlc2NyaXB0b3IsXHJcbiAgICAgICAga2V5OiBrZXksXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgbmF2aWdhdGVUb0luc2VydFZpZXc6IGZ1bmN0aW9uIG5hdmlnYXRlVG9JbnNlcnRWaWV3KCkge1xyXG4gICAgY29uc3QgdmlldyA9IEFwcC5nZXRWaWV3KHRoaXMuaW5zZXJ0VmlldyB8fCB0aGlzLmVkaXRWaWV3KTtcclxuXHJcbiAgICBpZiAoIXRoaXMub3B0aW9ucykge1xyXG4gICAgICB0aGlzLm9wdGlvbnMgPSB7fTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLm9wdGlvbnMuY3VycmVudERhdGUgPSB0aGlzLmN1cnJlbnREYXRlLnRvU3RyaW5nKCd5eXl5LU1NLWRkJykgfHwgbW9tZW50KCkuc3RhcnRPZignZGF5Jyk7XHJcbiAgICBpZiAodmlldykge1xyXG4gICAgICB2aWV3LnNob3coe1xyXG4gICAgICAgIG5lZ2F0ZUhpc3Rvcnk6IHRydWUsXHJcbiAgICAgICAgcmV0dXJuVG86IHRoaXMuaWQsXHJcbiAgICAgICAgaW5zZXJ0OiB0cnVlLFxyXG4gICAgICAgIGN1cnJlbnREYXRlOiB0aGlzLm9wdGlvbnMuY3VycmVudERhdGUudmFsdWVPZigpLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9LFxyXG4gIG9uVG9vbExheW91dENyZWF0ZWQ6IGZ1bmN0aW9uIG9uVG9vbExheW91dENyZWF0ZWQodG9vbHMpIHtcclxuICAgIGlmICgodG9vbHMgJiYgIXRoaXMuX3JlZnJlc2hBZGRlZCkgJiYgIXdpbmRvdy5BcHAuc3VwcG9ydHNUb3VjaCgpKSB7XHJcbiAgICAgIGNvbnN0IHJlZnJlc2hUb29sID0ge1xyXG4gICAgICAgIGlkOiAncmVmcmVzaCcsXHJcbiAgICAgICAgY2xzOiAnZmEgZmEtcmVmcmVzaCBmYS1mdyBmYS1sZycsXHJcbiAgICAgICAgYWN0aW9uOiAncmVmcmVzaCcsXHJcblxyXG4gICAgICB9O1xyXG4gICAgICBpZiAodG9vbHMudGJhcikge1xyXG4gICAgICAgIHRvb2xzLnRiYXIucHVzaChyZWZyZXNoVG9vbCk7XHJcbiAgICAgICAgdGhpcy5fcmVmcmVzaEFkZGVkID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgdGhpcy5pbmhlcml0ZWQoYXJndW1lbnRzKTtcclxuICB9LFxyXG4gIHBhcnNlTmFtZTogZnVuY3Rpb24gcGFyc2VOYW1lKG5hbWUgPSB7fSkge1xyXG4gICAgcmV0dXJuIG5hbWUuc3BsaXQoJyAnKS5zcGxpY2UoLTEpWzBdO1xyXG4gIH0sXHJcbiAgcHJvY2VzczogZnVuY3Rpb24gcHJvY2VzcyhzdG9yZSwgZW50cmllcywgaXNFdmVudCkge1xyXG4gICAgaWYgKGVudHJpZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICBlbnRyaWVzLmZvckVhY2goIChlbnRyeVByZVByb2Nlc3MpID0+IHtcclxuICAgICAgICBjb25zdCBlbnRyeSA9IHRoaXMuX3Byb2Nlc3NFbnRyeShlbnRyeVByZVByb2Nlc3MpO1xyXG4gICAgICAgIC8vIElmIGtleSBjb21lcyBiYWNrIHdpdGggbm90aGluZywgY2hlY2sgdGhhdCB0aGUgc3RvcmUgaXMgcHJvcGVybHlcclxuICAgICAgICAvLyBzZXR1cCB3aXRoIGFuIGlkUHJvcGVydHlcclxuICAgICAgICBlbnRyeS5pc0V2ZW50ID0gaXNFdmVudDtcclxuICAgICAgICBjb25zdCBlbnRyeUtleSA9IHN0b3JlLmdldElkZW50aXR5KGVudHJ5KTtcclxuICAgICAgICB0aGlzLmVudHJpZXNbZW50cnlLZXldID0gZW50cnk7XHJcbiAgICAgICAgY29uc3Qgc3RhcnREYXRlID0gbW9tZW50KGNvbnZlcnQudG9EYXRlRnJvbVN0cmluZyhlbnRyeS5TdGFydERhdGUpKTtcclxuICAgICAgICBpZiAoZW50cnkuVGltZWxlc3MpIHtcclxuICAgICAgICAgIHN0YXJ0RGF0ZS5zdWJ0cmFjdCh7XHJcbiAgICAgICAgICAgIG1pbnV0ZXM6IHN0YXJ0RGF0ZS51dGNPZmZzZXQoKSxcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBkYXRlID0gc3RhcnREYXRlLmZvcm1hdCgnWVlZWS1NTS1ERCcpO1xyXG4gICAgICAgIGlmICh0aGlzLm1vbnRoQWN0aXZpdGllc1tkYXRlXSkge1xyXG4gICAgICAgICAgdGhpcy5tb250aEFjdGl2aXRpZXNbZGF0ZV0ucHVzaChlbnRyeUtleSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMubW9udGhBY3Rpdml0aWVzW2RhdGVdID0gW2VudHJ5S2V5XTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgcHJvY2Vzc0RhdGE6IGZ1bmN0aW9uIHByb2Nlc3NEYXRhKGVudHJpZXMpIHtcclxuICAgIGlmICghZW50cmllcykge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgc3RvcmUgPSB0aGlzLmdldCgnc3RvcmUnKTtcclxuXHJcbiAgICB0aGlzLnByb2Nlc3Moc3RvcmUsIGVudHJpZXMsIGZhbHNlKTtcclxuICB9LFxyXG4gIHByb2Nlc3NFdmVudERhdGE6IGZ1bmN0aW9uIHByb2Nlc3NFdmVudERhdGEoZW50cmllcykge1xyXG4gICAgaWYgKCFlbnRyaWVzKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IHN0b3JlID0gdGhpcy5jcmVhdGVFdmVudFN0b3JlKCk7XHJcblxyXG4gICAgdGhpcy5wcm9jZXNzKHN0b3JlLCBlbnRyaWVzLCB0cnVlKTtcclxuICB9LFxyXG4gIHByb2Nlc3NTaG93T3B0aW9uczogZnVuY3Rpb24gcHJvY2Vzc1Nob3dPcHRpb25zKG9wdGlvbnMpIHtcclxuICAgIGlmIChvcHRpb25zLmN1cnJlbnREYXRlKSB7XHJcbiAgICAgIHRoaXMuY3VycmVudERhdGUgPSBtb21lbnQob3B0aW9ucy5jdXJyZW50RGF0ZSkuc3RhcnRPZignZGF5JykgfHwgbW9tZW50KCkuY2xvbmUoKS5zdGFydE9mKCdkYXknKTtcclxuICAgICAgdGhpcy5yZWZyZXNoUmVxdWlyZWQgPSB0cnVlO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgcmVmcmVzaDogZnVuY3Rpb24gcmVmcmVzaCgpIHtcclxuICAgIHRoaXMucmVuZGVyQ2FsZW5kYXIoKTtcclxuICAgIHRoaXMucmVmcmVzaERhdGEoKTtcclxuICB9LFxyXG4gIHJlZnJlc2hEYXRhOiBmdW5jdGlvbiByZWZyZXNoRGF0YSgpIHtcclxuICAgIHRoaXMuX2RhdGFMb2FkZWQgPSBmYWxzZTtcclxuICAgIHRoaXMuX2V2ZW50U3RvcmUgPSBudWxsO1xyXG4gICAgZG9tQ2xhc3MuYWRkKHRoaXMuYWN0aXZpdHlDb250YWluZXJOb2RlLCAnbGlzdC1sb2FkaW5nJyk7XHJcbiAgICB0aGlzLnNldCgnYWN0aXZpdHlDb250ZW50JywgdGhpcy5sb2FkaW5nVGVtcGxhdGUuYXBwbHkodGhpcykpO1xyXG4gICAgZG9tQ29uc3RydWN0LmVtcHR5KHRoaXMuZXZlbnRDb250ZW50Tm9kZSk7XHJcbiAgICB0aGlzLmN1cnJlbnREYXRlID0gdGhpcy5fY2FsZW5kYXIuZ2V0U2VsZWN0ZWREYXRlTW9tZW50KCk7XHJcbiAgICB0aGlzLnF1ZXJ5VGV4dCA9ICcnO1xyXG4gICAgdGhpcy5tb250aEFjdGl2aXRpZXMgPSBbXTtcclxuICAgIHRoaXMuYWN0aXZpdHlRdWVyeSA9IHRoaXMuZm9ybWF0UXVlcnlBY3Rpdml0eSh0aGlzLmN1cnJlbnREYXRlKTtcclxuICAgIHRoaXMuZXZlbnRRdWVyeSA9IHRoaXMuZm9ybWF0UXVlcnlFdmVudCh0aGlzLmN1cnJlbnREYXRlKTtcclxuICAgIFByb21pc2UuYWxsKFt0aGlzLnJlcXVlc3REYXRhKCksIHRoaXMucmVxdWVzdEV2ZW50RGF0YSgpXSkudGhlbigoKSA9PiB7XHJcbiAgICAgIGRvbUNvbnN0cnVjdC5lbXB0eSh0aGlzLmFjdGl2aXR5Q29udGVudE5vZGUpO1xyXG4gICAgICBkb21Db25zdHJ1Y3QuZW1wdHkodGhpcy5ldmVudENvbnRlbnROb2RlKTtcclxuICAgICAgdGhpcy5oaWdobGlnaHRBY3Rpdml0aWVzKCk7XHJcbiAgICAgIHRoaXMuY2hhbmdlRGF5QWN0aXZpdGllcygpO1xyXG4gICAgICB0aGlzLl9kYXRhTG9hZGVkID0gdHJ1ZTtcclxuICAgIH0pO1xyXG4gIH0sXHJcbiAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XHJcbiAgICB0aGlzLmluaGVyaXRlZChhcmd1bWVudHMpO1xyXG4gICAgdGhpcy5yZW5kZXJDYWxlbmRhcigpO1xyXG4gIH0sXHJcbiAgcmVuZGVyQ2FsZW5kYXI6IGZ1bmN0aW9uIHJlbmRlckNhbGVuZGFyKCkge1xyXG4gICAgaWYgKCF0aGlzLl9jYWxlbmRhcikge1xyXG4gICAgICB0aGlzLl9jYWxlbmRhciA9IG5ldyBDYWxlbmRhcih7IGlkOiAnY2FsZW5kYXItdmlld19fY2FsZW5kYXInLCBub0NsZWFyQnV0dG9uOiB0cnVlfSk7XHJcbiAgICAgIGRvbUNvbnN0cnVjdC5wbGFjZSh0aGlzLl9jYWxlbmRhci5kb21Ob2RlLCB0aGlzLmNhbGVuZGFyTm9kZSk7XHJcbiAgICAgIGNvbnN0IHRvZ2dsZSA9IGRvbUNvbnN0cnVjdC50b0RvbSh0aGlzLndlZWtTZWxlY3RUZW1wbGF0ZS5hcHBseSh0aGlzKSk7XHJcbiAgICAgIGRvbUNvbnN0cnVjdC5wbGFjZSh0b2dnbGUsIHRoaXMuX2NhbGVuZGFyLmZvb3Rlck5vZGUsICdsYXN0Jyk7XHJcbiAgICAgIG9uKHRvZ2dsZSwgJ2NsaWNrJywgdGhpcy50b2dnbGVNdWx0aVNlbGVjdC5iaW5kKHRoaXMpKTtcclxuICAgICAgdGhpcy5fY2FsZW5kYXIub25DaGFuZ2VEYXkgPSB0aGlzLm9uQ2hhbmdlRGF5LmJpbmQodGhpcyk7XHJcbiAgICAgIHRoaXMuX2NhbGVuZGFyLnNob3coKTtcclxuICAgICAgdGhpcy5fY2FsZW5kYXIub25SZWZyZXNoQ2FsZW5kYXIgPSB0aGlzLm9uUmVmcmVzaENhbGVuZGFyLmJpbmQodGhpcyk7ICAvLyBNdXN0IGJlIGNhbGxlZCBhZnRlciBzaG93IGJlY2F1c2UgdGhpcyB3aWxsIGNhbGwgcmVxdWVzdERhdGEgc2luY2Ugc2hvdyBjYWxscyByZWZyZXNoQ2FsZW5kYXJcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuIHJlZnJlc2hpbmdDYWxlbmRhciA9IHRydWU7XHJcbiAgICAgIHRoaXMuX2NhbGVuZGFyLnJlZnJlc2goZmFsc2UpO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgb25SZWZyZXNoQ2FsZW5kYXI6IGZ1bmN0aW9uIG9uUmVmcmVzaENhbGVuZGFyKHJlZnJlc2gpIHtcclxuICAgIGlmIChyZWZyZXNoKSB7XHJcbiAgICAgIHRoaXMucmVmcmVzaERhdGEoKTtcclxuICAgIH1cclxuICB9LFxyXG4gIG9uQ2hhbmdlRGF5OiBmdW5jdGlvbiBvbkNoYW5nZURheSgpIHtcclxuICAgIHRoaXMuc2VsZWN0RGF5KCk7XHJcbiAgfSxcclxuICByZXF1ZXN0RGF0YTogZnVuY3Rpb24gcmVxdWVzdERhdGEoKSB7XHJcbiAgICBjb25zdCBzdG9yZSA9IHRoaXMuZ2V0KCdzdG9yZScpO1xyXG4gICAgaWYgKHN0b3JlKSB7XHJcbiAgICAgIC8vIGF0dGVtcHQgdG8gdXNlIGEgZG9qbyBzdG9yZVxyXG4gICAgICBjb25zdCBxdWVyeU9wdGlvbnMgPSB7XHJcbiAgICAgICAgY291bnQ6IHRoaXMucGFnZVNpemUsXHJcbiAgICAgICAgc3RhcnQ6IHRoaXMucG9zaXRpb24sXHJcbiAgICAgIH07XHJcblxyXG4gICAgICB0aGlzLl9hcHBseVN0YXRlVG9RdWVyeU9wdGlvbnMocXVlcnlPcHRpb25zKTtcclxuXHJcbiAgICAgIGNvbnN0IHF1ZXJ5RXhwcmVzc2lvbiA9IHRoaXMuX2J1aWxkUXVlcnlFeHByZXNzaW9uKHRoaXMuYWN0aXZpdHlRdWVyeSkgfHwgbnVsbDtcclxuICAgICAgY29uc3QgcXVlcnlSZXN1bHRzID0gc3RvcmUucXVlcnkocXVlcnlFeHByZXNzaW9uLCBxdWVyeU9wdGlvbnMpO1xyXG5cclxuICAgICAgd2hlbihxdWVyeVJlc3VsdHMsXHJcbiAgICAgICAgdGhpcy5wcm9jZXNzRGF0YS5iaW5kKHRoaXMpLFxyXG4gICAgICAgIHRoaXMuX29uUXVlcnlFcnJvci5iaW5kKHRoaXMsIHF1ZXJ5T3B0aW9ucykpO1xyXG5cclxuICAgICAgcmV0dXJuIHF1ZXJ5UmVzdWx0cztcclxuICAgIH1cclxuXHJcbiAgICBjb25zb2xlLndhcm4oJ0Vycm9yIHJlcXVlc3RpbmcgZGF0YSwgbm8gc3RvcmUgd2FzIGRlZmluZWQuIERpZCB5b3UgbWVhbiB0byBtaXhpbiBfU0RhdGFMaXN0TWl4aW4gdG8geW91ciBsaXN0IHZpZXc/Jyk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcclxuICB9LFxyXG4gIHJlcXVlc3RFdmVudERhdGE6IGZ1bmN0aW9uIHJlcXVlc3RFdmVudERhdGEoKSB7XHJcbiAgICBjb25zdCBzdG9yZSA9IHRoaXMuY3JlYXRlRXZlbnRTdG9yZSgpO1xyXG4gICAgaWYgKHN0b3JlKSB7XHJcbiAgICAgIC8vIGF0dGVtcHQgdG8gdXNlIGEgZG9qbyBzdG9yZVxyXG4gICAgICBjb25zdCBxdWVyeU9wdGlvbnMgPSB7XHJcbiAgICAgICAgY291bnQ6IHRoaXMucGFnZVNpemUsXHJcbiAgICAgICAgc3RhcnQ6IHRoaXMucG9zaXRpb24sXHJcbiAgICAgIH07XHJcblxyXG4gICAgICB0aGlzLl9hcHBseVN0YXRlVG9RdWVyeU9wdGlvbnMocXVlcnlPcHRpb25zKTtcclxuXHJcbiAgICAgIGNvbnN0IHF1ZXJ5RXhwcmVzc2lvbiA9IHRoaXMuX2J1aWxkUXVlcnlFeHByZXNzaW9uKHRoaXMuZXZlbnRRdWVyeSkgfHwgbnVsbDtcclxuICAgICAgY29uc3QgcXVlcnlSZXN1bHRzID0gc3RvcmUucXVlcnkocXVlcnlFeHByZXNzaW9uLCBxdWVyeU9wdGlvbnMpO1xyXG5cclxuICAgICAgd2hlbihxdWVyeVJlc3VsdHMsXHJcbiAgICAgICAgdGhpcy5wcm9jZXNzRXZlbnREYXRhLmJpbmQodGhpcyksXHJcbiAgICAgICAgdGhpcy5fb25RdWVyeUVycm9yLmJpbmQodGhpcywgcXVlcnlPcHRpb25zKSk7XHJcblxyXG4gICAgICByZXR1cm4gcXVlcnlSZXN1bHRzO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnNvbGUud2FybignRXJyb3IgcmVxdWVzdGluZyBkYXRhLCBubyBzdG9yZSB3YXMgZGVmaW5lZC4gRGlkIHlvdSBtZWFuIHRvIG1peGluIF9TRGF0YUxpc3RNaXhpbiB0byB5b3VyIGxpc3Qgdmlldz8nKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxyXG4gIH0sXHJcbiAgc2VsZWN0RGF5OiBmdW5jdGlvbiBzZWxlY3REYXkoKSB7XHJcbiAgICBjb25zdCBzZWxlY3RlZCA9IHRoaXMuX2NhbGVuZGFyLmdldFNlbGVjdGVkRGF0ZU1vbWVudCgpO1xyXG4gICAgaWYgKHRoaXMuY3VycmVudERhdGUgJiYgdGhpcy5fZGF0YUxvYWRlZCkge1xyXG4gICAgICBkb21Db25zdHJ1Y3QuZW1wdHkodGhpcy5hY3Rpdml0eUNvbnRlbnROb2RlKTtcclxuICAgICAgZG9tQ29uc3RydWN0LmVtcHR5KHRoaXMuZXZlbnRDb250ZW50Tm9kZSk7XHJcbiAgICAgIHRoaXMuY3VycmVudERhdGUgPSBzZWxlY3RlZDtcclxuICAgICAgdGhpcy5jaGFuZ2VEYXlBY3Rpdml0aWVzKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmN1cnJlbnREYXRlID0gc2VsZWN0ZWQ7XHJcbiAgICB9XHJcbiAgfSxcclxuICBzaG93OiBmdW5jdGlvbiBzaG93KG9wdGlvbnMpIHtcclxuICAgIHRoaXMuaW5oZXJpdGVkKGFyZ3VtZW50cyk7XHJcblxyXG4gICAgaWYgKG9wdGlvbnMpIHtcclxuICAgICAgdGhpcy5wcm9jZXNzU2hvd09wdGlvbnMob3B0aW9ucyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnJlbmRlckNhbGVuZGFyKCk7XHJcbiAgICB9XHJcbiAgfSxcclxuICBzdGFydHVwOiBmdW5jdGlvbiBzdGFydHVwKCkge1xyXG4gICAgdGhpcy5pbmhlcml0ZWQoYXJndW1lbnRzKTtcclxuICB9LFxyXG4gIHRvZ2dsZU11bHRpU2VsZWN0OiBmdW5jdGlvbiB0b2dnbGVNdWx0aVNlbGVjdCh7Y3VycmVudFRhcmdldH0pIHtcclxuICAgIHRoaXMuX3Nob3dNdWx0aSA9ICF0aGlzLl9zaG93TXVsdGk7XHJcbiAgICBjb25zdCB0b2dnbGVPbk5vZGUgPSBxdWVyeSgnLnRvZ2dsZU9uJywgY3VycmVudFRhcmdldCkuc2hpZnQoKTtcclxuICAgIGNvbnN0IHRvZ2dsZU9mZk5vZGUgPSBxdWVyeSgnLnRvZ2dsZU9mZicsIGN1cnJlbnRUYXJnZXQpLnNoaWZ0KCk7XHJcblxyXG4gICAgaWYgKHRvZ2dsZU9uTm9kZSAmJiB0b2dnbGVPZmZOb2RlKSB7XHJcbiAgICAgIGRvbUNsYXNzLnRvZ2dsZSh0b2dnbGVPbk5vZGUsICdkaXNwbGF5LW5vbmUnLCAhdGhpcy5fc2hvd011bHRpKTtcclxuICAgICAgZG9tQ2xhc3MudG9nZ2xlKHRvZ2dsZU9mZk5vZGUsICdkaXNwbGF5LW5vbmUnLCB0aGlzLl9zaG93TXVsdGkpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX2NhbGVuZGFyLnRvZ2dsZVNlbGVjdFdlZWsoKTtcclxuICAgIGRvbUNsYXNzLnRvZ2dsZShjdXJyZW50VGFyZ2V0LCAndG9nZ2xlU3RhdGVPbicpO1xyXG4gICAgZG9tQ29uc3RydWN0LmVtcHR5KHRoaXMuYWN0aXZpdHlDb250ZW50Tm9kZSk7XHJcbiAgICBkb21Db25zdHJ1Y3QuZW1wdHkodGhpcy5ldmVudENvbnRlbnROb2RlKTtcclxuICAgIHRoaXMuY2hhbmdlRGF5QWN0aXZpdGllcygpO1xyXG4gIH0sXHJcbiAgX2J1aWxkUXVlcnlFeHByZXNzaW9uOiBmdW5jdGlvbiBfYnVpbGRRdWVyeUV4cHJlc3Npb24ocXVlcnlQYXJhbSA9IHt9KSB7XHJcbiAgICByZXR1cm4gbGFuZy5taXhpbihxdWVyeVBhcmFtIHx8IHt9LCB0aGlzLm9wdGlvbnMgJiYgKHRoaXMub3B0aW9ucy5xdWVyeSB8fCB0aGlzLm9wdGlvbnMud2hlcmUpKTtcclxuICB9LFxyXG59KTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IF9fY2xhc3M7XHJcbiJdfQ==
</pre>
</body>
</html>
