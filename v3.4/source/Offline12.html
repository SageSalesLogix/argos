<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">define('argos/Models/Briefcase/Offline', ['exports', 'module', 'dojo/_base/declare', '../_OfflineModelBase', '../Manager', '../Types', '../../I18n'], function (exports, module, _dojo_baseDeclare, _OfflineModelBase2, _Manager, _Types, _I18n) {
  function _interopRequireDefault(obj) { return obj &amp;&amp; obj.__esModule ? obj : { 'default': obj }; }

  var _declare = _interopRequireDefault(_dojo_baseDeclare);

  var _OfflineModelBase3 = _interopRequireDefault(_OfflineModelBase2);

  var _Manager2 = _interopRequireDefault(_Manager);

  var _MODEL_TYPES = _interopRequireDefault(_Types);

  var _getResource = _interopRequireDefault(_I18n);

  var resource = (0, _getResource['default'])('briefcaseModel');

<span id='argos-Models-Briefcase-Offline'>  /**
</span>   * @class argos.Models.Briefcase.Offline
   */
  var __class = (0, _declare['default'])('argos.Models.Briefcase.Offline', [_OfflineModelBase3['default']], {
    id: 'briefcase_offline_model',
    entityName: 'Briefcase',
    modelName: 'Briefcase',
    entityDisplayName: resource.entityDisplayName,
    entityDisplayNamePlural: resource.entityDisplayNamePlural,
    isSystem: true,
    createEntry: function createEntity(entry, model, options) {
      var entity = {}; // need to dynamicly create Properties;
      entity.$key = model.entityName + '_' + model.getEntityId(entry);
      entity.$descriptor = model.getEntityDescription(entry);
      entity.createDate = moment().toDate();
      entity.modifyDate = moment().toDate();
      entity.entityId = model.getEntityId(entry);
      entity.entityName = model.entityName;
      entity.description = model.getEntityDescription(entry);
      entity.entityDisplayName = model.entityDisplayName;
      entity.resourceKind = model.resourceKind;
      entity.viewId = options &amp;&amp; options.viewId ? options.viewId : model.detailViewId;
      entity.iconClass = options &amp;&amp; options.iconClass ? options.iconClass : model.getIconClass(entry);
      return entity;
    },
    deleteEntryByEntityContext: function deleteEntryByEntityContext(entityId, entityName) {
      var _this = this;

      var queryExpression = function map(doc, emit) {
        if (doc.entity.entityId === entityId &amp;&amp; doc.entity.entityName === entityName) {
          emit(doc.entity);
        }
      };
      this.getEntries(queryExpression).then(function (entries) {
        if (entries) {
          entries.forEach(function (entry) {
            _this.deleteEntry(entry.$key);
          });
        }
      });
    }
  });

  _Manager2['default'].register('Briefcase', _MODEL_TYPES['default'].OFFLINE, __class);
  module.exports = __class;
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9Nb2RlbHMvQnJpZWZjYXNlL09mZmxpbmUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQU1BLE1BQU0sUUFBUSxHQUFHLDZCQUFZLGdCQUFnQixDQUFDLENBQUM7Ozs7O0FBSy9DLE1BQU0sT0FBTyxHQUFHLHlCQUFRLGdDQUFnQyxFQUFFLCtCQUFtQixFQUFFO0FBQzdFLE1BQUUsRUFBRSx5QkFBeUI7QUFDN0IsY0FBVSxFQUFFLFdBQVc7QUFDdkIsYUFBUyxFQUFFLFdBQVc7QUFDdEIscUJBQWlCLEVBQUUsUUFBUSxDQUFDLGlCQUFpQjtBQUM3QywyQkFBdUIsRUFBRSxRQUFRLENBQUMsdUJBQXVCO0FBQ3pELFlBQVEsRUFBRSxJQUFJO0FBQ2QsZUFBVyxFQUFFLFNBQVMsWUFBWSxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFO0FBQ3hELFVBQU0sTUFBTSxHQUFHLEVBQUUsQ0FBQztBQUNsQixZQUFNLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQyxVQUFVLEdBQUcsR0FBRyxHQUFHLEtBQUssQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDaEUsWUFBTSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUMsb0JBQW9CLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDdkQsWUFBTSxDQUFDLFVBQVUsR0FBRyxNQUFNLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQztBQUN0QyxZQUFNLENBQUMsVUFBVSxHQUFHLE1BQU0sRUFBRSxDQUFDLE1BQU0sRUFBRSxDQUFDO0FBQ3RDLFlBQU0sQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUMzQyxZQUFNLENBQUMsVUFBVSxHQUFHLEtBQUssQ0FBQyxVQUFVLENBQUM7QUFDckMsWUFBTSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUMsb0JBQW9CLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDdkQsWUFBTSxDQUFDLGlCQUFpQixHQUFHLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQztBQUNuRCxZQUFNLENBQUMsWUFBWSxHQUFHLEtBQUssQ0FBQyxZQUFZLENBQUM7QUFDekMsWUFBTSxDQUFDLE1BQU0sR0FBRyxBQUFDLE9BQU8sSUFBSSxPQUFPLENBQUMsTUFBTSxHQUFJLE9BQU8sQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDLFlBQVksQ0FBQztBQUNsRixZQUFNLENBQUMsU0FBUyxHQUFHLEFBQUMsT0FBTyxJQUFJLE9BQU8sQ0FBQyxTQUFTLEdBQUksT0FBTyxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ2xHLGFBQU8sTUFBTSxDQUFDO0tBQ2Y7QUFDRCw4QkFBMEIsRUFBRSxTQUFTLDBCQUEwQixDQUFDLFFBQVEsRUFBRSxVQUFVLEVBQUU7OztBQUNwRixVQUFNLGVBQWUsR0FBRyxTQUFTLEdBQUcsQ0FBQyxHQUFHLEVBQUUsSUFBSSxFQUFFO0FBQzlDLFlBQUksQUFBQyxHQUFHLENBQUMsTUFBTSxDQUFDLFFBQVEsS0FBSyxRQUFRLElBQU0sR0FBRyxDQUFDLE1BQU0sQ0FBQyxVQUFVLEtBQUssVUFBVSxBQUFDLEVBQUU7QUFDaEYsY0FBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQztTQUNsQjtPQUNGLENBQUM7QUFDRixVQUFJLENBQUMsVUFBVSxDQUFDLGVBQWUsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFDLE9BQU8sRUFBSTtBQUNoRCxZQUFJLE9BQU8sRUFBRTtBQUNYLGlCQUFPLENBQUMsT0FBTyxDQUFDLFVBQUMsS0FBSyxFQUFLO0FBQ3pCLGtCQUFLLFdBQVcsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7V0FDOUIsQ0FBQyxDQUFDO1NBQ0o7T0FDRixDQUFDLENBQUM7S0FDSjtHQUNGLENBQUMsQ0FBQzs7QUFFSCx1QkFBUSxRQUFRLENBQUMsV0FBVyxFQUFFLHdCQUFZLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQzttQkFDN0MsT0FBTyIsImZpbGUiOiJzcmMvTW9kZWxzL0JyaWVmY2FzZS9PZmZsaW5lLmpzIiwic291cmNlUm9vdCI6InNyYyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBkZWNsYXJlIGZyb20gJ2Rvam8vX2Jhc2UvZGVjbGFyZSc7XHJcbmltcG9ydCBfT2ZmbGluZU1vZGVsQmFzZSBmcm9tICcuLi9fT2ZmbGluZU1vZGVsQmFzZSc7XHJcbmltcG9ydCBNYW5hZ2VyIGZyb20gJy4uL01hbmFnZXInO1xyXG5pbXBvcnQgTU9ERUxfVFlQRVMgZnJvbSAnLi4vVHlwZXMnO1xyXG5pbXBvcnQgZ2V0UmVzb3VyY2UgZnJvbSAnLi4vLi4vSTE4bic7XHJcblxyXG5jb25zdCByZXNvdXJjZSA9IGdldFJlc291cmNlKCdicmllZmNhc2VNb2RlbCcpO1xyXG5cclxuLyoqXHJcbiAqIEBjbGFzcyBhcmdvcy5Nb2RlbHMuQnJpZWZjYXNlLk9mZmxpbmVcclxuICovXHJcbmNvbnN0IF9fY2xhc3MgPSBkZWNsYXJlKCdhcmdvcy5Nb2RlbHMuQnJpZWZjYXNlLk9mZmxpbmUnLCBbX09mZmxpbmVNb2RlbEJhc2VdLCB7XHJcbiAgaWQ6ICdicmllZmNhc2Vfb2ZmbGluZV9tb2RlbCcsXHJcbiAgZW50aXR5TmFtZTogJ0JyaWVmY2FzZScsXHJcbiAgbW9kZWxOYW1lOiAnQnJpZWZjYXNlJyxcclxuICBlbnRpdHlEaXNwbGF5TmFtZTogcmVzb3VyY2UuZW50aXR5RGlzcGxheU5hbWUsXHJcbiAgZW50aXR5RGlzcGxheU5hbWVQbHVyYWw6IHJlc291cmNlLmVudGl0eURpc3BsYXlOYW1lUGx1cmFsLFxyXG4gIGlzU3lzdGVtOiB0cnVlLFxyXG4gIGNyZWF0ZUVudHJ5OiBmdW5jdGlvbiBjcmVhdGVFbnRpdHkoZW50cnksIG1vZGVsLCBvcHRpb25zKSB7XHJcbiAgICBjb25zdCBlbnRpdHkgPSB7fTsgLy8gbmVlZCB0byBkeW5hbWljbHkgY3JlYXRlIFByb3BlcnRpZXM7XHJcbiAgICBlbnRpdHkuJGtleSA9IG1vZGVsLmVudGl0eU5hbWUgKyAnXycgKyBtb2RlbC5nZXRFbnRpdHlJZChlbnRyeSk7XHJcbiAgICBlbnRpdHkuJGRlc2NyaXB0b3IgPSBtb2RlbC5nZXRFbnRpdHlEZXNjcmlwdGlvbihlbnRyeSk7XHJcbiAgICBlbnRpdHkuY3JlYXRlRGF0ZSA9IG1vbWVudCgpLnRvRGF0ZSgpO1xyXG4gICAgZW50aXR5Lm1vZGlmeURhdGUgPSBtb21lbnQoKS50b0RhdGUoKTtcclxuICAgIGVudGl0eS5lbnRpdHlJZCA9IG1vZGVsLmdldEVudGl0eUlkKGVudHJ5KTtcclxuICAgIGVudGl0eS5lbnRpdHlOYW1lID0gbW9kZWwuZW50aXR5TmFtZTtcclxuICAgIGVudGl0eS5kZXNjcmlwdGlvbiA9IG1vZGVsLmdldEVudGl0eURlc2NyaXB0aW9uKGVudHJ5KTtcclxuICAgIGVudGl0eS5lbnRpdHlEaXNwbGF5TmFtZSA9IG1vZGVsLmVudGl0eURpc3BsYXlOYW1lO1xyXG4gICAgZW50aXR5LnJlc291cmNlS2luZCA9IG1vZGVsLnJlc291cmNlS2luZDtcclxuICAgIGVudGl0eS52aWV3SWQgPSAob3B0aW9ucyAmJiBvcHRpb25zLnZpZXdJZCkgPyBvcHRpb25zLnZpZXdJZCA6IG1vZGVsLmRldGFpbFZpZXdJZDtcclxuICAgIGVudGl0eS5pY29uQ2xhc3MgPSAob3B0aW9ucyAmJiBvcHRpb25zLmljb25DbGFzcykgPyBvcHRpb25zLmljb25DbGFzcyA6IG1vZGVsLmdldEljb25DbGFzcyhlbnRyeSk7XHJcbiAgICByZXR1cm4gZW50aXR5O1xyXG4gIH0sXHJcbiAgZGVsZXRlRW50cnlCeUVudGl0eUNvbnRleHQ6IGZ1bmN0aW9uIGRlbGV0ZUVudHJ5QnlFbnRpdHlDb250ZXh0KGVudGl0eUlkLCBlbnRpdHlOYW1lKSB7XHJcbiAgICBjb25zdCBxdWVyeUV4cHJlc3Npb24gPSBmdW5jdGlvbiBtYXAoZG9jLCBlbWl0KSB7XHJcbiAgICAgIGlmICgoZG9jLmVudGl0eS5lbnRpdHlJZCA9PT0gZW50aXR5SWQpICYmIChkb2MuZW50aXR5LmVudGl0eU5hbWUgPT09IGVudGl0eU5hbWUpKSB7XHJcbiAgICAgICAgZW1pdChkb2MuZW50aXR5KTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRoaXMuZ2V0RW50cmllcyhxdWVyeUV4cHJlc3Npb24pLnRoZW4oKGVudHJpZXMpPT4ge1xyXG4gICAgICBpZiAoZW50cmllcykge1xyXG4gICAgICAgIGVudHJpZXMuZm9yRWFjaCgoZW50cnkpID0+IHtcclxuICAgICAgICAgIHRoaXMuZGVsZXRlRW50cnkoZW50cnkuJGtleSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH0sXHJcbn0pO1xyXG5cclxuTWFuYWdlci5yZWdpc3RlcignQnJpZWZjYXNlJywgTU9ERUxfVFlQRVMuT0ZGTElORSwgX19jbGFzcyk7XHJcbmV4cG9ydCBkZWZhdWx0IF9fY2xhc3M7XHJcbiJdfQ==
</pre>
</body>
</html>
