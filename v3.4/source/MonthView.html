<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">define('crm/Views/Calendar/MonthView', ['exports', 'module', 'dojo/_base/declare', 'dojo/_base/lang', 'dojo/_base/array', 'dojo/string', 'dojo/query', 'dojo/dom-attr', 'dojo/dom-class', 'dojo/dom-construct', 'crm/Format', 'argos/ErrorManager', 'argos/Convert', 'argos/List', 'argos/_LegacySDataListMixin', 'argos/I18n'], function (exports, module, _dojo_baseDeclare, _dojo_baseLang, _dojo_baseArray, _dojoString, _dojoQuery, _dojoDomAttr, _dojoDomClass, _dojoDomConstruct, _crmFormat, _argosErrorManager, _argosConvert, _argosList, _argos_LegacySDataListMixin, _argosI18n) {
  function _interopRequireDefault(obj) { return obj &amp;&amp; obj.__esModule ? obj : { 'default': obj }; }

  var _declare = _interopRequireDefault(_dojo_baseDeclare);

  var _lang = _interopRequireDefault(_dojo_baseLang);

  var _array = _interopRequireDefault(_dojo_baseArray);

  var _string = _interopRequireDefault(_dojoString);

  var _query = _interopRequireDefault(_dojoQuery);

  var _domAttr = _interopRequireDefault(_dojoDomAttr);

  var _domClass = _interopRequireDefault(_dojoDomClass);

  var _domConstruct = _interopRequireDefault(_dojoDomConstruct);

  var _ErrorManager = _interopRequireDefault(_argosErrorManager);

  var _convert = _interopRequireDefault(_argosConvert);

  var _List = _interopRequireDefault(_argosList);

  var _LegacySDataListMixin2 = _interopRequireDefault(_argos_LegacySDataListMixin);

  var _getResource = _interopRequireDefault(_argosI18n);

  var resource = (0, _getResource['default'])('calendarMonthView');
  var dtFormatResource = (0, _getResource['default'])('calendarMonthViewDateTimeFormat');

<span id='crm-Views-Calendar-MonthView'>  /**
</span>   * @class crm.Views.Calendar.MonthView
   *
   * @extends argos.List
   * @mixins argos.List
   * @mixins argos._LegacySDataListMixin
   *
   * @requires argos.List
   * @requires argos._LegacySDataListMixin
   * @requires argos.Convert
   * @requires argos.ErrorManager
   *
   * @requires crm.Format
   *
   * @requires moment
   *
   */
  var __class = (0, _declare['default'])('crm.Views.Calendar.MonthView', [_List['default'], _LegacySDataListMixin2['default']], {
    // Localization
    titleText: resource.titleText,
    todayText: resource.todayText,
    dayText: resource.dayText,
    weekText: resource.weekText,
    monthText: resource.monthText,
    monthTitleFormatText: dtFormatResource.monthTitleFormatText,
    dayTitleFormatText: dtFormatResource.dayTitleFormatText,
    eventDateFormatText: dtFormatResource.eventDateFormatText,
    startTimeFormatText: dtFormatResource.startTimeFormatText,
    allDayText: resource.allDayText,
    eventText: resource.eventText,
    eventHeaderText: resource.eventHeaderText,
    countMoreText: resource.countMoreText,
    activityHeaderText: resource.activityHeaderText,
    toggleCollapseText: resource.toggleCollapseText,
    weekDaysShortText: [resource.sundayShortText, resource.mondayShortText, resource.tuesdayShortText, resource.wednesdayShortText, resource.thursdayShortText, resource.fridayShortText, resource.saturdayShortText],

    toggleCollapseClass: 'fa fa-chevron-down',
    toggleExpandClass: 'fa fa-chevron-right',
    enablePullToRefresh: false,

    // Templates
    widgetTemplate: new Simplate(['&lt;div id=&quot;{%= $.id %}&quot; title=&quot;{%= $.titleText %}&quot; class=&quot;overthrow list {%= $.cls %}&quot; {% if ($.resourceKind) { %}data-resource-kind=&quot;{%= $.resourceKind %}&quot;{% } %}&gt;', '&lt;div data-dojo-attach-point=&quot;searchNode&quot;&gt;&lt;/div&gt;', '{%! $.navigationTemplate %}', '&lt;div style=&quot;clear:both&quot;&gt;&lt;/div&gt;', '&lt;div class=&quot;month-content&quot; data-dojo-attach-point=&quot;monthNode&quot;&gt;', '{%! $.navBarTemplate %}', '&lt;div class=&quot;month-calendar&quot; data-dojo-attach-point=&quot;contentNode&quot;&gt;&lt;/div&gt;', '&lt;/div&gt;', '&lt;div class=&quot;day-content&quot;&gt;', '&lt;h2 class=&quot;date-day-text&quot; data-dojo-attach-point=&quot;dayTitleNode&quot;&gt;&lt;/h2&gt;', '&lt;div class=&quot;event-content event-hidden&quot; data-dojo-attach-point=&quot;eventContainerNode&quot;&gt;', '&lt;h2 data-action=&quot;toggleGroup&quot;&gt;&lt;button data-dojo-attach-point=&quot;collapseButton&quot; class=&quot;{%= $$.toggleCollapseClass %}&quot; aria-label=&quot;{%: $$.toggleCollapseText %}&quot;&gt;&lt;/button&gt;{%= $.eventHeaderText %}&lt;/h2&gt;', '&lt;ul class=&quot;list-content&quot; data-dojo-attach-point=&quot;eventContentNode&quot;&gt;&lt;/ul&gt;', '{%! $.eventMoreTemplate %}', '&lt;/div&gt;', '&lt;div class=&quot;activity-content&quot; data-dojo-attach-point=&quot;activityContainerNode&quot;&gt;', '&lt;h2&gt;{%= $.activityHeaderText %}&lt;/h2&gt;', '&lt;ul class=&quot;list-content&quot; data-dojo-attach-point=&quot;activityContentNode&quot;&gt;&lt;/ul&gt;', '{%! $.activityMoreTemplate %}', '&lt;/div&gt;', '&lt;/div&gt;', '&lt;div style=&quot;clear:both&quot;&gt;&lt;/div&gt;', '&lt;/div&gt;']),
    navigationTemplate: new Simplate(['&lt;div class=&quot;split-buttons&quot;&gt;', '&lt;button data-tool=&quot;today&quot; data-action=&quot;getTodayMonthActivities&quot; class=&quot;button&quot;&gt;{%: $.todayText %}&lt;/button&gt;', '&lt;button data-tool=&quot;selectdate&quot; data-action=&quot;selectDate&quot; class=&quot;button fa fa-calendar&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/button&gt;', '&lt;button data-tool=&quot;day&quot; data-action=&quot;navigateToDayView&quot; class=&quot;button&quot;&gt;{%: $.dayText %}&lt;/button&gt;', '&lt;button data-tool=&quot;week&quot; data-action=&quot;navigateToWeekView&quot; class=&quot;button&quot;&gt;{%: $.weekText %}&lt;/button&gt;', '&lt;button data-tool=&quot;month&quot; class=&quot;button current&quot;&gt;{%: $.monthText %}&lt;/button&gt;', '&lt;/div&gt;']),
    navBarTemplate: new Simplate(['&lt;div class=&quot;nav-bar&quot;&gt;', '&lt;button data-tool=&quot;next&quot; data-action=&quot;goToNextMonth&quot; class=&quot;button button-next fa fa-arrow-right fa-lg&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/button&gt;', '&lt;button data-tool=&quot;prev&quot; data-action=&quot;goToPreviousMonth&quot; class=&quot;button button-prev fa fa-arrow-left fa-lg&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/button&gt;', '&lt;h3 class=&quot;date-text&quot; data-dojo-attach-point=&quot;dateNode&quot;&gt;&lt;/h3&gt;', '&lt;/div&gt;']),
    activityRowTemplate: new Simplate(['&lt;li data-action=&quot;activateEntry&quot; data-key=&quot;{%= $.$key %}&quot; data-descriptor=&quot;{%: $.$descriptor %}&quot; data-activity-type=&quot;{%: $.Type %}&quot;&gt;', '&lt;table class=&quot;calendar-entry-table&quot;&gt;&lt;tr&gt;', '&lt;td class=&quot;entry-table-icon&quot;&gt;', '&lt;button data-action=&quot;selectEntry&quot; class=&quot;list-item-selector button {%= $$.activityIconByType[$.Type] %}&quot;&gt;', '&lt;/button&gt;', '&lt;/td&gt;', '&lt;td class=&quot;entry-table-time&quot;&gt;{%! $$.activityTimeTemplate %}&lt;/td&gt;', '&lt;td class=&quot;entry-table-description&quot;&gt;{%! $$.activityItemTemplate %}&lt;/td&gt;', '&lt;/tr&gt;&lt;/table&gt;', '&lt;/li&gt;']),
    eventRowTemplate: new Simplate(['&lt;li data-action=&quot;activateEntry&quot; data-key=&quot;{%= $.$key %}&quot; data-descriptor=&quot;{%: $.$descriptor %}&quot; data-activity-type=&quot;Event&quot;&gt;', '&lt;table class=&quot;calendar-entry-table&quot;&gt;&lt;tr&gt;', '&lt;td class=&quot;entry-table-icon&quot;&gt;', '&lt;button data-action=&quot;selectEntry&quot; class=&quot;list-item-selector button {%= $$.eventIcon %}&quot;&gt;', '&lt;/button&gt;', '&lt;/td&gt;', '&lt;td class=&quot;entry-table-description&quot;&gt;{%! $$.eventItemTemplate %}&lt;/td&gt;', '&lt;/tr&gt;&lt;/table&gt;', '&lt;/li&gt;']),
    activityTimeTemplate: new Simplate(['{% if ($.Timeless) { %}', '&lt;span class=&quot;p-time&quot;&gt;{%= $$.allDayText %}&lt;/span&gt;', '{% } else { %}', '&lt;span class=&quot;p-time&quot;&gt;{%: crm.Format.date($.StartDate, $$.startTimeFormatText) %}&lt;/span&gt;', '{% } %}']),
    activityItemTemplate: new Simplate(['&lt;h3 class=&quot;p-description&quot;&gt;{%: $.Description %}&lt;/h3&gt;', '&lt;h4&gt;{%= $$.activityNameTemplate.apply($) %}&lt;/h4&gt;']),
    eventItemTemplate: new Simplate(['&lt;h3 class=&quot;p-description&quot;&gt;{%: $.Description %} ({%: $.Type %})&lt;/h3&gt;', '&lt;h4&gt;{%! $$.eventNameTemplate %}&lt;/h4&gt;']),
    activityNameTemplate: new Simplate(['{% if ($.ContactName) { %}', '{%: $.ContactName %} / {%: $.AccountName %}', '{% } else if ($.AccountName) { %}', '{%: $.AccountName %}', '{% } else { %}', '{%: $.LeadName %}', '{% } %}']),
    eventNameTemplate: new Simplate(['{%: crm.Format.date($.StartDate, $$.eventDateFormatText) %}', '&amp;nbsp;-&amp;nbsp;', '{%: crm.Format.date($.EndDate, $$.eventDateFormatText) %}']),
    activityMoreTemplate: new Simplate(['&lt;div class=&quot;list-more&quot; data-dojo-attach-point=&quot;activityMoreNode&quot;&gt;', '&lt;button class=&quot;button&quot; data-action=&quot;activateActivityMore&quot;&gt;', '&lt;span data-dojo-attach-point=&quot;activityRemainingContentNode&quot;&gt;{%= $.countMoreText %}&lt;/span&gt;', '&lt;/button&gt;', '&lt;/div&gt;']),
    eventMoreTemplate: new Simplate(['&lt;div class=&quot;list-more&quot; data-dojo-attach-point=&quot;eventMoreNode&quot;&gt;', '&lt;button class=&quot;button&quot; data-action=&quot;activateEventMore&quot;&gt;', '&lt;span data-dojo-attach-point=&quot;eventRemainingContentNode&quot;&gt;{%= $.countMoreText %}&lt;/span&gt;', '&lt;/button&gt;', '&lt;/div&gt;']),
    calendarStartTemplate: '&lt;table class=&quot;old-calendar-table&quot;&gt;',
    calendarWeekHeaderStartTemplate: '&lt;tr class=&quot;old-calendar-week-header&quot;&gt;',
    calendarWeekHeaderTemplate: '&lt;td class=&quot;old-calendar-weekday&quot;&gt;${0}&lt;/td&gt;',
    calendarWeekHeaderEndTemplate: '&lt;/tr&gt;',
    calendarWeekStartTemplate: '&lt;tr class=&quot;old-calendar-week&quot;&gt;',
    calendarEmptyDayTemplate: '&lt;td&gt;&amp;nbsp;&lt;/td&gt;',
    calendarDayTemplate: '&lt;td class=&quot;old-calendar-day ${1}&quot; data-action=&quot;selectDay&quot; data-date=&quot;${2}&quot;&gt;${0}&lt;/td&gt;',
    calendarWeekEndTemplate: '&lt;/tr&gt;',
    calendarEndTemplate: '&lt;/table&gt;',
    calendarActivityCountTemplate: '&lt;span class=&quot;old-activity-count&quot; title=&quot;${0} events&quot;&gt;${0}&lt;/span&gt;',

    attributeMap: {
      calendarContent: {
        node: 'contentNode',
        type: 'innerHTML'
      },
      dateContent: {
        node: 'dateNode',
        type: 'innerHTML'
      },
      dayTitleContent: {
        node: 'dayTitleNode',
        type: 'innerHTML'
      },
      activityContent: {
        node: 'activityContentNode',
        type: 'innerHTML'
      },
      eventContent: {
        node: 'eventContentNode',
        type: 'innerHTML'
      },
      eventRemainingContent: {
        node: 'eventRemainingContentNode',
        type: 'innerHTML'
      },
      activityRemainingContent: {
        node: 'activityRemainingContentNode',
        type: 'innerHTML'
      }
    },
    eventContainerNode: null,
    activityContainerNode: null,

    // View Properties
    id: 'calendar_monthlist',
    cls: 'activities-for-month',
    dayView: 'calendar_daylist',
    datePickerView: 'generic_calendar',
    weekView: 'calendar_weeklist',
    insertView: 'activity_types_list',
    activityDetailView: 'activity_detail',
    eventDetailView: 'event_detail',
    enableSearch: false,
    expose: false,
    dateCounts: null,
    currentDate: null,

    pageSize: 500,
    queryWhere: null,
    queryOrderBy: 'StartDate desc',
    querySelect: ['StartDate', 'Timeless', 'Type'],
    feed: null,
    eventFeed: null,
    entries: null,
    selectedDateRequests: null,
    selectedDateEventRequests: null,
    monthRequests: null,
    monthEventRequests: null,

    eventPageSize: 3,
    eventQueryWhere: null,
    eventQuerySelect: ['StartDate', 'EndDate', 'Description', 'Type'],

    activityPageSize: 10,
    activityQueryWhere: null,
    activityQuerySelect: ['StartDate', 'Description', 'Type', 'AccountName', 'ContactName', 'LeadId', 'LeadName', 'UserId', 'Timeless', 'Recurring'],
    activityIconByType: {
      'atToDo': 'fa fa-list-ul',
      'atPhoneCall': 'fa fa-phone',
      'atAppointment': 'fa fa-calendar-o',
      'atLiterature': 'fa fa-calendar-o',
      'atPersonal': 'fa fa-check-square-o',
      'atQuestion': 'fa fa-question',
      'atNote': 'fa fa-calendar-o',
      'atEMail': 'fa fa-envelope'
    },
    eventIcon: 'fa fa-calendar-o',

    resourceKind: 'activities',

    constructor: function constructor() {
      this.feed = {};
      this.eventFeed = {};
      this.entries = {};
      this.dateCounts = [];
    },
    _onRefresh: function _onRefresh(o) {
      this.inherited(arguments);
      if (o.resourceKind === 'activities' || o.resourceKind === 'events') {
        this.refreshRequired = true;
      }
    },
    clear: function clear() {},
    startup: function startup() {
      this.inherited(arguments);
      this.currentDate = moment().startOf('day');
    },
    render: function render() {
      this.inherited(arguments);
      this.renderCalendar();
    },
    activateActivityMore: function activateActivityMore() {
      this.navigateToDayView();
    },
    activateEventMore: function activateEventMore() {
      var view = App.getView('event_related');
      var where = this.getSelectedDateEventQuery();
      if (view) {
        view.show({
          'where': where
        });
      }
    },
    toggleGroup: function toggleGroup(params) {
      var node = params.$source;
      if (node &amp;&amp; node.parentNode) {
        _domClass['default'].toggle(node, 'collapsed');
        _domClass['default'].toggle(node.parentNode, 'collapsed-event');

        var button = this.collapseButton;

        if (button) {
          _domClass['default'].toggle(button, this.toggleCollapseClass);
          _domClass['default'].toggle(button, this.toggleExpandClass);
        }
      }
    },
    selectDay: function selectDay(params, evt, el) {
      if (this.selectedDateNode) {
        _domClass['default'].remove(this.selectedDateNode, 'selected');
      }

      this.selectedDateNode = el;
      _domClass['default'].add(el, 'selected');

      this.currentDate = moment(params.date, 'YYYY-MM-DD');
      this.getSelectedDate();
    },
    getFirstDayOfCurrentMonth: function getFirstDayOfCurrentMonth() {
      return this.currentDate.clone().startOf('month');
    },
    getLastDayOfCurrentMonth: function getLastDayOfCurrentMonth() {
      return this.currentDate.clone().endOf('month');
    },
    getTodayMonthActivities: function getTodayMonthActivities() {
      var today = moment().startOf('day');

      if (this.currentDate.format('YYYY-MM') === today.format('YYYY-MM')) {
        this.currentDate = today;
        this.highlightCurrentDate();
        this.getSelectedDate();
      } else {
        this.currentDate = today;
        this.refresh();
      }
    },
    goToNextMonth: function goToNextMonth() {
      this.currentDate.add({
        months: 1
      });
      this.refresh();
    },
    goToPreviousMonth: function goToPreviousMonth() {
      this.currentDate.subtract({
        months: 1
      });
      this.refresh();
    },
    refresh: function refresh() {
      this.renderCalendar();
      this.queryWhere = this.getActivityQuery();
      this.feed = null;
      this.eventFeed = null;
      this.dateCounts = [];
      this.requestData();
      this.requestEventData();
    },
    requestData: function requestData() {
      this.cancelRequests(this.monthRequests);
      this.monthRequests = [];

      var request = this.createRequest();
      request.setContractName(this.contractName || 'system');

      var xhr = request.read({
        success: this.onRequestDataSuccess,
        failure: this.onRequestDataFailure,
        aborted: this.onRequestDataAborted,
        scope: this
      });
      this.monthRequests.push(xhr);
    },
    createEventRequest: function createEventRequest() {
      var querySelect = this.eventQuerySelect;
      var queryWhere = this.getEventQuery();
      var request = new Sage.SData.Client.SDataResourceCollectionRequest(this.getService()).setCount(this.pageSize).setStartIndex(1).setResourceKind('events').setQueryArg(Sage.SData.Client.SDataUri.QueryArgNames.Select, this.expandExpression(querySelect).join(',')).setQueryArg(Sage.SData.Client.SDataUri.QueryArgNames.Where, queryWhere);

      return request;
    },
    requestEventData: function requestEventData() {
      this.cancelRequests(this.monthEventRequests);
      this.monthEventRequests = [];

      var request = this.createEventRequest();
      var xhr = request.read({
        success: this.onRequestEventDataSuccess,
        failure: this.onRequestEventDataFailure,
        aborted: this.onRequestEventDataAborted,
        scope: this
      });
      this.monthEventRequests.push(xhr);
    },
    onRequestEventDataFailure: function onRequestEventDataFailure(response, o) {
      alert(_string['default'].substitute(this.requestErrorText, [response, o])); // eslint-disable-line
      _ErrorManager['default'].addError(response, o, this.options, 'failure');
    },
    onRequestEventDataAborted: function onRequestEventDataAborted() {
      this.options = false; // force a refresh
    },
    onRequestEventDataSuccess: function onRequestEventDataSuccess(feed) {
      this.processEventFeed(feed);
    },
    getActivityQuery: function getActivityQuery() {
      var startDate = this.getFirstDayOfCurrentMonth();
      var endDate = this.getLastDayOfCurrentMonth();
      return _string['default'].substitute(['UserActivities.UserId eq &quot;${0}&quot; and Type ne &quot;atLiterature&quot; and (', '(Timeless eq false and StartDate', ' between @${1}@ and @${2}@) or ', '(Timeless eq true and StartDate', ' between @${3}@ and @${4}@))'].join(''), [App.context.user &amp;&amp; App.context.user.$key, _convert['default'].toIsoStringFromDate(startDate.toDate()), _convert['default'].toIsoStringFromDate(endDate.toDate()), startDate.format('YYYY-MM-DDT00:00:00[Z]'), endDate.format('YYYY-MM-DDT23:59:59[Z]')]);
    },
    getEventQuery: function getEventQuery() {
      var startDate = this.getFirstDayOfCurrentMonth();
      var endDate = this.getLastDayOfCurrentMonth();
      return _string['default'].substitute(['UserId eq &quot;${0}&quot; and (', '(StartDate gt @${1}@ or EndDate gt @${1}@) and ', 'StartDate lt @${2}@', ')'].join(''), [App.context.user &amp;&amp; App.context.user.$key, _convert['default'].toIsoStringFromDate(startDate.toDate()), _convert['default'].toIsoStringFromDate(endDate.toDate())]);
    },
    processFeed: function processFeed(feed) {
      if (!feed) {
        return;
      }

      var r = feed.$resources;
      this.feed = feed;

      for (var i = 0; i &lt; r.length; i++) {
        var row = r[i];

        // Preserve the isEvent flag if we have an existing entry for it already,
        // the order of processFeed and processEventFeed is not predictable
        row.isEvent = this.entries[row.$key] &amp;&amp; this.entries[row.$key].isEvent;

        this.entries[row.$key] = row;

        var startDay = moment(_convert['default'].toDateFromString(row.StartDate));
        if (r[i].Timeless) {
          startDay.subtract({
            minutes: startDay.utcOffset()
          });
        }

        var dateIndex = startDay.format('YYYY-MM-DD');
        this.dateCounts[dateIndex] = this.dateCounts[dateIndex] ? this.dateCounts[dateIndex] + 1 : 1;
      }

      this.highlightActivities();
    },
    processEventFeed: function processEventFeed(feed) {
      if (!feed) {
        return;
      }

      var r = feed.$resources;
      var feedLength = r.length;
      this.eventFeed = feed;

      for (var i = 0; i &lt; feedLength; i++) {
        var row = r[i];
        // Preserve the isEvent flag if we have an existing entry for it already,
        // the order of processFeed and processEventFeed is not predictable
        row.isEvent = this.entries[row.$key] &amp;&amp; this.entries[row.$key].isEvent;
        this.entries[row.$key] = row;

        var startDay = moment(_convert['default'].toDateFromString(row.StartDate));
        var endDay = _convert['default'].toDateFromString(row.EndDate);

        while (startDay.valueOf() &lt;= endDay.valueOf()) {
          var dateIndex = startDay.format('YYYY-MM-DD');
          this.dateCounts[dateIndex] = this.dateCounts[dateIndex] ? this.dateCounts[dateIndex] + 1 : 1;
          startDay.add({
            days: 1
          });
        }
      }

      this.highlightActivities();
    },

    highlightActivities: function highlightActivities() {
      (0, _query['default'])('.old-calendar-day').forEach(function queryDays(node) {
        var dataDate = _domAttr['default'].get(node, 'data-date');
        if (!this.dateCounts[dataDate]) {
          return;
        }

        _domClass['default'].add(node, 'activeDay');

        var countMarkup = _string['default'].substitute(this.calendarActivityCountTemplate, [this.dateCounts[dataDate]]);
        var existingCount = (0, _query['default'])(node).children('div');

        if (existingCount.length &gt; 0) {
          _domConstruct['default'].place(countMarkup, existingCount[0], 'only');
        } else {
          _domConstruct['default'].place('&lt;div&gt;' + countMarkup + '&lt;/div&gt;', node, 'first');
        }
      }, this);
    },
    setCurrentDateTitle: function setCurrentDateTitle() {
      this.set('dayTitleContent', this.currentDate.format(this.dayTitleFormatText));
    },
    hideEventList: function hideEventList() {
      _domClass['default'].add(this.eventContainerNode, 'event-hidden');
    },
    showEventList: function showEventList() {
      _domClass['default'].remove(this.eventContainerNode, 'event-hidden');
    },
    getSelectedDate: function getSelectedDate() {
      this.clearSelectedDate();
      this.setCurrentDateTitle();
      this.requestSelectedDateActivities();
      this.requestSelectedDateEvents();
    },
    clearSelectedDate: function clearSelectedDate() {
      _domClass['default'].add(this.activityContainerNode, 'list-loading');
      this.set('activityContent', this.loadingTemplate.apply(this));
      this.hideEventList();
    },
    cancelRequests: function cancelRequests(requests) {
      if (!requests) {
        return;
      }

      _array['default'].forEach(requests, function forEach(xhr) {
        if (xhr) {
          // if request was fulfilled by offline storage, xhr will be undefined
          xhr.abort();
        }
      });
    },
    requestSelectedDateActivities: function requestSelectedDateActivities() {
      this.cancelRequests(this.selectedDateRequests);
      this.selectedDateRequests = [];

      var request = this.createSelectedDateRequest({
        pageSize: this.activityPageSize,
        resourceKind: 'activities',
        contractName: 'system',
        querySelect: this.activityQuerySelect,
        queryWhere: this.getSelectedDateActivityQuery()
      });

      var xhr = request.read({
        success: this.onRequestSelectedDateActivityDataSuccess,
        failure: this.onRequestDataFailure,
        aborted: this.onRequestDataAborted,
        scope: this
      });
      this.selectedDateRequests.push(xhr);
    },
    requestSelectedDateEvents: function requestSelectedDateEvents() {
      this.cancelRequests(this.selectedDateEventRequests);
      this.selectedDateEventRequests = [];

      var request = this.createSelectedDateRequest({
        pageSize: this.eventPageSize,
        resourceKind: 'events',
        contractName: 'dynamic',
        querySelect: this.eventQuerySelect,
        queryWhere: this.getSelectedDateEventQuery()
      });

      var xhr = request.read({
        success: this.onRequestSelectedDateEventDataSuccess,
        failure: this.onRequestDataFailure,
        aborted: this.onRequestDataAborted,
        scope: this
      });
      this.selectedDateEventRequests.push(xhr);
    },
    createSelectedDateRequest: function createSelectedDateRequest(o) {
      var request = new Sage.SData.Client.SDataResourceCollectionRequest(this.getService()).setCount(o.pageSize).setStartIndex(1).setResourceKind(o.resourceKind).setContractName(o.contractName || App.defaultService.getContractName().text).setQueryArg(Sage.SData.Client.SDataUri.QueryArgNames.OrderBy, o.queryOrderBy || this.queryOrderBy).setQueryArg(Sage.SData.Client.SDataUri.QueryArgNames.Select, this.expandExpression(o.querySelect).join(',')).setQueryArg(Sage.SData.Client.SDataUri.QueryArgNames.Where, o.queryWhere);
      return request;
    },
    getSelectedDateActivityQuery: function getSelectedDateActivityQuery() {
      var activityQuery = ['UserActivities.UserId eq &quot;${0}&quot; and Type ne &quot;atLiterature&quot; and (', '(Timeless eq false and StartDate between @${1}@ and @${2}@) or ', '(Timeless eq true and StartDate between @${3}@ and @${4}@))'].join('');

      var results = _string['default'].substitute(activityQuery, [App.context.user &amp;&amp; App.context.user.$key, _convert['default'].toIsoStringFromDate(this.currentDate.toDate()), _convert['default'].toIsoStringFromDate(this.currentDate.clone().endOf('day').toDate()), this.currentDate.format('YYYY-MM-DDT00:00:00[Z]'), this.currentDate.format('YYYY-MM-DDT23:59:59[Z]')]);

      return results;
    },
    getSelectedDateEventQuery: function getSelectedDateEventQuery() {
      return _string['default'].substitute(['UserId eq &quot;${0}&quot; and (', '(StartDate gt @${1}@ or EndDate gt @${1}@) and ', 'StartDate lt @${2}@', ')'].join(''), [App.context.user &amp;&amp; App.context.user.$key, _convert['default'].toIsoStringFromDate(this.currentDate.toDate()), _convert['default'].toIsoStringFromDate(this.currentDate.clone().endOf('day').toDate())]);
    },
    onRequestSelectedDateActivityDataSuccess: function onRequestSelectedDateActivityDataSuccess(feed) {
      if (!feed) {
        return false;
      }

      _domClass['default'].remove(this.activityContainerNode, 'list-loading');

      var r = feed.$resources;
      var feedLength = r.length;
      var o = [];

      for (var i = 0; i &lt; feedLength; i++) {
        var row = r[i];
        row.isEvent = false;
        this.entries[row.$key] = row;
        o.push(this.activityRowTemplate.apply(row, this));
      }

      if (feedLength === 0) {
        this.set('activityContent', this.noDataTemplate.apply(this));
        return false;
      }

      if (feed.$totalResults &gt; feedLength) {
        _domClass['default'].add(this.activityContainerNode, 'list-has-more');
        this.set('activityRemainingContent', this.countMoreText);
      } else {
        _domClass['default'].remove(this.activityContainerNode, 'list-has-more');
        this.set('activityRemainingContent', '');
      }

      this.set('activityContent', o.join(''));
    },
    onRequestSelectedDateEventDataSuccess: function onRequestSelectedDateEventDataSuccess(feed) {
      if (!feed) {
        return false;
      }

      var r = feed.$resources;
      var feedLength = r.length;
      var o = [];

      this.eventFeed = feed;

      if (feedLength === 0) {
        this.hideEventList();
        return false;
      }
      this.showEventList();

      for (var i = 0; i &lt; feedLength; i++) {
        var row = r[i];
        row.isEvent = true;
        this.entries[row.$key] = row;
        o.push(this.eventRowTemplate.apply(row, this));
      }

      if (feed.$totalResults &gt; feedLength) {
        _domClass['default'].add(this.eventContainerNode, 'list-has-more');
        this.set('eventRemainingContent', this.countMoreText);
      } else {
        _domClass['default'].remove(this.eventContainerNode, 'list-has-more');
        this.set('eventRemainingContent', '');
      }

      this.set('eventContent', o.join(''));
    },

    renderCalendar: function renderCalendar() {
      var calHTML = [];
      var startingDay = this.getFirstDayOfCurrentMonth().day();
      var dayDate = this.currentDate.clone().startOf('month');
      var monthLength = this.currentDate.daysInMonth();
      var weekEnds = [0, 6];
      var weekendClass = '';
      var day = 1;

      calHTML.push(this.calendarStartTemplate);

      calHTML.push(this.calendarWeekHeaderStartTemplate);
      for (var i = 0; i &lt;= 6; i++) {
        calHTML.push(_string['default'].substitute(this.calendarWeekHeaderTemplate, [this.weekDaysShortText[i]]));
      }
      calHTML.push(this.calendarWeekHeaderEndTemplate);

      // Weeks
      for (var i = 0; i &lt;= 6; i++) {
        calHTML.push(this.calendarWeekStartTemplate);
        // Days
        for (var j = 0; j &lt;= 6; j++) {
          if (day &lt;= monthLength &amp;&amp; (i &gt; 0 || j &gt;= startingDay)) {
            dayDate.date(day);
            weekendClass = weekEnds.indexOf(j) !== -1 ? ' weekend' : '';
            calHTML.push(_string['default'].substitute(this.calendarDayTemplate, [day, weekendClass, dayDate.format('YYYY-MM-DD')]));
            day++;
          } else {
            calHTML.push(this.calendarEmptyDayTemplate);
          }
        }
        calHTML.push(this.calendarWeekEndTemplate);
        // stop making rows if we've run out of days
        if (day &gt; monthLength) {
          break;
        }
      }
      calHTML.push(this.calendarEndTemplate);

      this.set('calendarContent', calHTML.join(''));
      this.setDateTitle();
      this.highlightCurrentDate();
    },
    setDateTitle: function setDateTitle() {
      this.set('dateContent', this.currentDate.format(this.monthTitleFormatText));
    },
    show: function show(options) {
      this.inherited(arguments);

      if (options) {
        this.processShowOptions(options);
      } else {
        this.renderCalendar();
      }
    },
    processShowOptions: function processShowOptions(options) {
      if (options.currentDate) {
        this.currentDate = moment(options.currentDate).startOf('day') || moment().startOf('day');
        this.refreshRequired = true;
      }
    },
    highlightCurrentDate: function highlightCurrentDate() {
      var selectedDate = _string['default'].substitute('.old-calendar-day[data-date=${0}]', [this.currentDate.format('YYYY-MM-DD')]);

      if (this.selectedDateNode) {
        _domClass['default'].remove(this.selectedDateNode, 'selected');
      }

      this.selectedDateNode = (0, _query['default'])(selectedDate, this.contentNode)[0];
      if (this.selectedDateNode) {
        _domClass['default'].add(this.selectedDateNode, 'selected');
      }

      this.getSelectedDate();
      this.highlightToday();
    },
    highlightToday: function highlightToday() {
      // Remove the existing &quot;today&quot; highlight class because it might be out of date,
      // like when we tick past midnight.
      var todayCls = '.old-calendar-day.today';
      var todayNode = (0, _query['default'])(todayCls, this.contentNode)[0];
      if (todayNode) {
        _domClass['default'].remove(todayNode, 'today');
      }

      // Get the updated &quot;today&quot;
      todayCls = _string['default'].substitute('.old-calendar-day[data-date=${0}]', [moment().format('YYYY-MM-DD')]);
      todayNode = (0, _query['default'])(todayCls, this.contentNode)[0];
      if (todayNode) {
        _domClass['default'].add(todayNode, 'today');
      }
    },
    selectEntry: function selectEntry(params) {
      var row = (0, _query['default'])(params.$source).closest('[data-key]')[0];
      var key = row ? row.getAttribute('data-key') : false;

      this.navigateToDetailView(key);
    },
    selectDate: function selectDate() {
      var options = {
        date: this.currentDate.toDate(),
        showTimePicker: false,
        timeless: false,
        tools: {
          tbar: [{
            id: 'complete',
            cls: 'fa fa-check fa-fw fa-lg',
            fn: this.selectDateSuccess,
            scope: this
          }, {
            id: 'cancel',
            cls: 'fa fa-ban fa-fw fa-lg',
            side: 'left',
            fn: ReUI.back,
            scope: ReUI
          }]
        }
      };
      var view = App.getView(this.datePickerView);
      if (view) {
        view.show(options);
      }
    },
    selectDateSuccess: function selectDateSuccess() {
      var view = App.getPrimaryActiveView();
      this.currentDate = moment(view.getDateTime()).startOf('day');
      this.refresh();
      ReUI.back();
    },
    navigateToWeekView: function navigateToWeekView() {
      var view = App.getView(this.weekView);
      var options = {
        currentDate: this.currentDate.valueOf() || moment().startOf('day')
      };
      view.show(options);
    },
    navigateToDayView: function navigateToDayView() {
      var view = App.getView(this.dayView);
      var options = {
        currentDate: this.currentDate.valueOf() || moment().startOf('day')
      };
      view.show(options);
    },
    navigateToInsertView: function navigateToInsertView() {
      var view = App.getView(this.insertView || this.editView);

      if (!this.options) {
        this.options = {};
      }

      this.options.currentDate = this.currentDate.toString('yyyy-MM-dd') || moment().startOf('day');
      if (view) {
        view.show({
          negateHistory: true,
          returnTo: this.id,
          insert: true,
          currentDate: this.options.currentDate.valueOf()
        });
      }
    },
    navigateToDetailView: function navigateToDetailView(key, _descriptor) {
      var descriptor = _descriptor;
      var entry = this.entries[key];
      var detailView = entry.isEvent ? this.eventDetailView : this.activityDetailView;
      var view = App.getView(detailView);
      descriptor = entry.isEvent ? descriptor : entry.Description;
      if (view) {
        view.show({
          title: descriptor,
          key: key
        });
      }
    }
  });

  _lang['default'].setObject('Mobile.SalesLogix.Views.Calendar.MonthView', __class);
  module.exports = __class;
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9WaWV3cy9DYWxlbmRhci9Nb250aFZpZXcuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFlQSxNQUFNLFFBQVEsR0FBRyw2QkFBWSxtQkFBbUIsQ0FBQyxDQUFDO0FBQ2xELE1BQU0sZ0JBQWdCLEdBQUcsNkJBQVksaUNBQWlDLENBQUMsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQW1CeEUsTUFBTSxPQUFPLEdBQUcseUJBQVEsOEJBQThCLEVBQUUscURBQTZCLEVBQUU7O0FBRXJGLGFBQVMsRUFBRSxRQUFRLENBQUMsU0FBUztBQUM3QixhQUFTLEVBQUUsUUFBUSxDQUFDLFNBQVM7QUFDN0IsV0FBTyxFQUFFLFFBQVEsQ0FBQyxPQUFPO0FBQ3pCLFlBQVEsRUFBRSxRQUFRLENBQUMsUUFBUTtBQUMzQixhQUFTLEVBQUUsUUFBUSxDQUFDLFNBQVM7QUFDN0Isd0JBQW9CLEVBQUUsZ0JBQWdCLENBQUMsb0JBQW9CO0FBQzNELHNCQUFrQixFQUFFLGdCQUFnQixDQUFDLGtCQUFrQjtBQUN2RCx1QkFBbUIsRUFBRSxnQkFBZ0IsQ0FBQyxtQkFBbUI7QUFDekQsdUJBQW1CLEVBQUUsZ0JBQWdCLENBQUMsbUJBQW1CO0FBQ3pELGNBQVUsRUFBRSxRQUFRLENBQUMsVUFBVTtBQUMvQixhQUFTLEVBQUUsUUFBUSxDQUFDLFNBQVM7QUFDN0IsbUJBQWUsRUFBRSxRQUFRLENBQUMsZUFBZTtBQUN6QyxpQkFBYSxFQUFFLFFBQVEsQ0FBQyxhQUFhO0FBQ3JDLHNCQUFrQixFQUFFLFFBQVEsQ0FBQyxrQkFBa0I7QUFDL0Msc0JBQWtCLEVBQUUsUUFBUSxDQUFDLGtCQUFrQjtBQUMvQyxxQkFBaUIsRUFBRSxDQUNqQixRQUFRLENBQUMsZUFBZSxFQUN4QixRQUFRLENBQUMsZUFBZSxFQUN4QixRQUFRLENBQUMsZ0JBQWdCLEVBQ3pCLFFBQVEsQ0FBQyxrQkFBa0IsRUFDM0IsUUFBUSxDQUFDLGlCQUFpQixF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LEVBQUU7QUFDUixZQUFJLENBQUMsSUFBSSxDQUFDO0FBQ1IsZUFBSyxFQUFFLFVBQVU7QUFDakIsYUFBRyxFQUFFLEdBQUc7U0FDVCxDQUFDLENBQUM7T0FDSjtLQUNGO0dBQ0YsQ0FBQyxDQUFDOztBQUVILG1CQUFLLFNBQVMsQ0FBQyw0Q0FBNEMsRUFBRSxPQUFPLENBQUMsQ0FBQzttQkFDdkQsT0FBTyIsImZpbGUiOiJzcmMvVmlld3MvQ2FsZW5kYXIvTW9udGhWaWV3LmpzIiwic291cmNlUm9vdCI6InNyYyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBkZWNsYXJlIGZyb20gJ2Rvam8vX2Jhc2UvZGVjbGFyZSc7XHJcbmltcG9ydCBsYW5nIGZyb20gJ2Rvam8vX2Jhc2UvbGFuZyc7XHJcbmltcG9ydCBhcnJheSBmcm9tICdkb2pvL19iYXNlL2FycmF5JztcclxuaW1wb3J0IHN0cmluZyBmcm9tICdkb2pvL3N0cmluZyc7XHJcbmltcG9ydCBxdWVyeSBmcm9tICdkb2pvL3F1ZXJ5JztcclxuaW1wb3J0IGRvbUF0dHIgZnJvbSAnZG9qby9kb20tYXR0cic7XHJcbmltcG9ydCBkb21DbGFzcyBmcm9tICdkb2pvL2RvbS1jbGFzcyc7XHJcbmltcG9ydCBkb21Db25zdHJ1Y3QgZnJvbSAnZG9qby9kb20tY29uc3RydWN0JztcclxuaW1wb3J0ICdjcm0vRm9ybWF0JztcclxuaW1wb3J0IEVycm9yTWFuYWdlciBmcm9tICdhcmdvcy9FcnJvck1hbmFnZXInO1xyXG5pbXBvcnQgY29udmVydCBmcm9tICdhcmdvcy9Db252ZXJ0JztcclxuaW1wb3J0IExpc3QgZnJvbSAnYXJnb3MvTGlzdCc7XHJcbmltcG9ydCBfTGVnYWN5U0RhdGFMaXN0TWl4aW4gZnJvbSAnYXJnb3MvX0xlZ2FjeVNEYXRhTGlzdE1peGluJztcclxuaW1wb3J0IGdldFJlc291cmNlIGZyb20gJ2FyZ29zL0kxOG4nO1xyXG5cclxuY29uc3QgcmVzb3VyY2UgPSBnZXRSZXNvdXJjZSgnY2FsZW5kYXJNb250aFZpZXcnKTtcclxuY29uc3QgZHRGb3JtYXRSZXNvdXJjZSA9IGdldFJlc291cmNlKCdjYWxlbmRhck1vbnRoVmlld0RhdGVUaW1lRm9ybWF0Jyk7XHJcblxyXG4vKipcclxuICogQGNsYXNzIGNybS5WaWV3cy5DYWxlbmRhci5Nb250aFZpZXdcclxuICpcclxuICogQGV4dGVuZHMgYXJnb3MuTGlzdFxyXG4gKiBAbWl4aW5zIGFyZ29zLkxpc3RcclxuICogQG1peGlucyBhcmdvcy5fTGVnYWN5U0RhdGFMaXN0TWl4aW5cclxuICpcclxuICogQHJlcXVpcmVzIGFyZ29zLkxpc3RcclxuICogQHJlcXVpcmVzIGFyZ29zLl9MZWdhY3lTRGF0YUxpc3RNaXhpblxyXG4gKiBAcmVxdWlyZXMgYXJnb3MuQ29udmVydFxyXG4gKiBAcmVxdWlyZXMgYXJnb3MuRXJyb3JNYW5hZ2VyXHJcbiAqXHJcbiAqIEByZXF1aXJlcyBjcm0uRm9ybWF0XHJcbiAqXHJcbiAqIEByZXF1aXJlcyBtb21lbnRcclxuICpcclxuICovXHJcbmNvbnN0IF9fY2xhc3MgPSBkZWNsYXJlKCdjcm0uVmlld3MuQ2FsZW5kYXIuTW9udGhWaWV3JywgW0xpc3QsIF9MZWdhY3lTRGF0YUxpc3RNaXhpbl0sIHtcclxuICAvLyBMb2NhbGl6YXRpb25cclxuICB0aXRsZVRleHQ6IHJlc291cmNlLnRpdGxlVGV4dCxcclxuICB0b2RheVRleHQ6IHJlc291cmNlLnRvZGF5VGV4dCxcclxuICBkYXlUZXh0OiByZXNvdXJjZS5kYXlUZXh0LFxyXG4gIHdlZWtUZXh0OiByZXNvdXJjZS53ZWVrVGV4dCxcclxuICBtb250aFRleHQ6IHJlc291cmNlLm1vbnRoVGV4dCxcclxuICBtb250aFRpdGxlRm9ybWF0VGV4dDogZHRGb3JtYXRSZXNvdXJjZS5tb250aFRpdGxlRm9ybWF0VGV4dCxcclxuICBkYXlUaXRsZUZvcm1hdFRleHQ6IGR0Rm9ybWF0UmVzb3VyY2UuZGF5VGl0bGVGb3JtYXRUZXh0LFxyXG4gIGV2ZW50RGF0ZUZvcm1hdFRleHQ6IGR0Rm9ybWF0UmVzb3VyY2UuZXZlbnREYXRlRm9ybWF0VGV4dCxcclxuICBzdGFydFRpbWVGb3JtYXRUZXh0OiBkdEZvcm1hdFJlc291cmNlLnN0YXJ0VGltZUZvcm1hdFRleHQsXHJcbiAgYWxsRGF5VGV4dDogcmVzb3VyY2UuYWxsRGF5VGV4dCxcclxuICBldmVudFRleHQ6IHJlc291cmNlLmV2ZW50VGV4dCxcclxuICBldmVudEhlYWRlclRleHQ6IHJlc291cmNlLmV2ZW50SGVhZGVyVGV4dCxcclxuICBjb3VudE1vcmVUZXh0OiByZXNvdXJjZS5jb3VudE1vcmVUZXh0LFxyXG4gIGFjdGl2aXR5SGVhZGVyVGV4dDogcmVzb3VyY2UuYWN0aXZpdHlIZWFkZXJUZXh0LFxyXG4gIHRvZ2dsZUNvbGxhcHNlVGV4dDogcmVzb3VyY2UudG9nZ2xlQ29sbGFwc2VUZXh0LFxyXG4gIHdlZWtEYXlzU2hvcnRUZXh0OiBbXHJcbiAgICByZXNvdXJjZS5zdW5kYXlTaG9ydFRleHQsXHJcbiAgICByZXNvdXJjZS5tb25kYXlTaG9ydFRleHQsXHJcbiAgICByZXNvdXJjZS50dWVzZGF5U2hvcnRUZXh0LFxyXG4gICAgcmVzb3VyY2Uud2VkbmVzZGF5U2hvcnRUZXh0LFxyXG4gICAgcmVzb3VyY2UudGh1cnNkYXlTaG9ydFRleHQsXHJcbiAgICByZXNvdXJjZS5mcmlkYXlTaG9ydFRleHQsXHJcbiAgICByZXNvdXJjZS5zYXR1cmRheVNob3J0VGV4dCxcclxuICBdLFxyXG5cclxuICB0b2dnbGVDb2xsYXBzZUNsYXNzOiAnZmEgZmEtY2hldnJvbi1kb3duJyxcclxuICB0b2dnbGVFeHBhbmRDbGFzczogJ2ZhIGZhLWNoZXZyb24tcmlnaHQnLFxyXG4gIGVuYWJsZVB1bGxUb1JlZnJlc2g6IGZhbHNlLFxyXG5cclxuICAvLyBUZW1wbGF0ZXNcclxuICB3aWRnZXRUZW1wbGF0ZTogbmV3IFNpbXBsYXRlKFtcclxuICAgICc8ZGl2IGlkPVwieyU9ICQuaWQgJX1cIiB0aXRsZT1cInslPSAkLnRpdGxlVGV4dCAlfVwiIGNsYXNzPVwib3ZlcnRocm93IGxpc3QgeyU9ICQuY2xzICV9XCIgeyUgaWYgKCQucmVzb3VyY2VLaW5kKSB7ICV9ZGF0YS1yZXNvdXJjZS1raW5kPVwieyU9ICQucmVzb3VyY2VLaW5kICV9XCJ7JSB9ICV9PicsXHJcbiAgICAnPGRpdiBkYXRhLWRvam8tYXR0YWNoLXBvaW50PVwic2VhcmNoTm9kZVwiPjwvZGl2PicsXHJcbiAgICAneyUhICQubmF2aWdhdGlvblRlbXBsYXRlICV9JyxcclxuICAgICc8ZGl2IHN0eWxlPVwiY2xlYXI6Ym90aFwiPjwvZGl2PicsXHJcbiAgICAnPGRpdiBjbGFzcz1cIm1vbnRoLWNvbnRlbnRcIiBkYXRhLWRvam8tYXR0YWNoLXBvaW50PVwibW9udGhOb2RlXCI+JyxcclxuICAgICd7JSEgJC5uYXZCYXJUZW1wbGF0ZSAlfScsXHJcbiAgICAnPGRpdiBjbGFzcz1cIm1vbnRoLWNhbGVuZGFyXCIgZGF0YS1kb2pvLWF0dGFjaC1wb2ludD1cImNvbnRlbnROb2RlXCI+PC9kaXY+JyxcclxuICAgICc8L2Rpdj4nLFxyXG4gICAgJzxkaXYgY2xhc3M9XCJkYXktY29udGVudFwiPicsXHJcbiAgICAnPGgyIGNsYXNzPVwiZGF0ZS1kYXktdGV4dFwiIGRhdGEtZG9qby1hdHRhY2gtcG9pbnQ9XCJkYXlUaXRsZU5vZGVcIj48L2gyPicsXHJcbiAgICAnPGRpdiBjbGFzcz1cImV2ZW50LWNvbnRlbnQgZXZlbnQtaGlkZGVuXCIgZGF0YS1kb2pvLWF0dGFjaC1wb2ludD1cImV2ZW50Q29udGFpbmVyTm9kZVwiPicsXHJcbiAgICAnPGgyIGRhdGEtYWN0aW9uPVwidG9nZ2xlR3JvdXBcIj48YnV0dG9uIGRhdGEtZG9qby1hdHRhY2gtcG9pbnQ9XCJjb2xsYXBzZUJ1dHRvblwiIGNsYXNzPVwieyU9ICQkLnRvZ2dsZUNvbGxhcHNlQ2xhc3MgJX1cIiBhcmlhLWxhYmVsPVwieyU6ICQkLnRvZ2dsZUNvbGxhcHNlVGV4dCAlfVwiPjwvYnV0dG9uPnslPSAkLmV2ZW50SGVhZGVyVGV4dCAlfTwvaDI+JyxcclxuICAgICc8dWwgY2xhc3M9XCJsaXN0LWNvbnRlbnRcIiBkYXRhLWRvam8tYXR0YWNoLXBvaW50PVwiZXZlbnRDb250ZW50Tm9kZVwiPjwvdWw+JyxcclxuICAgICd7JSEgJC5ldmVudE1vcmVUZW1wbGF0ZSAlfScsXHJcbiAgICAnPC9kaXY+JyxcclxuICAgICc8ZGl2IGNsYXNzPVwiYWN0aXZpdHktY29udGVudFwiIGRhdGEtZG9qby1hdHRhY2gtcG9pbnQ9XCJhY3Rpdml0eUNvbnRhaW5lck5vZGVcIj4nLFxyXG4gICAgJzxoMj57JT0gJC5hY3Rpdml0eUhlYWRlclRleHQgJX08L2gyPicsXHJcbiAgICAnPHVsIGNsYXNzPVwibGlzdC1jb250ZW50XCIgZGF0YS1kb2pvLWF0dGFjaC1wb2ludD1cImFjdGl2aXR5Q29udGVudE5vZGVcIj48L3VsPicsXHJcbiAgICAneyUhICQuYWN0aXZpdHlNb3JlVGVtcGxhdGUgJX0nLFxyXG4gICAgJzwvZGl2PicsXHJcbiAgICAnPC9kaXY+JyxcclxuICAgICc8ZGl2IHN0eWxlPVwiY2xlYXI6Ym90aFwiPjwvZGl2PicsXHJcbiAgICAnPC9kaXY+JyxcclxuICBdKSxcclxuICBuYXZpZ2F0aW9uVGVtcGxhdGU6IG5ldyBTaW1wbGF0ZShbXHJcbiAgICAnPGRpdiBjbGFzcz1cInNwbGl0LWJ1dHRvbnNcIj4nLFxyXG4gICAgJzxidXR0b24gZGF0YS10b29sPVwidG9kYXlcIiBkYXRhLWFjdGlvbj1cImdldFRvZGF5TW9udGhBY3Rpdml0aWVzXCIgY2xhc3M9XCJidXR0b25cIj57JTogJC50b2RheVRleHQgJX08L2J1dHRvbj4nLFxyXG4gICAgJzxidXR0b24gZGF0YS10b29sPVwic2VsZWN0ZGF0ZVwiIGRhdGEtYWN0aW9uPVwic2VsZWN0RGF0ZVwiIGNsYXNzPVwiYnV0dG9uIGZhIGZhLWNhbGVuZGFyXCI+PHNwYW4+PC9zcGFuPjwvYnV0dG9uPicsXHJcbiAgICAnPGJ1dHRvbiBkYXRhLXRvb2w9XCJkYXlcIiBkYXRhLWFjdGlvbj1cIm5hdmlnYXRlVG9EYXlWaWV3XCIgY2xhc3M9XCJidXR0b25cIj57JTogJC5kYXlUZXh0ICV9PC9idXR0b24+JyxcclxuICAgICc8YnV0dG9uIGRhdGEtdG9vbD1cIndlZWtcIiBkYXRhLWFjdGlvbj1cIm5hdmlnYXRlVG9XZWVrVmlld1wiIGNsYXNzPVwiYnV0dG9uXCI+eyU6ICQud2Vla1RleHQgJX08L2J1dHRvbj4nLFxyXG4gICAgJzxidXR0b24gZGF0YS10b29sPVwibW9udGhcIiBjbGFzcz1cImJ1dHRvbiBjdXJyZW50XCI+eyU6ICQubW9udGhUZXh0ICV9PC9idXR0b24+JyxcclxuICAgICc8L2Rpdj4nLFxyXG4gIF0pLFxyXG4gIG5hdkJhclRlbXBsYXRlOiBuZXcgU2ltcGxhdGUoW1xyXG4gICAgJzxkaXYgY2xhc3M9XCJuYXYtYmFyXCI+JyxcclxuICAgICc8YnV0dG9uIGRhdGEtdG9vbD1cIm5leHRcIiBkYXRhLWFjdGlvbj1cImdvVG9OZXh0TW9udGhcIiBjbGFzcz1cImJ1dHRvbiBidXR0b24tbmV4dCBmYSBmYS1hcnJvdy1yaWdodCBmYS1sZ1wiPjxzcGFuPjwvc3Bhbj48L2J1dHRvbj4nLFxyXG4gICAgJzxidXR0b24gZGF0YS10b29sPVwicHJldlwiIGRhdGEtYWN0aW9uPVwiZ29Ub1ByZXZpb3VzTW9udGhcIiBjbGFzcz1cImJ1dHRvbiBidXR0b24tcHJldiBmYSBmYS1hcnJvdy1sZWZ0IGZhLWxnXCI+PHNwYW4+PC9zcGFuPjwvYnV0dG9uPicsXHJcbiAgICAnPGgzIGNsYXNzPVwiZGF0ZS10ZXh0XCIgZGF0YS1kb2pvLWF0dGFjaC1wb2ludD1cImRhdGVOb2RlXCI+PC9oMz4nLFxyXG4gICAgJzwvZGl2PicsXHJcbiAgXSksXHJcbiAgYWN0aXZpdHlSb3dUZW1wbGF0ZTogbmV3IFNpbXBsYXRlKFtcclxuICAgICc8bGkgZGF0YS1hY3Rpb249XCJhY3RpdmF0ZUVudHJ5XCIgZGF0YS1rZXk9XCJ7JT0gJC4ka2V5ICV9XCIgZGF0YS1kZXNjcmlwdG9yPVwieyU6ICQuJGRlc2NyaXB0b3IgJX1cIiBkYXRhLWFjdGl2aXR5LXR5cGU9XCJ7JTogJC5UeXBlICV9XCI+JyxcclxuICAgICc8dGFibGUgY2xhc3M9XCJjYWxlbmRhci1lbnRyeS10YWJsZVwiPjx0cj4nLFxyXG4gICAgJzx0ZCBjbGFzcz1cImVudHJ5LXRhYmxlLWljb25cIj4nLFxyXG4gICAgJzxidXR0b24gZGF0YS1hY3Rpb249XCJzZWxlY3RFbnRyeVwiIGNsYXNzPVwibGlzdC1pdGVtLXNlbGVjdG9yIGJ1dHRvbiB7JT0gJCQuYWN0aXZpdHlJY29uQnlUeXBlWyQuVHlwZV0gJX1cIj4nLFxyXG4gICAgJzwvYnV0dG9uPicsXHJcbiAgICAnPC90ZD4nLFxyXG4gICAgJzx0ZCBjbGFzcz1cImVudHJ5LXRhYmxlLXRpbWVcIj57JSEgJCQuYWN0aXZpdHlUaW1lVGVtcGxhdGUgJX08L3RkPicsXHJcbiAgICAnPHRkIGNsYXNzPVwiZW50cnktdGFibGUtZGVzY3JpcHRpb25cIj57JSEgJCQuYWN0aXZpdHlJdGVtVGVtcGxhdGUgJX08L3RkPicsXHJcbiAgICAnPC90cj48L3RhYmxlPicsXHJcbiAgICAnPC9saT4nLFxyXG4gIF0pLFxyXG4gIGV2ZW50Um93VGVtcGxhdGU6IG5ldyBTaW1wbGF0ZShbXHJcbiAgICAnPGxpIGRhdGEtYWN0aW9uPVwiYWN0aXZhdGVFbnRyeVwiIGRhdGEta2V5PVwieyU9ICQuJGtleSAlfVwiIGRhdGEtZGVzY3JpcHRvcj1cInslOiAkLiRkZXNjcmlwdG9yICV9XCIgZGF0YS1hY3Rpdml0eS10eXBlPVwiRXZlbnRcIj4nLFxyXG4gICAgJzx0YWJsZSBjbGFzcz1cImNhbGVuZGFyLWVudHJ5LXRhYmxlXCI+PHRyPicsXHJcbiAgICAnPHRkIGNsYXNzPVwiZW50cnktdGFibGUtaWNvblwiPicsXHJcbiAgICAnPGJ1dHRvbiBkYXRhLWFjdGlvbj1cInNlbGVjdEVudHJ5XCIgY2xhc3M9XCJsaXN0LWl0ZW0tc2VsZWN0b3IgYnV0dG9uIHslPSAkJC5ldmVudEljb24gJX1cIj4nLFxyXG4gICAgJzwvYnV0dG9uPicsXHJcbiAgICAnPC90ZD4nLFxyXG4gICAgJzx0ZCBjbGFzcz1cImVudHJ5LXRhYmxlLWRlc2NyaXB0aW9uXCI+eyUhICQkLmV2ZW50SXRlbVRlbXBsYXRlICV9PC90ZD4nLFxyXG4gICAgJzwvdHI+PC90YWJsZT4nLFxyXG4gICAgJzwvbGk+JyxcclxuICBdKSxcclxuICBhY3Rpdml0eVRpbWVUZW1wbGF0ZTogbmV3IFNpbXBsYXRlKFtcclxuICAgICd7JSBpZiAoJC5UaW1lbGVzcykgeyAlfScsXHJcbiAgICAnPHNwYW4gY2xhc3M9XCJwLXRpbWVcIj57JT0gJCQuYWxsRGF5VGV4dCAlfTwvc3Bhbj4nLFxyXG4gICAgJ3slIH0gZWxzZSB7ICV9JyxcclxuICAgICc8c3BhbiBjbGFzcz1cInAtdGltZVwiPnslOiBjcm0uRm9ybWF0LmRhdGUoJC5TdGFydERhdGUsICQkLnN0YXJ0VGltZUZvcm1hdFRleHQpICV9PC9zcGFuPicsXHJcbiAgICAneyUgfSAlfScsXHJcbiAgXSksXHJcbiAgYWN0aXZpdHlJdGVtVGVtcGxhdGU6IG5ldyBTaW1wbGF0ZShbXHJcbiAgICAnPGgzIGNsYXNzPVwicC1kZXNjcmlwdGlvblwiPnslOiAkLkRlc2NyaXB0aW9uICV9PC9oMz4nLFxyXG4gICAgJzxoND57JT0gJCQuYWN0aXZpdHlOYW1lVGVtcGxhdGUuYXBwbHkoJCkgJX08L2g0PicsXHJcbiAgXSksXHJcbiAgZXZlbnRJdGVtVGVtcGxhdGU6IG5ldyBTaW1wbGF0ZShbXHJcbiAgICAnPGgzIGNsYXNzPVwicC1kZXNjcmlwdGlvblwiPnslOiAkLkRlc2NyaXB0aW9uICV9ICh7JTogJC5UeXBlICV9KTwvaDM+JyxcclxuICAgICc8aDQ+eyUhICQkLmV2ZW50TmFtZVRlbXBsYXRlICV9PC9oND4nLFxyXG4gIF0pLFxyXG4gIGFjdGl2aXR5TmFtZVRlbXBsYXRlOiBuZXcgU2ltcGxhdGUoW1xyXG4gICAgJ3slIGlmICgkLkNvbnRhY3ROYW1lKSB7ICV9JyxcclxuICAgICd7JTogJC5Db250YWN0TmFtZSAlfSAvIHslOiAkLkFjY291bnROYW1lICV9JyxcclxuICAgICd7JSB9IGVsc2UgaWYgKCQuQWNjb3VudE5hbWUpIHsgJX0nLFxyXG4gICAgJ3slOiAkLkFjY291bnROYW1lICV9JyxcclxuICAgICd7JSB9IGVsc2UgeyAlfScsXHJcbiAgICAneyU6ICQuTGVhZE5hbWUgJX0nLFxyXG4gICAgJ3slIH0gJX0nLFxyXG4gIF0pLFxyXG4gIGV2ZW50TmFtZVRlbXBsYXRlOiBuZXcgU2ltcGxhdGUoW1xyXG4gICAgJ3slOiBjcm0uRm9ybWF0LmRhdGUoJC5TdGFydERhdGUsICQkLmV2ZW50RGF0ZUZvcm1hdFRleHQpICV9JyxcclxuICAgICcmbmJzcDstJm5ic3A7JyxcclxuICAgICd7JTogY3JtLkZvcm1hdC5kYXRlKCQuRW5kRGF0ZSwgJCQuZXZlbnREYXRlRm9ybWF0VGV4dCkgJX0nLFxyXG4gIF0pLFxyXG4gIGFjdGl2aXR5TW9yZVRlbXBsYXRlOiBuZXcgU2ltcGxhdGUoW1xyXG4gICAgJzxkaXYgY2xhc3M9XCJsaXN0LW1vcmVcIiBkYXRhLWRvam8tYXR0YWNoLXBvaW50PVwiYWN0aXZpdHlNb3JlTm9kZVwiPicsXHJcbiAgICAnPGJ1dHRvbiBjbGFzcz1cImJ1dHRvblwiIGRhdGEtYWN0aW9uPVwiYWN0aXZhdGVBY3Rpdml0eU1vcmVcIj4nLFxyXG4gICAgJzxzcGFuIGRhdGEtZG9qby1hdHRhY2gtcG9pbnQ9XCJhY3Rpdml0eVJlbWFpbmluZ0NvbnRlbnROb2RlXCI+eyU9ICQuY291bnRNb3JlVGV4dCAlfTwvc3Bhbj4nLFxyXG4gICAgJzwvYnV0dG9uPicsXHJcbiAgICAnPC9kaXY+JyxcclxuICBdKSxcclxuICBldmVudE1vcmVUZW1wbGF0ZTogbmV3IFNpbXBsYXRlKFtcclxuICAgICc8ZGl2IGNsYXNzPVwibGlzdC1tb3JlXCIgZGF0YS1kb2pvLWF0dGFjaC1wb2ludD1cImV2ZW50TW9yZU5vZGVcIj4nLFxyXG4gICAgJzxidXR0b24gY2xhc3M9XCJidXR0b25cIiBkYXRhLWFjdGlvbj1cImFjdGl2YXRlRXZlbnRNb3JlXCI+JyxcclxuICAgICc8c3BhbiBkYXRhLWRvam8tYXR0YWNoLXBvaW50PVwiZXZlbnRSZW1haW5pbmdDb250ZW50Tm9kZVwiPnslPSAkLmNvdW50TW9yZVRleHQgJX08L3NwYW4+JyxcclxuICAgICc8L2J1dHRvbj4nLFxyXG4gICAgJzwvZGl2PicsXHJcbiAgXSksXHJcbiAgY2FsZW5kYXJTdGFydFRlbXBsYXRlOiAnPHRhYmxlIGNsYXNzPVwib2xkLWNhbGVuZGFyLXRhYmxlXCI+JyxcclxuICBjYWxlbmRhcldlZWtIZWFkZXJTdGFydFRlbXBsYXRlOiAnPHRyIGNsYXNzPVwib2xkLWNhbGVuZGFyLXdlZWstaGVhZGVyXCI+JyxcclxuICBjYWxlbmRhcldlZWtIZWFkZXJUZW1wbGF0ZTogJzx0ZCBjbGFzcz1cIm9sZC1jYWxlbmRhci13ZWVrZGF5XCI+JHswfTwvdGQ+JyxcclxuICBjYWxlbmRhcldlZWtIZWFkZXJFbmRUZW1wbGF0ZTogJzwvdHI+JyxcclxuICBjYWxlbmRhcldlZWtTdGFydFRlbXBsYXRlOiAnPHRyIGNsYXNzPVwib2xkLWNhbGVuZGFyLXdlZWtcIj4nLFxyXG4gIGNhbGVuZGFyRW1wdHlEYXlUZW1wbGF0ZTogJzx0ZD4mbmJzcDs8L3RkPicsXHJcbiAgY2FsZW5kYXJEYXlUZW1wbGF0ZTogJzx0ZCBjbGFzcz1cIm9sZC1jYWxlbmRhci1kYXkgJHsxfVwiIGRhdGEtYWN0aW9uPVwic2VsZWN0RGF5XCIgZGF0YS1kYXRlPVwiJHsyfVwiPiR7MH08L3RkPicsXHJcbiAgY2FsZW5kYXJXZWVrRW5kVGVtcGxhdGU6ICc8L3RyPicsXHJcbiAgY2FsZW5kYXJFbmRUZW1wbGF0ZTogJzwvdGFibGU+JyxcclxuICBjYWxlbmRhckFjdGl2aXR5Q291bnRUZW1wbGF0ZTogJzxzcGFuIGNsYXNzPVwib2xkLWFjdGl2aXR5LWNvdW50XCIgdGl0bGU9XCIkezB9IGV2ZW50c1wiPiR7MH08L3NwYW4+JyxcclxuXHJcbiAgYXR0cmlidXRlTWFwOiB7XHJcbiAgICBjYWxlbmRhckNvbnRlbnQ6IHtcclxuICAgICAgbm9kZTogJ2NvbnRlbnROb2RlJyxcclxuICAgICAgdHlwZTogJ2lubmVySFRNTCcsXHJcbiAgICB9LFxyXG4gICAgZGF0ZUNvbnRlbnQ6IHtcclxuICAgICAgbm9kZTogJ2RhdGVOb2RlJyxcclxuICAgICAgdHlwZTogJ2lubmVySFRNTCcsXHJcbiAgICB9LFxyXG4gICAgZGF5VGl0bGVDb250ZW50OiB7XHJcbiAgICAgIG5vZGU6ICdkYXlUaXRsZU5vZGUnLFxyXG4gICAgICB0eXBlOiAnaW5uZXJIVE1MJyxcclxuICAgIH0sXHJcbiAgICBhY3Rpdml0eUNvbnRlbnQ6IHtcclxuICAgICAgbm9kZTogJ2FjdGl2aXR5Q29udGVudE5vZGUnLFxyXG4gICAgICB0eXBlOiAnaW5uZXJIVE1MJyxcclxuICAgIH0sXHJcbiAgICBldmVudENvbnRlbnQ6IHtcclxuICAgICAgbm9kZTogJ2V2ZW50Q29udGVudE5vZGUnLFxyXG4gICAgICB0eXBlOiAnaW5uZXJIVE1MJyxcclxuICAgIH0sXHJcbiAgICBldmVudFJlbWFpbmluZ0NvbnRlbnQ6IHtcclxuICAgICAgbm9kZTogJ2V2ZW50UmVtYWluaW5nQ29udGVudE5vZGUnLFxyXG4gICAgICB0eXBlOiAnaW5uZXJIVE1MJyxcclxuICAgIH0sXHJcbiAgICBhY3Rpdml0eVJlbWFpbmluZ0NvbnRlbnQ6IHtcclxuICAgICAgbm9kZTogJ2FjdGl2aXR5UmVtYWluaW5nQ29udGVudE5vZGUnLFxyXG4gICAgICB0eXBlOiAnaW5uZXJIVE1MJyxcclxuICAgIH0sXHJcbiAgfSxcclxuICBldmVudENvbnRhaW5lck5vZGU6IG51bGwsXHJcbiAgYWN0aXZpdHlDb250YWluZXJOb2RlOiBudWxsLFxyXG5cclxuICAvLyBWaWV3IFByb3BlcnRpZXNcclxuICBpZDogJ2NhbGVuZGFyX21vbnRobGlzdCcsXHJcbiAgY2xzOiAnYWN0aXZpdGllcy1mb3ItbW9udGgnLFxyXG4gIGRheVZpZXc6ICdjYWxlbmRhcl9kYXlsaXN0JyxcclxuICBkYXRlUGlja2VyVmlldzogJ2dlbmVyaWNfY2FsZW5kYXInLFxyXG4gIHdlZWtWaWV3OiAnY2FsZW5kYXJfd2Vla2xpc3QnLFxyXG4gIGluc2VydFZpZXc6ICdhY3Rpdml0eV90eXBlc19saXN0JyxcclxuICBhY3Rpdml0eURldGFpbFZpZXc6ICdhY3Rpdml0eV9kZXRhaWwnLFxyXG4gIGV2ZW50RGV0YWlsVmlldzogJ2V2ZW50X2RldGFpbCcsXHJcbiAgZW5hYmxlU2VhcmNoOiBmYWxzZSxcclxuICBleHBvc2U6IGZhbHNlLFxyXG4gIGRhdGVDb3VudHM6IG51bGwsXHJcbiAgY3VycmVudERhdGU6IG51bGwsXHJcblxyXG4gIHBhZ2VTaXplOiA1MDAsXHJcbiAgcXVlcnlXaGVyZTogbnVsbCxcclxuICBxdWVyeU9yZGVyQnk6ICdTdGFydERhdGUgZGVzYycsXHJcbiAgcXVlcnlTZWxlY3Q6IFtcclxuICAgICdTdGFydERhdGUnLFxyXG4gICAgJ1RpbWVsZXNzJyxcclxuICAgICdUeXBlJyxcclxuICBdLFxyXG4gIGZlZWQ6IG51bGwsXHJcbiAgZXZlbnRGZWVkOiBudWxsLFxyXG4gIGVudHJpZXM6IG51bGwsXHJcbiAgc2VsZWN0ZWREYXRlUmVxdWVzdHM6IG51bGwsXHJcbiAgc2VsZWN0ZWREYXRlRXZlbnRSZXF1ZXN0czogbnVsbCxcclxuICBtb250aFJlcXVlc3RzOiBudWxsLFxyXG4gIG1vbnRoRXZlbnRSZXF1ZXN0czogbnVsbCxcclxuXHJcbiAgZXZlbnRQYWdlU2l6ZTogMyxcclxuICBldmVudFF1ZXJ5V2hlcmU6IG51bGwsXHJcbiAgZXZlbnRRdWVyeVNlbGVjdDogW1xyXG4gICAgJ1N0YXJ0RGF0ZScsXHJcbiAgICAnRW5kRGF0ZScsXHJcbiAgICAnRGVzY3JpcHRpb24nLFxyXG4gICAgJ1R5cGUnLFxyXG4gIF0sXHJcblxyXG4gIGFjdGl2aXR5UGFnZVNpemU6IDEwLFxyXG4gIGFjdGl2aXR5UXVlcnlXaGVyZTogbnVsbCxcclxuICBhY3Rpdml0eVF1ZXJ5U2VsZWN0OiBbXHJcbiAgICAnU3RhcnREYXRlJyxcclxuICAgICdEZXNjcmlwdGlvbicsXHJcbiAgICAnVHlwZScsXHJcbiAgICAnQWNjb3VudE5hbWUnLFxyXG4gICAgJ0NvbnRhY3ROYW1lJyxcclxuICAgICdMZWFkSWQnLFxyXG4gICAgJ0xlYWROYW1lJyxcclxuICAgICdVc2VySWQnLFxyXG4gICAgJ1RpbWVsZXNzJyxcclxuICAgICdSZWN1cnJpbmcnLFxyXG4gIF0sXHJcbiAgYWN0aXZpdHlJY29uQnlUeXBlOiB7XHJcbiAgICAnYXRUb0RvJzogJ2ZhIGZhLWxpc3QtdWwnLFxyXG4gICAgJ2F0UGhvbmVDYWxsJzogJ2ZhIGZhLXBob25lJyxcclxuICAgICdhdEFwcG9pbnRtZW50JzogJ2ZhIGZhLWNhbGVuZGFyLW8nLFxyXG4gICAgJ2F0TGl0ZXJhdHVyZSc6ICdmYSBmYS1jYWxlbmRhci1vJyxcclxuICAgICdhdFBlcnNvbmFsJzogJ2ZhIGZhLWNoZWNrLXNxdWFyZS1vJyxcclxuICAgICdhdFF1ZXN0aW9uJzogJ2ZhIGZhLXF1ZXN0aW9uJyxcclxuICAgICdhdE5vdGUnOiAnZmEgZmEtY2FsZW5kYXItbycsXHJcbiAgICAnYXRFTWFpbCc6ICdmYSBmYS1lbnZlbG9wZScsXHJcbiAgfSxcclxuICBldmVudEljb246ICdmYSBmYS1jYWxlbmRhci1vJyxcclxuXHJcbiAgcmVzb3VyY2VLaW5kOiAnYWN0aXZpdGllcycsXHJcblxyXG4gIGNvbnN0cnVjdG9yOiBmdW5jdGlvbiBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMuZmVlZCA9IHt9O1xyXG4gICAgdGhpcy5ldmVudEZlZWQgPSB7fTtcclxuICAgIHRoaXMuZW50cmllcyA9IHt9O1xyXG4gICAgdGhpcy5kYXRlQ291bnRzID0gW107XHJcbiAgfSxcclxuICBfb25SZWZyZXNoOiBmdW5jdGlvbiBfb25SZWZyZXNoKG8pIHtcclxuICAgIHRoaXMuaW5oZXJpdGVkKGFyZ3VtZW50cyk7XHJcbiAgICBpZiAoby5yZXNvdXJjZUtpbmQgPT09ICdhY3Rpdml0aWVzJyB8fCBvLnJlc291cmNlS2luZCA9PT0gJ2V2ZW50cycpIHtcclxuICAgICAgdGhpcy5yZWZyZXNoUmVxdWlyZWQgPSB0cnVlO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgY2xlYXI6IGZ1bmN0aW9uIGNsZWFyKCkge30sXHJcbiAgc3RhcnR1cDogZnVuY3Rpb24gc3RhcnR1cCgpIHtcclxuICAgIHRoaXMuaW5oZXJpdGVkKGFyZ3VtZW50cyk7XHJcbiAgICB0aGlzLmN1cnJlbnREYXRlID0gbW9tZW50KClcclxuICAgICAgLnN0YXJ0T2YoJ2RheScpO1xyXG4gIH0sXHJcbiAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XHJcbiAgICB0aGlzLmluaGVyaXRlZChhcmd1bWVudHMpO1xyXG4gICAgdGhpcy5yZW5kZXJDYWxlbmRhcigpO1xyXG4gIH0sXHJcbiAgYWN0aXZhdGVBY3Rpdml0eU1vcmU6IGZ1bmN0aW9uIGFjdGl2YXRlQWN0aXZpdHlNb3JlKCkge1xyXG4gICAgdGhpcy5uYXZpZ2F0ZVRvRGF5VmlldygpO1xyXG4gIH0sXHJcbiAgYWN0aXZhdGVFdmVudE1vcmU6IGZ1bmN0aW9uIGFjdGl2YXRlRXZlbnRNb3JlKCkge1xyXG4gICAgY29uc3QgdmlldyA9IEFwcC5nZXRWaWV3KCdldmVudF9yZWxhdGVkJyk7XHJcbiAgICBjb25zdCB3aGVyZSA9IHRoaXMuZ2V0U2VsZWN0ZWREYXRlRXZlbnRRdWVyeSgpO1xyXG4gICAgaWYgKHZpZXcpIHtcclxuICAgICAgdmlldy5zaG93KHtcclxuICAgICAgICAnd2hlcmUnOiB3aGVyZSxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfSxcclxuICB0b2dnbGVHcm91cDogZnVuY3Rpb24gdG9nZ2xlR3JvdXAocGFyYW1zKSB7XHJcbiAgICBjb25zdCBub2RlID0gcGFyYW1zLiRzb3VyY2U7XHJcbiAgICBpZiAobm9kZSAmJiBub2RlLnBhcmVudE5vZGUpIHtcclxuICAgICAgZG9tQ2xhc3MudG9nZ2xlKG5vZGUsICdjb2xsYXBzZWQnKTtcclxuICAgICAgZG9tQ2xhc3MudG9nZ2xlKG5vZGUucGFyZW50Tm9kZSwgJ2NvbGxhcHNlZC1ldmVudCcpO1xyXG5cclxuICAgICAgY29uc3QgYnV0dG9uID0gdGhpcy5jb2xsYXBzZUJ1dHRvbjtcclxuXHJcbiAgICAgIGlmIChidXR0b24pIHtcclxuICAgICAgICBkb21DbGFzcy50b2dnbGUoYnV0dG9uLCB0aGlzLnRvZ2dsZUNvbGxhcHNlQ2xhc3MpO1xyXG4gICAgICAgIGRvbUNsYXNzLnRvZ2dsZShidXR0b24sIHRoaXMudG9nZ2xlRXhwYW5kQ2xhc3MpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSxcclxuICBzZWxlY3REYXk6IGZ1bmN0aW9uIHNlbGVjdERheShwYXJhbXMsIGV2dCwgZWwpIHtcclxuICAgIGlmICh0aGlzLnNlbGVjdGVkRGF0ZU5vZGUpIHtcclxuICAgICAgZG9tQ2xhc3MucmVtb3ZlKHRoaXMuc2VsZWN0ZWREYXRlTm9kZSwgJ3NlbGVjdGVkJyk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zZWxlY3RlZERhdGVOb2RlID0gZWw7XHJcbiAgICBkb21DbGFzcy5hZGQoZWwsICdzZWxlY3RlZCcpO1xyXG5cclxuICAgIHRoaXMuY3VycmVudERhdGUgPSBtb21lbnQocGFyYW1zLmRhdGUsICdZWVlZLU1NLUREJyk7XHJcbiAgICB0aGlzLmdldFNlbGVjdGVkRGF0ZSgpO1xyXG4gIH0sXHJcbiAgZ2V0Rmlyc3REYXlPZkN1cnJlbnRNb250aDogZnVuY3Rpb24gZ2V0Rmlyc3REYXlPZkN1cnJlbnRNb250aCgpIHtcclxuICAgIHJldHVybiB0aGlzLmN1cnJlbnREYXRlLmNsb25lKClcclxuICAgICAgLnN0YXJ0T2YoJ21vbnRoJyk7XHJcbiAgfSxcclxuICBnZXRMYXN0RGF5T2ZDdXJyZW50TW9udGg6IGZ1bmN0aW9uIGdldExhc3REYXlPZkN1cnJlbnRNb250aCgpIHtcclxuICAgIHJldHVybiB0aGlzLmN1cnJlbnREYXRlLmNsb25lKClcclxuICAgICAgLmVuZE9mKCdtb250aCcpO1xyXG4gIH0sXHJcbiAgZ2V0VG9kYXlNb250aEFjdGl2aXRpZXM6IGZ1bmN0aW9uIGdldFRvZGF5TW9udGhBY3Rpdml0aWVzKCkge1xyXG4gICAgY29uc3QgdG9kYXkgPSBtb21lbnQoKVxyXG4gICAgICAuc3RhcnRPZignZGF5Jyk7XHJcblxyXG4gICAgaWYgKHRoaXMuY3VycmVudERhdGUuZm9ybWF0KCdZWVlZLU1NJykgPT09IHRvZGF5LmZvcm1hdCgnWVlZWS1NTScpKSB7XHJcbiAgICAgIHRoaXMuY3VycmVudERhdGUgPSB0b2RheTtcclxuICAgICAgdGhpcy5oaWdobGlnaHRDdXJyZW50RGF0ZSgpO1xyXG4gICAgICB0aGlzLmdldFNlbGVjdGVkRGF0ZSgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5jdXJyZW50RGF0ZSA9IHRvZGF5O1xyXG4gICAgICB0aGlzLnJlZnJlc2goKTtcclxuICAgIH1cclxuICB9LFxyXG4gIGdvVG9OZXh0TW9udGg6IGZ1bmN0aW9uIGdvVG9OZXh0TW9udGgoKSB7XHJcbiAgICB0aGlzLmN1cnJlbnREYXRlLmFkZCh7XHJcbiAgICAgIG1vbnRoczogMSxcclxuICAgIH0pO1xyXG4gICAgdGhpcy5yZWZyZXNoKCk7XHJcbiAgfSxcclxuICBnb1RvUHJldmlvdXNNb250aDogZnVuY3Rpb24gZ29Ub1ByZXZpb3VzTW9udGgoKSB7XHJcbiAgICB0aGlzLmN1cnJlbnREYXRlLnN1YnRyYWN0KHtcclxuICAgICAgbW9udGhzOiAxLFxyXG4gICAgfSk7XHJcbiAgICB0aGlzLnJlZnJlc2goKTtcclxuICB9LFxyXG4gIHJlZnJlc2g6IGZ1bmN0aW9uIHJlZnJlc2goKSB7XHJcbiAgICB0aGlzLnJlbmRlckNhbGVuZGFyKCk7XHJcbiAgICB0aGlzLnF1ZXJ5V2hlcmUgPSB0aGlzLmdldEFjdGl2aXR5UXVlcnkoKTtcclxuICAgIHRoaXMuZmVlZCA9IG51bGw7XHJcbiAgICB0aGlzLmV2ZW50RmVlZCA9IG51bGw7XHJcbiAgICB0aGlzLmRhdGVDb3VudHMgPSBbXTtcclxuICAgIHRoaXMucmVxdWVzdERhdGEoKTtcclxuICAgIHRoaXMucmVxdWVzdEV2ZW50RGF0YSgpO1xyXG4gIH0sXHJcbiAgcmVxdWVzdERhdGE6IGZ1bmN0aW9uIHJlcXVlc3REYXRhKCkge1xyXG4gICAgdGhpcy5jYW5jZWxSZXF1ZXN0cyh0aGlzLm1vbnRoUmVxdWVzdHMpO1xyXG4gICAgdGhpcy5tb250aFJlcXVlc3RzID0gW107XHJcblxyXG4gICAgY29uc3QgcmVxdWVzdCA9IHRoaXMuY3JlYXRlUmVxdWVzdCgpO1xyXG4gICAgcmVxdWVzdC5zZXRDb250cmFjdE5hbWUodGhpcy5jb250cmFjdE5hbWUgfHwgJ3N5c3RlbScpO1xyXG5cclxuICAgIGNvbnN0IHhociA9IHJlcXVlc3QucmVhZCh7XHJcbiAgICAgIHN1Y2Nlc3M6IHRoaXMub25SZXF1ZXN0RGF0YVN1Y2Nlc3MsXHJcbiAgICAgIGZhaWx1cmU6IHRoaXMub25SZXF1ZXN0RGF0YUZhaWx1cmUsXHJcbiAgICAgIGFib3J0ZWQ6IHRoaXMub25SZXF1ZXN0RGF0YUFib3J0ZWQsXHJcbiAgICAgIHNjb3BlOiB0aGlzLFxyXG4gICAgfSk7XHJcbiAgICB0aGlzLm1vbnRoUmVxdWVzdHMucHVzaCh4aHIpO1xyXG4gIH0sXHJcbiAgY3JlYXRlRXZlbnRSZXF1ZXN0OiBmdW5jdGlvbiBjcmVhdGVFdmVudFJlcXVlc3QoKSB7XHJcbiAgICBjb25zdCBxdWVyeVNlbGVjdCA9IHRoaXMuZXZlbnRRdWVyeVNlbGVjdDtcclxuICAgIGNvbnN0IHF1ZXJ5V2hlcmUgPSB0aGlzLmdldEV2ZW50UXVlcnkoKTtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgU2FnZS5TRGF0YS5DbGllbnQuU0RhdGFSZXNvdXJjZUNvbGxlY3Rpb25SZXF1ZXN0KHRoaXMuZ2V0U2VydmljZSgpKVxyXG4gICAgICAuc2V0Q291bnQodGhpcy5wYWdlU2l6ZSlcclxuICAgICAgLnNldFN0YXJ0SW5kZXgoMSlcclxuICAgICAgLnNldFJlc291cmNlS2luZCgnZXZlbnRzJylcclxuICAgICAgLnNldFF1ZXJ5QXJnKFNhZ2UuU0RhdGEuQ2xpZW50LlNEYXRhVXJpLlF1ZXJ5QXJnTmFtZXMuU2VsZWN0LCB0aGlzLmV4cGFuZEV4cHJlc3Npb24ocXVlcnlTZWxlY3QpXHJcbiAgICAgICAgLmpvaW4oJywnKSlcclxuICAgICAgLnNldFF1ZXJ5QXJnKFNhZ2UuU0RhdGEuQ2xpZW50LlNEYXRhVXJpLlF1ZXJ5QXJnTmFtZXMuV2hlcmUsIHF1ZXJ5V2hlcmUpO1xyXG5cclxuICAgIHJldHVybiByZXF1ZXN0O1xyXG4gIH0sXHJcbiAgcmVxdWVzdEV2ZW50RGF0YTogZnVuY3Rpb24gcmVxdWVzdEV2ZW50RGF0YSgpIHtcclxuICAgIHRoaXMuY2FuY2VsUmVxdWVzdHModGhpcy5tb250aEV2ZW50UmVxdWVzdHMpO1xyXG4gICAgdGhpcy5tb250aEV2ZW50UmVxdWVzdHMgPSBbXTtcclxuXHJcbiAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5jcmVhdGVFdmVudFJlcXVlc3QoKTtcclxuICAgIGNvbnN0IHhociA9IHJlcXVlc3QucmVhZCh7XHJcbiAgICAgIHN1Y2Nlc3M6IHRoaXMub25SZXF1ZXN0RXZlbnREYXRhU3VjY2VzcyxcclxuICAgICAgZmFpbHVyZTogdGhpcy5vblJlcXVlc3RFdmVudERhdGFGYWlsdXJlLFxyXG4gICAgICBhYm9ydGVkOiB0aGlzLm9uUmVxdWVzdEV2ZW50RGF0YUFib3J0ZWQsXHJcbiAgICAgIHNjb3BlOiB0aGlzLFxyXG4gICAgfSk7XHJcbiAgICB0aGlzLm1vbnRoRXZlbnRSZXF1ZXN0cy5wdXNoKHhocik7XHJcbiAgfSxcclxuICBvblJlcXVlc3RFdmVudERhdGFGYWlsdXJlOiBmdW5jdGlvbiBvblJlcXVlc3RFdmVudERhdGFGYWlsdXJlKHJlc3BvbnNlLCBvKSB7XHJcbiAgICBhbGVydChzdHJpbmcuc3Vic3RpdHV0ZSh0aGlzLnJlcXVlc3RFcnJvclRleHQsIFtyZXNwb25zZSwgb10pKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxyXG4gICAgRXJyb3JNYW5hZ2VyLmFkZEVycm9yKHJlc3BvbnNlLCBvLCB0aGlzLm9wdGlvbnMsICdmYWlsdXJlJyk7XHJcbiAgfSxcclxuICBvblJlcXVlc3RFdmVudERhdGFBYm9ydGVkOiBmdW5jdGlvbiBvblJlcXVlc3RFdmVudERhdGFBYm9ydGVkKCkge1xyXG4gICAgdGhpcy5vcHRpb25zID0gZmFsc2U7IC8vIGZvcmNlIGEgcmVmcmVzaFxyXG4gIH0sXHJcbiAgb25SZXF1ZXN0RXZlbnREYXRhU3VjY2VzczogZnVuY3Rpb24gb25SZXF1ZXN0RXZlbnREYXRhU3VjY2VzcyhmZWVkKSB7XHJcbiAgICB0aGlzLnByb2Nlc3NFdmVudEZlZWQoZmVlZCk7XHJcbiAgfSxcclxuICBnZXRBY3Rpdml0eVF1ZXJ5OiBmdW5jdGlvbiBnZXRBY3Rpdml0eVF1ZXJ5KCkge1xyXG4gICAgY29uc3Qgc3RhcnREYXRlID0gdGhpcy5nZXRGaXJzdERheU9mQ3VycmVudE1vbnRoKCk7XHJcbiAgICBjb25zdCBlbmREYXRlID0gdGhpcy5nZXRMYXN0RGF5T2ZDdXJyZW50TW9udGgoKTtcclxuICAgIHJldHVybiBzdHJpbmcuc3Vic3RpdHV0ZShcclxuICAgICAgW1xyXG4gICAgICAgICdVc2VyQWN0aXZpdGllcy5Vc2VySWQgZXEgXCIkezB9XCIgYW5kIFR5cGUgbmUgXCJhdExpdGVyYXR1cmVcIiBhbmQgKCcsXHJcbiAgICAgICAgJyhUaW1lbGVzcyBlcSBmYWxzZSBhbmQgU3RhcnREYXRlJyxcclxuICAgICAgICAnIGJldHdlZW4gQCR7MX1AIGFuZCBAJHsyfUApIG9yICcsXHJcbiAgICAgICAgJyhUaW1lbGVzcyBlcSB0cnVlIGFuZCBTdGFydERhdGUnLFxyXG4gICAgICAgICcgYmV0d2VlbiBAJHszfUAgYW5kIEAkezR9QCkpJyxcclxuICAgICAgXS5qb2luKCcnKSwgW0FwcC5jb250ZXh0LnVzZXIgJiYgQXBwLmNvbnRleHQudXNlci4ka2V5LFxyXG4gICAgICAgIGNvbnZlcnQudG9Jc29TdHJpbmdGcm9tRGF0ZShzdGFydERhdGUudG9EYXRlKCkpLFxyXG4gICAgICAgIGNvbnZlcnQudG9Jc29TdHJpbmdGcm9tRGF0ZShlbmREYXRlLnRvRGF0ZSgpKSxcclxuICAgICAgICBzdGFydERhdGUuZm9ybWF0KCdZWVlZLU1NLUREVDAwOjAwOjAwW1pdJyksXHJcbiAgICAgICAgZW5kRGF0ZS5mb3JtYXQoJ1lZWVktTU0tRERUMjM6NTk6NTlbWl0nKSxcclxuICAgICAgXVxyXG4gICAgKTtcclxuICB9LFxyXG4gIGdldEV2ZW50UXVlcnk6IGZ1bmN0aW9uIGdldEV2ZW50UXVlcnkoKSB7XHJcbiAgICBjb25zdCBzdGFydERhdGUgPSB0aGlzLmdldEZpcnN0RGF5T2ZDdXJyZW50TW9udGgoKTtcclxuICAgIGNvbnN0IGVuZERhdGUgPSB0aGlzLmdldExhc3REYXlPZkN1cnJlbnRNb250aCgpO1xyXG4gICAgcmV0dXJuIHN0cmluZy5zdWJzdGl0dXRlKFxyXG4gICAgICBbXHJcbiAgICAgICAgJ1VzZXJJZCBlcSBcIiR7MH1cIiBhbmQgKCcsXHJcbiAgICAgICAgJyhTdGFydERhdGUgZ3QgQCR7MX1AIG9yIEVuZERhdGUgZ3QgQCR7MX1AKSBhbmQgJyxcclxuICAgICAgICAnU3RhcnREYXRlIGx0IEAkezJ9QCcsXHJcbiAgICAgICAgJyknLFxyXG4gICAgICBdLmpvaW4oJycpLCBbQXBwLmNvbnRleHQudXNlciAmJiBBcHAuY29udGV4dC51c2VyLiRrZXksXHJcbiAgICAgICAgY29udmVydC50b0lzb1N0cmluZ0Zyb21EYXRlKHN0YXJ0RGF0ZS50b0RhdGUoKSksXHJcbiAgICAgICAgY29udmVydC50b0lzb1N0cmluZ0Zyb21EYXRlKGVuZERhdGUudG9EYXRlKCkpLFxyXG4gICAgICBdXHJcbiAgICApO1xyXG4gIH0sXHJcbiAgcHJvY2Vzc0ZlZWQ6IGZ1bmN0aW9uIHByb2Nlc3NGZWVkKGZlZWQpIHtcclxuICAgIGlmICghZmVlZCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgciA9IGZlZWQuJHJlc291cmNlcztcclxuICAgIHRoaXMuZmVlZCA9IGZlZWQ7XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IHJvdyA9IHJbaV07XHJcblxyXG4gICAgICAvLyBQcmVzZXJ2ZSB0aGUgaXNFdmVudCBmbGFnIGlmIHdlIGhhdmUgYW4gZXhpc3RpbmcgZW50cnkgZm9yIGl0IGFscmVhZHksXHJcbiAgICAgIC8vIHRoZSBvcmRlciBvZiBwcm9jZXNzRmVlZCBhbmQgcHJvY2Vzc0V2ZW50RmVlZCBpcyBub3QgcHJlZGljdGFibGVcclxuICAgICAgcm93LmlzRXZlbnQgPSB0aGlzLmVudHJpZXNbcm93LiRrZXldICYmIHRoaXMuZW50cmllc1tyb3cuJGtleV0uaXNFdmVudDtcclxuXHJcbiAgICAgIHRoaXMuZW50cmllc1tyb3cuJGtleV0gPSByb3c7XHJcblxyXG4gICAgICBjb25zdCBzdGFydERheSA9IG1vbWVudChjb252ZXJ0LnRvRGF0ZUZyb21TdHJpbmcocm93LlN0YXJ0RGF0ZSkpO1xyXG4gICAgICBpZiAocltpXS5UaW1lbGVzcykge1xyXG4gICAgICAgIHN0YXJ0RGF5LnN1YnRyYWN0KHtcclxuICAgICAgICAgIG1pbnV0ZXM6IHN0YXJ0RGF5LnV0Y09mZnNldCgpLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBkYXRlSW5kZXggPSBzdGFydERheS5mb3JtYXQoJ1lZWVktTU0tREQnKTtcclxuICAgICAgdGhpcy5kYXRlQ291bnRzW2RhdGVJbmRleF0gPSAodGhpcy5kYXRlQ291bnRzW2RhdGVJbmRleF0pID8gdGhpcy5kYXRlQ291bnRzW2RhdGVJbmRleF0gKyAxIDogMTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmhpZ2hsaWdodEFjdGl2aXRpZXMoKTtcclxuICB9LFxyXG4gIHByb2Nlc3NFdmVudEZlZWQ6IGZ1bmN0aW9uIHByb2Nlc3NFdmVudEZlZWQoZmVlZCkge1xyXG4gICAgaWYgKCFmZWVkKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCByID0gZmVlZC4kcmVzb3VyY2VzO1xyXG4gICAgY29uc3QgZmVlZExlbmd0aCA9IHIubGVuZ3RoO1xyXG4gICAgdGhpcy5ldmVudEZlZWQgPSBmZWVkO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmVlZExlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IHJvdyA9IHJbaV07XHJcbiAgICAgIC8vIFByZXNlcnZlIHRoZSBpc0V2ZW50IGZsYWcgaWYgd2UgaGF2ZSBhbiBleGlzdGluZyBlbnRyeSBmb3IgaXQgYWxyZWFkeSxcclxuICAgICAgLy8gdGhlIG9yZGVyIG9mIHByb2Nlc3NGZWVkIGFuZCBwcm9jZXNzRXZlbnRGZWVkIGlzIG5vdCBwcmVkaWN0YWJsZVxyXG4gICAgICByb3cuaXNFdmVudCA9IHRoaXMuZW50cmllc1tyb3cuJGtleV0gJiYgdGhpcy5lbnRyaWVzW3Jvdy4ka2V5XS5pc0V2ZW50O1xyXG4gICAgICB0aGlzLmVudHJpZXNbcm93LiRrZXldID0gcm93O1xyXG5cclxuICAgICAgY29uc3Qgc3RhcnREYXkgPSBtb21lbnQoY29udmVydC50b0RhdGVGcm9tU3RyaW5nKHJvdy5TdGFydERhdGUpKTtcclxuICAgICAgY29uc3QgZW5kRGF5ID0gY29udmVydC50b0RhdGVGcm9tU3RyaW5nKHJvdy5FbmREYXRlKTtcclxuXHJcbiAgICAgIHdoaWxlIChzdGFydERheS52YWx1ZU9mKCkgPD0gZW5kRGF5LnZhbHVlT2YoKSkge1xyXG4gICAgICAgIGNvbnN0IGRhdGVJbmRleCA9IHN0YXJ0RGF5LmZvcm1hdCgnWVlZWS1NTS1ERCcpO1xyXG4gICAgICAgIHRoaXMuZGF0ZUNvdW50c1tkYXRlSW5kZXhdID0gKHRoaXMuZGF0ZUNvdW50c1tkYXRlSW5kZXhdKSA/IHRoaXMuZGF0ZUNvdW50c1tkYXRlSW5kZXhdICsgMSA6IDE7XHJcbiAgICAgICAgc3RhcnREYXkuYWRkKHtcclxuICAgICAgICAgIGRheXM6IDEsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmhpZ2hsaWdodEFjdGl2aXRpZXMoKTtcclxuICB9LFxyXG5cclxuICBoaWdobGlnaHRBY3Rpdml0aWVzOiBmdW5jdGlvbiBoaWdobGlnaHRBY3Rpdml0aWVzKCkge1xyXG4gICAgcXVlcnkoJy5vbGQtY2FsZW5kYXItZGF5JylcclxuICAgICAgLmZvckVhY2goZnVuY3Rpb24gcXVlcnlEYXlzKG5vZGUpIHtcclxuICAgICAgICBjb25zdCBkYXRhRGF0ZSA9IGRvbUF0dHIuZ2V0KG5vZGUsICdkYXRhLWRhdGUnKTtcclxuICAgICAgICBpZiAoIXRoaXMuZGF0ZUNvdW50c1tkYXRhRGF0ZV0pIHtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGRvbUNsYXNzLmFkZChub2RlLCAnYWN0aXZlRGF5Jyk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNvdW50TWFya3VwID0gc3RyaW5nLnN1YnN0aXR1dGUodGhpcy5jYWxlbmRhckFjdGl2aXR5Q291bnRUZW1wbGF0ZSwgW3RoaXMuZGF0ZUNvdW50c1tkYXRhRGF0ZV1dKTtcclxuICAgICAgICBjb25zdCBleGlzdGluZ0NvdW50ID0gcXVlcnkobm9kZSlcclxuICAgICAgICAgIC5jaGlsZHJlbignZGl2Jyk7XHJcblxyXG4gICAgICAgIGlmIChleGlzdGluZ0NvdW50Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIGRvbUNvbnN0cnVjdC5wbGFjZShjb3VudE1hcmt1cCwgZXhpc3RpbmdDb3VudFswXSwgJ29ubHknKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgZG9tQ29uc3RydWN0LnBsYWNlKCc8ZGl2PicgKyBjb3VudE1hcmt1cCArICc8L2Rpdj4nLCBub2RlLCAnZmlyc3QnKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sIHRoaXMpO1xyXG4gIH0sXHJcbiAgc2V0Q3VycmVudERhdGVUaXRsZTogZnVuY3Rpb24gc2V0Q3VycmVudERhdGVUaXRsZSgpIHtcclxuICAgIHRoaXMuc2V0KCdkYXlUaXRsZUNvbnRlbnQnLCB0aGlzLmN1cnJlbnREYXRlLmZvcm1hdCh0aGlzLmRheVRpdGxlRm9ybWF0VGV4dCkpO1xyXG4gIH0sXHJcbiAgaGlkZUV2ZW50TGlzdDogZnVuY3Rpb24gaGlkZUV2ZW50TGlzdCgpIHtcclxuICAgIGRvbUNsYXNzLmFkZCh0aGlzLmV2ZW50Q29udGFpbmVyTm9kZSwgJ2V2ZW50LWhpZGRlbicpO1xyXG4gIH0sXHJcbiAgc2hvd0V2ZW50TGlzdDogZnVuY3Rpb24gc2hvd0V2ZW50TGlzdCgpIHtcclxuICAgIGRvbUNsYXNzLnJlbW92ZSh0aGlzLmV2ZW50Q29udGFpbmVyTm9kZSwgJ2V2ZW50LWhpZGRlbicpO1xyXG4gIH0sXHJcbiAgZ2V0U2VsZWN0ZWREYXRlOiBmdW5jdGlvbiBnZXRTZWxlY3RlZERhdGUoKSB7XHJcbiAgICB0aGlzLmNsZWFyU2VsZWN0ZWREYXRlKCk7XHJcbiAgICB0aGlzLnNldEN1cnJlbnREYXRlVGl0bGUoKTtcclxuICAgIHRoaXMucmVxdWVzdFNlbGVjdGVkRGF0ZUFjdGl2aXRpZXMoKTtcclxuICAgIHRoaXMucmVxdWVzdFNlbGVjdGVkRGF0ZUV2ZW50cygpO1xyXG4gIH0sXHJcbiAgY2xlYXJTZWxlY3RlZERhdGU6IGZ1bmN0aW9uIGNsZWFyU2VsZWN0ZWREYXRlKCkge1xyXG4gICAgZG9tQ2xhc3MuYWRkKHRoaXMuYWN0aXZpdHlDb250YWluZXJOb2RlLCAnbGlzdC1sb2FkaW5nJyk7XHJcbiAgICB0aGlzLnNldCgnYWN0aXZpdHlDb250ZW50JywgdGhpcy5sb2FkaW5nVGVtcGxhdGUuYXBwbHkodGhpcykpO1xyXG4gICAgdGhpcy5oaWRlRXZlbnRMaXN0KCk7XHJcbiAgfSxcclxuICBjYW5jZWxSZXF1ZXN0czogZnVuY3Rpb24gY2FuY2VsUmVxdWVzdHMocmVxdWVzdHMpIHtcclxuICAgIGlmICghcmVxdWVzdHMpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGFycmF5LmZvckVhY2gocmVxdWVzdHMsIGZ1bmN0aW9uIGZvckVhY2goeGhyKSB7XHJcbiAgICAgIGlmICh4aHIpIHsgLy8gaWYgcmVxdWVzdCB3YXMgZnVsZmlsbGVkIGJ5IG9mZmxpbmUgc3RvcmFnZSwgeGhyIHdpbGwgYmUgdW5kZWZpbmVkXHJcbiAgICAgICAgeGhyLmFib3J0KCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH0sXHJcbiAgcmVxdWVzdFNlbGVjdGVkRGF0ZUFjdGl2aXRpZXM6IGZ1bmN0aW9uIHJlcXVlc3RTZWxlY3RlZERhdGVBY3Rpdml0aWVzKCkge1xyXG4gICAgdGhpcy5jYW5jZWxSZXF1ZXN0cyh0aGlzLnNlbGVjdGVkRGF0ZVJlcXVlc3RzKTtcclxuICAgIHRoaXMuc2VsZWN0ZWREYXRlUmVxdWVzdHMgPSBbXTtcclxuXHJcbiAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5jcmVhdGVTZWxlY3RlZERhdGVSZXF1ZXN0KHtcclxuICAgICAgcGFnZVNpemU6IHRoaXMuYWN0aXZpdHlQYWdlU2l6ZSxcclxuICAgICAgcmVzb3VyY2VLaW5kOiAnYWN0aXZpdGllcycsXHJcbiAgICAgIGNvbnRyYWN0TmFtZTogJ3N5c3RlbScsXHJcbiAgICAgIHF1ZXJ5U2VsZWN0OiB0aGlzLmFjdGl2aXR5UXVlcnlTZWxlY3QsXHJcbiAgICAgIHF1ZXJ5V2hlcmU6IHRoaXMuZ2V0U2VsZWN0ZWREYXRlQWN0aXZpdHlRdWVyeSgpLFxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgeGhyID0gcmVxdWVzdC5yZWFkKHtcclxuICAgICAgc3VjY2VzczogdGhpcy5vblJlcXVlc3RTZWxlY3RlZERhdGVBY3Rpdml0eURhdGFTdWNjZXNzLFxyXG4gICAgICBmYWlsdXJlOiB0aGlzLm9uUmVxdWVzdERhdGFGYWlsdXJlLFxyXG4gICAgICBhYm9ydGVkOiB0aGlzLm9uUmVxdWVzdERhdGFBYm9ydGVkLFxyXG4gICAgICBzY29wZTogdGhpcyxcclxuICAgIH0pO1xyXG4gICAgdGhpcy5zZWxlY3RlZERhdGVSZXF1ZXN0cy5wdXNoKHhocik7XHJcbiAgfSxcclxuICByZXF1ZXN0U2VsZWN0ZWREYXRlRXZlbnRzOiBmdW5jdGlvbiByZXF1ZXN0U2VsZWN0ZWREYXRlRXZlbnRzKCkge1xyXG4gICAgdGhpcy5jYW5jZWxSZXF1ZXN0cyh0aGlzLnNlbGVjdGVkRGF0ZUV2ZW50UmVxdWVzdHMpO1xyXG4gICAgdGhpcy5zZWxlY3RlZERhdGVFdmVudFJlcXVlc3RzID0gW107XHJcblxyXG4gICAgY29uc3QgcmVxdWVzdCA9IHRoaXMuY3JlYXRlU2VsZWN0ZWREYXRlUmVxdWVzdCh7XHJcbiAgICAgIHBhZ2VTaXplOiB0aGlzLmV2ZW50UGFnZVNpemUsXHJcbiAgICAgIHJlc291cmNlS2luZDogJ2V2ZW50cycsXHJcbiAgICAgIGNvbnRyYWN0TmFtZTogJ2R5bmFtaWMnLFxyXG4gICAgICBxdWVyeVNlbGVjdDogdGhpcy5ldmVudFF1ZXJ5U2VsZWN0LFxyXG4gICAgICBxdWVyeVdoZXJlOiB0aGlzLmdldFNlbGVjdGVkRGF0ZUV2ZW50UXVlcnkoKSxcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IHhociA9IHJlcXVlc3QucmVhZCh7XHJcbiAgICAgIHN1Y2Nlc3M6IHRoaXMub25SZXF1ZXN0U2VsZWN0ZWREYXRlRXZlbnREYXRhU3VjY2VzcyxcclxuICAgICAgZmFpbHVyZTogdGhpcy5vblJlcXVlc3REYXRhRmFpbHVyZSxcclxuICAgICAgYWJvcnRlZDogdGhpcy5vblJlcXVlc3REYXRhQWJvcnRlZCxcclxuICAgICAgc2NvcGU6IHRoaXMsXHJcbiAgICB9KTtcclxuICAgIHRoaXMuc2VsZWN0ZWREYXRlRXZlbnRSZXF1ZXN0cy5wdXNoKHhocik7XHJcbiAgfSxcclxuICBjcmVhdGVTZWxlY3RlZERhdGVSZXF1ZXN0OiBmdW5jdGlvbiBjcmVhdGVTZWxlY3RlZERhdGVSZXF1ZXN0KG8pIHtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgU2FnZS5TRGF0YS5DbGllbnQuU0RhdGFSZXNvdXJjZUNvbGxlY3Rpb25SZXF1ZXN0KHRoaXMuZ2V0U2VydmljZSgpKVxyXG4gICAgICAuc2V0Q291bnQoby5wYWdlU2l6ZSlcclxuICAgICAgLnNldFN0YXJ0SW5kZXgoMSlcclxuICAgICAgLnNldFJlc291cmNlS2luZChvLnJlc291cmNlS2luZClcclxuICAgICAgLnNldENvbnRyYWN0TmFtZShvLmNvbnRyYWN0TmFtZSB8fCBBcHAuZGVmYXVsdFNlcnZpY2UuZ2V0Q29udHJhY3ROYW1lKClcclxuICAgICAgICAudGV4dClcclxuICAgICAgLnNldFF1ZXJ5QXJnKFNhZ2UuU0RhdGEuQ2xpZW50LlNEYXRhVXJpLlF1ZXJ5QXJnTmFtZXMuT3JkZXJCeSwgby5xdWVyeU9yZGVyQnkgfHwgdGhpcy5xdWVyeU9yZGVyQnkpXHJcbiAgICAgIC5zZXRRdWVyeUFyZyhTYWdlLlNEYXRhLkNsaWVudC5TRGF0YVVyaS5RdWVyeUFyZ05hbWVzLlNlbGVjdCwgdGhpcy5leHBhbmRFeHByZXNzaW9uKG8ucXVlcnlTZWxlY3QpXHJcbiAgICAgICAgLmpvaW4oJywnKSlcclxuICAgICAgLnNldFF1ZXJ5QXJnKFNhZ2UuU0RhdGEuQ2xpZW50LlNEYXRhVXJpLlF1ZXJ5QXJnTmFtZXMuV2hlcmUsIG8ucXVlcnlXaGVyZSk7XHJcbiAgICByZXR1cm4gcmVxdWVzdDtcclxuICB9LFxyXG4gIGdldFNlbGVjdGVkRGF0ZUFjdGl2aXR5UXVlcnk6IGZ1bmN0aW9uIGdldFNlbGVjdGVkRGF0ZUFjdGl2aXR5UXVlcnkoKSB7XHJcbiAgICBjb25zdCBhY3Rpdml0eVF1ZXJ5ID0gW1xyXG4gICAgICAnVXNlckFjdGl2aXRpZXMuVXNlcklkIGVxIFwiJHswfVwiIGFuZCBUeXBlIG5lIFwiYXRMaXRlcmF0dXJlXCIgYW5kICgnLFxyXG4gICAgICAnKFRpbWVsZXNzIGVxIGZhbHNlIGFuZCBTdGFydERhdGUgYmV0d2VlbiBAJHsxfUAgYW5kIEAkezJ9QCkgb3IgJyxcclxuICAgICAgJyhUaW1lbGVzcyBlcSB0cnVlIGFuZCBTdGFydERhdGUgYmV0d2VlbiBAJHszfUAgYW5kIEAkezR9QCkpJyxcclxuICAgIF0uam9pbignJyk7XHJcblxyXG4gICAgY29uc3QgcmVzdWx0cyA9IHN0cmluZy5zdWJzdGl0dXRlKFxyXG4gICAgICBhY3Rpdml0eVF1ZXJ5LCBbQXBwLmNvbnRleHQudXNlciAmJiBBcHAuY29udGV4dC51c2VyLiRrZXksXHJcbiAgICAgICAgY29udmVydC50b0lzb1N0cmluZ0Zyb21EYXRlKHRoaXMuY3VycmVudERhdGUudG9EYXRlKCkpLFxyXG4gICAgICAgIGNvbnZlcnQudG9Jc29TdHJpbmdGcm9tRGF0ZSh0aGlzLmN1cnJlbnREYXRlLmNsb25lKClcclxuICAgICAgICAgIC5lbmRPZignZGF5JylcclxuICAgICAgICAgIC50b0RhdGUoKSksXHJcbiAgICAgICAgdGhpcy5jdXJyZW50RGF0ZS5mb3JtYXQoJ1lZWVktTU0tRERUMDA6MDA6MDBbWl0nKSxcclxuICAgICAgICB0aGlzLmN1cnJlbnREYXRlLmZvcm1hdCgnWVlZWS1NTS1ERFQyMzo1OTo1OVtaXScpLFxyXG4gICAgICBdKTtcclxuXHJcbiAgICByZXR1cm4gcmVzdWx0cztcclxuICB9LFxyXG4gIGdldFNlbGVjdGVkRGF0ZUV2ZW50UXVlcnk6IGZ1bmN0aW9uIGdldFNlbGVjdGVkRGF0ZUV2ZW50UXVlcnkoKSB7XHJcbiAgICByZXR1cm4gc3RyaW5nLnN1YnN0aXR1dGUoXHJcbiAgICAgIFtcclxuICAgICAgICAnVXNlcklkIGVxIFwiJHswfVwiIGFuZCAoJyxcclxuICAgICAgICAnKFN0YXJ0RGF0ZSBndCBAJHsxfUAgb3IgRW5kRGF0ZSBndCBAJHsxfUApIGFuZCAnLFxyXG4gICAgICAgICdTdGFydERhdGUgbHQgQCR7Mn1AJyxcclxuICAgICAgICAnKScsXHJcbiAgICAgIF0uam9pbignJyksIFtcclxuICAgICAgICBBcHAuY29udGV4dC51c2VyICYmIEFwcC5jb250ZXh0LnVzZXIuJGtleSxcclxuICAgICAgICBjb252ZXJ0LnRvSXNvU3RyaW5nRnJvbURhdGUodGhpcy5jdXJyZW50RGF0ZS50b0RhdGUoKSksXHJcbiAgICAgICAgY29udmVydC50b0lzb1N0cmluZ0Zyb21EYXRlKHRoaXMuY3VycmVudERhdGUuY2xvbmUoKVxyXG4gICAgICAgICAgLmVuZE9mKCdkYXknKVxyXG4gICAgICAgICAgLnRvRGF0ZSgpKSxcclxuICAgICAgXVxyXG4gICAgKTtcclxuICB9LFxyXG4gIG9uUmVxdWVzdFNlbGVjdGVkRGF0ZUFjdGl2aXR5RGF0YVN1Y2Nlc3M6IGZ1bmN0aW9uIG9uUmVxdWVzdFNlbGVjdGVkRGF0ZUFjdGl2aXR5RGF0YVN1Y2Nlc3MoZmVlZCkge1xyXG4gICAgaWYgKCFmZWVkKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBkb21DbGFzcy5yZW1vdmUodGhpcy5hY3Rpdml0eUNvbnRhaW5lck5vZGUsICdsaXN0LWxvYWRpbmcnKTtcclxuXHJcbiAgICBjb25zdCByID0gZmVlZC4kcmVzb3VyY2VzO1xyXG4gICAgY29uc3QgZmVlZExlbmd0aCA9IHIubGVuZ3RoO1xyXG4gICAgY29uc3QgbyA9IFtdO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmVlZExlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IHJvdyA9IHJbaV07XHJcbiAgICAgIHJvdy5pc0V2ZW50ID0gZmFsc2U7XHJcbiAgICAgIHRoaXMuZW50cmllc1tyb3cuJGtleV0gPSByb3c7XHJcbiAgICAgIG8ucHVzaCh0aGlzLmFjdGl2aXR5Um93VGVtcGxhdGUuYXBwbHkocm93LCB0aGlzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGZlZWRMZW5ndGggPT09IDApIHtcclxuICAgICAgdGhpcy5zZXQoJ2FjdGl2aXR5Q29udGVudCcsIHRoaXMubm9EYXRhVGVtcGxhdGUuYXBwbHkodGhpcykpO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGZlZWQuJHRvdGFsUmVzdWx0cyA+IGZlZWRMZW5ndGgpIHtcclxuICAgICAgZG9tQ2xhc3MuYWRkKHRoaXMuYWN0aXZpdHlDb250YWluZXJOb2RlLCAnbGlzdC1oYXMtbW9yZScpO1xyXG4gICAgICB0aGlzLnNldCgnYWN0aXZpdHlSZW1haW5pbmdDb250ZW50JywgdGhpcy5jb3VudE1vcmVUZXh0KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGRvbUNsYXNzLnJlbW92ZSh0aGlzLmFjdGl2aXR5Q29udGFpbmVyTm9kZSwgJ2xpc3QtaGFzLW1vcmUnKTtcclxuICAgICAgdGhpcy5zZXQoJ2FjdGl2aXR5UmVtYWluaW5nQ29udGVudCcsICcnKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnNldCgnYWN0aXZpdHlDb250ZW50Jywgby5qb2luKCcnKSk7XHJcbiAgfSxcclxuICBvblJlcXVlc3RTZWxlY3RlZERhdGVFdmVudERhdGFTdWNjZXNzOiBmdW5jdGlvbiBvblJlcXVlc3RTZWxlY3RlZERhdGVFdmVudERhdGFTdWNjZXNzKGZlZWQpIHtcclxuICAgIGlmICghZmVlZCkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgciA9IGZlZWQuJHJlc291cmNlcztcclxuICAgIGNvbnN0IGZlZWRMZW5ndGggPSByLmxlbmd0aDtcclxuICAgIGNvbnN0IG8gPSBbXTtcclxuXHJcbiAgICB0aGlzLmV2ZW50RmVlZCA9IGZlZWQ7XHJcblxyXG4gICAgaWYgKGZlZWRMZW5ndGggPT09IDApIHtcclxuICAgICAgdGhpcy5oaWRlRXZlbnRMaXN0KCk7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHRoaXMuc2hvd0V2ZW50TGlzdCgpO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmVlZExlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IHJvdyA9IHJbaV07XHJcbiAgICAgIHJvdy5pc0V2ZW50ID0gdHJ1ZTtcclxuICAgICAgdGhpcy5lbnRyaWVzW3Jvdy4ka2V5XSA9IHJvdztcclxuICAgICAgby5wdXNoKHRoaXMuZXZlbnRSb3dUZW1wbGF0ZS5hcHBseShyb3csIHRoaXMpKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZmVlZC4kdG90YWxSZXN1bHRzID4gZmVlZExlbmd0aCkge1xyXG4gICAgICBkb21DbGFzcy5hZGQodGhpcy5ldmVudENvbnRhaW5lck5vZGUsICdsaXN0LWhhcy1tb3JlJyk7XHJcbiAgICAgIHRoaXMuc2V0KCdldmVudFJlbWFpbmluZ0NvbnRlbnQnLCB0aGlzLmNvdW50TW9yZVRleHQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZG9tQ2xhc3MucmVtb3ZlKHRoaXMuZXZlbnRDb250YWluZXJOb2RlLCAnbGlzdC1oYXMtbW9yZScpO1xyXG4gICAgICB0aGlzLnNldCgnZXZlbnRSZW1haW5pbmdDb250ZW50JywgJycpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuc2V0KCdldmVudENvbnRlbnQnLCBvLmpvaW4oJycpKTtcclxuICB9LFxyXG5cclxuICByZW5kZXJDYWxlbmRhcjogZnVuY3Rpb24gcmVuZGVyQ2FsZW5kYXIoKSB7XHJcbiAgICBjb25zdCBjYWxIVE1MID0gW107XHJcbiAgICBjb25zdCBzdGFydGluZ0RheSA9IHRoaXMuZ2V0Rmlyc3REYXlPZkN1cnJlbnRNb250aCgpXHJcbiAgICAgIC5kYXkoKTtcclxuICAgIGNvbnN0IGRheURhdGUgPSB0aGlzLmN1cnJlbnREYXRlLmNsb25lKClcclxuICAgICAgLnN0YXJ0T2YoJ21vbnRoJyk7XHJcbiAgICBjb25zdCBtb250aExlbmd0aCA9IHRoaXMuY3VycmVudERhdGUuZGF5c0luTW9udGgoKTtcclxuICAgIGNvbnN0IHdlZWtFbmRzID0gWzAsIDZdO1xyXG4gICAgbGV0IHdlZWtlbmRDbGFzcyA9ICcnO1xyXG4gICAgbGV0IGRheSA9IDE7XHJcblxyXG4gICAgY2FsSFRNTC5wdXNoKHRoaXMuY2FsZW5kYXJTdGFydFRlbXBsYXRlKTtcclxuXHJcbiAgICBjYWxIVE1MLnB1c2godGhpcy5jYWxlbmRhcldlZWtIZWFkZXJTdGFydFRlbXBsYXRlKTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IDY7IGkrKykge1xyXG4gICAgICBjYWxIVE1MLnB1c2goc3RyaW5nLnN1YnN0aXR1dGUodGhpcy5jYWxlbmRhcldlZWtIZWFkZXJUZW1wbGF0ZSwgW3RoaXMud2Vla0RheXNTaG9ydFRleHRbaV1dKSk7XHJcbiAgICB9XHJcbiAgICBjYWxIVE1MLnB1c2godGhpcy5jYWxlbmRhcldlZWtIZWFkZXJFbmRUZW1wbGF0ZSk7XHJcblxyXG4gICAgLy8gV2Vla3NcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IDY7IGkrKykge1xyXG4gICAgICBjYWxIVE1MLnB1c2godGhpcy5jYWxlbmRhcldlZWtTdGFydFRlbXBsYXRlKTtcclxuICAgICAgLy8gRGF5c1xyXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8PSA2OyBqKyspIHtcclxuICAgICAgICBpZiAoZGF5IDw9IG1vbnRoTGVuZ3RoICYmIChpID4gMCB8fCBqID49IHN0YXJ0aW5nRGF5KSkge1xyXG4gICAgICAgICAgZGF5RGF0ZS5kYXRlKGRheSk7XHJcbiAgICAgICAgICB3ZWVrZW5kQ2xhc3MgPSAod2Vla0VuZHMuaW5kZXhPZihqKSAhPT0gLTEpID8gJyB3ZWVrZW5kJyA6ICcnO1xyXG4gICAgICAgICAgY2FsSFRNTC5wdXNoKHN0cmluZy5zdWJzdGl0dXRlKHRoaXMuY2FsZW5kYXJEYXlUZW1wbGF0ZSwgW1xyXG4gICAgICAgICAgICBkYXksXHJcbiAgICAgICAgICAgIHdlZWtlbmRDbGFzcyxcclxuICAgICAgICAgICAgZGF5RGF0ZS5mb3JtYXQoJ1lZWVktTU0tREQnKSxcclxuICAgICAgICAgIF0pKTtcclxuICAgICAgICAgIGRheSsrO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBjYWxIVE1MLnB1c2godGhpcy5jYWxlbmRhckVtcHR5RGF5VGVtcGxhdGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBjYWxIVE1MLnB1c2godGhpcy5jYWxlbmRhcldlZWtFbmRUZW1wbGF0ZSk7XHJcbiAgICAgIC8vIHN0b3AgbWFraW5nIHJvd3MgaWYgd2UndmUgcnVuIG91dCBvZiBkYXlzXHJcbiAgICAgIGlmIChkYXkgPiBtb250aExlbmd0aCkge1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBjYWxIVE1MLnB1c2godGhpcy5jYWxlbmRhckVuZFRlbXBsYXRlKTtcclxuXHJcbiAgICB0aGlzLnNldCgnY2FsZW5kYXJDb250ZW50JywgY2FsSFRNTC5qb2luKCcnKSk7XHJcbiAgICB0aGlzLnNldERhdGVUaXRsZSgpO1xyXG4gICAgdGhpcy5oaWdobGlnaHRDdXJyZW50RGF0ZSgpO1xyXG4gIH0sXHJcbiAgc2V0RGF0ZVRpdGxlOiBmdW5jdGlvbiBzZXREYXRlVGl0bGUoKSB7XHJcbiAgICB0aGlzLnNldCgnZGF0ZUNvbnRlbnQnLCB0aGlzLmN1cnJlbnREYXRlLmZvcm1hdCh0aGlzLm1vbnRoVGl0bGVGb3JtYXRUZXh0KSk7XHJcbiAgfSxcclxuICBzaG93OiBmdW5jdGlvbiBzaG93KG9wdGlvbnMpIHtcclxuICAgIHRoaXMuaW5oZXJpdGVkKGFyZ3VtZW50cyk7XHJcblxyXG4gICAgaWYgKG9wdGlvbnMpIHtcclxuICAgICAgdGhpcy5wcm9jZXNzU2hvd09wdGlvbnMob3B0aW9ucyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnJlbmRlckNhbGVuZGFyKCk7XHJcbiAgICB9XHJcbiAgfSxcclxuICBwcm9jZXNzU2hvd09wdGlvbnM6IGZ1bmN0aW9uIHByb2Nlc3NTaG93T3B0aW9ucyhvcHRpb25zKSB7XHJcbiAgICBpZiAob3B0aW9ucy5jdXJyZW50RGF0ZSkge1xyXG4gICAgICB0aGlzLmN1cnJlbnREYXRlID0gbW9tZW50KG9wdGlvbnMuY3VycmVudERhdGUpXHJcbiAgICAgICAgLnN0YXJ0T2YoJ2RheScpIHx8IG1vbWVudCgpXHJcbiAgICAgICAgLnN0YXJ0T2YoJ2RheScpO1xyXG4gICAgICB0aGlzLnJlZnJlc2hSZXF1aXJlZCA9IHRydWU7XHJcbiAgICB9XHJcbiAgfSxcclxuICBoaWdobGlnaHRDdXJyZW50RGF0ZTogZnVuY3Rpb24gaGlnaGxpZ2h0Q3VycmVudERhdGUoKSB7XHJcbiAgICBjb25zdCBzZWxlY3RlZERhdGUgPSBzdHJpbmcuc3Vic3RpdHV0ZSgnLm9sZC1jYWxlbmRhci1kYXlbZGF0YS1kYXRlPSR7MH1dJywgW3RoaXMuY3VycmVudERhdGUuZm9ybWF0KCdZWVlZLU1NLUREJyldKTtcclxuXHJcbiAgICBpZiAodGhpcy5zZWxlY3RlZERhdGVOb2RlKSB7XHJcbiAgICAgIGRvbUNsYXNzLnJlbW92ZSh0aGlzLnNlbGVjdGVkRGF0ZU5vZGUsICdzZWxlY3RlZCcpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuc2VsZWN0ZWREYXRlTm9kZSA9IHF1ZXJ5KHNlbGVjdGVkRGF0ZSwgdGhpcy5jb250ZW50Tm9kZSlbMF07XHJcbiAgICBpZiAodGhpcy5zZWxlY3RlZERhdGVOb2RlKSB7XHJcbiAgICAgIGRvbUNsYXNzLmFkZCh0aGlzLnNlbGVjdGVkRGF0ZU5vZGUsICdzZWxlY3RlZCcpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuZ2V0U2VsZWN0ZWREYXRlKCk7XHJcbiAgICB0aGlzLmhpZ2hsaWdodFRvZGF5KCk7XHJcbiAgfSxcclxuICBoaWdobGlnaHRUb2RheTogZnVuY3Rpb24gaGlnaGxpZ2h0VG9kYXkoKSB7XHJcbiAgICAvLyBSZW1vdmUgdGhlIGV4aXN0aW5nIFwidG9kYXlcIiBoaWdobGlnaHQgY2xhc3MgYmVjYXVzZSBpdCBtaWdodCBiZSBvdXQgb2YgZGF0ZSxcclxuICAgIC8vIGxpa2Ugd2hlbiB3ZSB0aWNrIHBhc3QgbWlkbmlnaHQuXHJcbiAgICBsZXQgdG9kYXlDbHMgPSAnLm9sZC1jYWxlbmRhci1kYXkudG9kYXknO1xyXG4gICAgbGV0IHRvZGF5Tm9kZSA9IHF1ZXJ5KHRvZGF5Q2xzLCB0aGlzLmNvbnRlbnROb2RlKVswXTtcclxuICAgIGlmICh0b2RheU5vZGUpIHtcclxuICAgICAgZG9tQ2xhc3MucmVtb3ZlKHRvZGF5Tm9kZSwgJ3RvZGF5Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gR2V0IHRoZSB1cGRhdGVkIFwidG9kYXlcIlxyXG4gICAgdG9kYXlDbHMgPSBzdHJpbmcuc3Vic3RpdHV0ZSgnLm9sZC1jYWxlbmRhci1kYXlbZGF0YS1kYXRlPSR7MH1dJywgW21vbWVudCgpXHJcbiAgICAgIC5mb3JtYXQoJ1lZWVktTU0tREQnKSxcclxuICAgIF0pO1xyXG4gICAgdG9kYXlOb2RlID0gcXVlcnkodG9kYXlDbHMsIHRoaXMuY29udGVudE5vZGUpWzBdO1xyXG4gICAgaWYgKHRvZGF5Tm9kZSkge1xyXG4gICAgICBkb21DbGFzcy5hZGQodG9kYXlOb2RlLCAndG9kYXknKTtcclxuICAgIH1cclxuICB9LFxyXG4gIHNlbGVjdEVudHJ5OiBmdW5jdGlvbiBzZWxlY3RFbnRyeShwYXJhbXMpIHtcclxuICAgIGNvbnN0IHJvdyA9IHF1ZXJ5KHBhcmFtcy4kc291cmNlKVxyXG4gICAgICAuY2xvc2VzdCgnW2RhdGEta2V5XScpWzBdO1xyXG4gICAgY29uc3Qga2V5ID0gcm93ID8gcm93LmdldEF0dHJpYnV0ZSgnZGF0YS1rZXknKSA6IGZhbHNlO1xyXG5cclxuICAgIHRoaXMubmF2aWdhdGVUb0RldGFpbFZpZXcoa2V5KTtcclxuICB9LFxyXG4gIHNlbGVjdERhdGU6IGZ1bmN0aW9uIHNlbGVjdERhdGUoKSB7XHJcbiAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICBkYXRlOiB0aGlzLmN1cnJlbnREYXRlLnRvRGF0ZSgpLFxyXG4gICAgICBzaG93VGltZVBpY2tlcjogZmFsc2UsXHJcbiAgICAgIHRpbWVsZXNzOiBmYWxzZSxcclxuICAgICAgdG9vbHM6IHtcclxuICAgICAgICB0YmFyOiBbe1xyXG4gICAgICAgICAgaWQ6ICdjb21wbGV0ZScsXHJcbiAgICAgICAgICBjbHM6ICdmYSBmYS1jaGVjayBmYS1mdyBmYS1sZycsXHJcbiAgICAgICAgICBmbjogdGhpcy5zZWxlY3REYXRlU3VjY2VzcyxcclxuICAgICAgICAgIHNjb3BlOiB0aGlzLFxyXG4gICAgICAgIH0sIHtcclxuICAgICAgICAgIGlkOiAnY2FuY2VsJyxcclxuICAgICAgICAgIGNsczogJ2ZhIGZhLWJhbiBmYS1mdyBmYS1sZycsXHJcbiAgICAgICAgICBzaWRlOiAnbGVmdCcsXHJcbiAgICAgICAgICBmbjogUmVVSS5iYWNrLFxyXG4gICAgICAgICAgc2NvcGU6IFJlVUksXHJcbiAgICAgICAgfV0sXHJcbiAgICAgIH0sXHJcbiAgICB9O1xyXG4gICAgY29uc3QgdmlldyA9IEFwcC5nZXRWaWV3KHRoaXMuZGF0ZVBpY2tlclZpZXcpO1xyXG4gICAgaWYgKHZpZXcpIHtcclxuICAgICAgdmlldy5zaG93KG9wdGlvbnMpO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgc2VsZWN0RGF0ZVN1Y2Nlc3M6IGZ1bmN0aW9uIHNlbGVjdERhdGVTdWNjZXNzKCkge1xyXG4gICAgY29uc3QgdmlldyA9IEFwcC5nZXRQcmltYXJ5QWN0aXZlVmlldygpO1xyXG4gICAgdGhpcy5jdXJyZW50RGF0ZSA9IG1vbWVudCh2aWV3LmdldERhdGVUaW1lKCkpXHJcbiAgICAgIC5zdGFydE9mKCdkYXknKTtcclxuICAgIHRoaXMucmVmcmVzaCgpO1xyXG4gICAgUmVVSS5iYWNrKCk7XHJcbiAgfSxcclxuICBuYXZpZ2F0ZVRvV2Vla1ZpZXc6IGZ1bmN0aW9uIG5hdmlnYXRlVG9XZWVrVmlldygpIHtcclxuICAgIGNvbnN0IHZpZXcgPSBBcHAuZ2V0Vmlldyh0aGlzLndlZWtWaWV3KTtcclxuICAgIGNvbnN0IG9wdGlvbnMgPSB7XHJcbiAgICAgIGN1cnJlbnREYXRlOiB0aGlzLmN1cnJlbnREYXRlLnZhbHVlT2YoKSB8fCBtb21lbnQoKVxyXG4gICAgICAgIC5zdGFydE9mKCdkYXknKSxcclxuICAgIH07XHJcbiAgICB2aWV3LnNob3cob3B0aW9ucyk7XHJcbiAgfSxcclxuICBuYXZpZ2F0ZVRvRGF5VmlldzogZnVuY3Rpb24gbmF2aWdhdGVUb0RheVZpZXcoKSB7XHJcbiAgICBjb25zdCB2aWV3ID0gQXBwLmdldFZpZXcodGhpcy5kYXlWaWV3KTtcclxuICAgIGNvbnN0IG9wdGlvbnMgPSB7XHJcbiAgICAgIGN1cnJlbnREYXRlOiB0aGlzLmN1cnJlbnREYXRlLnZhbHVlT2YoKSB8fCBtb21lbnQoKVxyXG4gICAgICAgIC5zdGFydE9mKCdkYXknKSxcclxuICAgIH07XHJcbiAgICB2aWV3LnNob3cob3B0aW9ucyk7XHJcbiAgfSxcclxuICBuYXZpZ2F0ZVRvSW5zZXJ0VmlldzogZnVuY3Rpb24gbmF2aWdhdGVUb0luc2VydFZpZXcoKSB7XHJcbiAgICBjb25zdCB2aWV3ID0gQXBwLmdldFZpZXcodGhpcy5pbnNlcnRWaWV3IHx8IHRoaXMuZWRpdFZpZXcpO1xyXG5cclxuICAgIGlmICghdGhpcy5vcHRpb25zKSB7XHJcbiAgICAgIHRoaXMub3B0aW9ucyA9IHt9O1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMub3B0aW9ucy5jdXJyZW50RGF0ZSA9IHRoaXMuY3VycmVudERhdGUudG9TdHJpbmcoJ3l5eXktTU0tZGQnKSB8fCBtb21lbnQoKVxyXG4gICAgICAuc3RhcnRPZignZGF5Jyk7XHJcbiAgICBpZiAodmlldykge1xyXG4gICAgICB2aWV3LnNob3coe1xyXG4gICAgICAgIG5lZ2F0ZUhpc3Rvcnk6IHRydWUsXHJcbiAgICAgICAgcmV0dXJuVG86IHRoaXMuaWQsXHJcbiAgICAgICAgaW5zZXJ0OiB0cnVlLFxyXG4gICAgICAgIGN1cnJlbnREYXRlOiB0aGlzLm9wdGlvbnMuY3VycmVudERhdGUudmFsdWVPZigpLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9LFxyXG4gIG5hdmlnYXRlVG9EZXRhaWxWaWV3OiBmdW5jdGlvbiBuYXZpZ2F0ZVRvRGV0YWlsVmlldyhrZXksIF9kZXNjcmlwdG9yKSB7XHJcbiAgICBsZXQgZGVzY3JpcHRvciA9IF9kZXNjcmlwdG9yO1xyXG4gICAgY29uc3QgZW50cnkgPSB0aGlzLmVudHJpZXNba2V5XTtcclxuICAgIGNvbnN0IGRldGFpbFZpZXcgPSAoZW50cnkuaXNFdmVudCkgPyB0aGlzLmV2ZW50RGV0YWlsVmlldyA6IHRoaXMuYWN0aXZpdHlEZXRhaWxWaWV3O1xyXG4gICAgY29uc3QgdmlldyA9IEFwcC5nZXRWaWV3KGRldGFpbFZpZXcpO1xyXG4gICAgZGVzY3JpcHRvciA9IChlbnRyeS5pc0V2ZW50KSA/IGRlc2NyaXB0b3IgOiBlbnRyeS5EZXNjcmlwdGlvbjtcclxuICAgIGlmICh2aWV3KSB7XHJcbiAgICAgIHZpZXcuc2hvdyh7XHJcbiAgICAgICAgdGl0bGU6IGRlc2NyaXB0b3IsXHJcbiAgICAgICAga2V5OiBrZXksXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH0sXHJcbn0pO1xyXG5cclxubGFuZy5zZXRPYmplY3QoJ01vYmlsZS5TYWxlc0xvZ2l4LlZpZXdzLkNhbGVuZGFyLk1vbnRoVmlldycsIF9fY2xhc3MpO1xyXG5leHBvcnQgZGVmYXVsdCBfX2NsYXNzO1xyXG4iXX0=
</pre>
</body>
</html>
