<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">/*
 * 
 */
(function(){var b=window.Sage,e=b,a=b.namespace(&quot;Sage.SData.Client.Ajax&quot;);var f=function(j){return((j&gt;=200&amp;&amp;j&lt;300)||j===304)};var c=function(n,m){if(n.readyState==4){if(f(n.status)){if(m.success){m.success.call(m.scope||this,n,m)}}else{if(n.status===0){var l=false;try{l=(n.statusText===&quot;&quot;)}catch(j){l=true}if(l){var k=m.aborted||m.failure;if(k){k.call(m.scope||this,n,m)}}else{if(m.failure){m.failure.call(m.scope||this,n,m)}}}else{if(m.failure){m.failure.call(m.scope||this,n,m)}}}}};var g=function(l,k){var j=k.timeout||k.failure;if(j){j.call(k.scope||this,l,k)}};var d=function(k,j){k.ontimeout=function(){g.call(k,k,j)}};var i=function(k,j){k.onreadystatechange=function(){c.call(k,k,j)}};var h=function(k){var j=[];for(var l in k){j.push(encodeURIComponent(l)+&quot;=&quot;+encodeURIComponent(k[l]))}return j.join(&quot;&amp;&quot;)};b.apply(b.SData.Client.Ajax,{request:function(m){m=e.apply({},m);m.params=e.apply({},m.params);m.headers=e.apply({},m.headers);if(m.cache!==true){m.params[m.cacheParam||&quot;_t&quot;]=(new Date()).getTime()}m.method=m.method||&quot;GET&quot;;var j=h(m.params);if(j){m.url=m.url+(/\?/.test(m.url)?&quot;&amp;&quot;:&quot;?&quot;)+j}var l=new XMLHttpRequest();if(m.user){l.open(m.method,m.url,m.async!==false,m.user,m.password)}else{l.open(m.method,m.url,m.async!==false)}if(m.withCredentials){l.withCredentials=true}try{l.setRequestHeader(&quot;Accept&quot;,m.accept||&quot;*/*&quot;);l.setRequestHeader(&quot;X-Requested-With&quot;,&quot;XMLHttpRequest&quot;);if(m.contentType){l.setRequestHeader(&quot;Content-Type&quot;,m.contentType)}for(var p in m.headers){l.setRequestHeader(p,m.headers[p])}}catch(k){}if(m.async!==false){if(typeof m.requestTimeout===&quot;number&quot;&amp;&amp;m.requestTimeout&gt;=0&amp;&amp;typeof l.timeout===&quot;number&quot;){l.timeout=m.requestTimeout;d(l,m)}i(l,m);l.send(m.body||null)}else{l.send(m.body||null);c(l,m)}return l},cancel:function(j){j.abort()}})})();(function(){var b=window.Sage,a=b,c=b.namespace(&quot;Sage.SData.Client&quot;);b.SData.Client.SDataBaseRequest=b.Class.define({service:null,uri:null,completeHeaders:null,extendedHeaders:null,constructor:function(d){this.base.apply(this,arguments);this.service=d;this.completeHeaders={};this.extendedHeaders={};this.uri=new b.SData.Client.SDataUri();var f,e;if(this.service){this.uri.setVersion(this.service.getVersion());f=this.service.getIncludeContent();if(typeof f!==&quot;undefined&quot;){this.uri.setIncludeContent(f)}this.uri.setServer(this.service.getVirtualDirectory()?this.service.getVirtualDirectory():&quot;sdata&quot;);this.uri.setScheme(this.service.getProtocol());this.uri.setHost(this.service.getServerName());this.uri.setPort(this.service.getPort());e=this.service.getCompact();if(typeof e!==&quot;undefined&quot;){this.uri.setCompact(e)}}},clone:function(){return new b.SData.Client.SDataBaseRequest(this.service).setUri(new b.SData.Client.SDataUri(this.uri))},setRequestHeader:function(d,e){this.completeHeaders[d]=e},extendRequestHeader:function(d,e){this.extendedHeaders[d]=e},clearRequestHeader:function(d){delete this.completeHeaders[d];delete this.extendedHeaders[d]},getAccept:function(){return this.extendedHeaders.Accept},setAccept:function(d){this.extendRequestHeader(&quot;Accept&quot;,d);return this},getService:function(){return this.service},getUri:function(){return this.uri},setUri:function(d){this.uri=d;return this},getServerName:function(){return this.uri.getHost()},setServerName:function(d){this.uri.setHost(d);return this},getVirtualDirectory:function(){return this.uri.getServer()},setVirtualDirectory:function(d){this.uri.setServer(d);return this},getProtocol:function(){return this.uri.getScheme()},setProtocol:function(d){this.uri.setScheme(d);return this},getPort:function(){return this.uri.getPort()},setPort:function(d){this.uri.setPort(d);return this},getQueryArgs:function(){return this.uri.getQueryArgs()},setQueryArgs:function(e,d){this.uri.setQueryArgs(e,d);return this},getQueryArg:function(d){return this.uri.getQueryArg(d)},setQueryArg:function(d,e){this.uri.setQueryArg(d,e);return this},build:function(d){return this.uri.build(d)},toString:function(d){return this.build(d)}})})();(function(){var b=window.Sage,a=b,c=b.namespace(&quot;Sage.SData.Client&quot;);b.SData.Client.SDataApplicationRequest=b.SData.Client.SDataBaseRequest.extend({constructor:function(){this.base.apply(this,arguments);if(this.service){this.uri.setProduct(this.service.getApplicationName()?this.service.getApplicationName():&quot;-&quot;);this.uri.setContract(this.service.getContractName()?this.service.getContractName():&quot;-&quot;);this.uri.setCompanyDataset(this.service.getDataSet()?this.service.getDataSet():&quot;-&quot;)}},clone:function(){return new b.SData.Client.SDataApplicationRequest(this.service).setUri(new b.SData.Client.SDataUri(this.uri))},getApplicationName:function(){return this.uri.getProduct()},setApplicationName:function(d){this.uri.setProduct(d);return this},getContractName:function(){return this.uri.getContract()},setContractName:function(d){this.uri.setContract(d);return this},getDataSet:function(){return this.uri.getCompanyDataset()},setDataSet:function(d){this.uri.setCompanyDataset(d);return this},getResourceKind:function(){return this.uri.getCollectionType()},setResourceKind:function(d){this.uri.setCollectionType(d);return this}})})();(function(){var b=window.Sage,a=b,c=b.namespace(&quot;Sage.SData.Client&quot;);b.SData.Client.SDataResourceCollectionRequest=b.SData.Client.SDataApplicationRequest.extend({constructor:function(){this.base.apply(this,arguments)},clone:function(){return new b.SData.Client.SDataResourceCollectionRequest(this.service).setUri(new b.SData.Client.SDataUri(this.uri))},getCount:function(){return this.uri.getCount()},setCount:function(d){this.uri.setCount(d);return this},getStartIndex:function(){return this.uri.getStartIndex()},setStartIndex:function(d){this.uri.setStartIndex(d);return this},read:function(d){return this.service.readFeed(this,d)}})})();(function(){var b=window.Sage,a=b,c=b.namespace(&quot;Sage.SData.Client&quot;);b.SData.Client.SDataNamedQueryRequest=b.SData.Client.SDataResourceCollectionRequest.extend({constructor:function(){this.base.apply(this,arguments);this.uri.setPathSegment(c.SDataUri.ResourcePropertyIndex,c.SDataUri.NamedQuerySegment)},clone:function(){return new b.SData.Client.SDataNamedQueryRequest(this.service).setUri(new b.SData.Client.SDataUri(this.uri))},getQueryName:function(){return this.uri.getPathSegment(c.SDataUri.ResourcePropertyIndex+1)},setQueryName:function(d){this.uri.setPathSegment(c.SDataUri.ResourcePropertyIndex+1,d);return this}})})();(function(){var b=window.Sage,a=b,c=b.namespace(&quot;Sage.SData.Client&quot;);b.SData.Client.SDataSingleResourceRequest=b.SData.Client.SDataApplicationRequest.extend({constructor:function(){this.base.apply(this,arguments)},clone:function(){return new b.SData.Client.SDataSingleResourceRequest(this.service).setUri(new b.SData.Client.SDataUri(this.uri))},read:function(d){return this.service.readEntry(this,d)},update:function(e,d){return this.service.updateEntry(this,e,d)},create:function(e,d){return this.service.createEntry(this,e,d)},&quot;delete&quot;:function(e,d){return this.service.deleteEntry(this,e,d)},getResourceSelector:function(){return this.uri.getCollectionPredicate()},setResourceSelector:function(d){this.uri.setCollectionPredicate(d);return this}})})();(function(){var b=window.Sage,a=b,c=b.namespace(&quot;Sage.SData.Client&quot;);b.SData.Client.SDataResourcePropertyRequest=b.SData.Client.SDataSingleResourceRequest.extend({constructor:function(){this.base.apply(this,arguments)},clone:function(){return new b.SData.Client.SDataResourcePropertyRequest(this.service).setUri(new b.SData.Client.SDataUri(this.uri))},readFeed:function(d){return this.service.readFeed(this,d)},getResourceProperty:function(){return this.uri.getPathSegment(b.SData.Client.SDataUri.ResourcePropertyIndex)},setResourceProperty:function(d){this.uri.setPathSegment(b.SData.Client.SDataUri.ResourcePropertyIndex,d);return this}})})();(function(){var b=window.Sage,a=b,c=b.namespace(&quot;Sage.SData.Client&quot;);b.SData.Client.SDataSystemRequest=b.SData.Client.SDataBaseRequest.extend({constructor:function(){this.base.apply(this,arguments);this.uri.setPathSegment(b.SData.Client.SDataUri.ProductPathIndex,b.SData.Client.SDataUri.SystemSegment)},clone:function(){return new b.SData.Client.SDataSystemRequest(this.service).setUri(new b.SData.Client.SDataUri(this.uri))},getCategory:function(){this.uri.getPathSegment(b.SData.Client.SDataUri.ContractTypePathIndex)},setCategory:function(d){this.uri.setPathSegment(b.SData.Client.SDataUri.ContractTypePathIndex,d);return this},read:function(d){return this.service.readFeed(this,d)}})})();(function(){var b=window.Sage,a=b,c=b.namespace(&quot;Sage.SData.Client&quot;);b.SData.Client.SDataTemplateResourceRequest=b.SData.Client.SDataApplicationRequest.extend({constructor:function(){this.base.apply(this,arguments);this.uri.setPathSegment(b.SData.Client.SDataUri.ResourcePropertyIndex,b.SData.Client.SDataUri.TemplateSegment)},clone:function(){return new b.SData.Client.SDataTemplateResourceRequest(this.service).setUri(new b.SData.Client.SDataUri(this.uri))},read:function(d){return this.service.readEntry(this,d)}})})();(function(){var b=window.Sage,a=b,c=b.namespace(&quot;Sage.SData.Client&quot;);b.SData.Client.SDataServiceOperationRequest=b.SData.Client.SDataApplicationRequest.extend({constructor:function(){this.base.apply(this,arguments);this.uri.setPathSegment(c.SDataUri.ResourcePropertyIndex,c.SDataUri.ServiceMethodSegment)},clone:function(){return new b.SData.Client.SDataServiceOperationRequest(this.service).setUri(new b.SData.Client.SDataUri(this.uri))},execute:function(e,d){return this.service.executeServiceOperation(this,e,d)},getOperationName:function(){return this.uri.getPathSegment(c.SDataUri.ResourcePropertyIndex+1)},setOperationName:function(d){this.uri.setPathSegment(c.SDataUri.ResourcePropertyIndex+1,d);return this}})})();(function(){var b=window.Sage,a=b,c=b.namespace(&quot;Sage.SData.Client&quot;);b.SData.Client.SDataBatchRequest=b.SData.Client.SDataApplicationRequest.extend({items:null,constructor:function(){this.base.apply(this,arguments);this.items=[];this.uri.setPathSegment(b.SData.Client.SDataUri.ResourcePropertyIndex,b.SData.Client.SDataUri.BatchSegment)},clone:function(){return new b.SData.Client.SDataBatchRequest(this.service).setUri(new b.SData.Client.SDataUri(this.uri)).setItems(this.items.slice(0))},getItems:function(){return this.items},setItems:function(d){this.items=d;return this},using:function(f,d){if(this.service){this.service.registerBatchScope(this)}else{throw&quot;A service must be associated with the batch request.&quot;}try{f.call(d||this,this)}catch(g){this.service.clearBatchScope(this);throw g}this.service.clearBatchScope(this);return this},add:function(d){this.items.push(d)},commit:function(d){this.service.commitBatch(this,d)}})})();(function(){var b=window.Sage,a=b,d=b.namespace(&quot;Sage.SData.Client&quot;),c=/^true$/i;b.SData.Client.SDataUri=b.Class.define({scheme:&quot;http&quot;,host:&quot;&quot;,server:&quot;&quot;,port:-1,version:null,queryArgs:null,pathSegments:null,constructor:function(e){this.base.apply(this,arguments);a.apply(this,e);this.queryArgs=a.apply({},e&amp;&amp;e.queryArgs);this.pathSegments=(e&amp;&amp;e.pathSegments&amp;&amp;e.pathSegments.slice(0))||[];this.version=(e&amp;&amp;e.version&amp;&amp;a.apply({},e.version))||{major:1,minor:0}},clone:function(){return new b.SData.Client.SDataUri(this)},getVersion:function(){return this.version},setVersion:function(e){this.version=a.apply({major:0,minor:0},e);return this},getScheme:function(){return this.scheme},setScheme:function(e){this.scheme=e;return this},getHost:function(){return this.host},setHost:function(e){this.host=e;return this},getPort:function(){return this.port},setPort:function(e){this.port=e;return this},getServer:function(){return this.server},setServer:function(e){this.server=e;return this},getQueryArgs:function(){return this.queryArgs},setQueryArgs:function(f,e){this.queryArgs=e?f:a.apply(this.queryArgs,f);return this},getQueryArg:function(e){return this.queryArgs[e]},setQueryArg:function(e,f){this.queryArgs[e]=f;return this},getPathSegments:function(){return this.pathSegments},setPathSegments:function(e){this.pathSegments=e;return this},getPathSegment:function(e){return this.pathSegments.length&gt;e?this.pathSegments[e]:false},setPathSegment:function(f,h,e){if(!h&amp;&amp;!e){this.pathSegments[f]=null}else{if(typeof h===&quot;object&quot;){this.pathSegments[f]=a.apply({},h,this.pathSegments[f])}else{var g={};if(h){g.text=h}if(e){g.predicate=e}this.pathSegments[f]=a.apply({},g,this.pathSegments[f])}}return this},getStartIndex:function(){return this.queryArgs[d.SDataUri.QueryArgNames.StartIndex]?parseInt(this.queryArgs[d.SDataUri.QueryArgNames.StartIndex]):-1},setStartIndex:function(e){this.queryArgs[d.SDataUri.QueryArgNames.StartIndex]=e;return this},getCount:function(){return this.queryArgs[d.SDataUri.QueryArgNames.Count]?parseInt(this.queryArgs[d.SDataUri.QueryArgNames.Count]):-1},setCount:function(e){this.queryArgs[d.SDataUri.QueryArgNames.Count]=e;return this},getIncludeContent:function(){var e,f;e=this.version.major&gt;=1?d.SDataUri.QueryArgNames.IncludeContent:d.SDataUri.QueryArgNames.LegacyIncludeContent;f=this.queryArgs[e];if(typeof f!==&quot;undefined&quot;){return c.test(f)}else{return f}},setCompact:function(e){this.queryArgs[d.SDataUri.QueryArgNames.Compact]=e;return this},getCompact:function(){return this.queryArgs[d.SDataUri.QueryArgNames.Compact]},setIncludeContent:function(f){var e=this.version.major&gt;=1?d.SDataUri.QueryArgNames.IncludeContent:d.SDataUri.QueryArgNames.LegacyIncludeContent;this.queryArgs[e]=&quot;&quot;+f;return this},appendPath:function(f){var e=typeof f===&quot;string&quot;?{text:f}:f;this.pathSegments.push(e);return this},toString:function(e){return this.build(e)},build:function(f){var e=[];e.push(this.getScheme()||d.SDataUri.Http);e.push(d.SDataUri.SchemeSuffix);e.push(d.SDataUri.PathSegmentPrefix);e.push(d.SDataUri.PathSegmentPrefix);e.push(this.getHost());if(this.getPort()&gt;0){e.push(d.SDataUri.PortPrefix,this.getPort())}e.push(d.SDataUri.PathSegmentPrefix);var k=this.getPathSegments();var o=[];var h=this.getServer();if(h&amp;&amp;h.length&gt;0){o=o.concat(h.split(&quot;/&quot;))}for(var j=0;j&lt;k.length;j++){var l=k[j];if(l&amp;&amp;l.text){if(l.predicate){o.push(encodeURIComponent(l.text+&quot;(&quot;+l.predicate+&quot;)&quot;))}else{o.push(encodeURIComponent(l.text))}}}e.push(o.join(d.SDataUri.PathSegmentPrefix));if(f){return e.join(&quot;&quot;)}var g=this.getQueryArgs();var m=[];for(var n in g){m.push(encodeURIComponent(n)+d.SDataUri.QueryArgValuePrefix+encodeURIComponent(g[n]))}if(m.length&gt;0){e.push(d.SDataUri.QueryPrefix);e.push(m.join(d.SDataUri.QueryArgPrefix))}return e.join(&quot;&quot;)},getProduct:function(){return this.getPathSegment(d.SDataUri.ProductPathIndex)},setProduct:function(e){return this.setPathSegment(d.SDataUri.ProductPathIndex,e)},getContract:function(){return this.getPathSegment(d.SDataUri.ContractTypePathIndex)},setContract:function(e){return this.setPathSegment(d.SDataUri.ContractTypePathIndex,e)},getCompanyDataset:function(){return this.getPathSegment(d.SDataUri.CompanyDatasetPathIndex)},setCompanyDataset:function(e){return this.setPathSegment(d.SDataUri.CompanyDatasetPathIndex,e)},getCollectionType:function(){return this.getPathSegment(d.SDataUri.CollectionTypePathIndex)},setCollectionType:function(e){return this.setPathSegment(d.SDataUri.CollectionTypePathIndex,e)},getCollectionPredicate:function(){var e=this.getPathSegment(d.SDataUri.CollectionTypePathIndex);return(e&amp;&amp;e.predicate)||false},setCollectionPredicate:function(e){return this.setPathSegment(d.SDataUri.CollectionTypePathIndex,{predicate:e})}});b.apply(b.SData.Client.SDataUri,{Http:&quot;http&quot;,Https:&quot;https&quot;,PathSegmentPrefix:&quot;/&quot;,PortPrefix:&quot;:&quot;,QueryArgPrefix:&quot;&amp;&quot;,QueryArgValuePrefix:&quot;=&quot;,QueryPrefix:&quot;?&quot;,SchemeSuffix:&quot;:&quot;,UnspecifiedPort:-1,UriName:&quot;uri&quot;,QueryArgNames:{Compact:&quot;_compact&quot;,Count:&quot;count&quot;,Exclude:&quot;exclude&quot;,Format:&quot;format&quot;,Include:&quot;include&quot;,IncludeContent:&quot;_includeContent&quot;,LegacyIncludeContent:&quot;includeContent&quot;,IncludeSchema:&quot;includeSchema&quot;,Language:&quot;language&quot;,OrderBy:&quot;orderby&quot;,Precedence:&quot;precedence&quot;,ReturnDelta:&quot;returnDelta&quot;,Search:&quot;search&quot;,Select:&quot;select&quot;,StartIndex:&quot;startIndex&quot;,Thumbnail:&quot;thumbnail&quot;,TrackingID:&quot;trackingID&quot;,Where:&quot;where&quot;},ProductPathIndex:0,ContractTypePathIndex:1,CompanyDatasetPathIndex:2,CollectionTypePathIndex:3,ResourcePropertyIndex:4,ServiceMethodSegment:&quot;$service&quot;,TemplateSegment:&quot;$template&quot;,SystemSegment:&quot;$system&quot;,NamedQuerySegment:&quot;$queries&quot;,BatchSegment:&quot;$batch&quot;})})();(function(){var e=window.Sage,c=e,g=e.namespace(&quot;Sage.SData.Client&quot;),b=function(h){return typeof h!==&quot;undefined&quot;},d=function(l,m,k){var h={},j=typeof l===&quot;object&quot;?l.url:l;var i=(typeof parseUri===&quot;function&quot;)&amp;&amp;parseUri(j);if(i){if(i.host){h.serverName=i.host}var n=i.path.split(&quot;/&quot;).slice(1);if(n[0]){h.virtualDirectory=n[0]}if(n[1]){h.applicationName=n[1]}if(n[2]){h.contractName=n[2]}if(n[3]){h.dataSet=n[3]}if(i.port){h.port=parseInt(i.port)}if(i.protocol){h.protocol=i.protocol}}if(typeof l===&quot;object&quot;){c.apply(h,l)}if(b(m)){h.userName=m}if(b(k)){h.password=k}return h},a=function(h){return h&amp;&amp;h[&quot;#text&quot;]?h[&quot;#text&quot;]:h},f=/^(.+?):(.*)$/;e.SData.Client.SDataService=e.Evented.extend({uri:null,useCredentialedRequest:false,useCrossDomainCookies:false,userAgent:&quot;Sage&quot;,userName:false,password:&quot;&quot;,batchScope:null,timeout:0,constructor:function(j,k,i){this.base.call(this,j);this.uri=new e.SData.Client.SDataUri();var h=d(j,k,i);if(b(h.uri)){this.uri=new e.SData.Client.SDataUri(h.uri)}if(b(h.serverName)){this.uri.setHost(h.serverName)}if(b(h.virtualDirectory)){this.uri.setServer(h.virtualDirectory)}if(b(h.applicationName)){this.uri.setProduct(h.applicationName)}if(b(h.contractName)){this.uri.setContract(h.contractName)}if(b(h.dataSet)){this.uri.setCompanyDataset(h.dataSet)}if(b(h.port)){this.uri.setPort(h.port)}if(b(h.protocol)){this.uri.setScheme(h.protocol)}if(b(h.includeContent)){this.uri.setIncludeContent(h.includeContent)}if(b(h.version)){this.uri.setVersion(h.version)}if(b(h.json)){this.json=h.json}if(b(h.timeout)){this.timeout=h.timeout}if(b(h.compact)){this.uri.setCompact(h.compact)}if(b(h.userName)){this.userName=h.userName}if(b(h.password)){this.password=h.password}if(b(h.useCredentialedRequest)){this.useCredentialedRequest=h.useCredentialedRequest}if(b(h.useCrossDomainCookies)){this.useCrossDomainCookies=h.useCrossDomainCookies}this.addEvents(&quot;beforerequest&quot;,&quot;requestcomplete&quot;,&quot;requestexception&quot;,&quot;requestaborted&quot;,&quot;requesttimeout&quot;)},isJsonEnabled:function(){return this.json},enableJson:function(){this.json=true;return this},disableJson:function(){this.json=false;return this},getVersion:function(){return this.uri.getVersion()},setVersion:function(h){this.uri.setVersion(h);return this},getUri:function(){return this.uri},getUserName:function(){return this.userName},setUserName:function(h){this.userName=h;return this},getPassword:function(){return this.password},setPassword:function(h){this.password=h;return this},getProtocol:function(){return this.uri.getScheme()},setProtocol:function(h){this.uri.setScheme(h);return this},getServerName:function(){return this.uri.getHost()},setServerName:function(h){this.uri.setHost(h);return this},getPort:function(){return this.uri.getPort()},setPort:function(h){this.uri.setPort(h);return this},getVirtualDirectory:function(){return this.uri.getServer()},setVirtualDirectory:function(h){this.uri.setServer(h);return this},getApplicationName:function(){return this.uri.getProduct()},setApplicationName:function(h){this.uri.setProduct(h);return this},getContractName:function(){return this.uri.getContract()},setContractName:function(h){this.uri.setContract(h);return this},getDataSet:function(){return this.uri.getCompanyDataset()},setDataSet:function(h){this.uri.setCompanyDataset(h);return this},getIncludeContent:function(){return this.uri.getIncludeContent()},setIncludeContent:function(h){this.uri.setIncludeContent(h);return this},getCompact:function(){return this.uri.getCompact()},setCompact:function(h){this.uri.setCompact(h);return this},getUserAgent:function(){return this.userAgent},setUserAgent:function(h){this.userAgent=h;return this},registerBatchScope:function(h){this.batchScope=h},clearBatchScope:function(h){this.batchScope=null},createBasicAuthToken:function(){return&quot;Basic &quot;+Base64.encode(this.userName+&quot;:&quot;+this.password)},createHeadersForRequest:function(h){var i={&quot;X-Authorization-Mode&quot;:&quot;no-challenge&quot;};if(this.userName&amp;&amp;!this.useCredentialedRequest){i.Authorization=i[&quot;X-Authorization&quot;]=this.createBasicAuthToken()}return i},extendAcceptRequestHeader:function(h,i){if(h){return h.split(/\s*,\s*/).join(&quot;;&quot;+i+&quot;,&quot;)+&quot;;&quot;+i}return h},executeRequest:function(i,h,j){if(this.json){i.setQueryArg(&quot;format&quot;,&quot;json&quot;)}var k=c.apply({async:h.async,headers:{},method:&quot;GET&quot;,url:i.build()},{scope:this,success:function(l,m){var n=this.processFeed(l);this.fireEvent(&quot;requestcomplete&quot;,i,m,n);if(h.success){h.success.call(h.scope||this,n)}},failure:function(l,m){this.fireEvent(&quot;requestexception&quot;,i,m,l);if(h.failure){h.failure.call(h.scope||this,l,m)}},aborted:function(l,m){this.fireEvent(&quot;requestaborted&quot;,i,m,l);if(h.aborted){h.aborted.call(h.scope||this,l,m)}},timeout:function(l,m){this.fireEvent(&quot;requesttimeout&quot;,i,m,l);if(h.timeout){h.timeout.call(h.scope||this,l,m)}}},j);c.apply(k.headers,this.createHeadersForRequest(i),i.completeHeaders);if(typeof this.timeout===&quot;number&quot;){k.requestTimeout=this.timeout}if(i.extendedHeaders.Accept){k.headers.Accept=this.extendAcceptRequestHeader(k.headers.Accept,i.extendedHeaders.Accept)}if(this.useCredentialedRequest||this.useCrossDomainCookies){k.withCredentials=true}if(this.useCredentialedRequest&amp;&amp;this.userName){k.user=this.userName;k.password=this.password}this.fireEvent(&quot;beforerequest&quot;,i,k);if(typeof k.result!==&quot;undefined&quot;){if(h.success){h.success.call(h.scope||this,k.result)}return}return g.Ajax.request(k)},abortRequest:function(h){g.Ajax.cancel(h)},readFeed:function(i,h){h=h||{};if(this.batchScope){this.batchScope.add({url:i.build(),method:&quot;GET&quot;});return}var j={headers:{Accept:this.json?&quot;application/json,*/*&quot;:&quot;application/atom+xml;type=feed,*/*&quot;}};if(h.httpMethodOverride){if(this.json){i.setQueryArg(&quot;format&quot;,&quot;json&quot;)}j.headers[&quot;X-HTTP-Method-Override&quot;]=&quot;GET&quot;;j.method=&quot;POST&quot;;j.body=i.build();j.url=i.build(true)}return this.executeRequest(i,h,j)},readEntry:function(i,h){h=h||{};if(this.batchScope){this.batchScope.add({url:i.build(),method:&quot;GET&quot;});return}var j=c.apply({},{success:function(l){var k=l[&quot;$resources&quot;][0]||false;if(h.success){h.success.call(h.scope||this,k)}}},h);return this.executeRequest(i,j,{headers:{Accept:this.json?&quot;application/json,*/*&quot;:&quot;application/atom+xml;type=entry,*/*&quot;}})},createEntry:function(k,j,i){i=i||{};if(this.batchScope){this.batchScope.add({url:k.build(),entry:j,method:&quot;POST&quot;});return}var m=c.apply({},{success:function(o){var n=o[&quot;$resources&quot;][0]||false;if(i.success){i.success.call(i.scope||this,n)}}},i);var l=c.apply({},{method:&quot;POST&quot;});if(this.isJsonEnabled()){c.apply(l,{body:JSON.stringify(j),headers:{&quot;Content-Type&quot;:&quot;application/json&quot;}})}else{var h=new XML.ObjTree();h.attr_prefix=&quot;@&quot;;c.apply(l,{body:h.writeXML(this.formatEntry(j)),headers:{&quot;Content-Type&quot;:&quot;application/atom+xml;type=entry&quot;,Accept:&quot;application/atom+xml;type=entry,*/*&quot;}})}return this.executeRequest(k,m,l)},updateEntry:function(k,j,i){i=i||{};if(this.batchScope){this.batchScope.add({url:k.build(),entry:j,method:&quot;PUT&quot;,etag:j[&quot;$etag&quot;]});return}var n=c.apply({},{success:function(p){var o=p[&quot;$resources&quot;][0]||false;if(i.success){i.success.call(i.scope||this,o)}}},i);var m={},l={method:&quot;PUT&quot;,headers:m};if(j[&quot;$etag&quot;]&amp;&amp;!(i&amp;&amp;i.ignoreETag)){m[&quot;If-Match&quot;]=j[&quot;$etag&quot;]}if(this.isJsonEnabled()){m[&quot;Content-Type&quot;]=&quot;application/json&quot;;l.body=JSON.stringify(j)}else{var h=new XML.ObjTree();h.attr_prefix=&quot;@&quot;;m[&quot;Content-Type&quot;]=&quot;application/atom+xml;type=entry&quot;;m.Accept=&quot;application/atom+xml;type=entry,*/*&quot;;l.body=h.writeXML(this.formatEntry(j))}return this.executeRequest(k,n,l)},deleteEntry:function(j,i,h){h=h||{};if(this.batchScope){this.batchScope.add({url:j.build(),method:&quot;DELETE&quot;,etag:!(h&amp;&amp;h.ignoreETag)&amp;&amp;i[&quot;$etag&quot;]});return}var l={},k={method:&quot;DELETE&quot;,headers:l};if(i[&quot;$etag&quot;]&amp;&amp;!(h&amp;&amp;h.ignoreETag)){l[&quot;If-Match&quot;]=i[&quot;$etag&quot;]}return this.executeRequest(j,h,k)},executeServiceOperation:function(k,j,i){var m=c.apply({},{success:function(p){var o=p[&quot;$resources&quot;][0]||false,n=o&amp;&amp;o.response,r=n&amp;&amp;n[&quot;$resources&quot;],q=r&amp;&amp;r[0];if(q&amp;&amp;q[&quot;$name&quot;]){o.response={};o.response[q[&quot;$name&quot;]]=q}if(i.success){i.success.call(i.scope||this,o)}}},i);var l=c.apply({},{method:&quot;POST&quot;});if(this.isJsonEnabled()){c.apply(l,{body:JSON.stringify(j),headers:{&quot;Content-Type&quot;:&quot;application/json&quot;}})}else{var h=new XML.ObjTree();h.attr_prefix=&quot;@&quot;;c.apply(l,{body:h.writeXML(this.formatEntry(j)),headers:{&quot;Content-Type&quot;:&quot;application/atom+xml;type=entry&quot;,Accept:&quot;application/atom+xml;type=entry,*/*&quot;}})}return this.executeRequest(k,m,l)},commitBatch:function(h,q){q=q||{};var l=h.getItems(),p,n,o={&quot;$resources&quot;:[]};for(var j=0;j&lt;l.length;j++){p=l[j];n=c.apply({},p.entry);if(p.url){n[&quot;$url&quot;]=p.url}if(p.etag){n[&quot;$ifMatch&quot;]=p.etag}if(p.method){n[&quot;$httpMethod&quot;]=p.method}delete n[&quot;$etag&quot;];o[&quot;$resources&quot;].push(n)}var m=c.apply({},{method:&quot;POST&quot;});if(this.isJsonEnabled()){c.apply(m,{body:JSON.stringify(o),headers:{&quot;Content-Type&quot;:&quot;application/json&quot;}})}else{var k=new XML.ObjTree();k.attr_prefix=&quot;@&quot;;c.apply(m,{body:k.writeXML(this.formatFeed(o)),headers:{&quot;Content-Type&quot;:&quot;application/atom+xml;type=feed&quot;,Accept:&quot;application/atom+xml;type=feed,*/*&quot;}})}return this.executeRequest(h,q,m)},parseFeedXml:function(i){var h=new XML.ObjTree();h.attr_prefix=&quot;@&quot;;return h.parseXML(i)},isIncludedReference:function(i,h,j){return j&amp;&amp;j.hasOwnProperty(&quot;@sdata:key&quot;)},isIncludedCollection:function(k,i,l){if(l.hasOwnProperty(&quot;@sdata:key&quot;)){return false}if(l.hasOwnProperty(&quot;@sdata:uri&quot;)||l.hasOwnProperty(&quot;@sdata:url&quot;)){return true}var m,j;for(var h in l){if(h.charAt(0)===&quot;@&quot;){continue}m=l[h];break}if(m){if(c.isArray(m)){j=m[0]}else{j=m}if(j&amp;&amp;j.hasOwnProperty(&quot;@sdata:key&quot;)){return true}}return false},convertEntity:function(m,h,j,i){i=i||{};i[&quot;$name&quot;]=h;i[&quot;$key&quot;]=j[&quot;@sdata:key&quot;];i[&quot;$url&quot;]=j[&quot;@sdata:uri&quot;];i[&quot;$uuid&quot;]=j[&quot;@sdata:uuid&quot;];for(var p in j){if(p.charAt(0)===&quot;@&quot;){continue}var q=f.exec(p),k=q?q[1]:false,l=q?q[2]:p,o=null,n=j[p];if(typeof n===&quot;object&quot;){if(n.hasOwnProperty(&quot;@xsi:nil&quot;)){o=null}else{if(this.isIncludedReference(k,l,n)){o=this.convertEntity(k,l,n)}else{if(this.isIncludedCollection(k,l,n)){o=this.convertEntityCollection(k,l,n)}else{o=this.convertCustomEntityProperty(k,l,n)}}}n=o}i[l]=n}return i},convertEntityCollection:function(n,h,k){for(var q in k){if(q.charAt(0)===&quot;@&quot;){continue}var r=f.exec(q),l=r?r[1]:false,m=r?r[2]:q,o=k[q];if(c.isArray(o)){var p=[];for(var j=0;j&lt;o.length;j++){p.push(this.convertEntity(n,m,o[j]))}return{&quot;$resources&quot;:p}}else{return{&quot;$resources&quot;:[this.convertEntity(n,m,o)]}}break}return null},convertCustomEntityProperty:function(i,h,j){return j},formatEntity:function(j,i,l){l=l||{};if(i[&quot;$key&quot;]){l[&quot;@sdata:key&quot;]=i[&quot;$key&quot;]}for(var h in i){if(h.charAt(0)===&quot;$&quot;){continue}var k=i[h];if(k==null){k={&quot;@xsi:nil&quot;:&quot;true&quot;}}else{if(typeof k===&quot;object&quot;&amp;&amp;k.hasOwnProperty(&quot;$resources&quot;)){k=this.formatEntityCollection(j,k)}else{if(typeof k===&quot;object&quot;){k=this.formatEntity(j,k)}}}l[h]=k}return l},formatEntityCollection:function(l,n){var h={};for(var k=0;k&lt;n[&quot;$resources&quot;].length;k++){var m=n[&quot;$resources&quot;][k],j=m[&quot;$name&quot;],o=(h[j]=h[j]||[]);o.push(this.formatEntity(l,n[&quot;$resources&quot;][k]))}return h},convertEntry:function(m){var h={};h[&quot;$descriptor&quot;]=m.title;h[&quot;$etag&quot;]=m[&quot;http:etag&quot;];h[&quot;$httpStatus&quot;]=m[&quot;http:httpStatus&quot;];var o=m[&quot;sdata:payload&quot;];for(var k in o){if(k.charAt(0)===&quot;@&quot;){continue}if(o.hasOwnProperty(k)==false){continue}var n=k.split(&quot;:&quot;),l,j,i=o[k];if(n.length==2){l=n[0];j=n[1]}else{if(n.length&lt;2){l=false;j=k}else{continue}}this.convertEntity(l,j,i,h)}return h},formatEntry:function(i,j){var h={};if(!j){h[&quot;@xmlns:sdata&quot;]=&quot;http://schemas.sage.com/sdata/2008/1&quot;;h[&quot;@xmlns:xsi&quot;]=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;;h[&quot;@xmlns:http&quot;]=&quot;http://schemas.sage.com/sdata/http/2008/1&quot;;h[&quot;@xmlns&quot;]=&quot;http://www.w3.org/2005/Atom&quot;}if(i[&quot;$httpMethod&quot;]){h[&quot;http:httpMethod&quot;]=i[&quot;$httpMethod&quot;]}if(i[&quot;$ifMatch&quot;]){h[&quot;http:ifMatch&quot;]=i[&quot;$ifMatch&quot;]}if(i[&quot;$etag&quot;]){h[&quot;http:etag&quot;]=i[&quot;$etag&quot;]}if(i[&quot;$url&quot;]){h.id=i[&quot;$url&quot;]}h[&quot;sdata:payload&quot;]={};h[&quot;sdata:payload&quot;][i[&quot;$name&quot;]]={&quot;@xmlns&quot;:&quot;http://schemas.sage.com/dynamic/2007&quot;};this.formatEntity(false,i,h[&quot;sdata:payload&quot;][i[&quot;$name&quot;]]);return{entry:h}},convertFeed:function(k){var h={},j;if(k[&quot;opensearch:totalResults&quot;]){h[&quot;$totalResults&quot;]=parseInt(a(k[&quot;opensearch:totalResults&quot;]))}if(k[&quot;opensearch:startIndex&quot;]){h[&quot;$startIndex&quot;]=parseInt(a(k[&quot;opensearch:startIndex&quot;]))}if(k[&quot;opensearch:itemsPerPage&quot;]){h[&quot;$itemsPerPage&quot;]=parseInt(a(k[&quot;opensearch:itemsPerPage&quot;]))}if(k.link){h[&quot;$link&quot;]={};for(j=0;j&lt;k.link.length;j++){h[&quot;$link&quot;][k.link[j][&quot;@rel&quot;]]=k.link[j][&quot;@href&quot;]}if(h[&quot;$link&quot;][&quot;self&quot;]){h[&quot;$url&quot;]=h[&quot;$link&quot;][&quot;self&quot;]}}h[&quot;$resources&quot;]=[];if(c.isArray(k.entry)){for(j=0;j&lt;k.entry.length;j++){h[&quot;$resources&quot;].push(this.convertEntry(k.entry[j]))}}else{if(typeof k.entry===&quot;object&quot;){h[&quot;$resources&quot;].push(this.convertEntry(k.entry))}}return h},formatFeed:function(k){var h={};h[&quot;@xmlns:sdata&quot;]=&quot;http://schemas.sage.com/sdata/2008/1&quot;;h[&quot;@xmlns:xsi&quot;]=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;;h[&quot;@xmlns:http&quot;]=&quot;http://schemas.sage.com/sdata/http/2008/1&quot;;h[&quot;@xmlns&quot;]=&quot;http://www.w3.org/2005/Atom&quot;;if(k[&quot;$url&quot;]){h.id=k[&quot;$url&quot;]}h.entry=[];for(var j=0;j&lt;k[&quot;$resources&quot;].length;j++){h.entry.push(this.formatEntry(k[&quot;$resources&quot;][j],true)[&quot;entry&quot;])}return{feed:h}},processFeed:function(h){if(!h.responseText){return null}var j=h.getResponseHeader&amp;&amp;h.getResponseHeader(&quot;Content-Type&quot;);var i;if(/application\/json/i.test(j)||(!j&amp;&amp;this.isJsonEnabled())){i=JSON.parse(h.responseText);if(i.hasOwnProperty(&quot;$resources&quot;)){return i}else{return{&quot;$resources&quot;:[i]}}}else{i=this.parseFeedXml(h.responseText);if(i.hasOwnProperty(&quot;feed&quot;)){return this.convertFeed(i.feed)}else{if(i.hasOwnProperty(&quot;entry&quot;)){return{&quot;$resources&quot;:[this.convertEntry(i.entry)]}}else{return i}}}}})})();var XML=window.XML;if(typeof(XML)==&quot;undefined&quot;){XML=function(){}}XML.ObjTree=function(){console.warn(&quot;xml obj transformation is not implemented.&quot;);return this};XML.ObjTree.VERSION=&quot;0.10&quot;;XML.ObjTree.prototype.xmlDecl='&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;\n';XML.ObjTree.prototype.attr_prefix=&quot;-&quot;;XML.ObjTree.prototype.overrideMimeType=&quot;text/xml&quot;;XML.ObjTree.prototype.parseXML=function(a){console.warn(&quot;parseXML is not implemented.&quot;)};XML.ObjTree.prototype.parseHTTP=function(b,a,c){console.warn(&quot;parseHTTP is not implemented.&quot;)};XML.ObjTree.prototype.parseDOM=function(a){console.warn(&quot;praseDom is not implemented.&quot;)};XML.ObjTree.prototype.parseElement=function(a){console.warn(&quot;parseElement is not implemented.&quot;)};XML.ObjTree.prototype.addNode=function(c,a,b,d){console.warn(&quot;addNode is not implemented.&quot;)};XML.ObjTree.prototype.writeXML=function(a){console.warn(&quot;writeXML is not implemented.&quot;)};XML.ObjTree.prototype.hash_to_xml=function(b,a){console.warn(&quot;hash_to_xml is not implemented.&quot;)};XML.ObjTree.prototype.array_to_xml=function(a,b){console.warn(&quot;array_to_xml is not implemented.&quot;)};XML.ObjTree.prototype.scalar_to_xml=function(a,b){console.warn(&quot;scalar_to_xml is not implemented.&quot;)};XML.ObjTree.prototype.xml_escape=function(a){console.warn(&quot;xml_escape is not implemented.&quot;)};</pre>
</body>
</html>
