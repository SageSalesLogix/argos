<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">define('argos/_EditBase', ['exports', 'module', 'dojo/_base/declare', 'dojo/_base/lang', 'dojo/_base/connect', 'dojo/_base/array', 'dojo/_base/Deferred', 'dojo/_base/window', 'dojo/dom-attr', 'dojo/dom-class', 'dojo/dom', 'dojo/dom-construct', 'dojo/query', './Utility', './ErrorManager', './FieldManager', './View', './I18n', 'dojo/NodeList-manipulate', './Fields/BooleanField', './Fields/DateField', './Fields/DecimalField', './Fields/DropdownField', './Fields/DurationField', './Fields/HiddenField', './Fields/LookupField', './Fields/NoteField', './Fields/PhoneField', './Fields/SelectField', './Fields/SignatureField', './Fields/TextAreaField', './Fields/TextField'], function (exports, module, _dojo_baseDeclare, _dojo_baseLang, _dojo_baseConnect, _dojo_baseArray, _dojo_baseDeferred, _dojo_baseWindow, _dojoDomAttr, _dojoDomClass, _dojoDom, _dojoDomConstruct, _dojoQuery, _Utility, _ErrorManager, _FieldManager, _View, _I18n, _dojoNodeListManipulate, _FieldsBooleanField, _FieldsDateField, _FieldsDecimalField, _FieldsDropdownField, _FieldsDurationField, _FieldsHiddenField, _FieldsLookupField, _FieldsNoteField, _FieldsPhoneField, _FieldsSelectField, _FieldsSignatureField, _FieldsTextAreaField, _FieldsTextField) {
  function _interopRequireDefault(obj) { return obj &amp;&amp; obj.__esModule ? obj : { 'default': obj }; }

  /* Copyright (c) 2010, Sage Software, Inc. All rights reserved.
   *
   * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *     http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */

  var _declare = _interopRequireDefault(_dojo_baseDeclare);

  var _lang = _interopRequireDefault(_dojo_baseLang);

  var _connect = _interopRequireDefault(_dojo_baseConnect);

  var _array = _interopRequireDefault(_dojo_baseArray);

  var _Deferred = _interopRequireDefault(_dojo_baseDeferred);

  var _win = _interopRequireDefault(_dojo_baseWindow);

  var _domAttr = _interopRequireDefault(_dojoDomAttr);

  var _domClass = _interopRequireDefault(_dojoDomClass);

  var _dom = _interopRequireDefault(_dojoDom);

  var _domConstruct = _interopRequireDefault(_dojoDomConstruct);

  var _query = _interopRequireDefault(_dojoQuery);

  var _utility = _interopRequireDefault(_Utility);

  var _ErrorManager2 = _interopRequireDefault(_ErrorManager);

  var _FieldManager2 = _interopRequireDefault(_FieldManager);

  var _View2 = _interopRequireDefault(_View);

  var _getResource = _interopRequireDefault(_I18n);

  var resource = (0, _getResource['default'])('editBase');

<span id='argos-_EditBase'>  /**
</span>   * @class argos._EditBase
   * An Edit View is a dual purpose view - used for both Creating and Updating records. It is comprised
   * of a layout similar to Detail rows but are instead Edit fields.
   *
   * A unique part of the Edit view is it's lifecycle in comparison to Detail. The Detail view is torn
   * down and rebuilt with every record. With Edit the form is emptied (HTML left in-tact) and new values
   * are applied to the fields.
   *
   * Since Edit Views are typically the &quot;last&quot; view (you always come from a List or Detail view) it warrants
   * special attention to the navigation options that are passed, as they greatly control how the Edit view
   * functions and operates.
   *
   * @alternateClassName _EditBase
   * @extends argos.View
   * @requires argos.Utility
   * @requires argos.Fields.ErrorManager
   * @requires argos.Fields.FieldManager
   * @requires argos.Fields.BooleanField
   * @requires argos.Fields.DecimalField
   * @requires argos.Fields.DurationField
   * @requires argos.Fields.HiddenField
   * @requires argos.Fields.LookupField
   * @requires argos.Fields.NoteField
   * @requires argos.Fields.PhoneField
   * @requires argos.Fields.SelectField
   * @requires argos.Fields.SignatureField
   * @requires argos.Fields.TextAreaField
   * @requires argos.Fields.TextField
   */
  var __class = (0, _declare['default'])('argos._EditBase', [_View2['default']], {
<span id='argos-_EditBase-property-attributeMap'>    /**
</span>     * @property {Object}
     * Creates a setter map to html nodes, namely:
     *
     * * validationContent =&gt; validationContentNode's innerHTML
     *
     */
    attributeMap: {
      validationContent: {
        node: 'validationContentNode',
        type: 'innerHTML'
      },
      concurrencyContent: {
        node: 'concurrencyContentNode',
        type: 'innerHTML'
      }
    },
<span id='argos-_EditBase-property-widgetTemplate'>    /**
</span>     * @property {Simplate}
     * The template used to render the view's main DOM element when the view is initialized.
     * This template includes loadingTemplate and validationSummaryTemplate.
     *
     * The default template uses the following properties:
     *
     *      name                description
     *      ----------------------------------------------------------------
     *      id                   main container div id
     *      title                main container div title attr
     *      cls                  additional class string added to the main container div
     *      resourceKind         set to data-resource-kind
     *
     */
    widgetTemplate: new Simplate(['&lt;div id=&quot;{%= $.id %}&quot; title=&quot;{%: $.titleText %}&quot; class=&quot;edit panel {%= $.cls %}&quot; {% if ($.resourceKind) { %}data-resource-kind=&quot;{%= $.resourceKind %}&quot;{% } %}&gt;', '{%! $.loadingTemplate %}', '{%! $.validationSummaryTemplate %}', '{%! $.concurrencySummaryTemplate %}', '&lt;div class=&quot;panel-content&quot; data-dojo-attach-point=&quot;contentNode&quot;&gt;&lt;/div&gt;', '&lt;/div&gt;']),
<span id='argos-_EditBase-property-loadingTemplate'>    /**
</span>     * @property {Simplate}
     * HTML shown when data is being loaded.
     *
     * `$` =&gt; the view instance
     */
    loadingTemplate: new Simplate(['&lt;fieldset class=&quot;panel-loading-indicator&quot;&gt;', '&lt;div class=&quot;row&quot;&gt;', '&lt;div class=&quot;busyIndicator__container busyIndicator--active&quot; aria-live=&quot;polite&quot;&gt;', '&lt;div class=&quot;busyIndicator busyIndicator--large&quot;&gt;', '&lt;div class=&quot;busyIndicator__bar busyIndicator__bar--large busyIndicator__bar--one&quot;&gt;&lt;/div&gt;', '&lt;div class=&quot;busyIndicator__bar busyIndicator__bar--large busyIndicator__bar--two&quot;&gt;&lt;/div&gt;', '&lt;div class=&quot;busyIndicator__bar busyIndicator__bar--large busyIndicator__bar--three&quot;&gt;&lt;/div&gt;', '&lt;div class=&quot;busyIndicator__bar busyIndicator__bar--large busyIndicator__bar--four&quot;&gt;&lt;/div&gt;', '&lt;div class=&quot;busyIndicator__bar busyIndicator__bar--large busyIndicator__bar--five&quot;&gt;&lt;/div&gt;', '&lt;/div&gt;', '&lt;span class=&quot;busyIndicator__label&quot;&gt;{%: $.loadingText %}&lt;/span&gt;', '&lt;/div&gt;', '&lt;/div&gt;', '&lt;/fieldset&gt;']),
<span id='argos-_EditBase-property-validationSummaryTemplate'>    /**
</span>     * @property {Simplate}
     * HTML for the validation summary area, this div is shown/hidden as needed.
     *
     * `$` =&gt; the view instance
     */
    validationSummaryTemplate: new Simplate(['&lt;div class=&quot;panel-validation-summary&quot;&gt;', '&lt;h2&gt;{%: $.validationSummaryText %}&lt;/h2&gt;', '&lt;ul data-dojo-attach-point=&quot;validationContentNode&quot;&gt;', '&lt;/ul&gt;', '&lt;/div&gt;']),
<span id='argos-_EditBase-property-concurrencySummaryTemplate'>    /**
</span>     * @property {Simplate}
     * HTML for the concurrency error area, this div is shown/hidden as needed.
     *
     * `$` =&gt; the view instance
     */
    concurrencySummaryTemplate: new Simplate(['&lt;div class=&quot;panel-concurrency-summary&quot;&gt;', '&lt;h2&gt;{%: $.concurrencySummaryText %}&lt;/h2&gt;', '&lt;ul data-dojo-attach-point=&quot;concurrencyContentNode&quot;&gt;', '&lt;/ul&gt;', '&lt;/div&gt;']),
<span id='argos-_EditBase-property-validationSummaryItemTemplate'>    /**
</span>     * @property {Simplate}
     * HTML shown when data is being loaded.
     *
     * * `$` =&gt; validation error object
     * * `$$` =&gt; field instance that the error is on
     */
    validationSummaryItemTemplate: new Simplate(['&lt;li&gt;', '&lt;a href=&quot;#{%= $.name %}&quot;&gt;', '&lt;h3&gt;{%: $.message %}&lt;/h3&gt;', '&lt;h4&gt;{%: $$.label %}&lt;/h4&gt;', '&lt;/a&gt;', '&lt;/li&gt;']),
<span id='argos-_EditBase-property-concurrencySummaryItemTemplate'>    /**
</span>     * @property {Simplate}
     * * `$` =&gt; validation error object
     */
    concurrencySummaryItemTemplate: new Simplate(['&lt;li&gt;', '&lt;h3&gt;{%: $.message %}&lt;/h3&gt;', '&lt;h4&gt;{%: $.name %}&lt;/h4&gt;', '&lt;/li&gt;']),
<span id='argos-_EditBase-property-sectionBeginTemplate'>    /**
</span>     * @property {Simplate}
     * HTML that starts a new section including the collapsible header
     *
     * `$` =&gt; the view instance
     */
    sectionBeginTemplate: new Simplate(['&lt;h2 data-action=&quot;toggleSection&quot; class=&quot;{% if ($.collapsed || $.options.collapsed) { %}collapsed{% } %}&quot;&gt;', '&lt;button class=&quot;{% if ($.collapsed) { %}{%: $$.toggleExpandClass %}{% } else { %}{%: $$.toggleCollapseClass %}{% } %}&quot; aria-label=&quot;{%: $$.toggleCollapseText %}&quot;&gt;&lt;/button&gt;', '{%: ($.title || $.options.title) %}', '&lt;/h2&gt;', '&lt;fieldset class=&quot;{%= ($.cls || $.options.cls) %}&quot;&gt;']),
<span id='argos-_EditBase-property-sectionEndTemplate'>    /**
</span>     * @property {Simplate}
     * HTML that ends a section
     *
     * `$` =&gt; the view instance
     */
    sectionEndTemplate: new Simplate(['&lt;/fieldset&gt;']),
<span id='argos-_EditBase-property-propertyTemplate'>    /**
</span>     * @property {Simplate}
     * HTML created for each property (field row).
     *
     * * `$` =&gt; the field row object defined in {@link #createLayout createLayout}.
     * * `$$` =&gt; the view instance
     */
    propertyTemplate: new Simplate(['&lt;a name=&quot;{%= $.name || $.property %}&quot;&gt;&lt;/a&gt;', '&lt;div class=&quot;row row-edit {%= $.cls %}{% if ($.readonly) { %}row-readonly{% } %}&quot; data-field=&quot;{%= $.name || $.property %}&quot; data-field-type=&quot;{%= $.type %}&quot;&gt;', '&lt;/div&gt;']),

<span id='argos-_EditBase-cfg-id'>    /**
</span>     * @cfg {String}
     * The unique identifier of the view
     */
    id: 'generic_edit',
    store: null,
<span id='argos-_EditBase-property-layout'>    /**
</span>     * @property {Object}
     * The layout definition that constructs the detail view with sections and rows
     */
    layout: null,
<span id='argos-_EditBase-cfg-enableCustomizations'>    /**
</span>     * @cfg {Boolean}
     * Enables the use of the customization engine on this view instance
     */
    enableCustomizations: true,
<span id='argos-_EditBase-property-customizationSet'>    /**
</span>     * @property {String}
     * The customization identifier for this class. When a customization is registered it is passed
     * a path/identifier which is then matched to this property.
     */
    customizationSet: 'edit',
<span id='argos-_EditBase-cfg-expose'>    /**
</span>     * @cfg {Boolean}
     * Controls if the view should be exposed
     */
    expose: false,
<span id='argos-_EditBase-cfg-insertSecurity'>    /**
</span>     * @cfg {String/Object}
     * May be used for verifying the view is accessible for creating entries
     */
    insertSecurity: false,
<span id='argos-_EditBase-cfg-updateSecurity'>    /**
</span>     * @cfg {String/Object}
     * May be used for verifying the view is accessible for editing entries
     */
    updateSecurity: false,

    viewType: 'edit',

<span id='argos-_EditBase-property-saveText'>    /**
</span>     * @deprecated
     */
    saveText: resource.saveText,
<span id='argos-_EditBase-cfg-titleText'>    /**
</span>     * @cfg {String}
     * Default title text shown in the top toolbar
     */
    titleText: resource.titleText,
<span id='argos-_EditBase-cfg-validationSummaryText'>    /**
</span>     * @cfg {String}
     * The text placed in the header when there are validation errors
     */
    validationSummaryText: resource.validationSummaryText,
<span id='argos-_EditBase-cfg-concurrencySummaryText'>    /**
</span>     * @cfg {String}
     * The text placed in the header when there are validation errors
     */
    concurrencySummaryText: resource.concurrencySummaryText,
<span id='argos-_EditBase-property-detailsText'>    /**
</span>     * @property {String}
     * Default text used in the section header
     */
    detailsText: resource.detailsText,
<span id='argos-_EditBase-property-loadingText'>    /**
</span>     * @property {String}
     * Text shown while the view is loading.
     */
    loadingText: resource.loadingText,
<span id='argos-_EditBase-property-errorText'>    /**
</span>     * @property {Object}
     * Localized error messages. One general error message, and messages by HTTP status code.
     */
    errorText: {
      general: resource.errorGeneral,
      status: {
        '410': resource.error401
      }
    },
<span id='argos-_EditBase-property-concurrencyErrorText'>    /**
</span>     * @property {String}
     * Text alerted to user when the data has been updated since they last fetched the data.
     */
    concurrencyErrorText: resource.concurrencyErrorText,
<span id='argos-_EditBase-property-toggleCollapseText'>    /**
</span>     * @property {String}
     * ARIA label text for a collapsible section header
     */
    toggleCollapseText: resource.toggleCollapseText,
<span id='argos-_EditBase-property-toggleCollapseClass'>    /**
</span>     * @property {String}
     * CSS class for the collapse button when in a expanded state
     */
    toggleCollapseClass: 'fa fa-chevron-down',
<span id='argos-_EditBase-property-toggleExpandClass'>    /**
</span>     * @property {String}
     * CSS class for the collapse button when in a collapsed state
     */
    toggleExpandClass: 'fa fa-chevron-right',
<span id='argos-_EditBase-property-fields'>    /**
</span>     * @property {Object}
     * Collection of the fields in the layout where the key is the `name` of the field.
     */
    fields: null,
<span id='argos-_EditBase-property-entry'>    /**
</span>     * @property {Object}
     * The saved data response.
     */
    entry: null,
<span id='argos-_EditBase-property-inserting'>    /**
</span>     * @property {Boolean}
     * Flags if the view is in &quot;insert&quot; (create) mode, or if it is in &quot;update&quot; (edit) mode.
     */
    inserting: null,

    _focusField: null,
    _hasFocused: false,

<span id='argos-_EditBase-method-constructor'>    /**
</span>     * Extends constructor to initialze `this.fields` to {}
     * @param o
     */
    constructor: function constructor() /*o*/{
      this.fields = {};
    },
<span id='argos-_EditBase-method-startup'>    /**
</span>     * When the app is started this fires, the Edit view renders its layout immediately, then
     * renders each field instance.
     *
     * On refresh it will clear the values, but leave the layout intact.
     *
     */
    startup: function startup() {
      this.inherited(arguments);
      this.processLayout(this._createCustomizedLayout(this.createLayout()));

      (0, _query['default'])('div[data-field]', this.contentNode).forEach(function forEach(node) {
        var name = _domAttr['default'].get(node, 'data-field');
        var field = this.fields[name];
        if (field) {
          field.renderTo(node);
        }
      }, this);

      var sections = (0, _query['default'])('h2', this.contentNode);
      if (sections.length === 1) {
        _domAttr['default'].remove(sections[0], 'data-action');
        var button = (0, _query['default'])('button[class*=&quot;fa-chevron&quot;]', sections[0]);
        if (button[0]) {
          _domConstruct['default'].destroy(button[0]);
        }
      }
    },
<span id='argos-_EditBase-method-init'>    /**
</span>     * Extends init to also init the fields in `this.fields`.
     */
    init: function init() {
      this.inherited(arguments);

      for (var _name in this.fields) {
        if (this.fields.hasOwnProperty(_name)) {
          this.fields[_name].init();
        }
      }
    },
<span id='argos-_EditBase-method-createToolLayout'>    /**
</span>     * Sets and returns the toolbar item layout definition, this method should be overriden in the view
     * so that you may define the views toolbar items.
     *
     * By default it adds a save button bound to `this.save()` and cancel that fires `ReUI.back()`
     *
     * @return {Object} this.tools
     * @template
     */
    createToolLayout: function createToolLayout() {
      var tbar = [{
        id: 'save',
        action: 'save',
        cls: 'fa fa-save fa-fw fa-lg',
        security: this.options &amp;&amp; this.options.insert ? this.insertSecurity : this.updateSecurity
      }];

      if (!App.isOnFirstView()) {
        tbar.push({
          id: 'cancel',
          cls: 'fa fa-ban fa-fw fa-lg',
          side: 'left',
          action: 'onToolCancel'
        });
      }

      return this.tools || (this.tools = {
        'tbar': tbar
      });
    },
    onToolCancel: function onToolCancel() {
      this.refreshRequired = true;
      ReUI.back();
    },
    _getStoreAttr: function _getStoreAttr() {
      return this.store || (this.store = this.createStore());
    },
<span id='argos-_EditBase-method-toggleSection'>    /**
</span>     * Toggles the collapsed state of the section.
     */
    toggleSection: function toggleSection(params) {
      var node = _dom['default'].byId(params.$source);
      if (node) {
        _domClass['default'].toggle(node, 'collapsed');
        var button = (0, _query['default'])('button', node)[0];
        if (button) {
          _domClass['default'].toggle(button, this.toggleCollapseClass);
          _domClass['default'].toggle(button, this.toggleExpandClass);
        }
      }
    },
<span id='argos-_EditBase-method-_onShowField'>    /**
</span>     * Handler for a fields on show event.
     *
     * Removes the row-hidden css class.
     *
     * @param {_Field} field Field instance that is being shown
     */
    _onShowField: function _onShowField(field) {
      _domClass['default'].remove(field.containerNode, 'row-hidden');
    },
<span id='argos-_EditBase-method-_onHideField'>    /**
</span>     * Handler for a fields on hide event.
     *
     * Adds the row-hidden css class.
     *
     * @param {_Field} field Field instance that is being hidden
     */
    _onHideField: function _onHideField(field) {
      _domClass['default'].add(field.containerNode, 'row-hidden');
    },
<span id='argos-_EditBase-method-_onEnableField'>    /**
</span>     * Handler for a fields on enable event.
     *
     * Removes the row-disabled css class.
     *
     * @param {_Field} field Field instance that is being enabled
     */
    _onEnableField: function _onEnableField(field) {
      _domClass['default'].remove(field.containerNode, 'row-disabled');
    },
<span id='argos-_EditBase-method-_onDisableField'>    /**
</span>     * Handler for a fields on disable event.
     *
     * Adds the row-disabled css class.
     *
     * @param {_Field} field Field instance that is being disabled
     */
    _onDisableField: function _onDisableField(field) {
      _domClass['default'].add(field.containerNode, 'row-disabled');
    },
<span id='argos-_EditBase-method-invokeAction'>    /**
</span>     * Extends invokeAction to first look for the specified function name on the field instance
     * first before passing it to the view.
     * @param {String} name Name of the function to invoke
     * @param {Object} parameters Parameters of the function to be passed
     * @param {Event} evt The original click/tap event
     * @param {HTMLElement} node The node that initiated the event
     * @return {Function} Either calls the fields action or returns the inherited version which looks at the view for the action
     */
    invokeAction: function invokeAction(name, parameters, evt, node) {
      var fieldNode = node &amp;&amp; (0, _query['default'])(node, this.contentNode).parents('[data-field]');
      var field = this.fields[fieldNode.length &gt; 0 &amp;&amp; _domAttr['default'].get(fieldNode[0], 'data-field')];

      if (field &amp;&amp; typeof field[name] === 'function') {
        return field[name].apply(field, [parameters, evt, node]);
      }

      return this.inherited(arguments);
    },
<span id='argos-_EditBase-method-hasAction'>    /**
</span>     * Determines if a field has defined on it the supplied name as a function
     * @param {String} name Name of the function to test for
     * @param {Event} evt The original click/tap event
     * @param {HTMLElement} node The node that initiated the event
     * @return {Boolean} If the field has the named function defined
     */
    hasAction: function hasAction(name, evt, node) {
      var fieldNode = node &amp;&amp; (0, _query['default'])(node, this.contentNode).parents('[data-field]');
      var field = fieldNode &amp;&amp; this.fields[fieldNode.length &gt; 0 &amp;&amp; _domAttr['default'].get(fieldNode[0], 'data-field')];

      if (field &amp;&amp; typeof field[name] === 'function') {
        return true;
      }

      return this.inherited(arguments);
    },
    createStore: function createStore() {
      return null;
    },
    onContentChange: function onContentChange() {},
    processEntry: function processEntry(entry) {
      return entry;
    },
<span id='argos-_EditBase-method-convertEntry'>    /**
</span>     * Pre-processes the entry before processEntry runs.
     * @param {Object} entry data
     * @return {Object} entry with actual Date objects
     */
    convertEntry: function convertEntry(entry) {
      return entry;
    },
    processData: function processData(entry) {
      this.entry = this.processEntry(this.convertEntry(entry || {})) || {};

      this.setValues(entry, true);

      // Re-apply changes saved from concurrency/precondition failure
      if (this.previousValuesAll) {
        // Make a copy of the current values, so we can diff them
        var currentValues = this.getValues(true);
        var diffs = this.diffs(this.previousValuesAll, currentValues);

        if (diffs.length &gt; 0) {
          _array['default'].forEach(diffs, function forEach(val) {
            this.errors.push({
              name: val,
              message: this.concurrencyErrorText
            });
          }, this);

          this.showConcurrencySummary();
        } else {
          // No diffs found, attempt to re-save
          this.save();
        }

        this.previousValuesAll = null;
      }

      // Re-apply any passed changes as they may have been overwritten
      if (this.options.changes) {
        this.changes = this.options.changes;
        this.setValues(this.changes);
      }
    },
    _onGetComplete: function _onGetComplete(entry) {
      try {
        if (entry) {
          this.processData(entry);
        } else {// eslint-disable-line
          /* todo: show error message? */
        }

        _domClass['default'].remove(this.domNode, 'panel-loading');

        /* this must take place when the content is visible */
        this.onContentChange();
      } catch (e) {
        console.error(e); // eslint-disable-line
      }
    },
    _onGetError: function _onGetError(getOptions, error) {
      this.handleError(error);
      _domClass['default'].remove(this.domNode, 'panel-loading');
    },
<span id='argos-_EditBase-method-createLayout'>    /**
</span>     * Sets and returns the Edit view layout by following a standard for section and field:
     *
     * The `this.layout` itself is an array of section objects where a section object is defined as such:
     *
     *     {
     *        name: 'String', // Required. unique name for identification/customization purposes
     *        title: 'String', // Required. Text shown in the section header
     *        children: [], // Array of child row objects
     *     }
     *
     * A child row object has:
     *
     *     {
     *        name: 'String', // Required. unique name for identification/customization purposes
     *        property: 'String', // Optional. The property of the current entity to bind to
     *        label: 'String', // Optional. Text shown in the label to the left of the property
     *        type: 'String', // Required. The field type as registered with the FieldManager.
     *        // Examples of type: 'text', 'decimal', 'date', 'lookup', 'select', 'duration'
     *        'default': value // Optional. If defined the value will be set as the default &quot;unmodified&quot; value (not dirty).
     *     }
     *
     * All further properties are set by their respective type, please see the individual field for
     * its configurable options.
     *
     * @return {Object[]} Edit layout definition
     */
    createLayout: function createLayout() {
      return this.layout || [];
    },

    createErrorHandlers: function createErrorHandlers() {
      this.errorHandlers = this.errorHandlers || [{
        name: 'PreCondition',
        test: function testPreCondition(error) {
          return error &amp;&amp; error.status === this.HTTP_STATUS.PRECONDITION_FAILED;
        },
        handle: function handlePreCondition(error, next) {
          next(); // Invoke the next error handler first, the refresh will change a lot of mutable/shared state

          // Preserve our current form values (all of them),
          // and reload the view to fetch the new data.
          this.previousValuesAll = this.getValues(true);
          this.options.key = this.entry.$key; // Force a fetch by key
          delete this.options.entry; // Remove this, or the form will load the entry that came from the detail view
          this.refresh();
        }
      }, {
        name: 'AlertError',
        test: function testAlert(error) {
          return error.status !== this.HTTP_STATUS.PRECONDITION_FAILED;
        },
        handle: function handleAlert(error, next) {
          alert(this.getErrorMessage(error)); // eslint-disable-line
          next();
        }
      }, {
        name: 'CatchAll',
        test: function testCatchAll() {
          return true;
        },
        handle: function handleCatchAll(error, next) {
          var fromContext = this.options.fromContext;
          this.options.fromContext = null;
          var errorItem = {
            viewOptions: this.options,
            serverError: error
          };

          _ErrorManager2['default'].addError(this.getErrorMessage(error), errorItem);
          this.options.fromContext = fromContext;
          next();
        }
      }];

      return this.errorHandlers;
    },
<span id='argos-_EditBase-method-getTag'>    /**
</span>     *
     * Returns the view key
     * @return {String} View key
     */
    getTag: function getTag() {
      var tag = this.options &amp;&amp; this.options.entry &amp;&amp; this.options.entry[this.idProperty];
      if (!tag) {
        tag = this.options &amp;&amp; this.options.key;
      }

      return tag;
    },
    processLayout: function processLayout(layout) {
      var rows = layout.children || layout.as || layout;
      var sectionQueue = [];
      var content = [];
      var sectionStarted = false;
      var current = undefined;

      if (!layout.options) {
        layout.options = {
          title: this.detailsText
        };
      }

      for (var i = 0; i &lt; rows.length; i++) {
        current = rows[i];

        if (current.children || current.as) {
          if (sectionStarted) {
            sectionQueue.push(current);
          } else {
            this.processLayout(current);
          }

          continue;
        }

        if (!sectionStarted) {
          sectionStarted = true;
          content.push(this.sectionBeginTemplate.apply(layout, this));
        }

        this.createRowContent(current, content);
      }

      content.push(this.sectionEndTemplate.apply(layout, this));
      var sectionNode = _domConstruct['default'].toDom(content.join(''));
      this.onApplySectionNode(sectionNode, current);
      _domConstruct['default'].place(sectionNode, this.contentNode, 'last');

      for (var i = 0; i &lt; sectionQueue.length; i++) {
        current = sectionQueue[i];

        this.processLayout(current);
      }
    },
    onApplySectionNode: function onApplySectionNode() /*sectionNode, layout*/{},
    createRowContent: function createRowContent(layout, content) {
      var Ctor = _FieldManager2['default'].get(layout.type);
      if (Ctor) {
        var field = this.fields[layout.name || layout.property] = new Ctor(_lang['default'].mixin({
          owner: this
        }, layout));

        var template = field.propertyTemplate || this.propertyTemplate;

        if (field.autoFocus &amp;&amp; !this._focusField) {
          this._focusField = field;
        } else if (field.autoFocus &amp;&amp; this._focusField) {
          throw new Error('Only one field can have autoFocus set to true in the Edit layout.');
        }

        this.connect(field, 'onShow', this._onShowField);
        this.connect(field, 'onHide', this._onHideField);
        this.connect(field, 'onEnable', this._onEnableField);
        this.connect(field, 'onDisable', this._onDisableField);

        content.push(template.apply(field, this));
      }
    },
<span id='argos-_EditBase-method-requestData'>    /**
</span>     * Initiates the request.
     */
    requestData: function requestData() {
      var store = this.get('store');

      if (this._model) {
        return this.requestDataUsingModel().then((function fulfilled(data) {
          this._onGetComplete(data);
        }).bind(this), (function rejected(err) {
          this._onGetError(null, err);
        }).bind(this));
      } else if (store) {
        var getOptions = {};

        this._applyStateToGetOptions(getOptions);

        var getExpression = this._buildGetExpression() || null;
        var getResults = this.requestDataUsingStore(getExpression, getOptions);

        _Deferred['default'].when(getResults, this._onGetComplete.bind(this), this._onGetError.bind(this, getOptions));

        return getResults;
      }

      console.warn('Error requesting data, no model or store was defined. Did you mean to mixin _SDataEditMixin to your edit view?'); // eslint-disable-line
    },
    requestDataUsingModel: function requestDataUsingModel() {
      return this._model.getEntry(this.options);
    },
    requestDataUsingStore: function requestDataUsingStore(getExpression, getOptions) {
      var store = this.get('store');
      return store.get(getExpression, getOptions);
    },
<span id='argos-_EditBase-method-applyFieldDefaults'>    /**
</span>     * Loops all the fields looking for any with the `default` property set, if set apply that
     * value as the initial value of the field. If the value is a function, its expanded then applied.
     */
    applyFieldDefaults: function applyFieldDefaults() {
      for (var _name2 in this.fields) {
        if (this.fields.hasOwnProperty(_name2)) {
          var field = this.fields[_name2];
          var defaultValue = field['default'];

          if (typeof defaultValue === 'undefined') {
            continue;
          }

          field.setValue(this.expandExpression(defaultValue, field));
        }
      }
    },
<span id='argos-_EditBase-method-clearValues'>    /**
</span>     * Loops all fields and calls its `clearValue()`.
     */
    clearValues: function clearValues() {
      for (var _name3 in this.fields) {
        if (this.fields.hasOwnProperty(_name3)) {
          this.fields[_name3].clearHighlight();
          this.fields[_name3].clearValue();
        }
      }
    },
<span id='argos-_EditBase-method-setValues'>    /**
</span>     * Sets the given values by looping the fields and checking if the field property matches
     * a key in the passed values object (after considering a fields `applyTo`).
     *
     * The value set is then passed the initial state, true for default/unmodified/clean and false
     * for dirty or altered.
     *
     * @param {Object} values data entry, or collection of key/values where key matches a fields property attribute
     * @param {Boolean} initial Initial state of the value, true for clean, false for dirty
     */
    setValues: function setValues(values, initial) {
      var noValue = {};

      for (var _name4 in this.fields) {
        if (this.fields.hasOwnProperty(_name4)) {
          var field = this.fields[_name4];
          var value = undefined;
          // for now, explicitly hidden fields (via. the field.hide() method) are not included
          if (field.isHidden()) {
            continue;
          }

          if (field.applyTo !== false) {
            value = _utility['default'].getValue(values, field.applyTo, noValue);
          } else {
            value = _utility['default'].getValue(values, field.property || _name4, noValue);
          }

          // fyi: uses the fact that ({} !== {})
          if (value !== noValue) {
            field.setValue(value, initial);
          }
        }
      }
    },
<span id='argos-_EditBase-method-getValues'>    /**
</span>     * Retrieves the value from every field, skipping the ones excluded, and merges them into a
     * single payload with the key being the fields `property` attribute, taking into consideration `applyTo` if defined.
     *
     * If all is passed as true, it also grabs hidden and unmodified (clean) values.
     *
     * @param {Boolean} all True to also include hidden and unmodified values.
     * @return {Object} A single object payload with all the values.
     */
    getValues: function getValues(all) {
      var payload = {};
      var empty = true;

      for (var _name5 in this.fields) {
        if (this.fields.hasOwnProperty(_name5)) {
          var field = this.fields[_name5];
          var value = field.getValue();

          var include = this.expandExpression(field.include, value, field, this);
          var exclude = this.expandExpression(field.exclude, value, field, this);

<span id='argos-_EditBase-property-'>          /**
</span>           * include:
           *   true: always include value
           *   false: always exclude value
           * exclude:
           *   true: always exclude value
           *   false: default handling
           */
          if (include !== undefined &amp;&amp; !include) {
            continue;
          }
          if (exclude !== undefined &amp;&amp; exclude) {
            continue;
          }

          // for now, explicitly hidden fields (via. the field.hide() method) are not included
          if (all || (field.alwaysUseValue || field.isDirty() || include) &amp;&amp; !field.isHidden()) {
            if (field.applyTo !== false) {
              if (typeof field.applyTo === 'function') {
                if (typeof value === 'object') {
                  // Copy the value properties into our payload object
                  for (var prop in value) {
                    if (value.hasOwnProperty(prop)) {
                      payload[prop] = value[prop];
                    }
                  }
                }

                field.applyTo(payload, value);
              } else if (typeof field.applyTo === 'string') {
                var target = _utility['default'].getValue(payload, field.applyTo);
                _lang['default'].mixin(target, value);
              }
            } else {
              _utility['default'].setValue(payload, field.property || _name5, value);
            }

            empty = false;
          }
        }
      }
      return empty ? false : payload;
    },
<span id='argos-_EditBase-method-validate'>    /**
</span>     * Loops and gathers the validation errors returned from each field and adds them to the
     * validation summary area. If no errors, removes the validation summary.
     * @return {Boolean/Object[]} Returns the array of errors if present or false for no errors.
     */
    validate: function validate() {
      this.errors = [];

      for (var _name6 in this.fields) {
        if (this.fields.hasOwnProperty(_name6)) {
          var field = this.fields[_name6];

          var result = field.validate();
          if (!field.isHidden() &amp;&amp; result !== false) {
            _domClass['default'].add(field.containerNode, 'row-error');

            this.errors.push({
              name: _name6,
              message: result
            });
          } else {
            _domClass['default'].remove(field.containerNode, 'row-error');
          }
        }
      }

      return this.errors.length &gt; 0 ? this.errors : false;
    },
<span id='argos-_EditBase-method-isFormDisabled'>    /**
</span>     * Determines if the form is currently busy/disabled
     * @return {Boolean}
     */
    isFormDisabled: function isFormDisabled() {
      return this.busy;
    },
<span id='argos-_EditBase-method-disable'>    /**
</span>     * Disables the form by setting busy to true and disabling the toolbar.
     */
    disable: function disable() {
      this.busy = true;

      if (App.bars.tbar) {
        App.bars.tbar.disableTool('save');
      }

      _domClass['default'].add(_win['default'].body(), 'busy');
    },
<span id='argos-_EditBase-method-enable'>    /**
</span>     * Enables the form by setting busy to false and enabling the toolbar
     */
    enable: function enable() {
      this.busy = false;

      if (App.bars.tbar) {
        App.bars.tbar.enableTool('save');
      }

      _domClass['default'].remove(_win['default'].body(), 'busy');
    },
<span id='argos-_EditBase-method-insert'>    /**
</span>     * Called by save() when performing an insert (create).
     * Gathers the values, creates the payload for insert, creates the sdata request and
     * calls `create`.
     */
    insert: function insert() {
      this.disable();

      var values = this.getValues();
      if (values) {
        this.onInsert(values);
      } else {
        ReUI.back();
      }
    },
    onInsert: function onInsert(values) {
      var store = this.get('store');
      var addOptions = {
        overwrite: false
      };
      var entry = this.createEntryForInsert(values);
      this._applyStateToAddOptions(addOptions);
      if (this._model) {
        this._model.insertEntry(entry, addOptions).then((function success(data) {
          this.onAddComplete(entry, data);
        }).bind(this), (function failure(err) {
          this.onAddError(addOptions, err);
        }).bind(this));
      } else if (store) {
        _Deferred['default'].when(store.add(entry, addOptions), this.onAddComplete.bind(this, entry), this.onAddError.bind(this, addOptions));
      }
    },
    _applyStateToAddOptions: function _applyStateToAddOptions() /*addOptions*/{},
    onAddComplete: function onAddComplete(entry, result) {
      this.enable();

      var message = this._buildRefreshMessage(entry, result);
      _connect['default'].publish('/app/refresh', [message]);

      this.onInsertCompleted(result);
    },
    onAddError: function onAddError(addOptions, error) {
      this.handleError(error);
      this.enable();
    },
<span id='argos-_EditBase-method-onInsertCompleted'>    /**
</span>     * Handler for insert complete, checks for `this.options.returnTo` else it simply goes back.
     * @param entry
     */
    onInsertCompleted: function onInsertCompleted() /*entry*/{
      if (this.options &amp;&amp; this.options.returnTo) {
        var returnTo = this.options.returnTo;
        var view = App.getView(returnTo);
        if (view) {
          view.show();
        } else {
          window.location.hash = returnTo;
        }
      } else {
        ReUI.back();
      }
    },
<span id='argos-_EditBase-method-update'>    /**
</span>     * Called by save() when performing an update (edit).
     * Gathers the values, creates the payload for update, creates the sdata request and
     * calls `update`.
     */
    update: function update() {
      var values = this.getValues();
      if (values) {
        this.disable();
        this.onUpdate(values);
      } else {
        this.onUpdateCompleted(false);
      }
    },
    onUpdate: function onUpdate(values) {
      var store = this.get('store');
      var putOptions = {
        overwrite: true
      };
      var entry = this.createEntryForUpdate(values);
      this._applyStateToPutOptions(putOptions);
      if (this._model) {
        this._model.updateEntry(entry, putOptions).then((function success(data) {
          this.onPutComplete(entry, data);
        }).bind(this), (function failure(err) {
          this.onPutError(putOptions, err);
        }).bind(this));
      } else if (store) {
        _Deferred['default'].when(store.put(entry, putOptions), this.onPutComplete.bind(this, entry), this.onPutError.bind(this, putOptions));
      }
    },
<span id='argos-_EditBase-method-createItem'>    /**
</span>     * Gathers the values for the entry to send back and returns the appropriate payload for
     * creating or updating.
     * @return {Object} Entry/payload
     */
    createItem: function createItem() {
      var values = this.getValues();

      return this.inserting ? this.createEntryForInsert(values) : this.createEntryForUpdate(values);
    },
<span id='argos-_EditBase-method-createEntryForUpdate'>    /**
</span>     * Takes the values object and adds the needed propertiers for updating.
     * @param {Object} values
     * @return {Object} Object with properties for updating
     */
    createEntryForUpdate: function createEntryForUpdate(values) {
      return this.convertValues(values);
    },
<span id='argos-_EditBase-method-createEntryForInsert'>    /**
</span>     * Takes the values object and adds the needed propertiers for creating/inserting.
     * @param {Object} values
     * @return {Object} Object with properties for inserting
     */
    createEntryForInsert: function createEntryForInsert(values) {
      return this.convertValues(values);
    },
<span id='argos-_EditBase-method-convertValues'>    /**
</span>     * Function to call to tranform values before save
     */
    convertValues: function convertValues(values) {
      return values;
    },
    _applyStateToPutOptions: function _applyStateToPutOptions() /*putOptions*/{},
    onPutComplete: function onPutComplete(entry, result) {
      this.enable();

      var message = this._buildRefreshMessage(entry, result);

      _connect['default'].publish('/app/refresh', [message]);

      this.onUpdateCompleted(result);
    },
    onPutError: function onPutError(putOptions, error) {
      this.handleError(error);
      this.enable();
    },
<span id='argos-_EditBase-property-diffPropertyIgnores'>    /**
</span>     * Array of strings that will get ignored when the diffing runs.
     */
    diffPropertyIgnores: [],
<span id='argos-_EditBase-method-diffs'>    /**
</span>     * Diffs the results from the current values and the previous values.
     * This is done for a concurrency check to indicate what has changed.
     * @returns Array List of property names that have changed
     */
    diffs: function diffs(left, right) {
      var acc = [];
      var DeepDiff = window.DeepDiff;
      var DIFF_EDITED = 'E';

      if (DeepDiff) {
        var _diffs = DeepDiff.diff(left, right, (function deepDiff(path, key) {
          if (_array['default'].indexOf(this.diffPropertyIgnores, key) &gt;= 0) {
            return true;
          }
        }).bind(this));

        _array['default'].forEach(_diffs, function (diff) {
          var path = diff.path.join('.');
          if (diff.kind === DIFF_EDITED &amp;&amp; _array['default'].indexOf(acc, path) === -1) {
            acc.push(path);
          }
        });
      }

      return acc;
    },
    _buildRefreshMessage: function _buildRefreshMessage(entry, result) {
      if (entry) {
        var store = this.get('store');
        var id = store.getIdentity(entry);
        return {
          id: id,
          key: id,
          data: result
        };
      }
    },
<span id='argos-_EditBase-method-onUpdateCompleted'>    /**
</span>     * Handler for update complete, checks for `this.options.returnTo` else it simply goes back.
     * @param entry
     */
    onUpdateCompleted: function onUpdateCompleted() /*entry*/{
      if (this.options &amp;&amp; this.options.returnTo) {
        var returnTo = this.options.returnTo;
        var view = App.getView(returnTo);
        if (view) {
          view.show();
        } else {
          window.location.hash = returnTo;
        }
      } else {
        ReUI.back();
      }
    },
<span id='argos-_EditBase-method-showValidationSummary'>    /**
</span>     * Creates the markup by applying the `validationSummaryItemTemplate` to each entry in `this.errors`
     * then sets the combined result into the summary validation node and sets the styling to visible
     */
    showValidationSummary: function showValidationSummary() {
      var content = [];

      for (var i = 0; i &lt; this.errors.length; i++) {
        content.push(this.validationSummaryItemTemplate.apply(this.errors[i], this.fields[this.errors[i].name]));
      }

      this.set('validationContent', content.join(''));
      _domClass['default'].add(this.domNode, 'panel-form-error');
    },
    showConcurrencySummary: function showConcurrencySummary() {
      var content = [];

      for (var i = 0; i &lt; this.errors.length; i++) {
        content.push(this.concurrencySummaryItemTemplate.apply(this.errors[i]));
      }

      this.set('concurrencyContent', content.join(''));
      _domClass['default'].add(this.domNode, 'panel-form-concurrency-error');
    },
<span id='argos-_EditBase-method-hideValidationSummary'>    /**
</span>     * Removes the summary validation visible styling and empties its contents of error markup
     */
    hideValidationSummary: function hideValidationSummary() {
      _domClass['default'].remove(this.domNode, 'panel-form-error');
      this.set('validationContent', '');
    },
<span id='argos-_EditBase-method-hideConcurrencySummary'>    /**
</span>     * Removes teh summary for concurrency errors
     */
    hideConcurrencySummary: function hideConcurrencySummary() {
      _domClass['default'].remove(this.domNode, 'panel-form-concurrency-error');
      this.set('concurrencyContent', '');
    },
<span id='argos-_EditBase-method-save'>    /**
</span>     * Handler for the save toolbar action.
     *
     * First validates the forms, showing errors and stoping saving if found.
     * Then calls either {@link #insert insert} or {@link #update update} based upon `this.inserting`.
     *
     */
    save: function save() {
      if (this.isFormDisabled()) {
        return;
      }

      this.hideValidationSummary();
      this.hideConcurrencySummary();

      if (this.validate() !== false) {
        this.showValidationSummary();
        return;
      }

      if (this.inserting) {
        this.insert();
      } else {
        this.update();
      }
    },
<span id='argos-_EditBase-method-getContext'>    /**
</span>     * Extends the getContext function to also include the `resourceKind` of the view, `insert`
     * state and `key` of the entry (false if inserting)
     */
    getContext: function getContext() {
      return _lang['default'].mixin(this.inherited(arguments), {
        resourceKind: this.resourceKind,
        insert: this.options.insert,
        key: this.options.insert ? false : this.options.key ? this.options.key : this.options.entry &amp;&amp; this.options.entry[this.idProperty] // eslint-disable-line
      });
    },
<span id='argos-_EditBase-method-getSecurity'>    /**
</span>     * Wrapper for detecting security for update mode or insert mode
     * @param {String} access Can be either &quot;update&quot; or &quot;insert&quot;
     */
    getSecurity: function getSecurity(access) {
      var lookup = {
        'update': this.updateSecurity,
        'insert': this.insertSecurity
      };

      return lookup[access];
    },
<span id='argos-_EditBase-method-beforeTransitionTo'>    /**
</span>     * Extends beforeTransitionTo to add the loading styling if refresh is needed
     */
    beforeTransitionTo: function beforeTransitionTo() {
      if (this.refreshRequired) {
        if (this.options.insert === true || this.options.key &amp;&amp; !this.options.entry) {
          _domClass['default'].add(this.domNode, 'panel-loading');
        } else {
          _domClass['default'].remove(this.domNode, 'panel-loading');
        }
      }

      this.inherited(arguments);
    },
    onTransitionTo: function onTransitionTo() {
      // Focus the default focus field if it exists and it has not already been focused.
      // This flag is important because onTransitionTo will fire multiple times if the user is using lookups and editor type fields that transition away from this view.
      if (this._focusField &amp;&amp; !this._hasFocused) {
        this._focusField.focus();
        this._hasFocused = true;
      }

      this.inherited(arguments);
    },
<span id='argos-_EditBase-method-activate'>    /**
</span>     * Empties the activate method which prevents detection of refresh from transititioning.
     *
     * External navigation (browser back/forward) never refreshes the edit view as it's always a terminal loop.
     * i.e. you never move &quot;forward&quot; from an edit view; you navigate to child editors, from which you always return.
     */
    activate: function activate() {},
<span id='argos-_EditBase-method-refreshRequiredFor'>    /**
</span>     * Extends refreshRequiredFor to return false if we already have the key the options is passing
     * @param {Object} options Navigation options from previous view
     */
    refreshRequiredFor: function refreshRequiredFor(options) {
      if (this.options) {
        if (options) {
          if (this.options.key &amp;&amp; this.options.key === options.key) {
            return false;
          }
        }
      }

      return this.inherited(arguments);
    },
<span id='argos-_EditBase-method-refresh'>    /**
</span>     * Refresh first clears out any variables set to previous data.
     *
     * The mode of the Edit view is set and determined via `this.options.insert`, and the views values are cleared.
     *
     * Lastly it makes the appropiate data request:
     */
    refresh: function refresh() {
      this.onRefresh();
      this.entry = false;
      this.changes = false;
      this.inserting = this.options.insert === true;
      this._hasFocused = false;

      _domClass['default'].remove(this.domNode, 'panel-form-error');
      _domClass['default'].remove(this.domNode, 'panel-form-concurrency-error');

      this.clearValues();

      if (this.inserting) {
        this.onRefreshInsert();
      } else {
        this.onRefreshUpdate();
      }
    },
    onRefresh: function onRefresh() {},
    onRefreshInsert: function onRefreshInsert() {},
    onRefreshUpdate: function onRefreshUpdate() {
      // apply as non-modified data
      if (this.options.entry) {
        this.processData(this.options.entry);

        // apply changes as modified data, since we want this to feed-back through
        if (this.options.changes) {
          this.changes = this.options.changes;
          this.setValues(this.changes);
        }
      } else {
        // if key is passed request that keys entity and process
        if (this.options.key) {
          this.requestData();
        }
      }
    }
  });

  _lang['default'].setObject('Sage.Platform.Mobile._EditBase', __class);
  module.exports = __class;
});
//# sourceMappingURL=data:application/json;base64,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QyxDQUFDLENBQUM7T0FDMUQ7O0FBRUQsYUFBTyxJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxDQUFDO0tBQ2xDOzs7Ozs7OztBQVFELGFBQVMsRUFBRSxTQUFTLFNBQVMsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBRTtBQUM3QyxVQUFNLFNBQVMsR0FBRyxJQUFJLElBQUksdUJBQU0sSUFBSSxFQUFFLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FDcEQsT0FBTyxDQUFDLGNBQWMsQ0FBQyxDQUFDO0FBQzNCLFVBQU0sS0FBSyxHQUFHLFNBQVMsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxJQUFJLG9CQUFRLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUUsWUFBWSxDQUFDLENBQUMsQ0FBQzs7QUFFeEcsVUFBSSxLQUFLLElBQUksT0FBTyxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssVUFBVSxFQUFFO0FBQzlDLGVBQU8sSUFBSSxDQUFDO09BQ2I7O0FBRUQsYUFBTyxJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxDQUFDO0tBQ2xDO0FBQ0QsZUFBVyxFQUFFLFNBQVMsV0FBVyxHQUFHO0FBQ2xDLGFBQU8sSUFBSSxDQUFDO0tBQ2I7QUFDRCxtQkFBZSxFQUFFLFNBQVMsZUFBZSxHQUFHLEVBQUU7QUFDOUMsZ0JBQVksRUFBRSxTQUFTLFlBQVksQ0FBQyxLQUFLLEVBQUU7QUFDekMsYUFBTyxLQUFLLENBQUM7S0FDZDs7Ozs7O0FBTUQsZ0JBQVksRUFBRSxTQUFTLFlBQVksQ0FBQyxLQUFLLEVBQUU7QUFDekMsYUFBTyxLQUFLLENBQUM7S0FDZDtBQUNELGVBQVcsRUFBRSxTQUFTLFdBQVcsQ0FBQyxLQUFLLEVBQUU7QUFDdkMsVUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsS0FBSyxJQUFJLEVBQUUsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDOztBQUVy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QUFXLEVBQUUsQ0FBQzs7QUFFbkIsVUFBSSxJQUFJLENBQUMsU0FBUyxFQUFFO0FBQ2xCLFlBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQztPQUN4QixNQUFNO0FBQ0wsWUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDO09BQ3hCO0tBQ0Y7QUFDRCxhQUFTLEVBQUUsU0FBUyxTQUFTLEdBQUcsRUFBRTtBQUNsQyxtQkFBZSxFQUFFLFNBQVMsZUFBZSxHQUFHLEVBQUU7QUFDOUMsbUJBQWUsRUFBRSxTQUFTLGVBQWUsR0FBRzs7QUFFMUMsVUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRTtBQUN0QixZQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUM7OztBQUdyQyxZQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFO0FBQ3hCLGNBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUM7QUFDcEMsY0FBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7U0FDOUI7T0FDRixNQUFNOztBQUVMLFlBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUU7QUFDcEIsY0FBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO1NBQ3BCO09BQ0Y7S0FDRjtHQUNGLENBQUMsQ0FBQzs7QUFFSCxtQkFBSyxTQUFTLENBQUMsZ0NBQWdDLEVBQUUsT0FBTyxDQUFDLENBQUM7bUJBQzNDLE9BQU8iLCJmaWxlIjoic3JjL19FZGl0QmFzZS5qcyIsInNvdXJjZVJvb3QiOiJzcmMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBDb3B5cmlnaHQgKGMpIDIwMTAsIFNhZ2UgU29mdHdhcmUsIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5pbXBvcnQgZGVjbGFyZSBmcm9tICdkb2pvL19iYXNlL2RlY2xhcmUnO1xyXG5pbXBvcnQgbGFuZyBmcm9tICdkb2pvL19iYXNlL2xhbmcnO1xyXG5pbXBvcnQgY29ubmVjdCBmcm9tICdkb2pvL19iYXNlL2Nvbm5lY3QnO1xyXG5pbXBvcnQgYXJyYXkgZnJvbSAnZG9qby9fYmFzZS9hcnJheSc7XHJcbmltcG9ydCBEZWZlcnJlZCBmcm9tICdkb2pvL19iYXNlL0RlZmVycmVkJztcclxuaW1wb3J0IHdpbiBmcm9tICdkb2pvL19iYXNlL3dpbmRvdyc7XHJcbmltcG9ydCBkb21BdHRyIGZyb20gJ2Rvam8vZG9tLWF0dHInO1xyXG5pbXBvcnQgZG9tQ2xhc3MgZnJvbSAnZG9qby9kb20tY2xhc3MnO1xyXG5pbXBvcnQgZG9tIGZyb20gJ2Rvam8vZG9tJztcclxuaW1wb3J0IGRvbUNvbnN0cnVjdCBmcm9tICdkb2pvL2RvbS1jb25zdHJ1Y3QnO1xyXG5pbXBvcnQgcXVlcnkgZnJvbSAnZG9qby9xdWVyeSc7XHJcbmltcG9ydCB1dGlsaXR5IGZyb20gJy4vVXRpbGl0eSc7XHJcbmltcG9ydCBFcnJvck1hbmFnZXIgZnJvbSAnLi9FcnJvck1hbmFnZXInO1xyXG5pbXBvcnQgRmllbGRNYW5hZ2VyIGZyb20gJy4vRmllbGRNYW5hZ2VyJztcclxuaW1wb3J0IFZpZXcgZnJvbSAnLi9WaWV3JztcclxuaW1wb3J0IGdldFJlc291cmNlIGZyb20gJy4vSTE4bic7XHJcbmltcG9ydCAnZG9qby9Ob2RlTGlzdC1tYW5pcHVsYXRlJztcclxuaW1wb3J0ICcuL0ZpZWxkcy9Cb29sZWFuRmllbGQnO1xyXG5pbXBvcnQgJy4vRmllbGRzL0RhdGVGaWVsZCc7XHJcbmltcG9ydCAnLi9GaWVsZHMvRGVjaW1hbEZpZWxkJztcclxuaW1wb3J0ICcuL0ZpZWxkcy9Ecm9wZG93bkZpZWxkJztcclxuaW1wb3J0ICcuL0ZpZWxkcy9EdXJhdGlvbkZpZWxkJztcclxuaW1wb3J0ICcuL0ZpZWxkcy9IaWRkZW5GaWVsZCc7XHJcbmltcG9ydCAnLi9GaWVsZHMvTG9va3VwRmllbGQnO1xyXG5pbXBvcnQgJy4vRmllbGRzL05vdGVGaWVsZCc7XHJcbmltcG9ydCAnLi9GaWVsZHMvUGhvbmVGaWVsZCc7XHJcbmltcG9ydCAnLi9GaWVsZHMvU2VsZWN0RmllbGQnO1xyXG5pbXBvcnQgJy4vRmllbGRzL1NpZ25hdHVyZUZpZWxkJztcclxuaW1wb3J0ICcuL0ZpZWxkcy9UZXh0QXJlYUZpZWxkJztcclxuaW1wb3J0ICcuL0ZpZWxkcy9UZXh0RmllbGQnO1xyXG5cclxuY29uc3QgcmVzb3VyY2UgPSBnZXRSZXNvdXJjZSgnZWRpdEJhc2UnKTtcclxuXHJcbi8qKlxyXG4gKiBAY2xhc3MgYXJnb3MuX0VkaXRCYXNlXHJcbiAqIEFuIEVkaXQgVmlldyBpcyBhIGR1YWwgcHVycG9zZSB2aWV3IC0gdXNlZCBmb3IgYm90aCBDcmVhdGluZyBhbmQgVXBkYXRpbmcgcmVjb3Jkcy4gSXQgaXMgY29tcHJpc2VkXHJcbiAqIG9mIGEgbGF5b3V0IHNpbWlsYXIgdG8gRGV0YWlsIHJvd3MgYnV0IGFyZSBpbnN0ZWFkIEVkaXQgZmllbGRzLlxyXG4gKlxyXG4gKiBBIHVuaXF1ZSBwYXJ0IG9mIHRoZSBFZGl0IHZpZXcgaXMgaXQncyBsaWZlY3ljbGUgaW4gY29tcGFyaXNvbiB0byBEZXRhaWwuIFRoZSBEZXRhaWwgdmlldyBpcyB0b3JuXHJcbiAqIGRvd24gYW5kIHJlYnVpbHQgd2l0aCBldmVyeSByZWNvcmQuIFdpdGggRWRpdCB0aGUgZm9ybSBpcyBlbXB0aWVkIChIVE1MIGxlZnQgaW4tdGFjdCkgYW5kIG5ldyB2YWx1ZXNcclxuICogYXJlIGFwcGxpZWQgdG8gdGhlIGZpZWxkcy5cclxuICpcclxuICogU2luY2UgRWRpdCBWaWV3cyBhcmUgdHlwaWNhbGx5IHRoZSBcImxhc3RcIiB2aWV3ICh5b3UgYWx3YXlzIGNvbWUgZnJvbSBhIExpc3Qgb3IgRGV0YWlsIHZpZXcpIGl0IHdhcnJhbnRzXHJcbiAqIHNwZWNpYWwgYXR0ZW50aW9uIHRvIHRoZSBuYXZpZ2F0aW9uIG9wdGlvbnMgdGhhdCBhcmUgcGFzc2VkLCBhcyB0aGV5IGdyZWF0bHkgY29udHJvbCBob3cgdGhlIEVkaXQgdmlld1xyXG4gKiBmdW5jdGlvbnMgYW5kIG9wZXJhdGVzLlxyXG4gKlxyXG4gKiBAYWx0ZXJuYXRlQ2xhc3NOYW1lIF9FZGl0QmFzZVxyXG4gKiBAZXh0ZW5kcyBhcmdvcy5WaWV3XHJcbiAqIEByZXF1aXJlcyBhcmdvcy5VdGlsaXR5XHJcbiAqIEByZXF1aXJlcyBhcmdvcy5GaWVsZHMuRXJyb3JNYW5hZ2VyXHJcbiAqIEByZXF1aXJlcyBhcmdvcy5GaWVsZHMuRmllbGRNYW5hZ2VyXHJcbiAqIEByZXF1aXJlcyBhcmdvcy5GaWVsZHMuQm9vbGVhbkZpZWxkXHJcbiAqIEByZXF1aXJlcyBhcmdvcy5GaWVsZHMuRGVjaW1hbEZpZWxkXHJcbiAqIEByZXF1aXJlcyBhcmdvcy5GaWVsZHMuRHVyYXRpb25GaWVsZFxyXG4gKiBAcmVxdWlyZXMgYXJnb3MuRmllbGRzLkhpZGRlbkZpZWxkXHJcbiAqIEByZXF1aXJlcyBhcmdvcy5GaWVsZHMuTG9va3VwRmllbGRcclxuICogQHJlcXVpcmVzIGFyZ29zLkZpZWxkcy5Ob3RlRmllbGRcclxuICogQHJlcXVpcmVzIGFyZ29zLkZpZWxkcy5QaG9uZUZpZWxkXHJcbiAqIEByZXF1aXJlcyBhcmdvcy5GaWVsZHMuU2VsZWN0RmllbGRcclxuICogQHJlcXVpcmVzIGFyZ29zLkZpZWxkcy5TaWduYXR1cmVGaWVsZFxyXG4gKiBAcmVxdWlyZXMgYXJnb3MuRmllbGRzLlRleHRBcmVhRmllbGRcclxuICogQHJlcXVpcmVzIGFyZ29zLkZpZWxkcy5UZXh0RmllbGRcclxuICovXHJcbmNvbnN0IF9fY2xhc3MgPSBkZWNsYXJlKCdhcmdvcy5fRWRpdEJhc2UnLCBbVmlld10sIHtcclxuICAvKipcclxuICAgKiBAcHJvcGVydHkge09iamVjdH1cclxuICAgKiBDcmVhdGVzIGEgc2V0dGVyIG1hcCB0byBodG1sIG5vZGVzLCBuYW1lbHk6XHJcbiAgICpcclxuICAgKiAqIHZhbGlkYXRpb25Db250ZW50ID0+IHZhbGlkYXRpb25Db250ZW50Tm9kZSdzIGlubmVySFRNTFxyXG4gICAqXHJcbiAgICovXHJcbiAgYXR0cmlidXRlTWFwOiB7XHJcbiAgICB2YWxpZGF0aW9uQ29udGVudDoge1xyXG4gICAgICBub2RlOiAndmFsaWRhdGlvbkNvbnRlbnROb2RlJyxcclxuICAgICAgdHlwZTogJ2lubmVySFRNTCcsXHJcbiAgICB9LFxyXG4gICAgY29uY3VycmVuY3lDb250ZW50OiB7XHJcbiAgICAgIG5vZGU6ICdjb25jdXJyZW5jeUNvbnRlbnROb2RlJyxcclxuICAgICAgdHlwZTogJ2lubmVySFRNTCcsXHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogQHByb3BlcnR5IHtTaW1wbGF0ZX1cclxuICAgKiBUaGUgdGVtcGxhdGUgdXNlZCB0byByZW5kZXIgdGhlIHZpZXcncyBtYWluIERPTSBlbGVtZW50IHdoZW4gdGhlIHZpZXcgaXMgaW5pdGlhbGl6ZWQuXHJcbiAgICogVGhpcyB0ZW1wbGF0ZSBpbmNsdWRlcyBsb2FkaW5nVGVtcGxhdGUgYW5kIHZhbGlkYXRpb25TdW1tYXJ5VGVtcGxhdGUuXHJcbiAgICpcclxuICAgKiBUaGUgZGVmYXVsdCB0ZW1wbGF0ZSB1c2VzIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcclxuICAgKlxyXG4gICAqICAgICAgbmFtZSAgICAgICAgICAgICAgICBkZXNjcmlwdGlvblxyXG4gICAqICAgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAqICAgICAgaWQgICAgICAgICAgICAgICAgICAgbWFpbiBjb250YWluZXIgZGl2IGlkXHJcbiAgICogICAgICB0aXRsZSAgICAgICAgICAgICAgICBtYWluIGNvbnRhaW5lciBkaXYgdGl0bGUgYXR0clxyXG4gICAqICAgICAgY2xzICAgICAgICAgICAgICAgICAgYWRkaXRpb25hbCBjbGFzcyBzdHJpbmcgYWRkZWQgdG8gdGhlIG1haW4gY29udGFpbmVyIGRpdlxyXG4gICAqICAgICAgcmVzb3VyY2VLaW5kICAgICAgICAgc2V0IHRvIGRhdGEtcmVzb3VyY2Uta2luZFxyXG4gICAqXHJcbiAgICovXHJcbiAgd2lkZ2V0VGVtcGxhdGU6IG5ldyBTaW1wbGF0ZShbXHJcbiAgICAnPGRpdiBpZD1cInslPSAkLmlkICV9XCIgdGl0bGU9XCJ7JTogJC50aXRsZVRleHQgJX1cIiBjbGFzcz1cImVkaXQgcGFuZWwgeyU9ICQuY2xzICV9XCIgeyUgaWYgKCQucmVzb3VyY2VLaW5kKSB7ICV9ZGF0YS1yZXNvdXJjZS1raW5kPVwieyU9ICQucmVzb3VyY2VLaW5kICV9XCJ7JSB9ICV9PicsXHJcbiAgICAneyUhICQubG9hZGluZ1RlbXBsYXRlICV9JyxcclxuICAgICd7JSEgJC52YWxpZGF0aW9uU3VtbWFyeVRlbXBsYXRlICV9JyxcclxuICAgICd7JSEgJC5jb25jdXJyZW5jeVN1bW1hcnlUZW1wbGF0ZSAlfScsXHJcbiAgICAnPGRpdiBjbGFzcz1cInBhbmVsLWNvbnRlbnRcIiBkYXRhLWRvam8tYXR0YWNoLXBvaW50PVwiY29udGVudE5vZGVcIj48L2Rpdj4nLFxyXG4gICAgJzwvZGl2PicsXHJcbiAgXSksXHJcbiAgLyoqXHJcbiAgICogQHByb3BlcnR5IHtTaW1wbGF0ZX1cclxuICAgKiBIVE1MIHNob3duIHdoZW4gZGF0YSBpcyBiZWluZyBsb2FkZWQuXHJcbiAgICpcclxuICAgKiBgJGAgPT4gdGhlIHZpZXcgaW5zdGFuY2VcclxuICAgKi9cclxuICBsb2FkaW5nVGVtcGxhdGU6IG5ldyBTaW1wbGF0ZShbXHJcbiAgICAnPGZpZWxkc2V0IGNsYXNzPVwicGFuZWwtbG9hZGluZy1pbmRpY2F0b3JcIj4nLFxyXG4gICAgJzxkaXYgY2xhc3M9XCJyb3dcIj4nLFxyXG4gICAgICAnPGRpdiBjbGFzcz1cImJ1c3lJbmRpY2F0b3JfX2NvbnRhaW5lciBidXN5SW5kaWNhdG9yLS1hY3RpdmVcIiBhcmlhLWxpdmU9XCJwb2xpdGVcIj4nLFxyXG4gICAgICAgICc8ZGl2IGNsYXNzPVwiYnVzeUluZGljYXRvciBidXN5SW5kaWNhdG9yLS1sYXJnZVwiPicsXHJcbiAgICAgICAgICAnPGRpdiBjbGFzcz1cImJ1c3lJbmRpY2F0b3JfX2JhciBidXN5SW5kaWNhdG9yX19iYXItLWxhcmdlIGJ1c3lJbmRpY2F0b3JfX2Jhci0tb25lXCI+PC9kaXY+JyxcclxuICAgICAgICAgICc8ZGl2IGNsYXNzPVwiYnVzeUluZGljYXRvcl9fYmFyIGJ1c3lJbmRpY2F0b3JfX2Jhci0tbGFyZ2UgYnVzeUluZGljYXRvcl9fYmFyLS10d29cIj48L2Rpdj4nLFxyXG4gICAgICAgICAgJzxkaXYgY2xhc3M9XCJidXN5SW5kaWNhdG9yX19iYXIgYnVzeUluZGljYXRvcl9fYmFyLS1sYXJnZSBidXN5SW5kaWNhdG9yX19iYXItLXRocmVlXCI+PC9kaXY+JyxcclxuICAgICAgICAgICc8ZGl2IGNsYXNzPVwiYnVzeUluZGljYXRvcl9fYmFyIGJ1c3lJbmRpY2F0b3JfX2Jhci0tbGFyZ2UgYnVzeUluZGljYXRvcl9fYmFyLS1mb3VyXCI+PC9kaXY+JyxcclxuICAgICAgICAgICc8ZGl2IGNsYXNzPVwiYnVzeUluZGljYXRvcl9fYmFyIGJ1c3lJbmRpY2F0b3JfX2Jhci0tbGFyZ2UgYnVzeUluZGljYXRvcl9fYmFyLS1maXZlXCI+PC9kaXY+JyxcclxuICAgICAgICAnPC9kaXY+JyxcclxuICAgICAgICAnPHNwYW4gY2xhc3M9XCJidXN5SW5kaWNhdG9yX19sYWJlbFwiPnslOiAkLmxvYWRpbmdUZXh0ICV9PC9zcGFuPicsXHJcbiAgICAgICc8L2Rpdj4nLFxyXG4gICAgJzwvZGl2PicsXHJcbiAgICAnPC9maWVsZHNldD4nLFxyXG4gIF0pLFxyXG4gIC8qKlxyXG4gICAqIEBwcm9wZXJ0eSB7U2ltcGxhdGV9XHJcbiAgICogSFRNTCBmb3IgdGhlIHZhbGlkYXRpb24gc3VtbWFyeSBhcmVhLCB0aGlzIGRpdiBpcyBzaG93bi9oaWRkZW4gYXMgbmVlZGVkLlxyXG4gICAqXHJcbiAgICogYCRgID0+IHRoZSB2aWV3IGluc3RhbmNlXHJcbiAgICovXHJcbiAgdmFsaWRhdGlvblN1bW1hcnlUZW1wbGF0ZTogbmV3IFNpbXBsYXRlKFtcclxuICAgICc8ZGl2IGNsYXNzPVwicGFuZWwtdmFsaWRhdGlvbi1zdW1tYXJ5XCI+JyxcclxuICAgICc8aDI+eyU6ICQudmFsaWRhdGlvblN1bW1hcnlUZXh0ICV9PC9oMj4nLFxyXG4gICAgJzx1bCBkYXRhLWRvam8tYXR0YWNoLXBvaW50PVwidmFsaWRhdGlvbkNvbnRlbnROb2RlXCI+JyxcclxuICAgICc8L3VsPicsXHJcbiAgICAnPC9kaXY+JyxcclxuICBdKSxcclxuICAvKipcclxuICAgKiBAcHJvcGVydHkge1NpbXBsYXRlfVxyXG4gICAqIEhUTUwgZm9yIHRoZSBjb25jdXJyZW5jeSBlcnJvciBhcmVhLCB0aGlzIGRpdiBpcyBzaG93bi9oaWRkZW4gYXMgbmVlZGVkLlxyXG4gICAqXHJcbiAgICogYCRgID0+IHRoZSB2aWV3IGluc3RhbmNlXHJcbiAgICovXHJcbiAgY29uY3VycmVuY3lTdW1tYXJ5VGVtcGxhdGU6IG5ldyBTaW1wbGF0ZShbXHJcbiAgICAnPGRpdiBjbGFzcz1cInBhbmVsLWNvbmN1cnJlbmN5LXN1bW1hcnlcIj4nLFxyXG4gICAgJzxoMj57JTogJC5jb25jdXJyZW5jeVN1bW1hcnlUZXh0ICV9PC9oMj4nLFxyXG4gICAgJzx1bCBkYXRhLWRvam8tYXR0YWNoLXBvaW50PVwiY29uY3VycmVuY3lDb250ZW50Tm9kZVwiPicsXHJcbiAgICAnPC91bD4nLFxyXG4gICAgJzwvZGl2PicsXHJcbiAgXSksXHJcbiAgLyoqXHJcbiAgICogQHByb3BlcnR5IHtTaW1wbGF0ZX1cclxuICAgKiBIVE1MIHNob3duIHdoZW4gZGF0YSBpcyBiZWluZyBsb2FkZWQuXHJcbiAgICpcclxuICAgKiAqIGAkYCA9PiB2YWxpZGF0aW9uIGVycm9yIG9iamVjdFxyXG4gICAqICogYCQkYCA9PiBmaWVsZCBpbnN0YW5jZSB0aGF0IHRoZSBlcnJvciBpcyBvblxyXG4gICAqL1xyXG4gIHZhbGlkYXRpb25TdW1tYXJ5SXRlbVRlbXBsYXRlOiBuZXcgU2ltcGxhdGUoW1xyXG4gICAgJzxsaT4nLFxyXG4gICAgJzxhIGhyZWY9XCIjeyU9ICQubmFtZSAlfVwiPicsXHJcbiAgICAnPGgzPnslOiAkLm1lc3NhZ2UgJX08L2gzPicsXHJcbiAgICAnPGg0PnslOiAkJC5sYWJlbCAlfTwvaDQ+JyxcclxuICAgICc8L2E+JyxcclxuICAgICc8L2xpPicsXHJcbiAgXSksXHJcbiAgLyoqXHJcbiAgICogQHByb3BlcnR5IHtTaW1wbGF0ZX1cclxuICAgKiAqIGAkYCA9PiB2YWxpZGF0aW9uIGVycm9yIG9iamVjdFxyXG4gICAqL1xyXG4gIGNvbmN1cnJlbmN5U3VtbWFyeUl0ZW1UZW1wbGF0ZTogbmV3IFNpbXBsYXRlKFtcclxuICAgICc8bGk+JyxcclxuICAgICc8aDM+eyU6ICQubWVzc2FnZSAlfTwvaDM+JyxcclxuICAgICc8aDQ+eyU6ICQubmFtZSAlfTwvaDQ+JyxcclxuICAgICc8L2xpPicsXHJcbiAgXSksXHJcbiAgLyoqXHJcbiAgICogQHByb3BlcnR5IHtTaW1wbGF0ZX1cclxuICAgKiBIVE1MIHRoYXQgc3RhcnRzIGEgbmV3IHNlY3Rpb24gaW5jbHVkaW5nIHRoZSBjb2xsYXBzaWJsZSBoZWFkZXJcclxuICAgKlxyXG4gICAqIGAkYCA9PiB0aGUgdmlldyBpbnN0YW5jZVxyXG4gICAqL1xyXG4gIHNlY3Rpb25CZWdpblRlbXBsYXRlOiBuZXcgU2ltcGxhdGUoW1xyXG4gICAgJzxoMiBkYXRhLWFjdGlvbj1cInRvZ2dsZVNlY3Rpb25cIiBjbGFzcz1cInslIGlmICgkLmNvbGxhcHNlZCB8fCAkLm9wdGlvbnMuY29sbGFwc2VkKSB7ICV9Y29sbGFwc2VkeyUgfSAlfVwiPicsXHJcbiAgICAnPGJ1dHRvbiBjbGFzcz1cInslIGlmICgkLmNvbGxhcHNlZCkgeyAlfXslOiAkJC50b2dnbGVFeHBhbmRDbGFzcyAlfXslIH0gZWxzZSB7ICV9eyU6ICQkLnRvZ2dsZUNvbGxhcHNlQ2xhc3MgJX17JSB9ICV9XCIgYXJpYS1sYWJlbD1cInslOiAkJC50b2dnbGVDb2xsYXBzZVRleHQgJX1cIj48L2J1dHRvbj4nLFxyXG4gICAgJ3slOiAoJC50aXRsZSB8fCAkLm9wdGlvbnMudGl0bGUpICV9JyxcclxuICAgICc8L2gyPicsXHJcbiAgICAnPGZpZWxkc2V0IGNsYXNzPVwieyU9ICgkLmNscyB8fCAkLm9wdGlvbnMuY2xzKSAlfVwiPicsXHJcbiAgXSksXHJcbiAgLyoqXHJcbiAgICogQHByb3BlcnR5IHtTaW1wbGF0ZX1cclxuICAgKiBIVE1MIHRoYXQgZW5kcyBhIHNlY3Rpb25cclxuICAgKlxyXG4gICAqIGAkYCA9PiB0aGUgdmlldyBpbnN0YW5jZVxyXG4gICAqL1xyXG4gIHNlY3Rpb25FbmRUZW1wbGF0ZTogbmV3IFNpbXBsYXRlKFtcclxuICAgICc8L2ZpZWxkc2V0PicsXHJcbiAgXSksXHJcbiAgLyoqXHJcbiAgICogQHByb3BlcnR5IHtTaW1wbGF0ZX1cclxuICAgKiBIVE1MIGNyZWF0ZWQgZm9yIGVhY2ggcHJvcGVydHkgKGZpZWxkIHJvdykuXHJcbiAgICpcclxuICAgKiAqIGAkYCA9PiB0aGUgZmllbGQgcm93IG9iamVjdCBkZWZpbmVkIGluIHtAbGluayAjY3JlYXRlTGF5b3V0IGNyZWF0ZUxheW91dH0uXHJcbiAgICogKiBgJCRgID0+IHRoZSB2aWV3IGluc3RhbmNlXHJcbiAgICovXHJcbiAgcHJvcGVydHlUZW1wbGF0ZTogbmV3IFNpbXBsYXRlKFtcclxuICAgICc8YSBuYW1lPVwieyU9ICQubmFtZSB8fCAkLnByb3BlcnR5ICV9XCI+PC9hPicsXHJcbiAgICAnPGRpdiBjbGFzcz1cInJvdyByb3ctZWRpdCB7JT0gJC5jbHMgJX17JSBpZiAoJC5yZWFkb25seSkgeyAlfXJvdy1yZWFkb25seXslIH0gJX1cIiBkYXRhLWZpZWxkPVwieyU9ICQubmFtZSB8fCAkLnByb3BlcnR5ICV9XCIgZGF0YS1maWVsZC10eXBlPVwieyU9ICQudHlwZSAlfVwiPicsXHJcbiAgICAnPC9kaXY+JyxcclxuICBdKSxcclxuXHJcbiAgLyoqXHJcbiAgICogQGNmZyB7U3RyaW5nfVxyXG4gICAqIFRoZSB1bmlxdWUgaWRlbnRpZmllciBvZiB0aGUgdmlld1xyXG4gICAqL1xyXG4gIGlkOiAnZ2VuZXJpY19lZGl0JyxcclxuICBzdG9yZTogbnVsbCxcclxuICAvKipcclxuICAgKiBAcHJvcGVydHkge09iamVjdH1cclxuICAgKiBUaGUgbGF5b3V0IGRlZmluaXRpb24gdGhhdCBjb25zdHJ1Y3RzIHRoZSBkZXRhaWwgdmlldyB3aXRoIHNlY3Rpb25zIGFuZCByb3dzXHJcbiAgICovXHJcbiAgbGF5b3V0OiBudWxsLFxyXG4gIC8qKlxyXG4gICAqIEBjZmcge0Jvb2xlYW59XHJcbiAgICogRW5hYmxlcyB0aGUgdXNlIG9mIHRoZSBjdXN0b21pemF0aW9uIGVuZ2luZSBvbiB0aGlzIHZpZXcgaW5zdGFuY2VcclxuICAgKi9cclxuICBlbmFibGVDdXN0b21pemF0aW9uczogdHJ1ZSxcclxuICAvKipcclxuICAgKiBAcHJvcGVydHkge1N0cmluZ31cclxuICAgKiBUaGUgY3VzdG9taXphdGlvbiBpZGVudGlmaWVyIGZvciB0aGlzIGNsYXNzLiBXaGVuIGEgY3VzdG9taXphdGlvbiBpcyByZWdpc3RlcmVkIGl0IGlzIHBhc3NlZFxyXG4gICAqIGEgcGF0aC9pZGVudGlmaWVyIHdoaWNoIGlzIHRoZW4gbWF0Y2hlZCB0byB0aGlzIHByb3BlcnR5LlxyXG4gICAqL1xyXG4gIGN1c3RvbWl6YXRpb25TZXQ6ICdlZGl0JyxcclxuICAvKipcclxuICAgKiBAY2ZnIHtCb29sZWFufVxyXG4gICAqIENvbnRyb2xzIGlmIHRoZSB2aWV3IHNob3VsZCBiZSBleHBvc2VkXHJcbiAgICovXHJcbiAgZXhwb3NlOiBmYWxzZSxcclxuICAvKipcclxuICAgKiBAY2ZnIHtTdHJpbmcvT2JqZWN0fVxyXG4gICAqIE1heSBiZSB1c2VkIGZvciB2ZXJpZnlpbmcgdGhlIHZpZXcgaXMgYWNjZXNzaWJsZSBmb3IgY3JlYXRpbmcgZW50cmllc1xyXG4gICAqL1xyXG4gIGluc2VydFNlY3VyaXR5OiBmYWxzZSxcclxuICAvKipcclxuICAgKiBAY2ZnIHtTdHJpbmcvT2JqZWN0fVxyXG4gICAqIE1heSBiZSB1c2VkIGZvciB2ZXJpZnlpbmcgdGhlIHZpZXcgaXMgYWNjZXNzaWJsZSBmb3IgZWRpdGluZyBlbnRyaWVzXHJcbiAgICovXHJcbiAgdXBkYXRlU2VjdXJpdHk6IGZhbHNlLFxyXG5cclxuICB2aWV3VHlwZTogJ2VkaXQnLFxyXG5cclxuICAvKipcclxuICAgKiBAZGVwcmVjYXRlZFxyXG4gICAqL1xyXG4gIHNhdmVUZXh0OiByZXNvdXJjZS5zYXZlVGV4dCxcclxuICAvKipcclxuICAgKiBAY2ZnIHtTdHJpbmd9XHJcbiAgICogRGVmYXVsdCB0aXRsZSB0ZXh0IHNob3duIGluIHRoZSB0b3AgdG9vbGJhclxyXG4gICAqL1xyXG4gIHRpdGxlVGV4dDogcmVzb3VyY2UudGl0bGVUZXh0LFxyXG4gIC8qKlxyXG4gICAqIEBjZmcge1N0cmluZ31cclxuICAgKiBUaGUgdGV4dCBwbGFjZWQgaW4gdGhlIGhlYWRlciB3aGVuIHRoZXJlIGFyZSB2YWxpZGF0aW9uIGVycm9yc1xyXG4gICAqL1xyXG4gIHZhbGlkYXRpb25TdW1tYXJ5VGV4dDogcmVzb3VyY2UudmFsaWRhdGlvblN1bW1hcnlUZXh0LFxyXG4gIC8qKlxyXG4gICAqIEBjZmcge1N0cmluZ31cclxuICAgKiBUaGUgdGV4dCBwbGFjZWQgaW4gdGhlIGhlYWRlciB3aGVuIHRoZXJlIGFyZSB2YWxpZGF0aW9uIGVycm9yc1xyXG4gICAqL1xyXG4gIGNvbmN1cnJlbmN5U3VtbWFyeVRleHQ6IHJlc291cmNlLmNvbmN1cnJlbmN5U3VtbWFyeVRleHQsXHJcbiAgLyoqXHJcbiAgICogQHByb3BlcnR5IHtTdHJpbmd9XHJcbiAgICogRGVmYXVsdCB0ZXh0IHVzZWQgaW4gdGhlIHNlY3Rpb24gaGVhZGVyXHJcbiAgICovXHJcbiAgZGV0YWlsc1RleHQ6IHJlc291cmNlLmRldGFpbHNUZXh0LFxyXG4gIC8qKlxyXG4gICAqIEBwcm9wZXJ0eSB7U3RyaW5nfVxyXG4gICAqIFRleHQgc2hvd24gd2hpbGUgdGhlIHZpZXcgaXMgbG9hZGluZy5cclxuICAgKi9cclxuICBsb2FkaW5nVGV4dDogcmVzb3VyY2UubG9hZGluZ1RleHQsXHJcbiAgLyoqXHJcbiAgICogQHByb3BlcnR5IHtPYmplY3R9XHJcbiAgICogTG9jYWxpemVkIGVycm9yIG1lc3NhZ2VzLiBPbmUgZ2VuZXJhbCBlcnJvciBtZXNzYWdlLCBhbmQgbWVzc2FnZXMgYnkgSFRUUCBzdGF0dXMgY29kZS5cclxuICAgKi9cclxuICBlcnJvclRleHQ6IHtcclxuICAgIGdlbmVyYWw6IHJlc291cmNlLmVycm9yR2VuZXJhbCxcclxuICAgIHN0YXR1czoge1xyXG4gICAgICAnNDEwJzogcmVzb3VyY2UuZXJyb3I0MDEsXHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogQHByb3BlcnR5IHtTdHJpbmd9XHJcbiAgICogVGV4dCBhbGVydGVkIHRvIHVzZXIgd2hlbiB0aGUgZGF0YSBoYXMgYmVlbiB1cGRhdGVkIHNpbmNlIHRoZXkgbGFzdCBmZXRjaGVkIHRoZSBkYXRhLlxyXG4gICAqL1xyXG4gIGNvbmN1cnJlbmN5RXJyb3JUZXh0OiByZXNvdXJjZS5jb25jdXJyZW5jeUVycm9yVGV4dCxcclxuICAvKipcclxuICAgKiBAcHJvcGVydHkge1N0cmluZ31cclxuICAgKiBBUklBIGxhYmVsIHRleHQgZm9yIGEgY29sbGFwc2libGUgc2VjdGlvbiBoZWFkZXJcclxuICAgKi9cclxuICB0b2dnbGVDb2xsYXBzZVRleHQ6IHJlc291cmNlLnRvZ2dsZUNvbGxhcHNlVGV4dCxcclxuICAvKipcclxuICAgKiBAcHJvcGVydHkge1N0cmluZ31cclxuICAgKiBDU1MgY2xhc3MgZm9yIHRoZSBjb2xsYXBzZSBidXR0b24gd2hlbiBpbiBhIGV4cGFuZGVkIHN0YXRlXHJcbiAgICovXHJcbiAgdG9nZ2xlQ29sbGFwc2VDbGFzczogJ2ZhIGZhLWNoZXZyb24tZG93bicsXHJcbiAgLyoqXHJcbiAgICogQHByb3BlcnR5IHtTdHJpbmd9XHJcbiAgICogQ1NTIGNsYXNzIGZvciB0aGUgY29sbGFwc2UgYnV0dG9uIHdoZW4gaW4gYSBjb2xsYXBzZWQgc3RhdGVcclxuICAgKi9cclxuICB0b2dnbGVFeHBhbmRDbGFzczogJ2ZhIGZhLWNoZXZyb24tcmlnaHQnLFxyXG4gIC8qKlxyXG4gICAqIEBwcm9wZXJ0eSB7T2JqZWN0fVxyXG4gICAqIENvbGxlY3Rpb24gb2YgdGhlIGZpZWxkcyBpbiB0aGUgbGF5b3V0IHdoZXJlIHRoZSBrZXkgaXMgdGhlIGBuYW1lYCBvZiB0aGUgZmllbGQuXHJcbiAgICovXHJcbiAgZmllbGRzOiBudWxsLFxyXG4gIC8qKlxyXG4gICAqIEBwcm9wZXJ0eSB7T2JqZWN0fVxyXG4gICAqIFRoZSBzYXZlZCBkYXRhIHJlc3BvbnNlLlxyXG4gICAqL1xyXG4gIGVudHJ5OiBudWxsLFxyXG4gIC8qKlxyXG4gICAqIEBwcm9wZXJ0eSB7Qm9vbGVhbn1cclxuICAgKiBGbGFncyBpZiB0aGUgdmlldyBpcyBpbiBcImluc2VydFwiIChjcmVhdGUpIG1vZGUsIG9yIGlmIGl0IGlzIGluIFwidXBkYXRlXCIgKGVkaXQpIG1vZGUuXHJcbiAgICovXHJcbiAgaW5zZXJ0aW5nOiBudWxsLFxyXG5cclxuICBfZm9jdXNGaWVsZDogbnVsbCxcclxuICBfaGFzRm9jdXNlZDogZmFsc2UsXHJcblxyXG4gIC8qKlxyXG4gICAqIEV4dGVuZHMgY29uc3RydWN0b3IgdG8gaW5pdGlhbHplIGB0aGlzLmZpZWxkc2AgdG8ge31cclxuICAgKiBAcGFyYW0gb1xyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yOiBmdW5jdGlvbiBjb25zdHJ1Y3RvciggLypvKi8gKSB7XHJcbiAgICB0aGlzLmZpZWxkcyA9IHt9O1xyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogV2hlbiB0aGUgYXBwIGlzIHN0YXJ0ZWQgdGhpcyBmaXJlcywgdGhlIEVkaXQgdmlldyByZW5kZXJzIGl0cyBsYXlvdXQgaW1tZWRpYXRlbHksIHRoZW5cclxuICAgKiByZW5kZXJzIGVhY2ggZmllbGQgaW5zdGFuY2UuXHJcbiAgICpcclxuICAgKiBPbiByZWZyZXNoIGl0IHdpbGwgY2xlYXIgdGhlIHZhbHVlcywgYnV0IGxlYXZlIHRoZSBsYXlvdXQgaW50YWN0LlxyXG4gICAqXHJcbiAgICovXHJcbiAgc3RhcnR1cDogZnVuY3Rpb24gc3RhcnR1cCgpIHtcclxuICAgIHRoaXMuaW5oZXJpdGVkKGFyZ3VtZW50cyk7XHJcbiAgICB0aGlzLnByb2Nlc3NMYXlvdXQodGhpcy5fY3JlYXRlQ3VzdG9taXplZExheW91dCh0aGlzLmNyZWF0ZUxheW91dCgpKSk7XHJcblxyXG4gICAgcXVlcnkoJ2RpdltkYXRhLWZpZWxkXScsIHRoaXMuY29udGVudE5vZGUpXHJcbiAgICAgIC5mb3JFYWNoKGZ1bmN0aW9uIGZvckVhY2gobm9kZSkge1xyXG4gICAgICAgIGNvbnN0IG5hbWUgPSBkb21BdHRyLmdldChub2RlLCAnZGF0YS1maWVsZCcpO1xyXG4gICAgICAgIGNvbnN0IGZpZWxkID0gdGhpcy5maWVsZHNbbmFtZV07XHJcbiAgICAgICAgaWYgKGZpZWxkKSB7XHJcbiAgICAgICAgICBmaWVsZC5yZW5kZXJUbyhub2RlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sIHRoaXMpO1xyXG5cclxuICAgIGNvbnN0IHNlY3Rpb25zID0gcXVlcnkoJ2gyJywgdGhpcy5jb250ZW50Tm9kZSk7XHJcbiAgICBpZiAoc2VjdGlvbnMubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgIGRvbUF0dHIucmVtb3ZlKHNlY3Rpb25zWzBdLCAnZGF0YS1hY3Rpb24nKTtcclxuICAgICAgY29uc3QgYnV0dG9uID0gcXVlcnkoJ2J1dHRvbltjbGFzcyo9XCJmYS1jaGV2cm9uXCJdJywgc2VjdGlvbnNbMF0pO1xyXG4gICAgICBpZiAoYnV0dG9uWzBdKSB7XHJcbiAgICAgICAgZG9tQ29uc3RydWN0LmRlc3Ryb3koYnV0dG9uWzBdKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kcyBpbml0IHRvIGFsc28gaW5pdCB0aGUgZmllbGRzIGluIGB0aGlzLmZpZWxkc2AuXHJcbiAgICovXHJcbiAgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHtcclxuICAgIHRoaXMuaW5oZXJpdGVkKGFyZ3VtZW50cyk7XHJcblxyXG4gICAgZm9yIChjb25zdCBuYW1lIGluIHRoaXMuZmllbGRzKSB7XHJcbiAgICAgIGlmICh0aGlzLmZpZWxkcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xyXG4gICAgICAgIHRoaXMuZmllbGRzW25hbWVdLmluaXQoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogU2V0cyBhbmQgcmV0dXJucyB0aGUgdG9vbGJhciBpdGVtIGxheW91dCBkZWZpbml0aW9uLCB0aGlzIG1ldGhvZCBzaG91bGQgYmUgb3ZlcnJpZGVuIGluIHRoZSB2aWV3XHJcbiAgICogc28gdGhhdCB5b3UgbWF5IGRlZmluZSB0aGUgdmlld3MgdG9vbGJhciBpdGVtcy5cclxuICAgKlxyXG4gICAqIEJ5IGRlZmF1bHQgaXQgYWRkcyBhIHNhdmUgYnV0dG9uIGJvdW5kIHRvIGB0aGlzLnNhdmUoKWAgYW5kIGNhbmNlbCB0aGF0IGZpcmVzIGBSZVVJLmJhY2soKWBcclxuICAgKlxyXG4gICAqIEByZXR1cm4ge09iamVjdH0gdGhpcy50b29sc1xyXG4gICAqIEB0ZW1wbGF0ZVxyXG4gICAqL1xyXG4gIGNyZWF0ZVRvb2xMYXlvdXQ6IGZ1bmN0aW9uIGNyZWF0ZVRvb2xMYXlvdXQoKSB7XHJcbiAgICBjb25zdCB0YmFyID0gW3tcclxuICAgICAgaWQ6ICdzYXZlJyxcclxuICAgICAgYWN0aW9uOiAnc2F2ZScsXHJcbiAgICAgIGNsczogJ2ZhIGZhLXNhdmUgZmEtZncgZmEtbGcnLFxyXG4gICAgICBzZWN1cml0eTogdGhpcy5vcHRpb25zICYmIHRoaXMub3B0aW9ucy5pbnNlcnQgPyB0aGlzLmluc2VydFNlY3VyaXR5IDogdGhpcy51cGRhdGVTZWN1cml0eSxcclxuICAgIH1dO1xyXG5cclxuICAgIGlmICghQXBwLmlzT25GaXJzdFZpZXcoKSkge1xyXG4gICAgICB0YmFyLnB1c2goe1xyXG4gICAgICAgIGlkOiAnY2FuY2VsJyxcclxuICAgICAgICBjbHM6ICdmYSBmYS1iYW4gZmEtZncgZmEtbGcnLFxyXG4gICAgICAgIHNpZGU6ICdsZWZ0JyxcclxuICAgICAgICBhY3Rpb246ICdvblRvb2xDYW5jZWwnLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdGhpcy50b29scyB8fCAodGhpcy50b29scyA9IHtcclxuICAgICAgJ3RiYXInOiB0YmFyLFxyXG4gICAgfSk7XHJcbiAgfSxcclxuICBvblRvb2xDYW5jZWw6IGZ1bmN0aW9uIG9uVG9vbENhbmNlbCgpIHtcclxuICAgIHRoaXMucmVmcmVzaFJlcXVpcmVkID0gdHJ1ZTtcclxuICAgIFJlVUkuYmFjaygpO1xyXG4gIH0sXHJcbiAgX2dldFN0b3JlQXR0cjogZnVuY3Rpb24gX2dldFN0b3JlQXR0cigpIHtcclxuICAgIHJldHVybiB0aGlzLnN0b3JlIHx8ICh0aGlzLnN0b3JlID0gdGhpcy5jcmVhdGVTdG9yZSgpKTtcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIFRvZ2dsZXMgdGhlIGNvbGxhcHNlZCBzdGF0ZSBvZiB0aGUgc2VjdGlvbi5cclxuICAgKi9cclxuICB0b2dnbGVTZWN0aW9uOiBmdW5jdGlvbiB0b2dnbGVTZWN0aW9uKHBhcmFtcykge1xyXG4gICAgY29uc3Qgbm9kZSA9IGRvbS5ieUlkKHBhcmFtcy4kc291cmNlKTtcclxuICAgIGlmIChub2RlKSB7XHJcbiAgICAgIGRvbUNsYXNzLnRvZ2dsZShub2RlLCAnY29sbGFwc2VkJyk7XHJcbiAgICAgIGNvbnN0IGJ1dHRvbiA9IHF1ZXJ5KCdidXR0b24nLCBub2RlKVswXTtcclxuICAgICAgaWYgKGJ1dHRvbikge1xyXG4gICAgICAgIGRvbUNsYXNzLnRvZ2dsZShidXR0b24sIHRoaXMudG9nZ2xlQ29sbGFwc2VDbGFzcyk7XHJcbiAgICAgICAgZG9tQ2xhc3MudG9nZ2xlKGJ1dHRvbiwgdGhpcy50b2dnbGVFeHBhbmRDbGFzcyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIEhhbmRsZXIgZm9yIGEgZmllbGRzIG9uIHNob3cgZXZlbnQuXHJcbiAgICpcclxuICAgKiBSZW1vdmVzIHRoZSByb3ctaGlkZGVuIGNzcyBjbGFzcy5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7X0ZpZWxkfSBmaWVsZCBGaWVsZCBpbnN0YW5jZSB0aGF0IGlzIGJlaW5nIHNob3duXHJcbiAgICovXHJcbiAgX29uU2hvd0ZpZWxkOiBmdW5jdGlvbiBfb25TaG93RmllbGQoZmllbGQpIHtcclxuICAgIGRvbUNsYXNzLnJlbW92ZShmaWVsZC5jb250YWluZXJOb2RlLCAncm93LWhpZGRlbicpO1xyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogSGFuZGxlciBmb3IgYSBmaWVsZHMgb24gaGlkZSBldmVudC5cclxuICAgKlxyXG4gICAqIEFkZHMgdGhlIHJvdy1oaWRkZW4gY3NzIGNsYXNzLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtfRmllbGR9IGZpZWxkIEZpZWxkIGluc3RhbmNlIHRoYXQgaXMgYmVpbmcgaGlkZGVuXHJcbiAgICovXHJcbiAgX29uSGlkZUZpZWxkOiBmdW5jdGlvbiBfb25IaWRlRmllbGQoZmllbGQpIHtcclxuICAgIGRvbUNsYXNzLmFkZChmaWVsZC5jb250YWluZXJOb2RlLCAncm93LWhpZGRlbicpO1xyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogSGFuZGxlciBmb3IgYSBmaWVsZHMgb24gZW5hYmxlIGV2ZW50LlxyXG4gICAqXHJcbiAgICogUmVtb3ZlcyB0aGUgcm93LWRpc2FibGVkIGNzcyBjbGFzcy5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7X0ZpZWxkfSBmaWVsZCBGaWVsZCBpbnN0YW5jZSB0aGF0IGlzIGJlaW5nIGVuYWJsZWRcclxuICAgKi9cclxuICBfb25FbmFibGVGaWVsZDogZnVuY3Rpb24gX29uRW5hYmxlRmllbGQoZmllbGQpIHtcclxuICAgIGRvbUNsYXNzLnJlbW92ZShmaWVsZC5jb250YWluZXJOb2RlLCAncm93LWRpc2FibGVkJyk7XHJcbiAgfSxcclxuICAvKipcclxuICAgKiBIYW5kbGVyIGZvciBhIGZpZWxkcyBvbiBkaXNhYmxlIGV2ZW50LlxyXG4gICAqXHJcbiAgICogQWRkcyB0aGUgcm93LWRpc2FibGVkIGNzcyBjbGFzcy5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7X0ZpZWxkfSBmaWVsZCBGaWVsZCBpbnN0YW5jZSB0aGF0IGlzIGJlaW5nIGRpc2FibGVkXHJcbiAgICovXHJcbiAgX29uRGlzYWJsZUZpZWxkOiBmdW5jdGlvbiBfb25EaXNhYmxlRmllbGQoZmllbGQpIHtcclxuICAgIGRvbUNsYXNzLmFkZChmaWVsZC5jb250YWluZXJOb2RlLCAncm93LWRpc2FibGVkJyk7XHJcbiAgfSxcclxuICAvKipcclxuICAgKiBFeHRlbmRzIGludm9rZUFjdGlvbiB0byBmaXJzdCBsb29rIGZvciB0aGUgc3BlY2lmaWVkIGZ1bmN0aW9uIG5hbWUgb24gdGhlIGZpZWxkIGluc3RhbmNlXHJcbiAgICogZmlyc3QgYmVmb3JlIHBhc3NpbmcgaXQgdG8gdGhlIHZpZXcuXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgTmFtZSBvZiB0aGUgZnVuY3Rpb24gdG8gaW52b2tlXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IHBhcmFtZXRlcnMgUGFyYW1ldGVycyBvZiB0aGUgZnVuY3Rpb24gdG8gYmUgcGFzc2VkXHJcbiAgICogQHBhcmFtIHtFdmVudH0gZXZ0IFRoZSBvcmlnaW5hbCBjbGljay90YXAgZXZlbnRcclxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBub2RlIFRoZSBub2RlIHRoYXQgaW5pdGlhdGVkIHRoZSBldmVudFxyXG4gICAqIEByZXR1cm4ge0Z1bmN0aW9ufSBFaXRoZXIgY2FsbHMgdGhlIGZpZWxkcyBhY3Rpb24gb3IgcmV0dXJucyB0aGUgaW5oZXJpdGVkIHZlcnNpb24gd2hpY2ggbG9va3MgYXQgdGhlIHZpZXcgZm9yIHRoZSBhY3Rpb25cclxuICAgKi9cclxuICBpbnZva2VBY3Rpb246IGZ1bmN0aW9uIGludm9rZUFjdGlvbihuYW1lLCBwYXJhbWV0ZXJzLCBldnQsIG5vZGUpIHtcclxuICAgIGNvbnN0IGZpZWxkTm9kZSA9IG5vZGUgJiYgcXVlcnkobm9kZSwgdGhpcy5jb250ZW50Tm9kZSlcclxuICAgICAgLnBhcmVudHMoJ1tkYXRhLWZpZWxkXScpO1xyXG4gICAgY29uc3QgZmllbGQgPSB0aGlzLmZpZWxkc1tmaWVsZE5vZGUubGVuZ3RoID4gMCAmJiBkb21BdHRyLmdldChmaWVsZE5vZGVbMF0sICdkYXRhLWZpZWxkJyldO1xyXG5cclxuICAgIGlmIChmaWVsZCAmJiB0eXBlb2YgZmllbGRbbmFtZV0gPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgcmV0dXJuIGZpZWxkW25hbWVdLmFwcGx5KGZpZWxkLCBbcGFyYW1ldGVycywgZXZ0LCBub2RlXSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuaW5oZXJpdGVkKGFyZ3VtZW50cyk7XHJcbiAgfSxcclxuICAvKipcclxuICAgKiBEZXRlcm1pbmVzIGlmIGEgZmllbGQgaGFzIGRlZmluZWQgb24gaXQgdGhlIHN1cHBsaWVkIG5hbWUgYXMgYSBmdW5jdGlvblxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIE5hbWUgb2YgdGhlIGZ1bmN0aW9uIHRvIHRlc3QgZm9yXHJcbiAgICogQHBhcmFtIHtFdmVudH0gZXZ0IFRoZSBvcmlnaW5hbCBjbGljay90YXAgZXZlbnRcclxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBub2RlIFRoZSBub2RlIHRoYXQgaW5pdGlhdGVkIHRoZSBldmVudFxyXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59IElmIHRoZSBmaWVsZCBoYXMgdGhlIG5hbWVkIGZ1bmN0aW9uIGRlZmluZWRcclxuICAgKi9cclxuICBoYXNBY3Rpb246IGZ1bmN0aW9uIGhhc0FjdGlvbihuYW1lLCBldnQsIG5vZGUpIHtcclxuICAgIGNvbnN0IGZpZWxkTm9kZSA9IG5vZGUgJiYgcXVlcnkobm9kZSwgdGhpcy5jb250ZW50Tm9kZSlcclxuICAgICAgLnBhcmVudHMoJ1tkYXRhLWZpZWxkXScpO1xyXG4gICAgY29uc3QgZmllbGQgPSBmaWVsZE5vZGUgJiYgdGhpcy5maWVsZHNbZmllbGROb2RlLmxlbmd0aCA+IDAgJiYgZG9tQXR0ci5nZXQoZmllbGROb2RlWzBdLCAnZGF0YS1maWVsZCcpXTtcclxuXHJcbiAgICBpZiAoZmllbGQgJiYgdHlwZW9mIGZpZWxkW25hbWVdID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0aGlzLmluaGVyaXRlZChhcmd1bWVudHMpO1xyXG4gIH0sXHJcbiAgY3JlYXRlU3RvcmU6IGZ1bmN0aW9uIGNyZWF0ZVN0b3JlKCkge1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfSxcclxuICBvbkNvbnRlbnRDaGFuZ2U6IGZ1bmN0aW9uIG9uQ29udGVudENoYW5nZSgpIHt9LFxyXG4gIHByb2Nlc3NFbnRyeTogZnVuY3Rpb24gcHJvY2Vzc0VudHJ5KGVudHJ5KSB7XHJcbiAgICByZXR1cm4gZW50cnk7XHJcbiAgfSxcclxuICAvKipcclxuICAgKiBQcmUtcHJvY2Vzc2VzIHRoZSBlbnRyeSBiZWZvcmUgcHJvY2Vzc0VudHJ5IHJ1bnMuXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IGVudHJ5IGRhdGFcclxuICAgKiBAcmV0dXJuIHtPYmplY3R9IGVudHJ5IHdpdGggYWN0dWFsIERhdGUgb2JqZWN0c1xyXG4gICAqL1xyXG4gIGNvbnZlcnRFbnRyeTogZnVuY3Rpb24gY29udmVydEVudHJ5KGVudHJ5KSB7XHJcbiAgICByZXR1cm4gZW50cnk7XHJcbiAgfSxcclxuICBwcm9jZXNzRGF0YTogZnVuY3Rpb24gcHJvY2Vzc0RhdGEoZW50cnkpIHtcclxuICAgIHRoaXMuZW50cnkgPSB0aGlzLnByb2Nlc3NFbnRyeSh0aGlzLmNvbnZlcnRFbnRyeShlbnRyeSB8fCB7fSkpIHx8IHt9O1xyXG5cclxuICAgIHRoaXMuc2V0VmFsdWVzKGVudHJ5LCB0cnVlKTtcclxuXHJcbiAgICAvLyBSZS1hcHBseSBjaGFuZ2VzIHNhdmVkIGZyb20gY29uY3VycmVuY3kvcHJlY29uZGl0aW9uIGZhaWx1cmVcclxuICAgIGlmICh0aGlzLnByZXZpb3VzVmFsdWVzQWxsKSB7XHJcbiAgICAgIC8vIE1ha2UgYSBjb3B5IG9mIHRoZSBjdXJyZW50IHZhbHVlcywgc28gd2UgY2FuIGRpZmYgdGhlbVxyXG4gICAgICBjb25zdCBjdXJyZW50VmFsdWVzID0gdGhpcy5nZXRWYWx1ZXModHJ1ZSk7XHJcbiAgICAgIGNvbnN0IGRpZmZzID0gdGhpcy5kaWZmcyh0aGlzLnByZXZpb3VzVmFsdWVzQWxsLCBjdXJyZW50VmFsdWVzKTtcclxuXHJcbiAgICAgIGlmIChkaWZmcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgYXJyYXkuZm9yRWFjaChkaWZmcywgZnVuY3Rpb24gZm9yRWFjaCh2YWwpIHtcclxuICAgICAgICAgIHRoaXMuZXJyb3JzLnB1c2goe1xyXG4gICAgICAgICAgICBuYW1lOiB2YWwsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuY29uY3VycmVuY3lFcnJvclRleHQsXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9LCB0aGlzKTtcclxuXHJcbiAgICAgICAgdGhpcy5zaG93Q29uY3VycmVuY3lTdW1tYXJ5KCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gTm8gZGlmZnMgZm91bmQsIGF0dGVtcHQgdG8gcmUtc2F2ZVxyXG4gICAgICAgIHRoaXMuc2F2ZSgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLnByZXZpb3VzVmFsdWVzQWxsID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBSZS1hcHBseSBhbnkgcGFzc2VkIGNoYW5nZXMgYXMgdGhleSBtYXkgaGF2ZSBiZWVuIG92ZXJ3cml0dGVuXHJcbiAgICBpZiAodGhpcy5vcHRpb25zLmNoYW5nZXMpIHtcclxuICAgICAgdGhpcy5jaGFuZ2VzID0gdGhpcy5vcHRpb25zLmNoYW5nZXM7XHJcbiAgICAgIHRoaXMuc2V0VmFsdWVzKHRoaXMuY2hhbmdlcyk7XHJcbiAgICB9XHJcbiAgfSxcclxuICBfb25HZXRDb21wbGV0ZTogZnVuY3Rpb24gX29uR2V0Q29tcGxldGUoZW50cnkpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGlmIChlbnRyeSkge1xyXG4gICAgICAgIHRoaXMucHJvY2Vzc0RhdGEoZW50cnkpO1xyXG4gICAgICB9IGVsc2UgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXHJcbiAgICAgICAgLyogdG9kbzogc2hvdyBlcnJvciBtZXNzYWdlPyAqL1xyXG4gICAgICB9XHJcblxyXG4gICAgICBkb21DbGFzcy5yZW1vdmUodGhpcy5kb21Ob2RlLCAncGFuZWwtbG9hZGluZycpO1xyXG5cclxuICAgICAgLyogdGhpcyBtdXN0IHRha2UgcGxhY2Ugd2hlbiB0aGUgY29udGVudCBpcyB2aXNpYmxlICovXHJcbiAgICAgIHRoaXMub25Db250ZW50Q2hhbmdlKCk7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcclxuICAgIH1cclxuICB9LFxyXG4gIF9vbkdldEVycm9yOiBmdW5jdGlvbiBfb25HZXRFcnJvcihnZXRPcHRpb25zLCBlcnJvcikge1xyXG4gICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvcik7XHJcbiAgICBkb21DbGFzcy5yZW1vdmUodGhpcy5kb21Ob2RlLCAncGFuZWwtbG9hZGluZycpO1xyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogU2V0cyBhbmQgcmV0dXJucyB0aGUgRWRpdCB2aWV3IGxheW91dCBieSBmb2xsb3dpbmcgYSBzdGFuZGFyZCBmb3Igc2VjdGlvbiBhbmQgZmllbGQ6XHJcbiAgICpcclxuICAgKiBUaGUgYHRoaXMubGF5b3V0YCBpdHNlbGYgaXMgYW4gYXJyYXkgb2Ygc2VjdGlvbiBvYmplY3RzIHdoZXJlIGEgc2VjdGlvbiBvYmplY3QgaXMgZGVmaW5lZCBhcyBzdWNoOlxyXG4gICAqXHJcbiAgICogICAgIHtcclxuICAgKiAgICAgICAgbmFtZTogJ1N0cmluZycsIC8vIFJlcXVpcmVkLiB1bmlxdWUgbmFtZSBmb3IgaWRlbnRpZmljYXRpb24vY3VzdG9taXphdGlvbiBwdXJwb3Nlc1xyXG4gICAqICAgICAgICB0aXRsZTogJ1N0cmluZycsIC8vIFJlcXVpcmVkLiBUZXh0IHNob3duIGluIHRoZSBzZWN0aW9uIGhlYWRlclxyXG4gICAqICAgICAgICBjaGlsZHJlbjogW10sIC8vIEFycmF5IG9mIGNoaWxkIHJvdyBvYmplY3RzXHJcbiAgICogICAgIH1cclxuICAgKlxyXG4gICAqIEEgY2hpbGQgcm93IG9iamVjdCBoYXM6XHJcbiAgICpcclxuICAgKiAgICAge1xyXG4gICAqICAgICAgICBuYW1lOiAnU3RyaW5nJywgLy8gUmVxdWlyZWQuIHVuaXF1ZSBuYW1lIGZvciBpZGVudGlmaWNhdGlvbi9jdXN0b21pemF0aW9uIHB1cnBvc2VzXHJcbiAgICogICAgICAgIHByb3BlcnR5OiAnU3RyaW5nJywgLy8gT3B0aW9uYWwuIFRoZSBwcm9wZXJ0eSBvZiB0aGUgY3VycmVudCBlbnRpdHkgdG8gYmluZCB0b1xyXG4gICAqICAgICAgICBsYWJlbDogJ1N0cmluZycsIC8vIE9wdGlvbmFsLiBUZXh0IHNob3duIGluIHRoZSBsYWJlbCB0byB0aGUgbGVmdCBvZiB0aGUgcHJvcGVydHlcclxuICAgKiAgICAgICAgdHlwZTogJ1N0cmluZycsIC8vIFJlcXVpcmVkLiBUaGUgZmllbGQgdHlwZSBhcyByZWdpc3RlcmVkIHdpdGggdGhlIEZpZWxkTWFuYWdlci5cclxuICAgKiAgICAgICAgLy8gRXhhbXBsZXMgb2YgdHlwZTogJ3RleHQnLCAnZGVjaW1hbCcsICdkYXRlJywgJ2xvb2t1cCcsICdzZWxlY3QnLCAnZHVyYXRpb24nXHJcbiAgICogICAgICAgICdkZWZhdWx0JzogdmFsdWUgLy8gT3B0aW9uYWwuIElmIGRlZmluZWQgdGhlIHZhbHVlIHdpbGwgYmUgc2V0IGFzIHRoZSBkZWZhdWx0IFwidW5tb2RpZmllZFwiIHZhbHVlIChub3QgZGlydHkpLlxyXG4gICAqICAgICB9XHJcbiAgICpcclxuICAgKiBBbGwgZnVydGhlciBwcm9wZXJ0aWVzIGFyZSBzZXQgYnkgdGhlaXIgcmVzcGVjdGl2ZSB0eXBlLCBwbGVhc2Ugc2VlIHRoZSBpbmRpdmlkdWFsIGZpZWxkIGZvclxyXG4gICAqIGl0cyBjb25maWd1cmFibGUgb3B0aW9ucy5cclxuICAgKlxyXG4gICAqIEByZXR1cm4ge09iamVjdFtdfSBFZGl0IGxheW91dCBkZWZpbml0aW9uXHJcbiAgICovXHJcbiAgY3JlYXRlTGF5b3V0OiBmdW5jdGlvbiBjcmVhdGVMYXlvdXQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5sYXlvdXQgfHwgW107XHJcbiAgfSxcclxuXHJcbiAgY3JlYXRlRXJyb3JIYW5kbGVyczogZnVuY3Rpb24gY3JlYXRlRXJyb3JIYW5kbGVycygpIHtcclxuICAgIHRoaXMuZXJyb3JIYW5kbGVycyA9IHRoaXMuZXJyb3JIYW5kbGVycyB8fCBbe1xyXG4gICAgICBuYW1lOiAnUHJlQ29uZGl0aW9uJyxcclxuICAgICAgdGVzdDogZnVuY3Rpb24gdGVzdFByZUNvbmRpdGlvbihlcnJvcikge1xyXG4gICAgICAgIHJldHVybiBlcnJvciAmJiBlcnJvci5zdGF0dXMgPT09IHRoaXMuSFRUUF9TVEFUVVMuUFJFQ09ORElUSU9OX0ZBSUxFRDtcclxuICAgICAgfSxcclxuICAgICAgaGFuZGxlOiBmdW5jdGlvbiBoYW5kbGVQcmVDb25kaXRpb24oZXJyb3IsIG5leHQpIHtcclxuICAgICAgICBuZXh0KCk7IC8vIEludm9rZSB0aGUgbmV4dCBlcnJvciBoYW5kbGVyIGZpcnN0LCB0aGUgcmVmcmVzaCB3aWxsIGNoYW5nZSBhIGxvdCBvZiBtdXRhYmxlL3NoYXJlZCBzdGF0ZVxyXG5cclxuICAgICAgICAvLyBQcmVzZXJ2ZSBvdXIgY3VycmVudCBmb3JtIHZhbHVlcyAoYWxsIG9mIHRoZW0pLFxyXG4gICAgICAgIC8vIGFuZCByZWxvYWQgdGhlIHZpZXcgdG8gZmV0Y2ggdGhlIG5ldyBkYXRhLlxyXG4gICAgICAgIHRoaXMucHJldmlvdXNWYWx1ZXNBbGwgPSB0aGlzLmdldFZhbHVlcyh0cnVlKTtcclxuICAgICAgICB0aGlzLm9wdGlvbnMua2V5ID0gdGhpcy5lbnRyeS4ka2V5OyAvLyBGb3JjZSBhIGZldGNoIGJ5IGtleVxyXG4gICAgICAgIGRlbGV0ZSB0aGlzLm9wdGlvbnMuZW50cnk7IC8vIFJlbW92ZSB0aGlzLCBvciB0aGUgZm9ybSB3aWxsIGxvYWQgdGhlIGVudHJ5IHRoYXQgY2FtZSBmcm9tIHRoZSBkZXRhaWwgdmlld1xyXG4gICAgICAgIHRoaXMucmVmcmVzaCgpO1xyXG4gICAgICB9LFxyXG4gICAgfSwge1xyXG4gICAgICBuYW1lOiAnQWxlcnRFcnJvcicsXHJcbiAgICAgIHRlc3Q6IGZ1bmN0aW9uIHRlc3RBbGVydChlcnJvcikge1xyXG4gICAgICAgIHJldHVybiBlcnJvci5zdGF0dXMgIT09IHRoaXMuSFRUUF9TVEFUVVMuUFJFQ09ORElUSU9OX0ZBSUxFRDtcclxuICAgICAgfSxcclxuICAgICAgaGFuZGxlOiBmdW5jdGlvbiBoYW5kbGVBbGVydChlcnJvciwgbmV4dCkge1xyXG4gICAgICAgIGFsZXJ0KHRoaXMuZ2V0RXJyb3JNZXNzYWdlKGVycm9yKSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcclxuICAgICAgICBuZXh0KCk7XHJcbiAgICAgIH0sXHJcbiAgICB9LCB7XHJcbiAgICAgIG5hbWU6ICdDYXRjaEFsbCcsXHJcbiAgICAgIHRlc3Q6IGZ1bmN0aW9uIHRlc3RDYXRjaEFsbCgpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfSxcclxuICAgICAgaGFuZGxlOiBmdW5jdGlvbiBoYW5kbGVDYXRjaEFsbChlcnJvciwgbmV4dCkge1xyXG4gICAgICAgIGNvbnN0IGZyb21Db250ZXh0ID0gdGhpcy5vcHRpb25zLmZyb21Db250ZXh0O1xyXG4gICAgICAgIHRoaXMub3B0aW9ucy5mcm9tQ29udGV4dCA9IG51bGw7XHJcbiAgICAgICAgY29uc3QgZXJyb3JJdGVtID0ge1xyXG4gICAgICAgICAgdmlld09wdGlvbnM6IHRoaXMub3B0aW9ucyxcclxuICAgICAgICAgIHNlcnZlckVycm9yOiBlcnJvcixcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBFcnJvck1hbmFnZXIuYWRkRXJyb3IodGhpcy5nZXRFcnJvck1lc3NhZ2UoZXJyb3IpLCBlcnJvckl0ZW0pO1xyXG4gICAgICAgIHRoaXMub3B0aW9ucy5mcm9tQ29udGV4dCA9IGZyb21Db250ZXh0O1xyXG4gICAgICAgIG5leHQoKTtcclxuICAgICAgfSxcclxuICAgIH1dO1xyXG5cclxuICAgIHJldHVybiB0aGlzLmVycm9ySGFuZGxlcnM7XHJcbiAgfSxcclxuICAvKipcclxuICAgKlxyXG4gICAqIFJldHVybnMgdGhlIHZpZXcga2V5XHJcbiAgICogQHJldHVybiB7U3RyaW5nfSBWaWV3IGtleVxyXG4gICAqL1xyXG4gIGdldFRhZzogZnVuY3Rpb24gZ2V0VGFnKCkge1xyXG4gICAgbGV0IHRhZyA9IHRoaXMub3B0aW9ucyAmJiB0aGlzLm9wdGlvbnMuZW50cnkgJiYgdGhpcy5vcHRpb25zLmVudHJ5W3RoaXMuaWRQcm9wZXJ0eV07XHJcbiAgICBpZiAoIXRhZykge1xyXG4gICAgICB0YWcgPSB0aGlzLm9wdGlvbnMgJiYgdGhpcy5vcHRpb25zLmtleTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdGFnO1xyXG4gIH0sXHJcbiAgcHJvY2Vzc0xheW91dDogZnVuY3Rpb24gcHJvY2Vzc0xheW91dChsYXlvdXQpIHtcclxuICAgIGNvbnN0IHJvd3MgPSAobGF5b3V0LmNoaWxkcmVuIHx8IGxheW91dC5hcyB8fCBsYXlvdXQpO1xyXG4gICAgY29uc3Qgc2VjdGlvblF1ZXVlID0gW107XHJcbiAgICBjb25zdCBjb250ZW50ID0gW107XHJcbiAgICBsZXQgc2VjdGlvblN0YXJ0ZWQgPSBmYWxzZTtcclxuICAgIGxldCBjdXJyZW50O1xyXG5cclxuICAgIGlmICghbGF5b3V0Lm9wdGlvbnMpIHtcclxuICAgICAgbGF5b3V0Lm9wdGlvbnMgPSB7XHJcbiAgICAgICAgdGl0bGU6IHRoaXMuZGV0YWlsc1RleHQsXHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByb3dzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGN1cnJlbnQgPSByb3dzW2ldO1xyXG5cclxuICAgICAgaWYgKGN1cnJlbnQuY2hpbGRyZW4gfHwgY3VycmVudC5hcykge1xyXG4gICAgICAgIGlmIChzZWN0aW9uU3RhcnRlZCkge1xyXG4gICAgICAgICAgc2VjdGlvblF1ZXVlLnB1c2goY3VycmVudCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMucHJvY2Vzc0xheW91dChjdXJyZW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoIXNlY3Rpb25TdGFydGVkKSB7XHJcbiAgICAgICAgc2VjdGlvblN0YXJ0ZWQgPSB0cnVlO1xyXG4gICAgICAgIGNvbnRlbnQucHVzaCh0aGlzLnNlY3Rpb25CZWdpblRlbXBsYXRlLmFwcGx5KGxheW91dCwgdGhpcykpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLmNyZWF0ZVJvd0NvbnRlbnQoY3VycmVudCwgY29udGVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29udGVudC5wdXNoKHRoaXMuc2VjdGlvbkVuZFRlbXBsYXRlLmFwcGx5KGxheW91dCwgdGhpcykpO1xyXG4gICAgY29uc3Qgc2VjdGlvbk5vZGUgPSBkb21Db25zdHJ1Y3QudG9Eb20oY29udGVudC5qb2luKCcnKSk7XHJcbiAgICB0aGlzLm9uQXBwbHlTZWN0aW9uTm9kZShzZWN0aW9uTm9kZSwgY3VycmVudCk7XHJcbiAgICBkb21Db25zdHJ1Y3QucGxhY2Uoc2VjdGlvbk5vZGUsIHRoaXMuY29udGVudE5vZGUsICdsYXN0Jyk7XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWN0aW9uUXVldWUubGVuZ3RoOyBpKyspIHtcclxuICAgICAgY3VycmVudCA9IHNlY3Rpb25RdWV1ZVtpXTtcclxuXHJcbiAgICAgIHRoaXMucHJvY2Vzc0xheW91dChjdXJyZW50KTtcclxuICAgIH1cclxuICB9LFxyXG4gIG9uQXBwbHlTZWN0aW9uTm9kZTogZnVuY3Rpb24gb25BcHBseVNlY3Rpb25Ob2RlKCAvKnNlY3Rpb25Ob2RlLCBsYXlvdXQqLyApIHt9LFxyXG4gIGNyZWF0ZVJvd0NvbnRlbnQ6IGZ1bmN0aW9uIGNyZWF0ZVJvd0NvbnRlbnQobGF5b3V0LCBjb250ZW50KSB7XHJcbiAgICBjb25zdCBDdG9yID0gRmllbGRNYW5hZ2VyLmdldChsYXlvdXQudHlwZSk7XHJcbiAgICBpZiAoQ3Rvcikge1xyXG4gICAgICBjb25zdCBmaWVsZCA9IHRoaXMuZmllbGRzW2xheW91dC5uYW1lIHx8IGxheW91dC5wcm9wZXJ0eV0gPSBuZXcgQ3RvcihsYW5nLm1peGluKHtcclxuICAgICAgICBvd25lcjogdGhpcyxcclxuICAgICAgfSwgbGF5b3V0KSk7XHJcblxyXG4gICAgICBjb25zdCB0ZW1wbGF0ZSA9IGZpZWxkLnByb3BlcnR5VGVtcGxhdGUgfHwgdGhpcy5wcm9wZXJ0eVRlbXBsYXRlO1xyXG5cclxuICAgICAgaWYgKGZpZWxkLmF1dG9Gb2N1cyAmJiAhdGhpcy5fZm9jdXNGaWVsZCkge1xyXG4gICAgICAgIHRoaXMuX2ZvY3VzRmllbGQgPSBmaWVsZDtcclxuICAgICAgfSBlbHNlIGlmIChmaWVsZC5hdXRvRm9jdXMgJiYgdGhpcy5fZm9jdXNGaWVsZCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignT25seSBvbmUgZmllbGQgY2FuIGhhdmUgYXV0b0ZvY3VzIHNldCB0byB0cnVlIGluIHRoZSBFZGl0IGxheW91dC4nKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5jb25uZWN0KGZpZWxkLCAnb25TaG93JywgdGhpcy5fb25TaG93RmllbGQpO1xyXG4gICAgICB0aGlzLmNvbm5lY3QoZmllbGQsICdvbkhpZGUnLCB0aGlzLl9vbkhpZGVGaWVsZCk7XHJcbiAgICAgIHRoaXMuY29ubmVjdChmaWVsZCwgJ29uRW5hYmxlJywgdGhpcy5fb25FbmFibGVGaWVsZCk7XHJcbiAgICAgIHRoaXMuY29ubmVjdChmaWVsZCwgJ29uRGlzYWJsZScsIHRoaXMuX29uRGlzYWJsZUZpZWxkKTtcclxuXHJcbiAgICAgIGNvbnRlbnQucHVzaCh0ZW1wbGF0ZS5hcHBseShmaWVsZCwgdGhpcykpO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogSW5pdGlhdGVzIHRoZSByZXF1ZXN0LlxyXG4gICAqL1xyXG4gIHJlcXVlc3REYXRhOiBmdW5jdGlvbiByZXF1ZXN0RGF0YSgpIHtcclxuICAgIGNvbnN0IHN0b3JlID0gdGhpcy5nZXQoJ3N0b3JlJyk7XHJcblxyXG4gICAgaWYgKHRoaXMuX21vZGVsKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLnJlcXVlc3REYXRhVXNpbmdNb2RlbCgpLnRoZW4oZnVuY3Rpb24gZnVsZmlsbGVkKGRhdGEpIHtcclxuICAgICAgICB0aGlzLl9vbkdldENvbXBsZXRlKGRhdGEpO1xyXG4gICAgICB9LmJpbmQodGhpcyksIGZ1bmN0aW9uIHJlamVjdGVkKGVycikge1xyXG4gICAgICAgIHRoaXMuX29uR2V0RXJyb3IobnVsbCwgZXJyKTtcclxuICAgICAgfS5iaW5kKHRoaXMpKTtcclxuICAgIH0gZWxzZSBpZiAoc3RvcmUpIHtcclxuICAgICAgY29uc3QgZ2V0T3B0aW9ucyA9IHt9O1xyXG5cclxuICAgICAgdGhpcy5fYXBwbHlTdGF0ZVRvR2V0T3B0aW9ucyhnZXRPcHRpb25zKTtcclxuXHJcbiAgICAgIGNvbnN0IGdldEV4cHJlc3Npb24gPSB0aGlzLl9idWlsZEdldEV4cHJlc3Npb24oKSB8fCBudWxsO1xyXG4gICAgICBjb25zdCBnZXRSZXN1bHRzID0gdGhpcy5yZXF1ZXN0RGF0YVVzaW5nU3RvcmUoZ2V0RXhwcmVzc2lvbiwgZ2V0T3B0aW9ucyk7XHJcblxyXG4gICAgICBEZWZlcnJlZC53aGVuKGdldFJlc3VsdHMsXHJcbiAgICAgICAgdGhpcy5fb25HZXRDb21wbGV0ZS5iaW5kKHRoaXMpLFxyXG4gICAgICAgIHRoaXMuX29uR2V0RXJyb3IuYmluZCh0aGlzLCBnZXRPcHRpb25zKVxyXG4gICAgICApO1xyXG5cclxuICAgICAgcmV0dXJuIGdldFJlc3VsdHM7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc29sZS53YXJuKCdFcnJvciByZXF1ZXN0aW5nIGRhdGEsIG5vIG1vZGVsIG9yIHN0b3JlIHdhcyBkZWZpbmVkLiBEaWQgeW91IG1lYW4gdG8gbWl4aW4gX1NEYXRhRWRpdE1peGluIHRvIHlvdXIgZWRpdCB2aWV3PycpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXHJcbiAgfSxcclxuICByZXF1ZXN0RGF0YVVzaW5nTW9kZWw6IGZ1bmN0aW9uIHJlcXVlc3REYXRhVXNpbmdNb2RlbCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9tb2RlbC5nZXRFbnRyeSh0aGlzLm9wdGlvbnMpO1xyXG4gIH0sXHJcbiAgcmVxdWVzdERhdGFVc2luZ1N0b3JlOiBmdW5jdGlvbiByZXF1ZXN0RGF0YVVzaW5nU3RvcmUoZ2V0RXhwcmVzc2lvbiwgZ2V0T3B0aW9ucykge1xyXG4gICAgY29uc3Qgc3RvcmUgPSB0aGlzLmdldCgnc3RvcmUnKTtcclxuICAgIHJldHVybiBzdG9yZS5nZXQoZ2V0RXhwcmVzc2lvbiwgZ2V0T3B0aW9ucyk7XHJcbiAgfSxcclxuICAvKipcclxuICAgKiBMb29wcyBhbGwgdGhlIGZpZWxkcyBsb29raW5nIGZvciBhbnkgd2l0aCB0aGUgYGRlZmF1bHRgIHByb3BlcnR5IHNldCwgaWYgc2V0IGFwcGx5IHRoYXRcclxuICAgKiB2YWx1ZSBhcyB0aGUgaW5pdGlhbCB2YWx1ZSBvZiB0aGUgZmllbGQuIElmIHRoZSB2YWx1ZSBpcyBhIGZ1bmN0aW9uLCBpdHMgZXhwYW5kZWQgdGhlbiBhcHBsaWVkLlxyXG4gICAqL1xyXG4gIGFwcGx5RmllbGREZWZhdWx0czogZnVuY3Rpb24gYXBwbHlGaWVsZERlZmF1bHRzKCkge1xyXG4gICAgZm9yIChjb25zdCBuYW1lIGluIHRoaXMuZmllbGRzKSB7XHJcbiAgICAgIGlmICh0aGlzLmZpZWxkcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xyXG4gICAgICAgIGNvbnN0IGZpZWxkID0gdGhpcy5maWVsZHNbbmFtZV07XHJcbiAgICAgICAgY29uc3QgZGVmYXVsdFZhbHVlID0gZmllbGQuZGVmYXVsdDtcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBkZWZhdWx0VmFsdWUgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZpZWxkLnNldFZhbHVlKHRoaXMuZXhwYW5kRXhwcmVzc2lvbihkZWZhdWx0VmFsdWUsIGZpZWxkKSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIExvb3BzIGFsbCBmaWVsZHMgYW5kIGNhbGxzIGl0cyBgY2xlYXJWYWx1ZSgpYC5cclxuICAgKi9cclxuICBjbGVhclZhbHVlczogZnVuY3Rpb24gY2xlYXJWYWx1ZXMoKSB7XHJcbiAgICBmb3IgKGNvbnN0IG5hbWUgaW4gdGhpcy5maWVsZHMpIHtcclxuICAgICAgaWYgKHRoaXMuZmllbGRzLmhhc093blByb3BlcnR5KG5hbWUpKSB7XHJcbiAgICAgICAgdGhpcy5maWVsZHNbbmFtZV0uY2xlYXJIaWdobGlnaHQoKTtcclxuICAgICAgICB0aGlzLmZpZWxkc1tuYW1lXS5jbGVhclZhbHVlKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIFNldHMgdGhlIGdpdmVuIHZhbHVlcyBieSBsb29waW5nIHRoZSBmaWVsZHMgYW5kIGNoZWNraW5nIGlmIHRoZSBmaWVsZCBwcm9wZXJ0eSBtYXRjaGVzXHJcbiAgICogYSBrZXkgaW4gdGhlIHBhc3NlZCB2YWx1ZXMgb2JqZWN0IChhZnRlciBjb25zaWRlcmluZyBhIGZpZWxkcyBgYXBwbHlUb2ApLlxyXG4gICAqXHJcbiAgICogVGhlIHZhbHVlIHNldCBpcyB0aGVuIHBhc3NlZCB0aGUgaW5pdGlhbCBzdGF0ZSwgdHJ1ZSBmb3IgZGVmYXVsdC91bm1vZGlmaWVkL2NsZWFuIGFuZCBmYWxzZVxyXG4gICAqIGZvciBkaXJ0eSBvciBhbHRlcmVkLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IHZhbHVlcyBkYXRhIGVudHJ5LCBvciBjb2xsZWN0aW9uIG9mIGtleS92YWx1ZXMgd2hlcmUga2V5IG1hdGNoZXMgYSBmaWVsZHMgcHJvcGVydHkgYXR0cmlidXRlXHJcbiAgICogQHBhcmFtIHtCb29sZWFufSBpbml0aWFsIEluaXRpYWwgc3RhdGUgb2YgdGhlIHZhbHVlLCB0cnVlIGZvciBjbGVhbiwgZmFsc2UgZm9yIGRpcnR5XHJcbiAgICovXHJcbiAgc2V0VmFsdWVzOiBmdW5jdGlvbiBzZXRWYWx1ZXModmFsdWVzLCBpbml0aWFsKSB7XHJcbiAgICBjb25zdCBub1ZhbHVlID0ge307XHJcblxyXG4gICAgZm9yIChjb25zdCBuYW1lIGluIHRoaXMuZmllbGRzKSB7XHJcbiAgICAgIGlmICh0aGlzLmZpZWxkcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xyXG4gICAgICAgIGNvbnN0IGZpZWxkID0gdGhpcy5maWVsZHNbbmFtZV07XHJcbiAgICAgICAgbGV0IHZhbHVlO1xyXG4gICAgICAgIC8vIGZvciBub3csIGV4cGxpY2l0bHkgaGlkZGVuIGZpZWxkcyAodmlhLiB0aGUgZmllbGQuaGlkZSgpIG1ldGhvZCkgYXJlIG5vdCBpbmNsdWRlZFxyXG4gICAgICAgIGlmIChmaWVsZC5pc0hpZGRlbigpKSB7XHJcbiAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChmaWVsZC5hcHBseVRvICE9PSBmYWxzZSkge1xyXG4gICAgICAgICAgdmFsdWUgPSB1dGlsaXR5LmdldFZhbHVlKHZhbHVlcywgZmllbGQuYXBwbHlUbywgbm9WYWx1ZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHZhbHVlID0gdXRpbGl0eS5nZXRWYWx1ZSh2YWx1ZXMsIGZpZWxkLnByb3BlcnR5IHx8IG5hbWUsIG5vVmFsdWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gZnlpOiB1c2VzIHRoZSBmYWN0IHRoYXQgKHt9ICE9PSB7fSlcclxuICAgICAgICBpZiAodmFsdWUgIT09IG5vVmFsdWUpIHtcclxuICAgICAgICAgIGZpZWxkLnNldFZhbHVlKHZhbHVlLCBpbml0aWFsKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIFJldHJpZXZlcyB0aGUgdmFsdWUgZnJvbSBldmVyeSBmaWVsZCwgc2tpcHBpbmcgdGhlIG9uZXMgZXhjbHVkZWQsIGFuZCBtZXJnZXMgdGhlbSBpbnRvIGFcclxuICAgKiBzaW5nbGUgcGF5bG9hZCB3aXRoIHRoZSBrZXkgYmVpbmcgdGhlIGZpZWxkcyBgcHJvcGVydHlgIGF0dHJpYnV0ZSwgdGFraW5nIGludG8gY29uc2lkZXJhdGlvbiBgYXBwbHlUb2AgaWYgZGVmaW5lZC5cclxuICAgKlxyXG4gICAqIElmIGFsbCBpcyBwYXNzZWQgYXMgdHJ1ZSwgaXQgYWxzbyBncmFicyBoaWRkZW4gYW5kIHVubW9kaWZpZWQgKGNsZWFuKSB2YWx1ZXMuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGFsbCBUcnVlIHRvIGFsc28gaW5jbHVkZSBoaWRkZW4gYW5kIHVubW9kaWZpZWQgdmFsdWVzLlxyXG4gICAqIEByZXR1cm4ge09iamVjdH0gQSBzaW5nbGUgb2JqZWN0IHBheWxvYWQgd2l0aCBhbGwgdGhlIHZhbHVlcy5cclxuICAgKi9cclxuICBnZXRWYWx1ZXM6IGZ1bmN0aW9uIGdldFZhbHVlcyhhbGwpIHtcclxuICAgIGNvbnN0IHBheWxvYWQgPSB7fTtcclxuICAgIGxldCBlbXB0eSA9IHRydWU7XHJcblxyXG4gICAgZm9yIChjb25zdCBuYW1lIGluIHRoaXMuZmllbGRzKSB7XHJcbiAgICAgIGlmICh0aGlzLmZpZWxkcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xyXG4gICAgICAgIGNvbnN0IGZpZWxkID0gdGhpcy5maWVsZHNbbmFtZV07XHJcbiAgICAgICAgY29uc3QgdmFsdWUgPSBmaWVsZC5nZXRWYWx1ZSgpO1xyXG5cclxuICAgICAgICBjb25zdCBpbmNsdWRlID0gdGhpcy5leHBhbmRFeHByZXNzaW9uKGZpZWxkLmluY2x1ZGUsIHZhbHVlLCBmaWVsZCwgdGhpcyk7XHJcbiAgICAgICAgY29uc3QgZXhjbHVkZSA9IHRoaXMuZXhwYW5kRXhwcmVzc2lvbihmaWVsZC5leGNsdWRlLCB2YWx1ZSwgZmllbGQsIHRoaXMpO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBpbmNsdWRlOlxyXG4gICAgICAgICAqICAgdHJ1ZTogYWx3YXlzIGluY2x1ZGUgdmFsdWVcclxuICAgICAgICAgKiAgIGZhbHNlOiBhbHdheXMgZXhjbHVkZSB2YWx1ZVxyXG4gICAgICAgICAqIGV4Y2x1ZGU6XHJcbiAgICAgICAgICogICB0cnVlOiBhbHdheXMgZXhjbHVkZSB2YWx1ZVxyXG4gICAgICAgICAqICAgZmFsc2U6IGRlZmF1bHQgaGFuZGxpbmdcclxuICAgICAgICAgKi9cclxuICAgICAgICBpZiAoaW5jbHVkZSAhPT0gdW5kZWZpbmVkICYmICFpbmNsdWRlKSB7XHJcbiAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGV4Y2x1ZGUgIT09IHVuZGVmaW5lZCAmJiBleGNsdWRlKSB7XHJcbiAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGZvciBub3csIGV4cGxpY2l0bHkgaGlkZGVuIGZpZWxkcyAodmlhLiB0aGUgZmllbGQuaGlkZSgpIG1ldGhvZCkgYXJlIG5vdCBpbmNsdWRlZFxyXG4gICAgICAgIGlmIChhbGwgfHwgKChmaWVsZC5hbHdheXNVc2VWYWx1ZSB8fCBmaWVsZC5pc0RpcnR5KCkgfHwgaW5jbHVkZSkgJiYgIWZpZWxkLmlzSGlkZGVuKCkpKSB7XHJcbiAgICAgICAgICBpZiAoZmllbGQuYXBwbHlUbyAhPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBmaWVsZC5hcHBseVRvID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgICAgIC8vIENvcHkgdGhlIHZhbHVlIHByb3BlcnRpZXMgaW50byBvdXIgcGF5bG9hZCBvYmplY3RcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcHJvcCBpbiB2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICBpZiAodmFsdWUuaGFzT3duUHJvcGVydHkocHJvcCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBwYXlsb2FkW3Byb3BdID0gdmFsdWVbcHJvcF07XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIGZpZWxkLmFwcGx5VG8ocGF5bG9hZCwgdmFsdWUpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBmaWVsZC5hcHBseVRvID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IHV0aWxpdHkuZ2V0VmFsdWUocGF5bG9hZCwgZmllbGQuYXBwbHlUbyk7XHJcbiAgICAgICAgICAgICAgbGFuZy5taXhpbih0YXJnZXQsIHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdXRpbGl0eS5zZXRWYWx1ZShwYXlsb2FkLCBmaWVsZC5wcm9wZXJ0eSB8fCBuYW1lLCB2YWx1ZSk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgZW1wdHkgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBlbXB0eSA/IGZhbHNlIDogcGF5bG9hZDtcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIExvb3BzIGFuZCBnYXRoZXJzIHRoZSB2YWxpZGF0aW9uIGVycm9ycyByZXR1cm5lZCBmcm9tIGVhY2ggZmllbGQgYW5kIGFkZHMgdGhlbSB0byB0aGVcclxuICAgKiB2YWxpZGF0aW9uIHN1bW1hcnkgYXJlYS4gSWYgbm8gZXJyb3JzLCByZW1vdmVzIHRoZSB2YWxpZGF0aW9uIHN1bW1hcnkuXHJcbiAgICogQHJldHVybiB7Qm9vbGVhbi9PYmplY3RbXX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgZXJyb3JzIGlmIHByZXNlbnQgb3IgZmFsc2UgZm9yIG5vIGVycm9ycy5cclxuICAgKi9cclxuICB2YWxpZGF0ZTogZnVuY3Rpb24gdmFsaWRhdGUoKSB7XHJcbiAgICB0aGlzLmVycm9ycyA9IFtdO1xyXG5cclxuICAgIGZvciAoY29uc3QgbmFtZSBpbiB0aGlzLmZpZWxkcykge1xyXG4gICAgICBpZiAodGhpcy5maWVsZHMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcclxuICAgICAgICBjb25zdCBmaWVsZCA9IHRoaXMuZmllbGRzW25hbWVdO1xyXG5cclxuICAgICAgICBjb25zdCByZXN1bHQgPSBmaWVsZC52YWxpZGF0ZSgpO1xyXG4gICAgICAgIGlmICghZmllbGQuaXNIaWRkZW4oKSAmJiByZXN1bHQgIT09IGZhbHNlKSB7XHJcbiAgICAgICAgICBkb21DbGFzcy5hZGQoZmllbGQuY29udGFpbmVyTm9kZSwgJ3Jvdy1lcnJvcicpO1xyXG5cclxuICAgICAgICAgIHRoaXMuZXJyb3JzLnB1c2goe1xyXG4gICAgICAgICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiByZXN1bHQsXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgZG9tQ2xhc3MucmVtb3ZlKGZpZWxkLmNvbnRhaW5lck5vZGUsICdyb3ctZXJyb3InKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdGhpcy5lcnJvcnMubGVuZ3RoID4gMCA/IHRoaXMuZXJyb3JzIDogZmFsc2U7XHJcbiAgfSxcclxuICAvKipcclxuICAgKiBEZXRlcm1pbmVzIGlmIHRoZSBmb3JtIGlzIGN1cnJlbnRseSBidXN5L2Rpc2FibGVkXHJcbiAgICogQHJldHVybiB7Qm9vbGVhbn1cclxuICAgKi9cclxuICBpc0Zvcm1EaXNhYmxlZDogZnVuY3Rpb24gaXNGb3JtRGlzYWJsZWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5idXN5O1xyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogRGlzYWJsZXMgdGhlIGZvcm0gYnkgc2V0dGluZyBidXN5IHRvIHRydWUgYW5kIGRpc2FibGluZyB0aGUgdG9vbGJhci5cclxuICAgKi9cclxuICBkaXNhYmxlOiBmdW5jdGlvbiBkaXNhYmxlKCkge1xyXG4gICAgdGhpcy5idXN5ID0gdHJ1ZTtcclxuXHJcbiAgICBpZiAoQXBwLmJhcnMudGJhcikge1xyXG4gICAgICBBcHAuYmFycy50YmFyLmRpc2FibGVUb29sKCdzYXZlJyk7XHJcbiAgICB9XHJcblxyXG4gICAgZG9tQ2xhc3MuYWRkKHdpbi5ib2R5KCksICdidXN5Jyk7XHJcbiAgfSxcclxuICAvKipcclxuICAgKiBFbmFibGVzIHRoZSBmb3JtIGJ5IHNldHRpbmcgYnVzeSB0byBmYWxzZSBhbmQgZW5hYmxpbmcgdGhlIHRvb2xiYXJcclxuICAgKi9cclxuICBlbmFibGU6IGZ1bmN0aW9uIGVuYWJsZSgpIHtcclxuICAgIHRoaXMuYnVzeSA9IGZhbHNlO1xyXG5cclxuICAgIGlmIChBcHAuYmFycy50YmFyKSB7XHJcbiAgICAgIEFwcC5iYXJzLnRiYXIuZW5hYmxlVG9vbCgnc2F2ZScpO1xyXG4gICAgfVxyXG5cclxuICAgIGRvbUNsYXNzLnJlbW92ZSh3aW4uYm9keSgpLCAnYnVzeScpO1xyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogQ2FsbGVkIGJ5IHNhdmUoKSB3aGVuIHBlcmZvcm1pbmcgYW4gaW5zZXJ0IChjcmVhdGUpLlxyXG4gICAqIEdhdGhlcnMgdGhlIHZhbHVlcywgY3JlYXRlcyB0aGUgcGF5bG9hZCBmb3IgaW5zZXJ0LCBjcmVhdGVzIHRoZSBzZGF0YSByZXF1ZXN0IGFuZFxyXG4gICAqIGNhbGxzIGBjcmVhdGVgLlxyXG4gICAqL1xyXG4gIGluc2VydDogZnVuY3Rpb24gaW5zZXJ0KCkge1xyXG4gICAgdGhpcy5kaXNhYmxlKCk7XHJcblxyXG4gICAgY29uc3QgdmFsdWVzID0gdGhpcy5nZXRWYWx1ZXMoKTtcclxuICAgIGlmICh2YWx1ZXMpIHtcclxuICAgICAgdGhpcy5vbkluc2VydCh2YWx1ZXMpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgUmVVSS5iYWNrKCk7XHJcbiAgICB9XHJcbiAgfSxcclxuICBvbkluc2VydDogZnVuY3Rpb24gb25JbnNlcnQodmFsdWVzKSB7XHJcbiAgICBjb25zdCBzdG9yZSA9IHRoaXMuZ2V0KCdzdG9yZScpO1xyXG4gICAgY29uc3QgYWRkT3B0aW9ucyA9IHtcclxuICAgICAgb3ZlcndyaXRlOiBmYWxzZSxcclxuICAgIH07XHJcbiAgICBjb25zdCBlbnRyeSA9IHRoaXMuY3JlYXRlRW50cnlGb3JJbnNlcnQodmFsdWVzKTtcclxuICAgIHRoaXMuX2FwcGx5U3RhdGVUb0FkZE9wdGlvbnMoYWRkT3B0aW9ucyk7XHJcbiAgICBpZiAodGhpcy5fbW9kZWwpIHtcclxuICAgICAgdGhpcy5fbW9kZWwuaW5zZXJ0RW50cnkoZW50cnksIGFkZE9wdGlvbnMpLnRoZW4oZnVuY3Rpb24gc3VjY2VzcyhkYXRhKSB7XHJcbiAgICAgICAgdGhpcy5vbkFkZENvbXBsZXRlKGVudHJ5LCBkYXRhKTtcclxuICAgICAgfS5iaW5kKHRoaXMpLCBmdW5jdGlvbiBmYWlsdXJlKGVycikge1xyXG4gICAgICAgIHRoaXMub25BZGRFcnJvcihhZGRPcHRpb25zLCBlcnIpO1xyXG4gICAgICB9LmJpbmQodGhpcykpO1xyXG4gICAgfSBlbHNlIGlmIChzdG9yZSkge1xyXG4gICAgICBEZWZlcnJlZC53aGVuKHN0b3JlLmFkZChlbnRyeSwgYWRkT3B0aW9ucyksXHJcbiAgICAgICAgdGhpcy5vbkFkZENvbXBsZXRlLmJpbmQodGhpcywgZW50cnkpLFxyXG4gICAgICAgIHRoaXMub25BZGRFcnJvci5iaW5kKHRoaXMsIGFkZE9wdGlvbnMpXHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgfSxcclxuICBfYXBwbHlTdGF0ZVRvQWRkT3B0aW9uczogZnVuY3Rpb24gX2FwcGx5U3RhdGVUb0FkZE9wdGlvbnMoIC8qYWRkT3B0aW9ucyovICkge30sXHJcbiAgb25BZGRDb21wbGV0ZTogZnVuY3Rpb24gb25BZGRDb21wbGV0ZShlbnRyeSwgcmVzdWx0KSB7XHJcbiAgICB0aGlzLmVuYWJsZSgpO1xyXG5cclxuICAgIGNvbnN0IG1lc3NhZ2UgPSB0aGlzLl9idWlsZFJlZnJlc2hNZXNzYWdlKGVudHJ5LCByZXN1bHQpO1xyXG4gICAgY29ubmVjdC5wdWJsaXNoKCcvYXBwL3JlZnJlc2gnLCBbbWVzc2FnZV0pO1xyXG5cclxuICAgIHRoaXMub25JbnNlcnRDb21wbGV0ZWQocmVzdWx0KTtcclxuICB9LFxyXG4gIG9uQWRkRXJyb3I6IGZ1bmN0aW9uIG9uQWRkRXJyb3IoYWRkT3B0aW9ucywgZXJyb3IpIHtcclxuICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IpO1xyXG4gICAgdGhpcy5lbmFibGUoKTtcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIEhhbmRsZXIgZm9yIGluc2VydCBjb21wbGV0ZSwgY2hlY2tzIGZvciBgdGhpcy5vcHRpb25zLnJldHVyblRvYCBlbHNlIGl0IHNpbXBseSBnb2VzIGJhY2suXHJcbiAgICogQHBhcmFtIGVudHJ5XHJcbiAgICovXHJcbiAgb25JbnNlcnRDb21wbGV0ZWQ6IGZ1bmN0aW9uIG9uSW5zZXJ0Q29tcGxldGVkKCAvKmVudHJ5Ki8gKSB7XHJcbiAgICBpZiAodGhpcy5vcHRpb25zICYmIHRoaXMub3B0aW9ucy5yZXR1cm5Ubykge1xyXG4gICAgICBjb25zdCByZXR1cm5UbyA9IHRoaXMub3B0aW9ucy5yZXR1cm5UbztcclxuICAgICAgY29uc3QgdmlldyA9IEFwcC5nZXRWaWV3KHJldHVyblRvKTtcclxuICAgICAgaWYgKHZpZXcpIHtcclxuICAgICAgICB2aWV3LnNob3coKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB3aW5kb3cubG9jYXRpb24uaGFzaCA9IHJldHVyblRvO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBSZVVJLmJhY2soKTtcclxuICAgIH1cclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIENhbGxlZCBieSBzYXZlKCkgd2hlbiBwZXJmb3JtaW5nIGFuIHVwZGF0ZSAoZWRpdCkuXHJcbiAgICogR2F0aGVycyB0aGUgdmFsdWVzLCBjcmVhdGVzIHRoZSBwYXlsb2FkIGZvciB1cGRhdGUsIGNyZWF0ZXMgdGhlIHNkYXRhIHJlcXVlc3QgYW5kXHJcbiAgICogY2FsbHMgYHVwZGF0ZWAuXHJcbiAgICovXHJcbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoKSB7XHJcbiAgICBjb25zdCB2YWx1ZXMgPSB0aGlzLmdldFZhbHVlcygpO1xyXG4gICAgaWYgKHZhbHVlcykge1xyXG4gICAgICB0aGlzLmRpc2FibGUoKTtcclxuICAgICAgdGhpcy5vblVwZGF0ZSh2YWx1ZXMpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5vblVwZGF0ZUNvbXBsZXRlZChmYWxzZSk7XHJcbiAgICB9XHJcbiAgfSxcclxuICBvblVwZGF0ZTogZnVuY3Rpb24gb25VcGRhdGUodmFsdWVzKSB7XHJcbiAgICBjb25zdCBzdG9yZSA9IHRoaXMuZ2V0KCdzdG9yZScpO1xyXG4gICAgY29uc3QgcHV0T3B0aW9ucyA9IHtcclxuICAgICAgb3ZlcndyaXRlOiB0cnVlLFxyXG4gICAgfTtcclxuICAgIGNvbnN0IGVudHJ5ID0gdGhpcy5jcmVhdGVFbnRyeUZvclVwZGF0ZSh2YWx1ZXMpO1xyXG4gICAgdGhpcy5fYXBwbHlTdGF0ZVRvUHV0T3B0aW9ucyhwdXRPcHRpb25zKTtcclxuICAgIGlmICh0aGlzLl9tb2RlbCkge1xyXG4gICAgICB0aGlzLl9tb2RlbC51cGRhdGVFbnRyeShlbnRyeSwgcHV0T3B0aW9ucykudGhlbihmdW5jdGlvbiBzdWNjZXNzKGRhdGEpIHtcclxuICAgICAgICB0aGlzLm9uUHV0Q29tcGxldGUoZW50cnksIGRhdGEpO1xyXG4gICAgICB9LmJpbmQodGhpcyksIGZ1bmN0aW9uIGZhaWx1cmUoZXJyKSB7XHJcbiAgICAgICAgdGhpcy5vblB1dEVycm9yKHB1dE9wdGlvbnMsIGVycik7XHJcbiAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICB9IGVsc2UgaWYgKHN0b3JlKSB7XHJcbiAgICAgIERlZmVycmVkLndoZW4oc3RvcmUucHV0KGVudHJ5LCBwdXRPcHRpb25zKSxcclxuICAgICAgICB0aGlzLm9uUHV0Q29tcGxldGUuYmluZCh0aGlzLCBlbnRyeSksXHJcbiAgICAgICAgdGhpcy5vblB1dEVycm9yLmJpbmQodGhpcywgcHV0T3B0aW9ucylcclxuICAgICAgKTtcclxuICAgIH1cclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIEdhdGhlcnMgdGhlIHZhbHVlcyBmb3IgdGhlIGVudHJ5IHRvIHNlbmQgYmFjayBhbmQgcmV0dXJucyB0aGUgYXBwcm9wcmlhdGUgcGF5bG9hZCBmb3JcclxuICAgKiBjcmVhdGluZyBvciB1cGRhdGluZy5cclxuICAgKiBAcmV0dXJuIHtPYmplY3R9IEVudHJ5L3BheWxvYWRcclxuICAgKi9cclxuICBjcmVhdGVJdGVtOiBmdW5jdGlvbiBjcmVhdGVJdGVtKCkge1xyXG4gICAgY29uc3QgdmFsdWVzID0gdGhpcy5nZXRWYWx1ZXMoKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5pbnNlcnRpbmcgPyB0aGlzLmNyZWF0ZUVudHJ5Rm9ySW5zZXJ0KHZhbHVlcykgOiB0aGlzLmNyZWF0ZUVudHJ5Rm9yVXBkYXRlKHZhbHVlcyk7XHJcbiAgfSxcclxuICAvKipcclxuICAgKiBUYWtlcyB0aGUgdmFsdWVzIG9iamVjdCBhbmQgYWRkcyB0aGUgbmVlZGVkIHByb3BlcnRpZXJzIGZvciB1cGRhdGluZy5cclxuICAgKiBAcGFyYW0ge09iamVjdH0gdmFsdWVzXHJcbiAgICogQHJldHVybiB7T2JqZWN0fSBPYmplY3Qgd2l0aCBwcm9wZXJ0aWVzIGZvciB1cGRhdGluZ1xyXG4gICAqL1xyXG4gIGNyZWF0ZUVudHJ5Rm9yVXBkYXRlOiBmdW5jdGlvbiBjcmVhdGVFbnRyeUZvclVwZGF0ZSh2YWx1ZXMpIHtcclxuICAgIHJldHVybiB0aGlzLmNvbnZlcnRWYWx1ZXModmFsdWVzKTtcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIFRha2VzIHRoZSB2YWx1ZXMgb2JqZWN0IGFuZCBhZGRzIHRoZSBuZWVkZWQgcHJvcGVydGllcnMgZm9yIGNyZWF0aW5nL2luc2VydGluZy5cclxuICAgKiBAcGFyYW0ge09iamVjdH0gdmFsdWVzXHJcbiAgICogQHJldHVybiB7T2JqZWN0fSBPYmplY3Qgd2l0aCBwcm9wZXJ0aWVzIGZvciBpbnNlcnRpbmdcclxuICAgKi9cclxuICBjcmVhdGVFbnRyeUZvckluc2VydDogZnVuY3Rpb24gY3JlYXRlRW50cnlGb3JJbnNlcnQodmFsdWVzKSB7XHJcbiAgICByZXR1cm4gdGhpcy5jb252ZXJ0VmFsdWVzKHZhbHVlcyk7XHJcbiAgfSxcclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBjYWxsIHRvIHRyYW5mb3JtIHZhbHVlcyBiZWZvcmUgc2F2ZVxyXG4gICAqL1xyXG4gIGNvbnZlcnRWYWx1ZXM6IGZ1bmN0aW9uIGNvbnZlcnRWYWx1ZXModmFsdWVzKSB7XHJcbiAgICByZXR1cm4gdmFsdWVzO1xyXG4gIH0sXHJcbiAgX2FwcGx5U3RhdGVUb1B1dE9wdGlvbnM6IGZ1bmN0aW9uIF9hcHBseVN0YXRlVG9QdXRPcHRpb25zKCAvKnB1dE9wdGlvbnMqLyApIHt9LFxyXG4gIG9uUHV0Q29tcGxldGU6IGZ1bmN0aW9uIG9uUHV0Q29tcGxldGUoZW50cnksIHJlc3VsdCkge1xyXG4gICAgdGhpcy5lbmFibGUoKTtcclxuXHJcbiAgICBjb25zdCBtZXNzYWdlID0gdGhpcy5fYnVpbGRSZWZyZXNoTWVzc2FnZShlbnRyeSwgcmVzdWx0KTtcclxuXHJcbiAgICBjb25uZWN0LnB1Ymxpc2goJy9hcHAvcmVmcmVzaCcsIFttZXNzYWdlXSk7XHJcblxyXG4gICAgdGhpcy5vblVwZGF0ZUNvbXBsZXRlZChyZXN1bHQpO1xyXG4gIH0sXHJcbiAgb25QdXRFcnJvcjogZnVuY3Rpb24gb25QdXRFcnJvcihwdXRPcHRpb25zLCBlcnJvcikge1xyXG4gICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvcik7XHJcbiAgICB0aGlzLmVuYWJsZSgpO1xyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogQXJyYXkgb2Ygc3RyaW5ncyB0aGF0IHdpbGwgZ2V0IGlnbm9yZWQgd2hlbiB0aGUgZGlmZmluZyBydW5zLlxyXG4gICAqL1xyXG4gIGRpZmZQcm9wZXJ0eUlnbm9yZXM6IFtdLFxyXG4gIC8qKlxyXG4gICAqIERpZmZzIHRoZSByZXN1bHRzIGZyb20gdGhlIGN1cnJlbnQgdmFsdWVzIGFuZCB0aGUgcHJldmlvdXMgdmFsdWVzLlxyXG4gICAqIFRoaXMgaXMgZG9uZSBmb3IgYSBjb25jdXJyZW5jeSBjaGVjayB0byBpbmRpY2F0ZSB3aGF0IGhhcyBjaGFuZ2VkLlxyXG4gICAqIEByZXR1cm5zIEFycmF5IExpc3Qgb2YgcHJvcGVydHkgbmFtZXMgdGhhdCBoYXZlIGNoYW5nZWRcclxuICAgKi9cclxuICBkaWZmczogZnVuY3Rpb24gZGlmZnMobGVmdCwgcmlnaHQpIHtcclxuICAgIGNvbnN0IGFjYyA9IFtdO1xyXG4gICAgY29uc3QgRGVlcERpZmYgPSB3aW5kb3cuRGVlcERpZmY7XHJcbiAgICBjb25zdCBESUZGX0VESVRFRCA9ICdFJztcclxuXHJcbiAgICBpZiAoRGVlcERpZmYpIHtcclxuICAgICAgY29uc3QgX2RpZmZzID0gRGVlcERpZmYuZGlmZihsZWZ0LCByaWdodCwgZnVuY3Rpb24gZGVlcERpZmYocGF0aCwga2V5KSB7XHJcbiAgICAgICAgaWYgKGFycmF5LmluZGV4T2YodGhpcy5kaWZmUHJvcGVydHlJZ25vcmVzLCBrZXkpID49IDApIHtcclxuICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgfS5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAgIGFycmF5LmZvckVhY2goX2RpZmZzLCAoZGlmZikgPT4ge1xyXG4gICAgICAgIGNvbnN0IHBhdGggPSBkaWZmLnBhdGguam9pbignLicpO1xyXG4gICAgICAgIGlmIChkaWZmLmtpbmQgPT09IERJRkZfRURJVEVEICYmIGFycmF5LmluZGV4T2YoYWNjLCBwYXRoKSA9PT0gLTEpIHtcclxuICAgICAgICAgIGFjYy5wdXNoKHBhdGgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGFjYztcclxuICB9LFxyXG4gIF9idWlsZFJlZnJlc2hNZXNzYWdlOiBmdW5jdGlvbiBfYnVpbGRSZWZyZXNoTWVzc2FnZShlbnRyeSwgcmVzdWx0KSB7XHJcbiAgICBpZiAoZW50cnkpIHtcclxuICAgICAgY29uc3Qgc3RvcmUgPSB0aGlzLmdldCgnc3RvcmUnKTtcclxuICAgICAgY29uc3QgaWQgPSBzdG9yZS5nZXRJZGVudGl0eShlbnRyeSk7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgaWQ6IGlkLFxyXG4gICAgICAgIGtleTogaWQsXHJcbiAgICAgICAgZGF0YTogcmVzdWx0LFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogSGFuZGxlciBmb3IgdXBkYXRlIGNvbXBsZXRlLCBjaGVja3MgZm9yIGB0aGlzLm9wdGlvbnMucmV0dXJuVG9gIGVsc2UgaXQgc2ltcGx5IGdvZXMgYmFjay5cclxuICAgKiBAcGFyYW0gZW50cnlcclxuICAgKi9cclxuICBvblVwZGF0ZUNvbXBsZXRlZDogZnVuY3Rpb24gb25VcGRhdGVDb21wbGV0ZWQoIC8qZW50cnkqLyApIHtcclxuICAgIGlmICh0aGlzLm9wdGlvbnMgJiYgdGhpcy5vcHRpb25zLnJldHVyblRvKSB7XHJcbiAgICAgIGNvbnN0IHJldHVyblRvID0gdGhpcy5vcHRpb25zLnJldHVyblRvO1xyXG4gICAgICBjb25zdCB2aWV3ID0gQXBwLmdldFZpZXcocmV0dXJuVG8pO1xyXG4gICAgICBpZiAodmlldykge1xyXG4gICAgICAgIHZpZXcuc2hvdygpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gcmV0dXJuVG87XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIFJlVUkuYmFjaygpO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlcyB0aGUgbWFya3VwIGJ5IGFwcGx5aW5nIHRoZSBgdmFsaWRhdGlvblN1bW1hcnlJdGVtVGVtcGxhdGVgIHRvIGVhY2ggZW50cnkgaW4gYHRoaXMuZXJyb3JzYFxyXG4gICAqIHRoZW4gc2V0cyB0aGUgY29tYmluZWQgcmVzdWx0IGludG8gdGhlIHN1bW1hcnkgdmFsaWRhdGlvbiBub2RlIGFuZCBzZXRzIHRoZSBzdHlsaW5nIHRvIHZpc2libGVcclxuICAgKi9cclxuICBzaG93VmFsaWRhdGlvblN1bW1hcnk6IGZ1bmN0aW9uIHNob3dWYWxpZGF0aW9uU3VtbWFyeSgpIHtcclxuICAgIGNvbnN0IGNvbnRlbnQgPSBbXTtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZXJyb3JzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGNvbnRlbnQucHVzaCh0aGlzLnZhbGlkYXRpb25TdW1tYXJ5SXRlbVRlbXBsYXRlLmFwcGx5KHRoaXMuZXJyb3JzW2ldLCB0aGlzLmZpZWxkc1t0aGlzLmVycm9yc1tpXS5uYW1lXSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuc2V0KCd2YWxpZGF0aW9uQ29udGVudCcsIGNvbnRlbnQuam9pbignJykpO1xyXG4gICAgZG9tQ2xhc3MuYWRkKHRoaXMuZG9tTm9kZSwgJ3BhbmVsLWZvcm0tZXJyb3InKTtcclxuICB9LFxyXG4gIHNob3dDb25jdXJyZW5jeVN1bW1hcnk6IGZ1bmN0aW9uIHNob3dDb25jdXJyZW5jeVN1bW1hcnkoKSB7XHJcbiAgICBjb25zdCBjb250ZW50ID0gW107XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmVycm9ycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBjb250ZW50LnB1c2godGhpcy5jb25jdXJyZW5jeVN1bW1hcnlJdGVtVGVtcGxhdGUuYXBwbHkodGhpcy5lcnJvcnNbaV0pKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnNldCgnY29uY3VycmVuY3lDb250ZW50JywgY29udGVudC5qb2luKCcnKSk7XHJcbiAgICBkb21DbGFzcy5hZGQodGhpcy5kb21Ob2RlLCAncGFuZWwtZm9ybS1jb25jdXJyZW5jeS1lcnJvcicpO1xyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogUmVtb3ZlcyB0aGUgc3VtbWFyeSB2YWxpZGF0aW9uIHZpc2libGUgc3R5bGluZyBhbmQgZW1wdGllcyBpdHMgY29udGVudHMgb2YgZXJyb3IgbWFya3VwXHJcbiAgICovXHJcbiAgaGlkZVZhbGlkYXRpb25TdW1tYXJ5OiBmdW5jdGlvbiBoaWRlVmFsaWRhdGlvblN1bW1hcnkoKSB7XHJcbiAgICBkb21DbGFzcy5yZW1vdmUodGhpcy5kb21Ob2RlLCAncGFuZWwtZm9ybS1lcnJvcicpO1xyXG4gICAgdGhpcy5zZXQoJ3ZhbGlkYXRpb25Db250ZW50JywgJycpO1xyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogUmVtb3ZlcyB0ZWggc3VtbWFyeSBmb3IgY29uY3VycmVuY3kgZXJyb3JzXHJcbiAgICovXHJcbiAgaGlkZUNvbmN1cnJlbmN5U3VtbWFyeTogZnVuY3Rpb24gaGlkZUNvbmN1cnJlbmN5U3VtbWFyeSgpIHtcclxuICAgIGRvbUNsYXNzLnJlbW92ZSh0aGlzLmRvbU5vZGUsICdwYW5lbC1mb3JtLWNvbmN1cnJlbmN5LWVycm9yJyk7XHJcbiAgICB0aGlzLnNldCgnY29uY3VycmVuY3lDb250ZW50JywgJycpO1xyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogSGFuZGxlciBmb3IgdGhlIHNhdmUgdG9vbGJhciBhY3Rpb24uXHJcbiAgICpcclxuICAgKiBGaXJzdCB2YWxpZGF0ZXMgdGhlIGZvcm1zLCBzaG93aW5nIGVycm9ycyBhbmQgc3RvcGluZyBzYXZpbmcgaWYgZm91bmQuXHJcbiAgICogVGhlbiBjYWxscyBlaXRoZXIge0BsaW5rICNpbnNlcnQgaW5zZXJ0fSBvciB7QGxpbmsgI3VwZGF0ZSB1cGRhdGV9IGJhc2VkIHVwb24gYHRoaXMuaW5zZXJ0aW5nYC5cclxuICAgKlxyXG4gICAqL1xyXG4gIHNhdmU6IGZ1bmN0aW9uIHNhdmUoKSB7XHJcbiAgICBpZiAodGhpcy5pc0Zvcm1EaXNhYmxlZCgpKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmhpZGVWYWxpZGF0aW9uU3VtbWFyeSgpO1xyXG4gICAgdGhpcy5oaWRlQ29uY3VycmVuY3lTdW1tYXJ5KCk7XHJcblxyXG4gICAgaWYgKHRoaXMudmFsaWRhdGUoKSAhPT0gZmFsc2UpIHtcclxuICAgICAgdGhpcy5zaG93VmFsaWRhdGlvblN1bW1hcnkoKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLmluc2VydGluZykge1xyXG4gICAgICB0aGlzLmluc2VydCgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy51cGRhdGUoKTtcclxuICAgIH1cclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIEV4dGVuZHMgdGhlIGdldENvbnRleHQgZnVuY3Rpb24gdG8gYWxzbyBpbmNsdWRlIHRoZSBgcmVzb3VyY2VLaW5kYCBvZiB0aGUgdmlldywgYGluc2VydGBcclxuICAgKiBzdGF0ZSBhbmQgYGtleWAgb2YgdGhlIGVudHJ5IChmYWxzZSBpZiBpbnNlcnRpbmcpXHJcbiAgICovXHJcbiAgZ2V0Q29udGV4dDogZnVuY3Rpb24gZ2V0Q29udGV4dCgpIHtcclxuICAgIHJldHVybiBsYW5nLm1peGluKHRoaXMuaW5oZXJpdGVkKGFyZ3VtZW50cyksIHtcclxuICAgICAgcmVzb3VyY2VLaW5kOiB0aGlzLnJlc291cmNlS2luZCxcclxuICAgICAgaW5zZXJ0OiB0aGlzLm9wdGlvbnMuaW5zZXJ0LFxyXG4gICAgICBrZXk6IHRoaXMub3B0aW9ucy5pbnNlcnQgPyBmYWxzZSA6IHRoaXMub3B0aW9ucy5rZXkgPyB0aGlzLm9wdGlvbnMua2V5IDogdGhpcy5vcHRpb25zLmVudHJ5ICYmIHRoaXMub3B0aW9ucy5lbnRyeVt0aGlzLmlkUHJvcGVydHldIC8vIGVzbGludC1kaXNhYmxlLWxpbmVcclxuICAgIH0pO1xyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogV3JhcHBlciBmb3IgZGV0ZWN0aW5nIHNlY3VyaXR5IGZvciB1cGRhdGUgbW9kZSBvciBpbnNlcnQgbW9kZVxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBhY2Nlc3MgQ2FuIGJlIGVpdGhlciBcInVwZGF0ZVwiIG9yIFwiaW5zZXJ0XCJcclxuICAgKi9cclxuICBnZXRTZWN1cml0eTogZnVuY3Rpb24gZ2V0U2VjdXJpdHkoYWNjZXNzKSB7XHJcbiAgICBjb25zdCBsb29rdXAgPSB7XHJcbiAgICAgICd1cGRhdGUnOiB0aGlzLnVwZGF0ZVNlY3VyaXR5LFxyXG4gICAgICAnaW5zZXJ0JzogdGhpcy5pbnNlcnRTZWN1cml0eSxcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIGxvb2t1cFthY2Nlc3NdO1xyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kcyBiZWZvcmVUcmFuc2l0aW9uVG8gdG8gYWRkIHRoZSBsb2FkaW5nIHN0eWxpbmcgaWYgcmVmcmVzaCBpcyBuZWVkZWRcclxuICAgKi9cclxuICBiZWZvcmVUcmFuc2l0aW9uVG86IGZ1bmN0aW9uIGJlZm9yZVRyYW5zaXRpb25UbygpIHtcclxuICAgIGlmICh0aGlzLnJlZnJlc2hSZXF1aXJlZCkge1xyXG4gICAgICBpZiAodGhpcy5vcHRpb25zLmluc2VydCA9PT0gdHJ1ZSB8fCAodGhpcy5vcHRpb25zLmtleSAmJiAhdGhpcy5vcHRpb25zLmVudHJ5KSkge1xyXG4gICAgICAgIGRvbUNsYXNzLmFkZCh0aGlzLmRvbU5vZGUsICdwYW5lbC1sb2FkaW5nJyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZG9tQ2xhc3MucmVtb3ZlKHRoaXMuZG9tTm9kZSwgJ3BhbmVsLWxvYWRpbmcnKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuaW5oZXJpdGVkKGFyZ3VtZW50cyk7XHJcbiAgfSxcclxuICBvblRyYW5zaXRpb25UbzogZnVuY3Rpb24gb25UcmFuc2l0aW9uVG8oKSB7XHJcbiAgICAvLyBGb2N1cyB0aGUgZGVmYXVsdCBmb2N1cyBmaWVsZCBpZiBpdCBleGlzdHMgYW5kIGl0IGhhcyBub3QgYWxyZWFkeSBiZWVuIGZvY3VzZWQuXHJcbiAgICAvLyBUaGlzIGZsYWcgaXMgaW1wb3J0YW50IGJlY2F1c2Ugb25UcmFuc2l0aW9uVG8gd2lsbCBmaXJlIG11bHRpcGxlIHRpbWVzIGlmIHRoZSB1c2VyIGlzIHVzaW5nIGxvb2t1cHMgYW5kIGVkaXRvciB0eXBlIGZpZWxkcyB0aGF0IHRyYW5zaXRpb24gYXdheSBmcm9tIHRoaXMgdmlldy5cclxuICAgIGlmICh0aGlzLl9mb2N1c0ZpZWxkICYmICF0aGlzLl9oYXNGb2N1c2VkKSB7XHJcbiAgICAgIHRoaXMuX2ZvY3VzRmllbGQuZm9jdXMoKTtcclxuICAgICAgdGhpcy5faGFzRm9jdXNlZCA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5pbmhlcml0ZWQoYXJndW1lbnRzKTtcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIEVtcHRpZXMgdGhlIGFjdGl2YXRlIG1ldGhvZCB3aGljaCBwcmV2ZW50cyBkZXRlY3Rpb24gb2YgcmVmcmVzaCBmcm9tIHRyYW5zaXRpdGlvbmluZy5cclxuICAgKlxyXG4gICAqIEV4dGVybmFsIG5hdmlnYXRpb24gKGJyb3dzZXIgYmFjay9mb3J3YXJkKSBuZXZlciByZWZyZXNoZXMgdGhlIGVkaXQgdmlldyBhcyBpdCdzIGFsd2F5cyBhIHRlcm1pbmFsIGxvb3AuXHJcbiAgICogaS5lLiB5b3UgbmV2ZXIgbW92ZSBcImZvcndhcmRcIiBmcm9tIGFuIGVkaXQgdmlldzsgeW91IG5hdmlnYXRlIHRvIGNoaWxkIGVkaXRvcnMsIGZyb20gd2hpY2ggeW91IGFsd2F5cyByZXR1cm4uXHJcbiAgICovXHJcbiAgYWN0aXZhdGU6IGZ1bmN0aW9uIGFjdGl2YXRlKCkge30sXHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kcyByZWZyZXNoUmVxdWlyZWRGb3IgdG8gcmV0dXJuIGZhbHNlIGlmIHdlIGFscmVhZHkgaGF2ZSB0aGUga2V5IHRoZSBvcHRpb25zIGlzIHBhc3NpbmdcclxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBOYXZpZ2F0aW9uIG9wdGlvbnMgZnJvbSBwcmV2aW91cyB2aWV3XHJcbiAgICovXHJcbiAgcmVmcmVzaFJlcXVpcmVkRm9yOiBmdW5jdGlvbiByZWZyZXNoUmVxdWlyZWRGb3Iob3B0aW9ucykge1xyXG4gICAgaWYgKHRoaXMub3B0aW9ucykge1xyXG4gICAgICBpZiAob3B0aW9ucykge1xyXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMua2V5ICYmIHRoaXMub3B0aW9ucy5rZXkgPT09IG9wdGlvbnMua2V5KSB7XHJcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuaW5oZXJpdGVkKGFyZ3VtZW50cyk7XHJcbiAgfSxcclxuICAvKipcclxuICAgKiBSZWZyZXNoIGZpcnN0IGNsZWFycyBvdXQgYW55IHZhcmlhYmxlcyBzZXQgdG8gcHJldmlvdXMgZGF0YS5cclxuICAgKlxyXG4gICAqIFRoZSBtb2RlIG9mIHRoZSBFZGl0IHZpZXcgaXMgc2V0IGFuZCBkZXRlcm1pbmVkIHZpYSBgdGhpcy5vcHRpb25zLmluc2VydGAsIGFuZCB0aGUgdmlld3MgdmFsdWVzIGFyZSBjbGVhcmVkLlxyXG4gICAqXHJcbiAgICogTGFzdGx5IGl0IG1ha2VzIHRoZSBhcHByb3BpYXRlIGRhdGEgcmVxdWVzdDpcclxuICAgKi9cclxuICByZWZyZXNoOiBmdW5jdGlvbiByZWZyZXNoKCkge1xyXG4gICAgdGhpcy5vblJlZnJlc2goKTtcclxuICAgIHRoaXMuZW50cnkgPSBmYWxzZTtcclxuICAgIHRoaXMuY2hhbmdlcyA9IGZhbHNlO1xyXG4gICAgdGhpcy5pbnNlcnRpbmcgPSAodGhpcy5vcHRpb25zLmluc2VydCA9PT0gdHJ1ZSk7XHJcbiAgICB0aGlzLl9oYXNGb2N1c2VkID0gZmFsc2U7XHJcblxyXG4gICAgZG9tQ2xhc3MucmVtb3ZlKHRoaXMuZG9tTm9kZSwgJ3BhbmVsLWZvcm0tZXJyb3InKTtcclxuICAgIGRvbUNsYXNzLnJlbW92ZSh0aGlzLmRvbU5vZGUsICdwYW5lbC1mb3JtLWNvbmN1cnJlbmN5LWVycm9yJyk7XHJcblxyXG4gICAgdGhpcy5jbGVhclZhbHVlcygpO1xyXG5cclxuICAgIGlmICh0aGlzLmluc2VydGluZykge1xyXG4gICAgICB0aGlzLm9uUmVmcmVzaEluc2VydCgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5vblJlZnJlc2hVcGRhdGUoKTtcclxuICAgIH1cclxuICB9LFxyXG4gIG9uUmVmcmVzaDogZnVuY3Rpb24gb25SZWZyZXNoKCkge30sXHJcbiAgb25SZWZyZXNoSW5zZXJ0OiBmdW5jdGlvbiBvblJlZnJlc2hJbnNlcnQoKSB7fSxcclxuICBvblJlZnJlc2hVcGRhdGU6IGZ1bmN0aW9uIG9uUmVmcmVzaFVwZGF0ZSgpIHtcclxuICAgIC8vIGFwcGx5IGFzIG5vbi1tb2RpZmllZCBkYXRhXHJcbiAgICBpZiAodGhpcy5vcHRpb25zLmVudHJ5KSB7XHJcbiAgICAgIHRoaXMucHJvY2Vzc0RhdGEodGhpcy5vcHRpb25zLmVudHJ5KTtcclxuXHJcbiAgICAgIC8vIGFwcGx5IGNoYW5nZXMgYXMgbW9kaWZpZWQgZGF0YSwgc2luY2Ugd2Ugd2FudCB0aGlzIHRvIGZlZWQtYmFjayB0aHJvdWdoXHJcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuY2hhbmdlcykge1xyXG4gICAgICAgIHRoaXMuY2hhbmdlcyA9IHRoaXMub3B0aW9ucy5jaGFuZ2VzO1xyXG4gICAgICAgIHRoaXMuc2V0VmFsdWVzKHRoaXMuY2hhbmdlcyk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIGlmIGtleSBpcyBwYXNzZWQgcmVxdWVzdCB0aGF0IGtleXMgZW50aXR5IGFuZCBwcm9jZXNzXHJcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMua2V5KSB7XHJcbiAgICAgICAgdGhpcy5yZXF1ZXN0RGF0YSgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSxcclxufSk7XHJcblxyXG5sYW5nLnNldE9iamVjdCgnU2FnZS5QbGF0Zm9ybS5Nb2JpbGUuX0VkaXRCYXNlJywgX19jbGFzcyk7XHJcbmV4cG9ydCBkZWZhdWx0IF9fY2xhc3M7XHJcbiJdfQ==
</pre>
</body>
</html>
