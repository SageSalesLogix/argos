<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">define('argos/Models/Briefcase/Offline', ['exports', 'module', 'dojo/_base/declare', '../_OfflineModelBase', '../Manager', '../Types', '../../I18n'], function (exports, module, _dojo_baseDeclare, _OfflineModelBase2, _Manager, _Types, _I18n) {
  function _interopRequireDefault(obj) { return obj &amp;&amp; obj.__esModule ? obj : { 'default': obj }; }

  var _declare = _interopRequireDefault(_dojo_baseDeclare);

  var _OfflineModelBase3 = _interopRequireDefault(_OfflineModelBase2);

  var _Manager2 = _interopRequireDefault(_Manager);

  var _MODEL_TYPES = _interopRequireDefault(_Types);

  var _getResource = _interopRequireDefault(_I18n);

  var resource = (0, _getResource['default'])('briefcaseModel');

<span id='argos-Models-Briefcase-Offline'>  /**
</span>   * @class argos.Models.Briefcase.Offline
   */
  var __class = (0, _declare['default'])('argos.Models.Briefcase.Offline', [_OfflineModelBase3['default']], {
    entityName: 'Briefcase',
    modelName: 'Briefcase',
    entityDisplayName: resource.entityDisplayName,
    entityDisplayNamePlural: resource.entityDisplayNamePlural,
    isSystem: true,
    createEntry: function createEntity(entry, model, options) {
      var entity = {}; // need to dynamicly create Properties;
      entity.$key = model.entityName + '_' + model.getEntityId(entry);
      entity.$descriptor = model.getEntityDescription(entry);
      entity.createDate = moment().toDate();
      entity.modifyDate = moment().toDate();
      entity.entityId = model.getEntityId(entry);
      entity.entityName = model.entityName;
      entity.description = model.getEntityDescription(entry);
      entity.entityDisplayName = model.entityDisplayName;
      entity.resourceKind = model.resourceKind;
      entity.viewId = options &amp;&amp; options.viewId ? options.viewId : model.detailViewId;
      entity.iconClass = options &amp;&amp; options.iconClass ? options.iconClass : model.getIconClass(entry);
      return entity;
    },
    deleteEntryByEntityContext: function deleteEntryByEntityContext(entityId, entityName) {
      var _this = this;

      var queryExpression = function map(doc, emit) {
        if (doc.entity.entityId === entityId &amp;&amp; doc.entity.entityName === entityName) {
          emit(doc.entity);
        }
      };
      this.getEntries(queryExpression).then(function (entries) {
        if (entries) {
          entries.forEach(function (entry) {
            _this.deleteEntry(entry.$key);
          });
        }
      });
    }
  });

  _Manager2['default'].register('Briefcase', _MODEL_TYPES['default'].OFFLINE, __class);
  module.exports = __class;
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9Nb2RlbHMvQnJpZWZjYXNlL09mZmxpbmUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQU1BLE1BQU0sUUFBUSxHQUFHLDZCQUFZLGdCQUFnQixDQUFDLENBQUM7Ozs7O0FBSy9DLE1BQU0sT0FBTyxHQUFHLHlCQUFRLGdDQUFnQyxFQUFFLCtCQUFtQixFQUFFO0FBQzdFLGNBQVUsRUFBRSxXQUFXO0FBQ3ZCLGFBQVMsRUFBRSxXQUFXO0FBQ3RCLHFCQUFpQixFQUFFLFFBQVEsQ0FBQyxpQkFBaUI7QUFDN0MsMkJBQXVCLEVBQUUsUUFBUSxDQUFDLHVCQUF1QjtBQUN6RCxZQUFRLEVBQUUsSUFBSTtBQUNkLGVBQVcsRUFBRSxTQUFTLFlBQVksQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRTtBQUN4RCxVQUFNLE1BQU0sR0FBRyxFQUFFLENBQUM7QUFDbEIsWUFBTSxDQUFDLElBQUksR0FBRyxLQUFLLENBQUMsVUFBVSxHQUFHLEdBQUcsR0FBRyxLQUFLLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ2hFLFlBQU0sQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDLG9CQUFvQixDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ3ZELFlBQU0sQ0FBQyxVQUFVLEdBQUcsTUFBTSxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUM7QUFDdEMsWUFBTSxDQUFDLFVBQVUsR0FBRyxNQUFNLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQztBQUN0QyxZQUFNLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDM0MsWUFBTSxDQUFDLFVBQVUsR0FBRyxLQUFLLENBQUMsVUFBVSxDQUFDO0FBQ3JDLFlBQU0sQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDLG9CQUFvQixDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ3ZELFlBQU0sQ0FBQyxpQkFBaUIsR0FBRyxLQUFLLENBQUMsaUJBQWlCLENBQUM7QUFDbkQsWUFBTSxDQUFDLFlBQVksR0FBRyxLQUFLLENBQUMsWUFBWSxDQUFDO0FBQ3pDLFlBQU0sQ0FBQyxNQUFNLEdBQUcsQUFBQyxPQUFPLElBQUksT0FBTyxDQUFDLE1BQU0sR0FBSSxPQUFPLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQyxZQUFZLENBQUM7QUFDbEYsWUFBTSxDQUFDLFNBQVMsR0FBRyxBQUFDLE9BQU8sSUFBSSxPQUFPLENBQUMsU0FBUyxHQUFJLE9BQU8sQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUNsRyxhQUFPLE1BQU0sQ0FBQztLQUNmO0FBQ0QsOEJBQTBCLEVBQUUsU0FBUywwQkFBMEIsQ0FBQyxRQUFRLEVBQUUsVUFBVSxFQUFFOzs7QUFDcEYsVUFBTSxlQUFlLEdBQUcsU0FBUyxHQUFHLENBQUMsR0FBRyxFQUFFLElBQUksRUFBRTtBQUM5QyxZQUFJLEFBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxRQUFRLEtBQUssUUFBUSxJQUFNLEdBQUcsQ0FBQyxNQUFNLENBQUMsVUFBVSxLQUFLLFVBQVUsQUFBQyxFQUFFO0FBQ2hGLGNBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7U0FDbEI7T0FDRixDQUFDO0FBQ0YsVUFBSSxDQUFDLFVBQVUsQ0FBQyxlQUFlLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBQyxPQUFPLEVBQUk7QUFDaEQsWUFBSSxPQUFPLEVBQUU7QUFDWCxpQkFBTyxDQUFDLE9BQU8sQ0FBQyxVQUFDLEtBQUssRUFBSztBQUN6QixrQkFBSyxXQUFXLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO1dBQzlCLENBQUMsQ0FBQztTQUNKO09BQ0YsQ0FBQyxDQUFDO0tBQ0o7R0FDRixDQUFDLENBQUM7O0FBRUgsdUJBQVEsUUFBUSxDQUFDLFdBQVcsRUFBRSx3QkFBWSxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUM7bUJBQzdDLE9BQU8iLCJmaWxlIjoic3JjL01vZGVscy9CcmllZmNhc2UvT2ZmbGluZS5qcyIsInNvdXJjZVJvb3QiOiJzcmMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZGVjbGFyZSBmcm9tICdkb2pvL19iYXNlL2RlY2xhcmUnO1xyXG5pbXBvcnQgX09mZmxpbmVNb2RlbEJhc2UgZnJvbSAnLi4vX09mZmxpbmVNb2RlbEJhc2UnO1xyXG5pbXBvcnQgTWFuYWdlciBmcm9tICcuLi9NYW5hZ2VyJztcclxuaW1wb3J0IE1PREVMX1RZUEVTIGZyb20gJy4uL1R5cGVzJztcclxuaW1wb3J0IGdldFJlc291cmNlIGZyb20gJy4uLy4uL0kxOG4nO1xyXG5cclxuY29uc3QgcmVzb3VyY2UgPSBnZXRSZXNvdXJjZSgnYnJpZWZjYXNlTW9kZWwnKTtcclxuXHJcbi8qKlxyXG4gKiBAY2xhc3MgYXJnb3MuTW9kZWxzLkJyaWVmY2FzZS5PZmZsaW5lXHJcbiAqL1xyXG5jb25zdCBfX2NsYXNzID0gZGVjbGFyZSgnYXJnb3MuTW9kZWxzLkJyaWVmY2FzZS5PZmZsaW5lJywgW19PZmZsaW5lTW9kZWxCYXNlXSwge1xyXG4gIGVudGl0eU5hbWU6ICdCcmllZmNhc2UnLFxyXG4gIG1vZGVsTmFtZTogJ0JyaWVmY2FzZScsXHJcbiAgZW50aXR5RGlzcGxheU5hbWU6IHJlc291cmNlLmVudGl0eURpc3BsYXlOYW1lLFxyXG4gIGVudGl0eURpc3BsYXlOYW1lUGx1cmFsOiByZXNvdXJjZS5lbnRpdHlEaXNwbGF5TmFtZVBsdXJhbCxcclxuICBpc1N5c3RlbTogdHJ1ZSxcclxuICBjcmVhdGVFbnRyeTogZnVuY3Rpb24gY3JlYXRlRW50aXR5KGVudHJ5LCBtb2RlbCwgb3B0aW9ucykge1xyXG4gICAgY29uc3QgZW50aXR5ID0ge307IC8vIG5lZWQgdG8gZHluYW1pY2x5IGNyZWF0ZSBQcm9wZXJ0aWVzO1xyXG4gICAgZW50aXR5LiRrZXkgPSBtb2RlbC5lbnRpdHlOYW1lICsgJ18nICsgbW9kZWwuZ2V0RW50aXR5SWQoZW50cnkpO1xyXG4gICAgZW50aXR5LiRkZXNjcmlwdG9yID0gbW9kZWwuZ2V0RW50aXR5RGVzY3JpcHRpb24oZW50cnkpO1xyXG4gICAgZW50aXR5LmNyZWF0ZURhdGUgPSBtb21lbnQoKS50b0RhdGUoKTtcclxuICAgIGVudGl0eS5tb2RpZnlEYXRlID0gbW9tZW50KCkudG9EYXRlKCk7XHJcbiAgICBlbnRpdHkuZW50aXR5SWQgPSBtb2RlbC5nZXRFbnRpdHlJZChlbnRyeSk7XHJcbiAgICBlbnRpdHkuZW50aXR5TmFtZSA9IG1vZGVsLmVudGl0eU5hbWU7XHJcbiAgICBlbnRpdHkuZGVzY3JpcHRpb24gPSBtb2RlbC5nZXRFbnRpdHlEZXNjcmlwdGlvbihlbnRyeSk7XHJcbiAgICBlbnRpdHkuZW50aXR5RGlzcGxheU5hbWUgPSBtb2RlbC5lbnRpdHlEaXNwbGF5TmFtZTtcclxuICAgIGVudGl0eS5yZXNvdXJjZUtpbmQgPSBtb2RlbC5yZXNvdXJjZUtpbmQ7XHJcbiAgICBlbnRpdHkudmlld0lkID0gKG9wdGlvbnMgJiYgb3B0aW9ucy52aWV3SWQpID8gb3B0aW9ucy52aWV3SWQgOiBtb2RlbC5kZXRhaWxWaWV3SWQ7XHJcbiAgICBlbnRpdHkuaWNvbkNsYXNzID0gKG9wdGlvbnMgJiYgb3B0aW9ucy5pY29uQ2xhc3MpID8gb3B0aW9ucy5pY29uQ2xhc3MgOiBtb2RlbC5nZXRJY29uQ2xhc3MoZW50cnkpO1xyXG4gICAgcmV0dXJuIGVudGl0eTtcclxuICB9LFxyXG4gIGRlbGV0ZUVudHJ5QnlFbnRpdHlDb250ZXh0OiBmdW5jdGlvbiBkZWxldGVFbnRyeUJ5RW50aXR5Q29udGV4dChlbnRpdHlJZCwgZW50aXR5TmFtZSkge1xyXG4gICAgY29uc3QgcXVlcnlFeHByZXNzaW9uID0gZnVuY3Rpb24gbWFwKGRvYywgZW1pdCkge1xyXG4gICAgICBpZiAoKGRvYy5lbnRpdHkuZW50aXR5SWQgPT09IGVudGl0eUlkKSAmJiAoZG9jLmVudGl0eS5lbnRpdHlOYW1lID09PSBlbnRpdHlOYW1lKSkge1xyXG4gICAgICAgIGVtaXQoZG9jLmVudGl0eSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICB0aGlzLmdldEVudHJpZXMocXVlcnlFeHByZXNzaW9uKS50aGVuKChlbnRyaWVzKT0+IHtcclxuICAgICAgaWYgKGVudHJpZXMpIHtcclxuICAgICAgICBlbnRyaWVzLmZvckVhY2goKGVudHJ5KSA9PiB7XHJcbiAgICAgICAgICB0aGlzLmRlbGV0ZUVudHJ5KGVudHJ5LiRrZXkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9LFxyXG59KTtcclxuXHJcbk1hbmFnZXIucmVnaXN0ZXIoJ0JyaWVmY2FzZScsIE1PREVMX1RZUEVTLk9GRkxJTkUsIF9fY2xhc3MpO1xyXG5leHBvcnQgZGVmYXVsdCBfX2NsYXNzO1xyXG4iXX0=
</pre>
</body>
</html>
