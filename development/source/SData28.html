<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">define('crm/Integrations/BOE/Models/UnitOfMeasure/SData', ['exports', 'module', 'dojo/_base/declare', 'dojo/_base/lang', './Base', 'argos/Models/_SDataModelBase', 'argos/Models/Manager', 'argos/Models/Types', '../Names', 'dojo/Deferred', 'dojo/when'], function (exports, module, _dojo_baseDeclare, _dojo_baseLang, _Base, _argosModels_SDataModelBase, _argosModelsManager, _argosModelsTypes, _Names, _dojoDeferred, _dojoWhen) {
  function _interopRequireDefault(obj) { return obj &amp;&amp; obj.__esModule ? obj : { 'default': obj }; }

  var _declare = _interopRequireDefault(_dojo_baseDeclare);

  var _lang = _interopRequireDefault(_dojo_baseLang);

  var _Base2 = _interopRequireDefault(_Base);

  var _SDataModelBase2 = _interopRequireDefault(_argosModels_SDataModelBase);

  var _Manager = _interopRequireDefault(_argosModelsManager);

  var _MODEL_TYPES = _interopRequireDefault(_argosModelsTypes);

  var _MODEL_NAMES = _interopRequireDefault(_Names);

  var _Deferred = _interopRequireDefault(_dojoDeferred);

  var _when = _interopRequireDefault(_dojoWhen);

  var __class = (0, _declare['default'])('crm.Integrations.BOE.Models.UnitOfMeasure.SData', [_Base2['default'], _SDataModelBase2['default']], {
    id: 'unitofmeasure_sdata_model',
    createQueryModels: function createQueryModels() {
      return [{
        name: 'list',
        queryOrderBy: 'Name',
        querySelect: ['Name', 'Product/*']
      }, {
        name: 'detail',
        querySelect: ['Name', 'Product/*']
      }];
    },
    getUnitOfMeasureFromCode: function getUnitOfMeasureFromCode(uomCode, productId) {
      var queryOptions = undefined;
      var queryResults = undefined;
      var def = new _Deferred['default']();
      queryOptions = {
        where: 'Product.Id eq &quot;' + productId + '&quot;'
      };
      if (uomCode &amp;&amp; productId) {
        queryResults = this.getEntries(null, queryOptions);
        (0, _when['default'])(queryResults, function (entries) {
          var uof = null;
          if (entries) {
            entries.forEach(function (item) {
              if (item.Name === uomCode) {
                uof = item;
              }
            });
          }
          def.resolve(uof);
        }, function (err) {
          def.reject(err);
        });
      } else {
        def.resolve(null);
      }
      return def.promise;
    }
  });

  _Manager['default'].register(_MODEL_NAMES['default'].UNITOFMEASURE, _MODEL_TYPES['default'].SDATA, __class);
  _lang['default'].setObject('icboe.Models.UnitOfMeasure.SData', __class);
  module.exports = __class;
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9JbnRlZ3JhdGlvbnMvQk9FL01vZGVscy9Vbml0T2ZNZWFzdXJlL1NEYXRhLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQVVBLE1BQU0sT0FBTyxHQUFHLHlCQUFRLGlEQUFpRCxFQUFFLGdEQUF1QixFQUFFO0FBQ2xHLE1BQUUsRUFBRSwyQkFBMkI7QUFDL0IscUJBQWlCLEVBQUUsU0FBUyxpQkFBaUIsR0FBRztBQUM5QyxhQUFPLENBQUM7QUFDTixZQUFJLEVBQUUsTUFBTTtBQUNaLG9CQUFZLEVBQUUsTUFBTTtBQUNwQixtQkFBVyxFQUFFLENBQ1gsTUFBTSxFQUNOLFdBQVcsQ0FDWjtPQUNGLEVBQUU7QUFDRCxZQUFJLEVBQUUsUUFBUTtBQUNkLG1CQUFXLEVBQUUsQ0FDWCxNQUFNLEVBQ04sV0FBVyxDQUNaO09BQ0YsQ0FDQSxDQUFDO0tBQ0g7QUFDRCw0QkFBd0IsRUFBRSxTQUFTLHdCQUF3QixDQUFDLE9BQU8sRUFBRSxTQUFTLEVBQUU7QUFDOUUsVUFBSSxZQUFZLFlBQUEsQ0FBQztBQUNqQixVQUFJLFlBQVksWUFBQSxDQUFDO0FBQ2pCLFVBQU0sR0FBRyxHQUFHLDBCQUFjLENBQUM7QUFDM0Isa0JBQVksR0FBRztBQUNaLGFBQUssRUFBRSxpQkFBaUIsR0FBRyxTQUFTLEdBQUcsR0FBRztPQUM1QyxDQUFDO0FBQ0YsVUFBSSxPQUFPLElBQUksU0FBUyxFQUFFO0FBQ3hCLG9CQUFZLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLEVBQUUsWUFBWSxDQUFDLENBQUM7QUFDbkQsOEJBQUssWUFBWSxFQUFFLFVBQUMsT0FBTyxFQUFLO0FBQzlCLGNBQUksR0FBRyxHQUFHLElBQUksQ0FBQztBQUNmLGNBQUksT0FBTyxFQUFFO0FBQ1gsbUJBQU8sQ0FBQyxPQUFPLENBQUMsVUFBQyxJQUFJLEVBQUs7QUFDeEIsa0JBQUksSUFBSSxDQUFDLElBQUksS0FBSyxPQUFPLEVBQUU7QUFDekIsbUJBQUcsR0FBRyxJQUFJLENBQUM7ZUFDWjthQUNGLENBQUMsQ0FBQztXQUNKO0FBQ0QsYUFBRyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQztTQUNsQixFQUFFLFVBQUMsR0FBRyxFQUFLO0FBQ1YsYUFBRyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQztTQUNqQixDQUFDLENBQUM7T0FDSixNQUFNO0FBQ0wsV0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztPQUNuQjtBQUNELGFBQU8sR0FBRyxDQUFDLE9BQU8sQ0FBQztLQUNwQjtHQUNGLENBQUMsQ0FBQzs7QUFFSCxzQkFBUSxRQUFRLENBQUMsd0JBQVksYUFBYSxFQUFFLHdCQUFZLEtBQUssRUFBRSxPQUFPLENBQUMsQ0FBQztBQUN4RSxtQkFBSyxTQUFTLENBQUMsa0NBQWtDLEVBQUUsT0FBTyxDQUFDLENBQUM7bUJBQzdDLE9BQU8iLCJmaWxlIjoic3JjL0ludGVncmF0aW9ucy9CT0UvTW9kZWxzL1VuaXRPZk1lYXN1cmUvU0RhdGEuanMiLCJzb3VyY2VSb290Ijoic3JjIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGRlY2xhcmUgZnJvbSAnZG9qby9fYmFzZS9kZWNsYXJlJztcclxuaW1wb3J0IGxhbmcgZnJvbSAnZG9qby9fYmFzZS9sYW5nJztcclxuaW1wb3J0IEJhc2UgZnJvbSAnLi9CYXNlJztcclxuaW1wb3J0IF9TRGF0YU1vZGVsQmFzZSBmcm9tICdhcmdvcy9Nb2RlbHMvX1NEYXRhTW9kZWxCYXNlJztcclxuaW1wb3J0IE1hbmFnZXIgZnJvbSAnYXJnb3MvTW9kZWxzL01hbmFnZXInO1xyXG5pbXBvcnQgTU9ERUxfVFlQRVMgZnJvbSAnYXJnb3MvTW9kZWxzL1R5cGVzJztcclxuaW1wb3J0IE1PREVMX05BTUVTIGZyb20gJy4uL05hbWVzJztcclxuaW1wb3J0IERlZmVycmVkIGZyb20gJ2Rvam8vRGVmZXJyZWQnO1xyXG5pbXBvcnQgd2hlbiBmcm9tICdkb2pvL3doZW4nO1xyXG5cclxuY29uc3QgX19jbGFzcyA9IGRlY2xhcmUoJ2NybS5JbnRlZ3JhdGlvbnMuQk9FLk1vZGVscy5Vbml0T2ZNZWFzdXJlLlNEYXRhJywgW0Jhc2UsIF9TRGF0YU1vZGVsQmFzZV0sIHtcclxuICBpZDogJ3VuaXRvZm1lYXN1cmVfc2RhdGFfbW9kZWwnLFxyXG4gIGNyZWF0ZVF1ZXJ5TW9kZWxzOiBmdW5jdGlvbiBjcmVhdGVRdWVyeU1vZGVscygpIHtcclxuICAgIHJldHVybiBbe1xyXG4gICAgICBuYW1lOiAnbGlzdCcsXHJcbiAgICAgIHF1ZXJ5T3JkZXJCeTogJ05hbWUnLFxyXG4gICAgICBxdWVyeVNlbGVjdDogW1xyXG4gICAgICAgICdOYW1lJyxcclxuICAgICAgICAnUHJvZHVjdC8qJyxcclxuICAgICAgXSxcclxuICAgIH0sIHtcclxuICAgICAgbmFtZTogJ2RldGFpbCcsXHJcbiAgICAgIHF1ZXJ5U2VsZWN0OiBbXHJcbiAgICAgICAgJ05hbWUnLFxyXG4gICAgICAgICdQcm9kdWN0LyonLFxyXG4gICAgICBdLFxyXG4gICAgfSxcclxuICAgIF07XHJcbiAgfSxcclxuICBnZXRVbml0T2ZNZWFzdXJlRnJvbUNvZGU6IGZ1bmN0aW9uIGdldFVuaXRPZk1lYXN1cmVGcm9tQ29kZSh1b21Db2RlLCBwcm9kdWN0SWQpIHtcclxuICAgIGxldCBxdWVyeU9wdGlvbnM7XHJcbiAgICBsZXQgcXVlcnlSZXN1bHRzO1xyXG4gICAgY29uc3QgZGVmID0gbmV3IERlZmVycmVkKCk7XHJcbiAgICBxdWVyeU9wdGlvbnMgPSB7XHJcbiAgICAgICB3aGVyZTogJ1Byb2R1Y3QuSWQgZXEgXCInICsgcHJvZHVjdElkICsgJ1wiJyxcclxuICAgIH07XHJcbiAgICBpZiAodW9tQ29kZSAmJiBwcm9kdWN0SWQpIHtcclxuICAgICAgcXVlcnlSZXN1bHRzID0gdGhpcy5nZXRFbnRyaWVzKG51bGwsIHF1ZXJ5T3B0aW9ucyk7XHJcbiAgICAgIHdoZW4ocXVlcnlSZXN1bHRzLCAoZW50cmllcykgPT4ge1xyXG4gICAgICAgIGxldCB1b2YgPSBudWxsO1xyXG4gICAgICAgIGlmIChlbnRyaWVzKSB7XHJcbiAgICAgICAgICBlbnRyaWVzLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgaWYgKGl0ZW0uTmFtZSA9PT0gdW9tQ29kZSkge1xyXG4gICAgICAgICAgICAgIHVvZiA9IGl0ZW07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkZWYucmVzb2x2ZSh1b2YpO1xyXG4gICAgICB9LCAoZXJyKSA9PiB7XHJcbiAgICAgICAgZGVmLnJlamVjdChlcnIpO1xyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGRlZi5yZXNvbHZlKG51bGwpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRlZi5wcm9taXNlO1xyXG4gIH0sXHJcbn0pO1xyXG5cclxuTWFuYWdlci5yZWdpc3RlcihNT0RFTF9OQU1FUy5VTklUT0ZNRUFTVVJFLCBNT0RFTF9UWVBFUy5TREFUQSwgX19jbGFzcyk7XHJcbmxhbmcuc2V0T2JqZWN0KCdpY2JvZS5Nb2RlbHMuVW5pdE9mTWVhc3VyZS5TRGF0YScsIF9fY2xhc3MpO1xyXG5leHBvcnQgZGVmYXVsdCBfX2NsYXNzO1xyXG4iXX0=
</pre>
</body>
</html>
