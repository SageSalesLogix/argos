<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">define('crm/Views/Charts/GenericBar', ['exports', 'module', 'dojo/_base/declare', 'dojo/_base/lang', 'dojo/_base/array', 'dojo/dom-geometry', 'argos/View', './_ChartMixin'], function (exports, module, _dojo_baseDeclare, _dojo_baseLang, _dojo_baseArray, _dojoDomGeometry, _argosView, _ChartMixin2) {
  function _interopRequireDefault(obj) { return obj &amp;&amp; obj.__esModule ? obj : { 'default': obj }; }

  var _declare = _interopRequireDefault(_dojo_baseDeclare);

  var _lang = _interopRequireDefault(_dojo_baseLang);

  var _array = _interopRequireDefault(_dojo_baseArray);

  var _domGeo = _interopRequireDefault(_dojoDomGeometry);

  var _View = _interopRequireDefault(_argosView);

  var _ChartMixin3 = _interopRequireDefault(_ChartMixin2);

<span id='crm-Views-Charts-GenericBar'>  /**
</span>   * @class crm.Views.Charts.GenericBar
   *
   * @extends argos.View
   * @mixins crm.Views.Charts._ChartMixin
   *
   * @requires argos.View
   *
   */
  var __class = (0, _declare['default'])('crm.Views.Charts.GenericBar', [_View['default'], _ChartMixin3['default']], {
    id: 'chart_generic_bar',
    titleText: '',
    expose: false,
    chart: null,
    barColor: '#0896e9',

    chartOptions: {
      scaleBeginAtZero: false,
      barShowStroke: false,
      legendTemplate: '&lt;ul class=&quot;&lt;%=name.toLowerCase()%&gt;-legend&quot;&gt;&lt;% for (var i=0; i&lt;datasets.length; i++){%&gt;&lt;li&gt;&lt;span style=&quot;background-color:&lt;%=datasets[i].fillColor%&gt;&quot;&gt;&lt;/span&gt;&lt;%if(datasets[i].label){%&gt;&lt;%=datasets[i].label%&gt;&lt;%}%&gt;&lt;/li&gt;&lt;%}%&gt;&lt;/ul&gt;'
    },

    formatter: function formatter(val) {
      return val;
    },

    attributeMap: {
      chartContent: {
        node: 'contentNode',
        type: 'innerHTML'
      }
    },

    createChart: function createChart(rawData) {
      this.inherited(arguments);

      this.showSearchExpression();

      var labels = [];
      var seriesData = _array['default'].map(rawData, function mapData(item) {
        labels.push(item.$descriptor);
        return Math.round(item.value);
      });

      var data = {
        labels: labels,
        datasets: [{
          label: 'Default',
          fillColor: this.barColor,
          data: seriesData
        }]
      };

      if (this.chart) {
        this.chart.destroy();
      }

      var box = _domGeo['default'].getMarginBox(this.domNode);
      this.contentNode.width = box.w;
      this.contentNode.height = box.h;

      var ctx = this.contentNode.getContext('2d');

      this.chart = new window.Chart(ctx).Bar(data, this.chartOptions); // eslint-disable-line
    }
  });

  _lang['default'].setObject('Mobile.SalesLogix.Views.Charts.GenericBar', __class);
  module.exports = __class;
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9WaWV3cy9DaGFydHMvR2VuZXJpY0Jhci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFnQkEsTUFBTSxPQUFPLEdBQUcseUJBQVEsNkJBQTZCLEVBQUUsMkNBQW1CLEVBQUU7QUFDMUUsTUFBRSxFQUFFLG1CQUFtQjtBQUN2QixhQUFTLEVBQUUsRUFBRTtBQUNiLFVBQU0sRUFBRSxLQUFLO0FBQ2IsU0FBSyxFQUFFLElBQUk7QUFDWCxZQUFRLEVBQUUsU0FBUzs7QUFFbkIsZ0JBQVksRUFBRTtBQUNaLHNCQUFnQixFQUFFLEtBQUs7QUFDdkIsbUJBQWEsRUFBRSxLQUFLO0FBQ3BCLG9CQUFjLEVBQUUsaU9BQWlPO0tBQ2xQOztBQUVELGFBQVMsRUFBRSxTQUFTLFNBQVMsQ0FBQyxHQUFHLEVBQUU7QUFDakMsYUFBTyxHQUFHLENBQUM7S0FDWjs7QUFFRCxnQkFBWSxFQUFFO0FBQ1osa0JBQVksRUFBRTtBQUNaLFlBQUksRUFBRSxhQUFhO0FBQ25CLFlBQUksRUFBRSxXQUFXO09BQ2xCO0tBQ0Y7O0FBRUQsZUFBVyxFQUFFLFNBQVMsV0FBVyxDQUFDLE9BQU8sRUFBRTtBQUN6QyxVQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxDQUFDOztBQUUxQixVQUFJLENBQUMsb0JBQW9CLEVBQUUsQ0FBQzs7QUFFNUIsVUFBTSxNQUFNLEdBQUcsRUFBRSxDQUFDO0FBQ2xCLFVBQU0sVUFBVSxHQUFHLGtCQUFNLEdBQUcsQ0FBQyxPQUFPLEVBQUUsU0FBUyxPQUFPLENBQUMsSUFBSSxFQUFFO0FBQzNELGNBQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBQzlCLGVBQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7T0FDL0IsQ0FBQyxDQUFDOztBQUVILFVBQU0sSUFBSSxHQUFHO0FBQ1gsY0FBTSxFQUFFLE1BQU07QUFDZCxnQkFBUSxFQUFFLENBQUM7QUFDVCxlQUFLLEVBQUUsU0FBUztBQUNoQixtQkFBUyxFQUFFLElBQUksQ0FBQyxRQUFRO0FBQ3hCLGNBQUksRUFBRSxVQUFVO1NBQ2pCLENBQUM7T0FDSCxDQUFDOztBQUVGLFVBQUksSUFBSSxDQUFDLEtBQUssRUFBRTtBQUNkLFlBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUFFLENBQUM7T0FDdEI7O0FBRUQsVUFBTSxHQUFHLEdBQUcsbUJBQU8sWUFBWSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUM5QyxVQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDO0FBQy9CLFVBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUM7O0FBRWhDLFVBQU0sR0FBRyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDOztBQUU5QyxVQUFJLENBQUMsS0FBSyxHQUFHLElBQUksTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztLQUNqRTtHQUNGLENBQUMsQ0FBQzs7QUFFSCxtQkFBSyxTQUFTLENBQUMsMkNBQTJDLEVBQUUsT0FBTyxDQUFDLENBQUM7bUJBQ3RELE9BQU8iLCJmaWxlIjoic3JjL1ZpZXdzL0NoYXJ0cy9HZW5lcmljQmFyLmpzIiwic291cmNlUm9vdCI6InNyYyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBkZWNsYXJlIGZyb20gJ2Rvam8vX2Jhc2UvZGVjbGFyZSc7XHJcbmltcG9ydCBsYW5nIGZyb20gJ2Rvam8vX2Jhc2UvbGFuZyc7XHJcbmltcG9ydCBhcnJheSBmcm9tICdkb2pvL19iYXNlL2FycmF5JztcclxuaW1wb3J0IGRvbUdlbyBmcm9tICdkb2pvL2RvbS1nZW9tZXRyeSc7XHJcbmltcG9ydCBWaWV3IGZyb20gJ2FyZ29zL1ZpZXcnO1xyXG5pbXBvcnQgX0NoYXJ0TWl4aW4gZnJvbSAnLi9fQ2hhcnRNaXhpbic7XHJcblxyXG4vKipcclxuICogQGNsYXNzIGNybS5WaWV3cy5DaGFydHMuR2VuZXJpY0JhclxyXG4gKlxyXG4gKiBAZXh0ZW5kcyBhcmdvcy5WaWV3XHJcbiAqIEBtaXhpbnMgY3JtLlZpZXdzLkNoYXJ0cy5fQ2hhcnRNaXhpblxyXG4gKlxyXG4gKiBAcmVxdWlyZXMgYXJnb3MuVmlld1xyXG4gKlxyXG4gKi9cclxuY29uc3QgX19jbGFzcyA9IGRlY2xhcmUoJ2NybS5WaWV3cy5DaGFydHMuR2VuZXJpY0JhcicsIFtWaWV3LCBfQ2hhcnRNaXhpbl0sIHtcclxuICBpZDogJ2NoYXJ0X2dlbmVyaWNfYmFyJyxcclxuICB0aXRsZVRleHQ6ICcnLFxyXG4gIGV4cG9zZTogZmFsc2UsXHJcbiAgY2hhcnQ6IG51bGwsXHJcbiAgYmFyQ29sb3I6ICcjMDg5NmU5JyxcclxuXHJcbiAgY2hhcnRPcHRpb25zOiB7XHJcbiAgICBzY2FsZUJlZ2luQXRaZXJvOiBmYWxzZSxcclxuICAgIGJhclNob3dTdHJva2U6IGZhbHNlLFxyXG4gICAgbGVnZW5kVGVtcGxhdGU6ICc8dWwgY2xhc3M9XCI8JT1uYW1lLnRvTG93ZXJDYXNlKCklPi1sZWdlbmRcIj48JSBmb3IgKHZhciBpPTA7IGk8ZGF0YXNldHMubGVuZ3RoOyBpKyspeyU+PGxpPjxzcGFuIHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjo8JT1kYXRhc2V0c1tpXS5maWxsQ29sb3IlPlwiPjwvc3Bhbj48JWlmKGRhdGFzZXRzW2ldLmxhYmVsKXslPjwlPWRhdGFzZXRzW2ldLmxhYmVsJT48JX0lPjwvbGk+PCV9JT48L3VsPicsXHJcbiAgfSxcclxuXHJcbiAgZm9ybWF0dGVyOiBmdW5jdGlvbiBmb3JtYXR0ZXIodmFsKSB7XHJcbiAgICByZXR1cm4gdmFsO1xyXG4gIH0sXHJcblxyXG4gIGF0dHJpYnV0ZU1hcDoge1xyXG4gICAgY2hhcnRDb250ZW50OiB7XHJcbiAgICAgIG5vZGU6ICdjb250ZW50Tm9kZScsXHJcbiAgICAgIHR5cGU6ICdpbm5lckhUTUwnLFxyXG4gICAgfSxcclxuICB9LFxyXG5cclxuICBjcmVhdGVDaGFydDogZnVuY3Rpb24gY3JlYXRlQ2hhcnQocmF3RGF0YSkge1xyXG4gICAgdGhpcy5pbmhlcml0ZWQoYXJndW1lbnRzKTtcclxuXHJcbiAgICB0aGlzLnNob3dTZWFyY2hFeHByZXNzaW9uKCk7XHJcblxyXG4gICAgY29uc3QgbGFiZWxzID0gW107XHJcbiAgICBjb25zdCBzZXJpZXNEYXRhID0gYXJyYXkubWFwKHJhd0RhdGEsIGZ1bmN0aW9uIG1hcERhdGEoaXRlbSkge1xyXG4gICAgICBsYWJlbHMucHVzaChpdGVtLiRkZXNjcmlwdG9yKTtcclxuICAgICAgcmV0dXJuIE1hdGgucm91bmQoaXRlbS52YWx1ZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCBkYXRhID0ge1xyXG4gICAgICBsYWJlbHM6IGxhYmVscyxcclxuICAgICAgZGF0YXNldHM6IFt7XHJcbiAgICAgICAgbGFiZWw6ICdEZWZhdWx0JyxcclxuICAgICAgICBmaWxsQ29sb3I6IHRoaXMuYmFyQ29sb3IsXHJcbiAgICAgICAgZGF0YTogc2VyaWVzRGF0YSxcclxuICAgICAgfV0sXHJcbiAgICB9O1xyXG5cclxuICAgIGlmICh0aGlzLmNoYXJ0KSB7XHJcbiAgICAgIHRoaXMuY2hhcnQuZGVzdHJveSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGJveCA9IGRvbUdlby5nZXRNYXJnaW5Cb3godGhpcy5kb21Ob2RlKTtcclxuICAgIHRoaXMuY29udGVudE5vZGUud2lkdGggPSBib3gudztcclxuICAgIHRoaXMuY29udGVudE5vZGUuaGVpZ2h0ID0gYm94Lmg7XHJcblxyXG4gICAgY29uc3QgY3R4ID0gdGhpcy5jb250ZW50Tm9kZS5nZXRDb250ZXh0KCcyZCcpO1xyXG5cclxuICAgIHRoaXMuY2hhcnQgPSBuZXcgd2luZG93LkNoYXJ0KGN0eCkuQmFyKGRhdGEsIHRoaXMuY2hhcnRPcHRpb25zKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxyXG4gIH0sXHJcbn0pO1xyXG5cclxubGFuZy5zZXRPYmplY3QoJ01vYmlsZS5TYWxlc0xvZ2l4LlZpZXdzLkNoYXJ0cy5HZW5lcmljQmFyJywgX19jbGFzcyk7XHJcbmV4cG9ydCBkZWZhdWx0IF9fY2xhc3M7XHJcbiJdfQ==
</pre>
</body>
</html>
