<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">define('argos/Application', ['exports', 'module', 'dojo/json', 'dojo/_base/array', 'dojo/_base/connect', 'dojo/aspect', 'dojo/_base/declare', 'dojo/_base/lang', 'dojo/_base/window', 'dojo/hash', 'dojo/has', 'dojo/dom-construct', 'dojo/promise/all', 'snap', './ReUI/main', 'dojo/ready', './Utility', './Models/Manager', './Model', './Intent', './Intents/update-connection', './Dialogs/Modal', './Dialogs/BusyIndicator', 'dojo/Deferred', './ErrorManager', './I18n', 'dojo/sniff'], function (exports, module, _dojoJson, _dojo_baseArray, _dojo_baseConnect, _dojoAspect, _dojo_baseDeclare, _dojo_baseLang, _dojo_baseWindow, _dojoHash, _dojoHas, _dojoDomConstruct, _dojoPromiseAll, _snap, _ReUIMain, _dojoReady, _Utility, _ModelsManager, _Model, _Intent, _IntentsUpdateConnection, _DialogsModal, _DialogsBusyIndicator, _dojoDeferred, _ErrorManager, _I18n, _dojoSniff) {
  function _interopRequireDefault(obj) { return obj &amp;&amp; obj.__esModule ? obj : { 'default': obj }; }

  /* Copyright (c) 2010, Sage Software, Inc. All rights reserved.
   *
   * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *     http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */

  var _json = _interopRequireDefault(_dojoJson);

  var _array = _interopRequireDefault(_dojo_baseArray);

  var _connect = _interopRequireDefault(_dojo_baseConnect);

  var _aspect = _interopRequireDefault(_dojoAspect);

  var _declare = _interopRequireDefault(_dojo_baseDeclare);

  var _lang = _interopRequireDefault(_dojo_baseLang);

  var _win = _interopRequireDefault(_dojo_baseWindow);

  var _hash = _interopRequireDefault(_dojoHash);

  var _has = _interopRequireDefault(_dojoHas);

  var _domConstruct = _interopRequireDefault(_dojoDomConstruct);

  var _all = _interopRequireDefault(_dojoPromiseAll);

  var _snap2 = _interopRequireDefault(_snap);

  var _ReUI = _interopRequireDefault(_ReUIMain);

  var _ready = _interopRequireDefault(_dojoReady);

  var _util = _interopRequireDefault(_Utility);

  var _ModelManager = _interopRequireDefault(_ModelsManager);

  var _Modal = _interopRequireDefault(_DialogsModal);

  var _BusyIndicator = _interopRequireDefault(_DialogsBusyIndicator);

  var _Deferred = _interopRequireDefault(_dojoDeferred);

  var _ErrorManager2 = _interopRequireDefault(_ErrorManager);

  var _getResource = _interopRequireDefault(_I18n);

  var resource = (0, _getResource['default'])('application');

  _has['default'].add('html5-file-api', function hasFileApi(global) {
    if ((0, _has['default'])('ie')) {
      return false;
    }

    if (global.File &amp;&amp; global.FileReader &amp;&amp; global.FileList &amp;&amp; global.Blob) {
      return true;
    }
    return false;
  });

  _lang['default'].extend(Function, {
    // TODO: Deprecate this in favor of the standard &quot;bind&quot;
    bindDelegate: function bindDelegate(scope) {
      var self = this;

      if (arguments.length === 1) {
        return function bound() {
          return self.apply(scope || this, arguments);
        };
      }

      var optional = Array.prototype.slice.call(arguments, 1);
      return function boundWArgs() {
        var called = Array.prototype.slice.call(arguments, 0);
        return self.apply(scope || this, called.concat(optional));
      };
    }
  });

  // Patching backwards compatablity so that customizations will not break and where moment
  // was required.
  define('moment', [], function getMoment() {
    // eslint-disable-line
    return window.moment;
  });

  function applyLocalizationTo(object, localization) {
    if (!object) {
      return;
    }

    var target = object.prototype || object;
    for (var key in localization) {
      if (_lang['default'].isObject(localization[key])) {
        applyLocalizationTo(target[key], localization[key]);
      } else {
        target[key] = localization[key];
      }
    }
  }

  function localize(name, localization) {
    var target = _lang['default'].getObject(name);
    if (target &amp;&amp; target.prototype) {
      target = target.prototype;
    }

    if (target) {
      applyLocalizationTo(target, localization);
    }
  }

  function mergeConfiguration(baseConfiguration, moduleConfiguration) {
    if (baseConfiguration) {
      if (baseConfiguration.modules &amp;&amp; moduleConfiguration.modules) {
        baseConfiguration.modules = baseConfiguration.modules.concat(moduleConfiguration.modules);
      }

      if (baseConfiguration.connections &amp;&amp; moduleConfiguration.connections) {
        baseConfiguration.connections = _lang['default'].mixin(baseConfiguration.connections, moduleConfiguration.connections);
      }
    }

    return baseConfiguration;
  }

  _lang['default'].mixin(_win['default'].global, {
    'localize': localize,
    'mergeConfiguration': mergeConfiguration
  });

<span id='argos-Application'>  /**
</span>   * @class argos.Application
   * Application is a nexus that provides many routing and global application services that may be used
   * from anywhere within the app.
   *
   * It provides a shortcut alias to `window.App` (`App`) with the most common usage being `App.getView(id)`.
   *
   * @alternateClassName App
   */
  var __class = (0, _declare['default'])('argos.Application', null, {
<span id='argos-Application-property-enableConcurrencyCheck'>    /**
</span>     * @property enableConcurrencyCheck {Boolean} Option to skip concurrency checks to avoid precondition/412 errors.
     */
    enableConcurrencyCheck: false,

<span id='argos-Application-property-ReUI'>    /**
</span>     * Instance of a ReUI
     */
    ReUI: _ReUI['default'],

<span id='argos-Application-property-viewShowOptions'>    /**
</span>     * @property viewShowOptions {Array} Array with one configuration object that gets pushed before showing a view.
     * Allows passing in options via routing. Value gets removed once the view is shown.
     */
    viewShowOptions: null,

<span id='argos-Application-property-snapper'>    /**
</span>     * Instance of a Snap.js object (https://github.com/jakiestfu/Snap.js/)
     */
    snapper: null,

<span id='argos-Application-property-currentOrientation'>    /**
</span>     * @property {String}
     * Current orientation of the application. Can be landscape or portrait.
     */
    currentOrientation: 'portrait',

<span id='argos-Application-property-_connects'>    /**
</span>     * Array of all connections for App
     * @property {Object[]}
     * @private
     */
    _connects: null,

<span id='argos-Application-property-_signals'>    /**
</span>     * Array of handles for App
     * @property {Object[]}
     * @private
     */
    _signals: null,

<span id='argos-Application-property-_subscribes'>    /**
</span>     * @private
     * Array of all subscriptions for App
     */
    _subscribes: null,

<span id='argos-Application-property-_appStatePromises'>    /**
</span>     * Array of promises to load app state
     * @property {Array}
     * @private
     */
    _appStatePromises: null,

<span id='argos-Application-property-_started'>    /**
</span>     * Signifies the App has been initialized
     * @property {Boolean}
     * @private
     */
    _started: false,

    _rootDomNode: null,
    customizations: null,
    services: null, // TODO: Remove
    _connections: null,
    modules: null,
    views: null,
    hash: _hash['default'],
    onLine: true,
    _currentPage: null,
<span id='argos-Application-property-bars'>    /**
</span>     * Toolbar instances by key name
     * @property {Object}
     */
    bars: null,
    enableCaching: false,
<span id='argos-Application-property-defaultService'>    /**
</span>     * The default Sage.SData.Client.SDataService instance
     * @property {Object}
     */
    defaultService: null,
    resizeTimer: null,

<span id='argos-Application-property-redirectHash'>    /**
</span>     * The hash to redirect to after login.
     * @property {String}
     */
    redirectHash: '',
<span id='argos-Application-property-maxUploadFileSize'>    /**
</span>     * Signifies the maximum file size that can be uploaded in bytes
     * @property {int}
     */
    maxUploadFileSize: 4000000,

<span id='argos-Application-property-PING_TIMEOUT'>    /**
</span>     * Timeout for the connection check.
     */
    PING_TIMEOUT: 3000,

<span id='argos-Application-property-PING_DEBOUNCE'>    /**
</span>     * Ping debounce time.
     */
    PING_DEBOUNCE: 1000,

<span id='argos-Application-property-PING_RETRY'>    /**
</span>     * Number of times to attempt to ping.
     */
    PING_RETRY: 5,

    /*
     * Static resource to request on the ping. Should be a small file.
     */
    PING_RESOURCE: 'ping.gif',
<span id='argos-Application-method-ModelManager'>    /**
</span>     * All options are mixed into App itself
     * @param {Object} options
     */
    ModelManager: null,
    constructor: function constructor(options) {
      var _this = this;

      this._connects = [];
      this._appStatePromises = [];
      this._signals = [];
      this._subscribes = [];

      this.customizations = {};
      this.services = {}; // TODO: Remove
      this._connections = {};
      this.modules = [];
      this.views = {};
      this.bars = {};

      this.context = {};
      this.viewShowOptions = [];
      var actions = (0, _Intent.intent)();
      this.state$ = (0, _Model.model)(actions);
      this.state$.subscribe(this._onStateChange.bind(this), this._onStateError.bind(this));

      this.ping = _util['default'].debounce(function () {
        var ping$ = Rx.Observable.interval(_this.PING_TIMEOUT).flatMap(function () {
          return Rx.Observable.fromPromise(_this._ping()).flatMap(function (online) {
            if (online) {
              return Rx.Observable.just(online);
            }

            return Rx.Observable['throw'](new Error());
          });
        }).retry(_this.PING_RETRY).take(1);

        ping$.subscribe(function onNext() {
          (0, _IntentsUpdateConnection.updateConnectionState)(true);
        }, function onError() {
          (0, _IntentsUpdateConnection.updateConnectionState)(false);
        });
      }, this.PING_DEBOUNCE);

      this.ModelManager = _ModelManager['default'];
      _lang['default'].mixin(this, options);
    },
<span id='argos-Application-method-destroy'>    /**
</span>     * Loops through and disconnections connections and unsubscribes subscriptions.
     * Also calls {@link #uninitialize uninitialize}.
     */
    destroy: function destroy() {
      _array['default'].forEach(this._connects, function (handle) {
        _connect['default'].disconnect(handle);
      });

      _array['default'].forEach(this._subscribes, function (handle) {
        _connect['default'].unsubscribe(handle);
      });

      _array['default'].forEach(this._signals, function (signal) {
        signal.remove();
      });

      this.uninitialize();
    },
<span id='argos-Application-method-uninitialize'>    /**
</span>     * Shelled function that is called from {@link #destroy destroy}, may be used to release any further handles.
     */
    uninitialize: function uninitialize() {},
<span id='argos-Application-method-initReUI'>    /**
</span>     * Cleans up URL to prevent ReUI url handling and then invokes ReUI.
     */
    initReUI: function initReUI() {
      // prevent ReUI from attempting to load the URLs view as we handle that ourselves.
      // todo: add support for handling the URL?
      var h = this.hash();
      if (h !== '') {
        this.redirectHash = h;
      }

      history.replaceState(null, '', '#');
      _ReUI['default'].init();
    },
    _onOffline: function _onOffline() {
      this.ping();
    },
    _onOnline: function _onOnline() {
      this.ping();
    },
    _onStateChange: function _onStateChange(val) {
      this._updateConnectionState(val.connectionState);
      this.onStateChange(val);
    },
    _onStateError: function _onStateError(error) {
      this.onStateError(error);
    },
    onStateChange: function onStateChange(val) {}, // eslint-disable-line
    onStateError: function onStateError(error) {}, // eslint-disable-line
    _updateConnectionState: function _updateConnectionState(online) {
      // Don't fire the onConnectionChange if we are in the same state.
      if (this.onLine === online) {
        return;
      }

      this.onLine = online;
      this.onConnectionChange(online);
    },
    forceOnline: function forceOnline() {
      (0, _IntentsUpdateConnection.updateConnectionState)(true);
    },
    forceOffline: function forceOffline() {
      (0, _IntentsUpdateConnection.updateConnectionState)(false);
    },
    onConnectionChange: function onConnectionChange() /*online*/{},
<span id='argos-Application-method-initConnects'>    /**
</span>     * Establishes various connections to events.
     */
    initConnects: function initConnects() {
      var _this2 = this;

      this._connects.push(_connect['default'].connect(window, 'resize', this, this.onResize));
      this._connects.push(_connect['default'].connect(_win['default'].body(), 'beforetransition', this, this._onBeforeTransition));
      this._connects.push(_connect['default'].connect(_win['default'].body(), 'aftertransition', this, this._onAfterTransition));
      this._connects.push(_connect['default'].connect(_win['default'].body(), 'show', this, this._onActivate));
      (0, _ready['default'])(function () {
        window.addEventListener('online', _this2._onOnline.bind(_this2));
        window.addEventListener('offline', _this2._onOffline.bind(_this2));
      });

      this.ping();
    },

<span id='argos-Application-method-_ping'>    /**
</span>     * Returns a promise. The results are true of the resource came back
     * before the PING_TIMEOUT. The promise is rejected if there is timeout or
     * the response is not a 200 or 304.
     */
    _ping: function _ping() {
      var _this3 = this;

      return new Promise(function (resolve) {
        var xhr = new XMLHttpRequest();
        xhr.ontimeout = function () {
          return resolve(false);
        };
        xhr.onerror = function () {
          return resolve(false);
        };
        xhr.onload = function () {
          var DONE = 4;
          var HTTP_OK = 200;
          var HTTP_NOT_MODIFIED = 304;

          if (xhr.readyState === DONE) {
            if (xhr.status === HTTP_OK || xhr.status === HTTP_NOT_MODIFIED) {
              resolve(true);
            } else {
              resolve(false);
            }
          }
        };
        xhr.open('GET', _this3.PING_RESOURCE + '?cache=' + Math.random());
        xhr.timeout = _this3.PING_TIMEOUT;
        xhr.send();
      });
    },

<span id='argos-Application-method-initSignals'>    /**
</span>     * Establishes signals/handles from dojo's newer APIs
     */
    initSignals: function initSignals() {
      var _this4 = this;

      this._signals.push(_aspect['default'].after(window.ReUI, 'setOrientation', function (result, args) {
        if (args &amp;&amp; args.length &gt; 0) {
          var value = args[0];
          _this4.currentOrientation = value;
          _this4.onSetOrientation(value);
          _connect['default'].publish('/app/setOrientation', [value]);
        }
      }));

      return this;
    },
<span id='argos-Application-method-initAppState'>    /**
</span>     * Executes the chain of promises registered with registerAppStatePromise.
     * When all promises are done, a new promise is returned to the caller, and all
     * registered promises are flushed.
     * Each app state can be processed all at once or in a specfic seqence.
     * Example:
     * We can register  App state seqeunces as the following, where each sequence
     * is proccessed in a desending order form 0 to n. The first two in this example are defeulted to a
     * sequence of zero (0) and are procced first in which after the next sequence (1) is proccessed
     * and once all of its items are finshed then the last sequence 2 will start and process all of its items.
     *
     * If two seqences have the same number then thay will get combinded as if they where registerd together.
     * Aso not all items whith in a process are processed and ansync of each other and may not finish at the same time.
     *
     * To make two items process one after the other simpley put them in to diffrent sequences.
     *
     *   this.registerAppStatePromise(() =&gt; {some functions that returns a promise});
     *   this.registerAppStatePromise(() =&gt; {some functions that returns a promise});
     *
     *   this.registerAppStatePromise({
     *     seq: 1,
     *     description: 'Sequence 1',
     *     items: [{
     *       name: 'itemA',
     *       description: 'item A',
     *       fn: () =&gt; { some functions that returns a promise },
     *       }, {
     *         name: 'itemb',
     *         description: 'Item B',
     *         fn: () =&gt; {some functions that returns a promise},
     *       }],
     *   });
     *
     *   this.registerAppStatePromise({
     *     seq: 2,
     *     description: 'Sequence 2',
     *     items: [{
     *       name: 'item C',
     *       description: 'item C',
     *       fn: () =&gt; { some functions that returns a promise },
     *       },
     *    });
     *
     * There are there App state seqences re
     *
     * @return {Promise}
     */
    initAppState: function initAppState() {
      var _this5 = this;

      var def = new _Deferred['default']();
      var sequences = [];
      this._appStatePromises.forEach(function (item) {
        var seq = undefined;
        if (typeof item === 'function') {
          seq = sequences.find(function (x) {
            return x.seq === 0;
          });
          if (!seq) {
            seq = {
              seq: 0,
              description: resource.loadingApplicationStateText,
              items: []
            };
            sequences.push(seq);
          }
          seq.items.push({
            name: 'default',
            description: '',
            fn: item
          });
        } else {
          if (item.seq &amp;&amp; item.items) {
            seq = sequences.find(function (x) {
              return x.seq === (item.seq ? item.seq : 0);
            });
            if (seq) {
              item.items.forEach(function (_item) {
                seq.items.push(_item);
              });
            } else {
              sequences.push(item);
            }
          }
        }
      });
      // Sort the sequence ascending so we can processes them in the right order.
      sequences.sort(function (a, b) {
        if (a.seq &gt; b.seq) {
          return 1;
        }

        if (a.seq &lt; b.seq) {
          return -1;
        }

        return 0;
      });

      this._initAppStateSequence(0, sequences).then(function (results) {
        _this5.clearAppStatePromises();
        def.resolve(results);
      }, function (err) {
        _this5.clearAppStatePromises();
        def.reject(err);
      });
      return def.promise;
    },
<span id='argos-Application-method-_initAppStateSequence'>    /**
</span>     * Process a app state sequence and start the next sequnce when done.
     * @param {index) the index of the sequence to start
     * @param {sequences) an array of sequences
     */
    _initAppStateSequence: function _initAppStateSequnce(index, sequences) {
      var _this6 = this;

      var def = new _Deferred['default']();
      var seq = sequences[index];

      if (seq) {
        (function () {
          // We need to send an observable and get ride of the ui element.
          var indicator = new _BusyIndicator['default']({
            id: 'busyIndicator__appState_' + seq.seq,
            label: resource.initializingText + ' ' + seq.description
          });
          _this6.modal.disableClose = true;
          _this6.modal.showToolbar = false;
          _this6.modal.add(indicator);
          indicator.start();
          var promises = _array['default'].map(seq.items, function (item) {
            return item.fn();
          });
          var odef = def;
          (0, _all['default'])(promises).then(function () {
            indicator.complete(true);
            _this6.modal.disableClose = false;
            _this6.modal.hide();
            _this6._initAppStateSequence(index + 1, sequences).then(function (results) {
              odef.resolve(results);
            }, function (err) {
              indicator.complete(true);
              _this6.modal.disableClose = false;
              _this6.modal.hide();
              odef.reject(err);
            });
          }, function (err) {
            _ErrorManager2['default'].addSimpleError(indicator.label, err);
            indicator.complete(true);
            _this6.modal.disableClose = false;
            _this6.modal.hide();
            def.reject(err);
          });
        })();
      } else {
        def.resolve();
      }
      return def.promise;
    },
<span id='argos-Application-method-registerAppStatePromise'>    /**
</span>     * Registers a promise that will resolve when initAppState is invoked.
     * @param {Promise|Function} promise A promise or a function that returns a promise
     */
    registerAppStatePromise: function registerAppStatePromise(promise) {
      this._appStatePromises.push(promise);
      return this;
    },
    clearAppStatePromises: function clearAppStatePromises() {
      this._appStatePromises = [];
    },
    onSetOrientation: function onSetOrientation() /*value*/{},
<span id='argos-Application-method-initServices'>    /**
</span>     * Loops through connections and calls {@link #registerService registerService} on each.
     */
    initServices: function initServices() {
      for (var _name in this.connections) {
        if (this.connections.hasOwnProperty(_name)) {
          this.registerService(_name, this.connections[_name]);
        }
      }
    },
<span id='argos-Application-method-initModules'>    /**
</span>     * Loops through modules and calls their `init()` function.
     */
    initModules: function initModules() {
      for (var i = 0; i &lt; this.modules.length; i++) {
        this.modules[i].init(this);
      }
    },
<span id='argos-Application-method-initToolbars'>    /**
</span>     * Loops through (tool)bars and calls their `init()` function.
     */
    initToolbars: function initToolbars() {
      for (var n in this.bars) {
        if (this.bars.hasOwnProperty(n)) {
          this.bars[n].init(); // todo: change to startup
        }
      }
    },
<span id='argos-Application-method-activate'>    /**
</span>     * Sets the global variable `App` to this instance.
     */
    activate: function activate() {
      window.App = this;
    },
<span id='argos-Application-method-init'>    /**
</span>     * Initializes this application as well as the toolbar and all currently registered views.
     */
    init: function init() {
      this.initPreferences();
      this.initConnects();
      this.initSignals();
      this.initServices(); // TODO: Remove
      this._startupConnections();
      this.initModules();
      this.initToolbars();
      this.initReUI();
      this.initModal();
    },
    initPreferences: function initPreferences() {
      this._loadPreferences();
    },
    initModal: function initModal() {
      this.modal = new _Modal['default']();
      this.modal.place(document.body).hide();
    },
<span id='argos-Application-method-supportsTouch'>    /**
</span>     * Check if the browser supports touch events.
     * @return {Boolean} true if the current browser supports touch events, false otherwise.
     */
    supportsTouch: function supportsTouch() {
      // Taken from https://github.com/Modernizr/Modernizr/ (MIT Licensed)
      return 'ontouchstart' in window || window.DocumentTouch &amp;&amp; document instanceof window.DocumentTouch;
    },
    persistPreferences: function persistPreferences() {
      try {
        if (window.localStorage) {
          window.localStorage.setItem('preferences', _json['default'].stringify(this.preferences));
        }
      } catch (e) {
        console.error(e); // eslint-disable-line
      }
    },
    _loadPreferences: function _loadPreferences() {
      try {
        if (window.localStorage) {
          this.preferences = _json['default'].parse(window.localStorage.getItem('preferences'));
        }
      } catch (e) {
        console.error(e); // eslint-disable-line
      }
    },
<span id='argos-Application-method-_startupConnections'>    /**
</span>     * Establishes various connections to events.
     */
    _startupConnections: function _startupConnections() {
      for (var _name2 in this.connections) {
        if (this.connections.hasOwnProperty(_name2)) {
          if (this.connections.hasOwnProperty(_name2)) {
            this.registerConnection(_name2, this.connections[_name2]);
          }
        }
      }

      /* todo: should we be mixing this in? */
      delete this.connections;
    },
<span id='argos-Application-method-run'>    /**
</span>     * Sets `_started` to true.
     */
    run: function run() {
      this._started = true;
    },
<span id='argos-Application-method-isOnline'>    /**
</span>     * Returns the `window.navigator.onLine` property for detecting if an internet connection is available.
     */
    isOnline: function isOnline() {
      return this.onLine;
    },
<span id='argos-Application-method-isOnFirstView'>    /**
</span>     * Returns true/false if the current view is the first/initial view.
     * This is useful for disabling the back button (so you don't hit the login page).
     * @returns {boolean}
     */
    isOnFirstView: function isOnFirstView() {},

<span id='argos-Application-method-registerService'>    /**
</span>     * Optional creates, then registers an Sage.SData.Client.SDataService and adds the result to `App.services`.
     * @param {String} name Unique identifier for the service.
     * @param {Object} service May be a SDataService instance or constructor parameters to create a new SDataService instance.
     * @param {Object} options Optional settings for the registered service.
     */
    registerService: function registerService(name, service) {
      var options = arguments.length &lt;= 2 || arguments[2] === undefined ? {} : arguments[2];

      var instance = service instanceof Sage.SData.Client.SDataService ? service : new Sage.SData.Client.SDataService(service);

      this.services[name] = instance;

      instance.on('requesttimeout', this.onRequestTimeout, this);

      if (options.isDefault || service.isDefault || !this.defaultService) {
        this.defaultService = instance;
      }

      return this;
    },
<span id='argos-Application-method-registerConnection'>    /**
</span>     * Optional creates, then registers an Sage.SData.Client.SDataService and adds the result to `App.services`.
     * @param {String} name Unique identifier for the service.
     * @param {Object} definition May be a SDataService instance or constructor parameters to create a new SDataService instance.
     * @param {Object} options Optional settings for the registered service.
     */
    registerConnection: function registerConnection(name, definition) {
      var options = arguments.length &lt;= 2 || arguments[2] === undefined ? {} : arguments[2];

      var instance = definition instanceof Sage.SData.Client.SDataService ? definition : new Sage.SData.Client.SDataService(definition);

      this._connections[name] = instance;

      instance.on('requesttimeout', this.onRequestTimeout, this);

      if (options.isDefault || definition.isDefault || !this._connections['default']) {
        this._connections['default'] = instance;
      }

      return this;
    },
    onRequestTimeout: function _onTimeout() {
      this.ping();
    },
<span id='argos-Application-method-hasService'>    /**
</span>     * Determines the the specified service name is found in the Apps service object.
     * @param {String} name Name of the SDataService to detect
     */
    hasService: function hasService(name) {
      return !!this.services[name];
    },
    _createViewContainers: function _createViewContainers() {
      var node = document.getElementById('viewContainer');

      if (node) {
        this._rootDomNode = node;
        return;
      }

      if (this._rootDomNode === null || typeof this._rootDomNode === 'undefined') {
        this._rootDomNode = _domConstruct['default'].create('div', {
          'id': 'viewContainer',
          'class': 'viewContainer'
        }, _win['default'].body());

        var drawers = _domConstruct['default'].create('div', {
          'class': 'drawers absolute'
        }, _win['default'].body());

        _domConstruct['default'].create('div', {
          'class': 'overthrow left-drawer absolute'
        }, drawers);

        _domConstruct['default'].create('div', {
          'class': 'overthrow right-drawer absolute'
        }, drawers);
      }
    },
<span id='argos-Application-method-registerView'>    /**
</span>     * Registers a view with the application and renders it to HTML.
     * If the application has already been initialized, the view is immediately initialized as well.
     * @param {View} view A view instance to be registered.
     * @param {domNode} domNode Optional. A DOM node to place the view in.
     */
    registerView: function registerView(view, domNode) {
      this.views[view.id] = view;

      if (!domNode) {
        this._createViewContainers();
      }

      view._placeAt = domNode || this._rootDomNode;

      this.onRegistered(view);

      return this;
    },
<span id='argos-Application-method-registerToolbar'>    /**
</span>     * Registers a toolbar with the application and renders it to HTML.
     * If the application has already been initialized, the toolbar is immediately initialized as well.
     * @param {String} name Unique name of the toolbar
     * @param {Toolbar} tbar Toolbar instance to register
     * @param {domNode} domNode Optional. A DOM node to place the view in.
     */
    registerToolbar: function registerToolbar(n, t, domNode) {
      var name = n;
      var tbar = t;

      if (typeof name === 'object') {
        tbar = name;
        name = tbar.name;
      }

      this.bars[name] = tbar;

      if (this._started) {
        tbar.init();
      }

      if (!domNode) {
        this._createViewContainers();
      }

      tbar.placeAt(domNode || this._rootDomNode, 'last');

      return this;
    },
<span id='argos-Application-method-getViews'>    /**
</span>     * Returns all the registered views.
     * @return {View[]} An array containing the currently registered views.
     */
    getViews: function getViews() {
      var results = [];

      for (var view in this.views) {
        if (this.views.hasOwnProperty(view)) {
          results.push(this.views[view]);
        }
      }

      return results;
    },
<span id='argos-Application-method-isViewActive'>    /**
</span>     * Checks to see if the passed view instance is the currently active one by comparing it to {@link #getPrimaryActiveView primaryActiveView}.
     * @param {View} view
     * @return {Boolean} True if the passed view is the same as the active view.
     */
    isViewActive: function isViewActive(view) {
      // todo: add check for multiple active views.
      return this.getPrimaryActiveView() === view;
    },
<span id='argos-Application-method-getPrimaryActiveView'>    /**
</span>     * Talks to ReUI to get the current page or dialog name and then returns the result of {@link #getView getView(name)}.
     * @return {View} Returns the active view instance, if no view is active returns null.
     */
    getPrimaryActiveView: function getPrimaryActiveView() {
      var el = _ReUI['default'].getCurrentPage() || _ReUI['default'].getCurrentDialog();
      if (el) {
        return this.getView(el);
      }
    },
<span id='argos-Application-method-hasView'>    /**
</span>     * Determines if any registered view has been registered with the provided key.
     * @param {String} key Unique id of the view.
     * @return {Boolean} True if there is a registered view name matching the key.
     */
    hasView: function hasView(key) {
      return !!this._internalGetView({
        key: key,
        init: false
      });
    },
<span id='argos-Application-method-getView'>    /**
</span>     * Returns the registered view instance with the associated key.
     * @param {String/Object} key The id of the view to return, if object then `key.id` is used.
     * @return {View} view The requested view.
     */
    getView: function getView(key) {
      return this._internalGetView({
        key: key,
        init: true
      });
    },
    _internalGetView: function _internalGetView(options) {
      var key = options &amp;&amp; options.key;
      var init = options &amp;&amp; options.init;

      if (key) {
        var view = undefined;
        if (typeof key === 'string') {
          view = this.views[key];
        } else if (typeof key.id === 'string') {
          view = this.views[key.id];
        }

        if (init &amp;&amp; view &amp;&amp; !view._started) {
          view.init(this.state$);
          view.placeAt(view._placeAt, 'first');
          view._started = true;
          view._placeAt = null;
        }

        return view;
      }

      return null;
    },
<span id='argos-Application-method-getViewSecurity'>    /**
</span>     * Returns the defined security for a specific view
     * @param {String} key Id of the registered view to query.
     * @param access
     */
    getViewSecurity: function getViewSecurity(key, access) {
      var view = this._internalGetView({
        key: key,
        init: false
      });
      return view &amp;&amp; view.getSecurity(access);
    },
<span id='argos-Application-method-getService'>    /**
</span>     * Returns the registered SDataService instance by name, or returns the default service.
     * @param {String/Boolean} name If string service is looked up by name. If false, default service is returned.
     * @return {Object} The registered Sage.SData.Client.SDataService instance.
     */
    getService: function getService(name) {
      if (typeof name === 'string' &amp;&amp; this.services[name]) {
        return this.services[name];
      }

      return this.defaultService;
    },
<span id='argos-Application-method-hasConnection'>    /**
</span>     * Determines the the specified service name is found in the Apps service object.
     * @param {String} name Name of the SDataService to detect
     */
    hasConnection: function hasConnection(name) {
      return !!this._connections[name];
    },
    getConnection: function getConnection(name) {
      if (this._connections[name]) {
        return this._connections[name];
      }

      return this._connections['default'];
    },
<span id='argos-Application-method-setPrimaryTitle'>    /**
</span>     * Sets the applications current title.
     * @param {String} title The new title.
     */
    setPrimaryTitle: function setPrimaryTitle(title) {
      for (var n in this.bars) {
        if (this.bars.hasOwnProperty(n)) {
          if (this.bars[n].managed) {
            this.bars[n].set('title', title);
          }
        }
      }

      return this;
    },
<span id='argos-Application-method-onResize'>    /**
</span>     * Resize handle, publishes the global event `/app/resize` which views may subscribe to.
     */
    onResize: function onResize() {
      if (this.resizeTimer) {
        clearTimeout(this.resizeTimer);
      }

      this.resizeTimer = setTimeout(function () {
        _connect['default'].publish('/app/resize', []);
      }, 100);
    },
    onRegistered: function onRegistered() /*view*/{},
    onBeforeViewTransitionAway: function onBeforeViewTransitionAway() /*view*/{},
    onBeforeViewTransitionTo: function onBeforeViewTransitionTo() /*view*/{},
    onViewTransitionAway: function onViewTransitionAway() /*view*/{},
    onViewTransitionTo: function onViewTransitionTo() /*view*/{},
    onViewActivate: function onViewActivate() /*view, tag, data*/{},
    _onBeforeTransition: function _onBeforeTransition(evt) {
      var view = this.getView(evt.target);
      if (view) {
        if (evt.out) {
          this._beforeViewTransitionAway(view);
        } else {
          this._beforeViewTransitionTo(view);
        }
      }
    },
    _onAfterTransition: function _onAfterTransition(evt) {
      var view = this.getView(evt.target);
      if (view) {
        if (evt.out) {
          this._viewTransitionAway(view);
        } else {
          this._viewTransitionTo(view);
        }
      }
    },
    _onActivate: function _onActivate(evt) {
      var view = this.getView(evt.target);
      if (view) {
        this._viewActivate(view, evt.tag, evt.data);
      }
    },
    _beforeViewTransitionAway: function _beforeViewTransitionAway(view) {
      this.onBeforeViewTransitionAway(view);

      view.beforeTransitionAway();
    },
    _beforeViewTransitionTo: function _beforeViewTransitionTo(view) {
      this.onBeforeViewTransitionTo(view);

      for (var n in this.bars) {
        if (this.bars[n].managed) {
          this.bars[n].clear();
        }
      }

      view.beforeTransitionTo();
    },
    _viewTransitionAway: function _viewTransitionAway(view) {
      this.onViewTransitionAway(view);

      view.transitionAway();
    },
    _viewTransitionTo: function _viewTransitionTo(view) {
      this.onViewTransitionTo(view);

      var tools = view.options &amp;&amp; view.options.tools || view.getTools() || {};

      for (var n in this.bars) {
        if (this.bars[n].managed) {
          this.bars[n].showTools(tools[n]);
        }
      }

      view.transitionTo();
    },
    _viewActivate: function _viewActivate(view, tag, data) {
      this.onViewActivate(view);

      view.activate(tag, data);
    },
<span id='argos-Application-method-filterNavigationContext'>    /**
</span>     * Searches ReUI.context.history by passing a predicate function that should return true if a match is found, false otherwise.
     * This is similar to queryNavigationContext, however, this function will return an array of found items instead of a single item.
     * @param {Function} predicate
     * @param {Object} scope
     * @return {Array} context history filtered out by the predicate.
     */
    filterNavigationContext: function filterNavigationContext(predicate, scope) {
      var list = _ReUI['default'].context.history || [];
      var filtered = _array['default'].filter(list, (function filter(item) {
        return predicate.call(scope || this, item.data);
      }).bind(this));

      return _array['default'].map(filtered, function map(item) {
        return item.data;
      });
    },
<span id='argos-Application-method-queryNavigationContext'>    /**
</span>     * Searches ReUI.context.history by passing a predicate function that should return true
     * when a match is found.
     * @param {Function} predicate Function that is called in the provided scope with the current history iteration. It should return true if the history item is the desired context.
     * @param {Number} depth
     * @param {Object} scope
     * @return {Object/Boolean} context History data context if found, false if not.
     */
    queryNavigationContext: function queryNavigationContext(predicate, d, s) {
      var scope = s;
      var depth = d;

      if (typeof depth !== 'number') {
        scope = depth;
        depth = 0;
      }

      var list = _ReUI['default'].context.history || [];

      depth = depth || 0;

      for (var i = list.length - 2, j = 0; i &gt;= 0 &amp;&amp; (depth &lt;= 0 || j &lt; depth); i--, j++) {
        if (predicate.call(scope || this, list[i].data)) {
          return list[i].data;
        }
      }

      return false;
    },
<span id='argos-Application-method-isNavigationFromResourceKind'>    /**
</span>     * Shortcut method to {@link #queryNavigationContext queryNavigationContext} that matches the specified resourceKind provided
     * @param {String/String[]} kind The resourceKind(s) the history item must match
     * @param {Function} predicate Optional. If provided it will be called on matches so you may do an secondary check of the item - returning true for good items.
     * @param {Object} scope Scope the predicate should be called in.
     * @return {Object} context History data context if found, false if not.
     */
    isNavigationFromResourceKind: function isNavigationFromResourceKind(kind, predicate, scope) {
      var lookup = {};
      if (_lang['default'].isArray(kind)) {
        _array['default'].forEach(kind, function forEach(item) {
          this[item] = true;
        }, lookup);
      } else {
        lookup[kind] = true;
      }

      return this.queryNavigationContext(function queryNavigationContext(o) {
        var context = o.options &amp;&amp; o.options.source || o;
        var resourceKind = context &amp;&amp; context.resourceKind;

        // if a predicate is defined, both resourceKind AND predicate must match.
        if (lookup[resourceKind]) {
          if (predicate) {
            if (predicate.call(scope || this, o, context)) {
              return o;
            }
          } else {
            return o;
          }
        }
      });
    },
<span id='argos-Application-method-registerCustomization'>    /**
</span>     * Registers a customization to a target path.
     *
     * A Customization Spec is a special object with the following keys:
     *
     * * `at`: `function(item)` - passes the current item in the list, the function should return true if this is the item being modified (or is at where you want to insert something).
     * * `at`: `{Number}` - May optionally define the index of the item instead of a function.
     * * `type`: `{String}` - enum of `insert`, `modify`, `replace` or `remove` that indicates the type of customization.
     * * `where`: `{String}` - enum of `before` or `after` only needed when type is `insert`.
     * * `value`: `{Object}` - the entire object to create (insert or replace) or the values to overwrite (modify), not needed for remove.
     * * `value`: `{Object[]}` - if inserting you may pass an array of items to create.
     *
     * Note: This also accepts the legacy signature:
     * `registerCustomization(path, id, spec)`
     * Where the path is `list/tools` and `id` is the view id
     *
     * All customizations are registered to `this.customizations[path]`.
     *
     * @param {String} path The customization set such as `list/tools#account_list` or `detail#contact_detail`. First half being the type of customization and the second the view id.
     * @param {Object} spec The customization specification
     */
    registerCustomization: function registerCustomization(p, s) {
      var path = p;
      var spec = s;

      if (arguments.length &gt; 2) {
        var customizationSet = arguments[0];
        var id = arguments[1];

        spec = arguments[2];
        path = id ? customizationSet + '#' + id : customizationSet;
      }

      var container = this.customizations[path] || (this.customizations[path] = []);
      if (container) {
        container.push(spec);
      }

      return this;
    },
<span id='argos-Application-method-getCustomizationsFor'>    /**
</span>     * Returns the customizations registered for the provided path.
     *
     * Note: This also accepts the legacy signature:
     * `getCustomizationsFor(set, id)`
     * Where the path is `list/tools` and `id` is the view id
     *
     * @param {String} path The customization set such as `list/tools#account_list` or `detail#contact_detail`. First half being the type of customization and the second the view id.
     */
    getCustomizationsFor: function getCustomizationsFor(p) {
      var path = p;

      if (arguments.length &gt; 1) {
        path = arguments[1] ? arguments[0] + '#' + arguments[1] : arguments[0];
      }

      var segments = path.split('#');
      var customizationSet = segments[0];
      var forPath = this.customizations[path] || [];
      var forSet = this.customizations[customizationSet] || [];

      return forPath.concat(forSet);
    },
    hasAccessTo: function hasAccessTo() /*security*/{
      return true;
    },
<span id='argos-Application-method-showLeftDrawer'>    /**
</span>     * Override this function to load a view in the left drawer.
     */
    showLeftDrawer: function showLeftDrawer() {
      return this;
    },
<span id='argos-Application-method-showRightDrawer'>    /**
</span>     * Override this function to load a view in the right drawer.
     */
    showRightDrawer: function showRightDrawer() {
      return this;
    },
<span id='argos-Application-method-loadSnapper'>    /**
</span>     * Loads Snap.js and assigns the instance to App.snapper. This method would typically be called before navigating to the initial view, so the login page does not contain the menu.
     * @param {DOMNode} element Optional. Snap.js options.element property. If not provided defaults to the &quot;viewContaienr&quot; DOMNode.
     * @param {Object} options Optional. Snap.js options object. A default is provided if this is undefined. Providing options will override the element parameter.
     */
    loadSnapper: function loadSnapper(element, options) {
      // TODO: Provide a domNode param and default to viewContainer if not provided
      if (this.snapper) {
        return this;
      }

      var snapper = new _snap2['default'](options || { // eslint-disable-line
        element: element || document.getElementById('viewContainer'),
        dragger: null,
        disable: 'none',
        addBodyClasses: true,
        hyperextensible: false,
        resistance: 0.1,
        flickThreshold: 50,
        transitionSpeed: 0.2,
        easing: 'ease',
        maxPosition: 266,
        minPosition: -266,
        tapToClose: (0, _has['default'])('ie') ? false : true, // causes issues on windows phones where tapping the close button causes snap.js endDrag to fire, closing the menu before we can check the state properly
        touchToDrag: false,
        slideIntent: 40,
        minDragDistance: 5
      });

      this.snapper = snapper;

      this.showLeftDrawer();
      this.showRightDrawer();
      return this;
    },
    setToolBarMode: function setToolBarMode(onLine) {
      for (var n in this.bars) {
        if (this.bars[n].managed) {
          this.bars[n].setMode(onLine);
        }
      }
    }
  });

  // Backwards compatibility for custom modules still referencing the old declare global
  _lang['default'].setObject('Sage.Platform.Mobile.Application', __class);
  module.exports = __class;
});
//# sourceMappingURL=data:application/json;base64,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Q0FBQyxDQUFDLENBQUMsT0FBTyxFQUFFO0FBQ3hCLGNBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1NBQzlCO09BQ0Y7S0FDRjtHQUNGLENBQUMsQ0FBQzs7O0FBR0gsbUJBQUssU0FBUyxDQUFDLGtDQUFrQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO21CQUM3QyxPQUFPIiwiZmlsZSI6InNyYy9BcHBsaWNhdGlvbi5qcyIsInNvdXJjZVJvb3QiOiJzcmMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBDb3B5cmlnaHQgKGMpIDIwMTAsIFNhZ2UgU29mdHdhcmUsIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5pbXBvcnQganNvbiBmcm9tICdkb2pvL2pzb24nO1xyXG5pbXBvcnQgYXJyYXkgZnJvbSAnZG9qby9fYmFzZS9hcnJheSc7XHJcbmltcG9ydCBjb25uZWN0IGZyb20gJ2Rvam8vX2Jhc2UvY29ubmVjdCc7XHJcbmltcG9ydCBhc3BlY3QgZnJvbSAnZG9qby9hc3BlY3QnO1xyXG5pbXBvcnQgZGVjbGFyZSBmcm9tICdkb2pvL19iYXNlL2RlY2xhcmUnO1xyXG5pbXBvcnQgbGFuZyBmcm9tICdkb2pvL19iYXNlL2xhbmcnO1xyXG5pbXBvcnQgd2luIGZyb20gJ2Rvam8vX2Jhc2Uvd2luZG93JztcclxuaW1wb3J0IGhhc2ggZnJvbSAnZG9qby9oYXNoJztcclxuaW1wb3J0IGhhcyBmcm9tICdkb2pvL2hhcyc7XHJcbmltcG9ydCBkb21Db25zdHJ1Y3QgZnJvbSAnZG9qby9kb20tY29uc3RydWN0JztcclxuaW1wb3J0IGFsbCBmcm9tICdkb2pvL3Byb21pc2UvYWxsJztcclxuaW1wb3J0IHNuYXAgZnJvbSAnc25hcCc7XHJcbmltcG9ydCBSZVVJIGZyb20gJy4vUmVVSS9tYWluJztcclxuaW1wb3J0IHJlYWR5IGZyb20gJ2Rvam8vcmVhZHknO1xyXG5pbXBvcnQgdXRpbCBmcm9tICcuL1V0aWxpdHknO1xyXG5pbXBvcnQgTW9kZWxNYW5hZ2VyIGZyb20gJy4vTW9kZWxzL01hbmFnZXInO1xyXG5pbXBvcnQge21vZGVsfSBmcm9tICcuL01vZGVsJztcclxuaW1wb3J0IHtpbnRlbnR9IGZyb20gJy4vSW50ZW50JztcclxuaW1wb3J0IHt1cGRhdGVDb25uZWN0aW9uU3RhdGV9IGZyb20gJy4vSW50ZW50cy91cGRhdGUtY29ubmVjdGlvbic7XHJcbmltcG9ydCBNb2RhbCBmcm9tICcuL0RpYWxvZ3MvTW9kYWwnO1xyXG5pbXBvcnQgQnVzeUluZGljYXRvciBmcm9tICcuL0RpYWxvZ3MvQnVzeUluZGljYXRvcic7XHJcbmltcG9ydCBEZWZlcnJlZCBmcm9tICdkb2pvL0RlZmVycmVkJztcclxuaW1wb3J0IEVycm9yTWFuYWdlciBmcm9tICcuL0Vycm9yTWFuYWdlcic7XHJcbmltcG9ydCBnZXRSZXNvdXJjZSBmcm9tICcuL0kxOG4nO1xyXG5pbXBvcnQgJ2Rvam8vc25pZmYnO1xyXG5cclxuY29uc3QgcmVzb3VyY2UgPSBnZXRSZXNvdXJjZSgnYXBwbGljYXRpb24nKTtcclxuXHJcbmhhcy5hZGQoJ2h0bWw1LWZpbGUtYXBpJywgZnVuY3Rpb24gaGFzRmlsZUFwaShnbG9iYWwpIHtcclxuICBpZiAoaGFzKCdpZScpKSB7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBpZiAoZ2xvYmFsLkZpbGUgJiYgZ2xvYmFsLkZpbGVSZWFkZXIgJiYgZ2xvYmFsLkZpbGVMaXN0ICYmIGdsb2JhbC5CbG9iKSB7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcbiAgcmV0dXJuIGZhbHNlO1xyXG59KTtcclxuXHJcbmxhbmcuZXh0ZW5kKEZ1bmN0aW9uLCB7XHJcbiAgLy8gVE9ETzogRGVwcmVjYXRlIHRoaXMgaW4gZmF2b3Igb2YgdGhlIHN0YW5kYXJkIFwiYmluZFwiXHJcbiAgYmluZERlbGVnYXRlOiBmdW5jdGlvbiBiaW5kRGVsZWdhdGUoc2NvcGUpIHtcclxuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG5cclxuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgIHJldHVybiBmdW5jdGlvbiBib3VuZCgpIHtcclxuICAgICAgICByZXR1cm4gc2VsZi5hcHBseShzY29wZSB8fCB0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IG9wdGlvbmFsID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcclxuICAgIHJldHVybiBmdW5jdGlvbiBib3VuZFdBcmdzKCkge1xyXG4gICAgICBjb25zdCBjYWxsZWQgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDApO1xyXG4gICAgICByZXR1cm4gc2VsZi5hcHBseShzY29wZSB8fCB0aGlzLCBjYWxsZWQuY29uY2F0KG9wdGlvbmFsKSk7XHJcbiAgICB9O1xyXG4gIH0sXHJcbn0pO1xyXG5cclxuLy8gUGF0Y2hpbmcgYmFja3dhcmRzIGNvbXBhdGFibGl0eSBzbyB0aGF0IGN1c3RvbWl6YXRpb25zIHdpbGwgbm90IGJyZWFrIGFuZCB3aGVyZSBtb21lbnRcclxuLy8gd2FzIHJlcXVpcmVkLlxyXG5kZWZpbmUoJ21vbWVudCcsIFtdLCBmdW5jdGlvbiBnZXRNb21lbnQoKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcclxuICByZXR1cm4gd2luZG93Lm1vbWVudDtcclxufSk7XHJcblxyXG5mdW5jdGlvbiBhcHBseUxvY2FsaXphdGlvblRvKG9iamVjdCwgbG9jYWxpemF0aW9uKSB7XHJcbiAgaWYgKCFvYmplY3QpIHtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIGNvbnN0IHRhcmdldCA9IG9iamVjdC5wcm90b3R5cGUgfHwgb2JqZWN0O1xyXG4gIGZvciAoY29uc3Qga2V5IGluIGxvY2FsaXphdGlvbikge1xyXG4gICAgaWYgKGxhbmcuaXNPYmplY3QobG9jYWxpemF0aW9uW2tleV0pKSB7XHJcbiAgICAgIGFwcGx5TG9jYWxpemF0aW9uVG8odGFyZ2V0W2tleV0sIGxvY2FsaXphdGlvbltrZXldKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRhcmdldFtrZXldID0gbG9jYWxpemF0aW9uW2tleV07XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBsb2NhbGl6ZShuYW1lLCBsb2NhbGl6YXRpb24pIHtcclxuICBsZXQgdGFyZ2V0ID0gbGFuZy5nZXRPYmplY3QobmFtZSk7XHJcbiAgaWYgKHRhcmdldCAmJiB0YXJnZXQucHJvdG90eXBlKSB7XHJcbiAgICB0YXJnZXQgPSB0YXJnZXQucHJvdG90eXBlO1xyXG4gIH1cclxuXHJcbiAgaWYgKHRhcmdldCkge1xyXG4gICAgYXBwbHlMb2NhbGl6YXRpb25Ubyh0YXJnZXQsIGxvY2FsaXphdGlvbik7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBtZXJnZUNvbmZpZ3VyYXRpb24oYmFzZUNvbmZpZ3VyYXRpb24sIG1vZHVsZUNvbmZpZ3VyYXRpb24pIHtcclxuICBpZiAoYmFzZUNvbmZpZ3VyYXRpb24pIHtcclxuICAgIGlmIChiYXNlQ29uZmlndXJhdGlvbi5tb2R1bGVzICYmIG1vZHVsZUNvbmZpZ3VyYXRpb24ubW9kdWxlcykge1xyXG4gICAgICBiYXNlQ29uZmlndXJhdGlvbi5tb2R1bGVzID0gYmFzZUNvbmZpZ3VyYXRpb24ubW9kdWxlcy5jb25jYXQobW9kdWxlQ29uZmlndXJhdGlvbi5tb2R1bGVzKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoYmFzZUNvbmZpZ3VyYXRpb24uY29ubmVjdGlvbnMgJiYgbW9kdWxlQ29uZmlndXJhdGlvbi5jb25uZWN0aW9ucykge1xyXG4gICAgICBiYXNlQ29uZmlndXJhdGlvbi5jb25uZWN0aW9ucyA9IGxhbmcubWl4aW4oYmFzZUNvbmZpZ3VyYXRpb24uY29ubmVjdGlvbnMsIG1vZHVsZUNvbmZpZ3VyYXRpb24uY29ubmVjdGlvbnMpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGJhc2VDb25maWd1cmF0aW9uO1xyXG59XHJcblxyXG5sYW5nLm1peGluKHdpbi5nbG9iYWwsIHtcclxuICAnbG9jYWxpemUnOiBsb2NhbGl6ZSxcclxuICAnbWVyZ2VDb25maWd1cmF0aW9uJzogbWVyZ2VDb25maWd1cmF0aW9uLFxyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBAY2xhc3MgYXJnb3MuQXBwbGljYXRpb25cclxuICogQXBwbGljYXRpb24gaXMgYSBuZXh1cyB0aGF0IHByb3ZpZGVzIG1hbnkgcm91dGluZyBhbmQgZ2xvYmFsIGFwcGxpY2F0aW9uIHNlcnZpY2VzIHRoYXQgbWF5IGJlIHVzZWRcclxuICogZnJvbSBhbnl3aGVyZSB3aXRoaW4gdGhlIGFwcC5cclxuICpcclxuICogSXQgcHJvdmlkZXMgYSBzaG9ydGN1dCBhbGlhcyB0byBgd2luZG93LkFwcGAgKGBBcHBgKSB3aXRoIHRoZSBtb3N0IGNvbW1vbiB1c2FnZSBiZWluZyBgQXBwLmdldFZpZXcoaWQpYC5cclxuICpcclxuICogQGFsdGVybmF0ZUNsYXNzTmFtZSBBcHBcclxuICovXHJcbmNvbnN0IF9fY2xhc3MgPSBkZWNsYXJlKCdhcmdvcy5BcHBsaWNhdGlvbicsIG51bGwsIHtcclxuICAvKipcclxuICAgKiBAcHJvcGVydHkgZW5hYmxlQ29uY3VycmVuY3lDaGVjayB7Qm9vbGVhbn0gT3B0aW9uIHRvIHNraXAgY29uY3VycmVuY3kgY2hlY2tzIHRvIGF2b2lkIHByZWNvbmRpdGlvbi80MTIgZXJyb3JzLlxyXG4gICAqL1xyXG4gIGVuYWJsZUNvbmN1cnJlbmN5Q2hlY2s6IGZhbHNlLFxyXG5cclxuICAvKipcclxuICAgKiBJbnN0YW5jZSBvZiBhIFJlVUlcclxuICAgKi9cclxuICBSZVVJOiBSZVVJLFxyXG5cclxuICAvKipcclxuICAgKiBAcHJvcGVydHkgdmlld1Nob3dPcHRpb25zIHtBcnJheX0gQXJyYXkgd2l0aCBvbmUgY29uZmlndXJhdGlvbiBvYmplY3QgdGhhdCBnZXRzIHB1c2hlZCBiZWZvcmUgc2hvd2luZyBhIHZpZXcuXHJcbiAgICogQWxsb3dzIHBhc3NpbmcgaW4gb3B0aW9ucyB2aWEgcm91dGluZy4gVmFsdWUgZ2V0cyByZW1vdmVkIG9uY2UgdGhlIHZpZXcgaXMgc2hvd24uXHJcbiAgICovXHJcbiAgdmlld1Nob3dPcHRpb25zOiBudWxsLFxyXG5cclxuICAvKipcclxuICAgKiBJbnN0YW5jZSBvZiBhIFNuYXAuanMgb2JqZWN0IChodHRwczovL2dpdGh1Yi5jb20vamFraWVzdGZ1L1NuYXAuanMvKVxyXG4gICAqL1xyXG4gIHNuYXBwZXI6IG51bGwsXHJcblxyXG4gIC8qKlxyXG4gICAqIEBwcm9wZXJ0eSB7U3RyaW5nfVxyXG4gICAqIEN1cnJlbnQgb3JpZW50YXRpb24gb2YgdGhlIGFwcGxpY2F0aW9uLiBDYW4gYmUgbGFuZHNjYXBlIG9yIHBvcnRyYWl0LlxyXG4gICAqL1xyXG4gIGN1cnJlbnRPcmllbnRhdGlvbjogJ3BvcnRyYWl0JyxcclxuXHJcbiAgLyoqXHJcbiAgICogQXJyYXkgb2YgYWxsIGNvbm5lY3Rpb25zIGZvciBBcHBcclxuICAgKiBAcHJvcGVydHkge09iamVjdFtdfVxyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgX2Nvbm5lY3RzOiBudWxsLFxyXG5cclxuICAvKipcclxuICAgKiBBcnJheSBvZiBoYW5kbGVzIGZvciBBcHBcclxuICAgKiBAcHJvcGVydHkge09iamVjdFtdfVxyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgX3NpZ25hbHM6IG51bGwsXHJcblxyXG4gIC8qKlxyXG4gICAqIEBwcml2YXRlXHJcbiAgICogQXJyYXkgb2YgYWxsIHN1YnNjcmlwdGlvbnMgZm9yIEFwcFxyXG4gICAqL1xyXG4gIF9zdWJzY3JpYmVzOiBudWxsLFxyXG5cclxuICAvKipcclxuICAgKiBBcnJheSBvZiBwcm9taXNlcyB0byBsb2FkIGFwcCBzdGF0ZVxyXG4gICAqIEBwcm9wZXJ0eSB7QXJyYXl9XHJcbiAgICogQHByaXZhdGVcclxuICAgKi9cclxuICBfYXBwU3RhdGVQcm9taXNlczogbnVsbCxcclxuXHJcbiAgLyoqXHJcbiAgICogU2lnbmlmaWVzIHRoZSBBcHAgaGFzIGJlZW4gaW5pdGlhbGl6ZWRcclxuICAgKiBAcHJvcGVydHkge0Jvb2xlYW59XHJcbiAgICogQHByaXZhdGVcclxuICAgKi9cclxuICBfc3RhcnRlZDogZmFsc2UsXHJcblxyXG4gIF9yb290RG9tTm9kZTogbnVsbCxcclxuICBjdXN0b21pemF0aW9uczogbnVsbCxcclxuICBzZXJ2aWNlczogbnVsbCwgLy8gVE9ETzogUmVtb3ZlXHJcbiAgX2Nvbm5lY3Rpb25zOiBudWxsLFxyXG4gIG1vZHVsZXM6IG51bGwsXHJcbiAgdmlld3M6IG51bGwsXHJcbiAgaGFzaDogaGFzaCxcclxuICBvbkxpbmU6IHRydWUsXHJcbiAgX2N1cnJlbnRQYWdlOiBudWxsLFxyXG4gIC8qKlxyXG4gICAqIFRvb2xiYXIgaW5zdGFuY2VzIGJ5IGtleSBuYW1lXHJcbiAgICogQHByb3BlcnR5IHtPYmplY3R9XHJcbiAgICovXHJcbiAgYmFyczogbnVsbCxcclxuICBlbmFibGVDYWNoaW5nOiBmYWxzZSxcclxuICAvKipcclxuICAgKiBUaGUgZGVmYXVsdCBTYWdlLlNEYXRhLkNsaWVudC5TRGF0YVNlcnZpY2UgaW5zdGFuY2VcclxuICAgKiBAcHJvcGVydHkge09iamVjdH1cclxuICAgKi9cclxuICBkZWZhdWx0U2VydmljZTogbnVsbCxcclxuICByZXNpemVUaW1lcjogbnVsbCxcclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGhhc2ggdG8gcmVkaXJlY3QgdG8gYWZ0ZXIgbG9naW4uXHJcbiAgICogQHByb3BlcnR5IHtTdHJpbmd9XHJcbiAgICovXHJcbiAgcmVkaXJlY3RIYXNoOiAnJyxcclxuICAvKipcclxuICAgKiBTaWduaWZpZXMgdGhlIG1heGltdW0gZmlsZSBzaXplIHRoYXQgY2FuIGJlIHVwbG9hZGVkIGluIGJ5dGVzXHJcbiAgICogQHByb3BlcnR5IHtpbnR9XHJcbiAgICovXHJcbiAgbWF4VXBsb2FkRmlsZVNpemU6IDQwMDAwMDAsXHJcblxyXG4gIC8qKlxyXG4gICAqIFRpbWVvdXQgZm9yIHRoZSBjb25uZWN0aW9uIGNoZWNrLlxyXG4gICAqL1xyXG4gIFBJTkdfVElNRU9VVDogMzAwMCxcclxuXHJcbiAgLyoqXHJcbiAgICogUGluZyBkZWJvdW5jZSB0aW1lLlxyXG4gICAqL1xyXG4gIFBJTkdfREVCT1VOQ0U6IDEwMDAsXHJcblxyXG4gIC8qKlxyXG4gICAqIE51bWJlciBvZiB0aW1lcyB0byBhdHRlbXB0IHRvIHBpbmcuXHJcbiAgICovXHJcbiAgUElOR19SRVRSWTogNSxcclxuXHJcbiAgLypcclxuICAgKiBTdGF0aWMgcmVzb3VyY2UgdG8gcmVxdWVzdCBvbiB0aGUgcGluZy4gU2hvdWxkIGJlIGEgc21hbGwgZmlsZS5cclxuICAgKi9cclxuICBQSU5HX1JFU09VUkNFOiAncGluZy5naWYnLFxyXG4gIC8qKlxyXG4gICAqIEFsbCBvcHRpb25zIGFyZSBtaXhlZCBpbnRvIEFwcCBpdHNlbGZcclxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xyXG4gICAqL1xyXG4gIE1vZGVsTWFuYWdlcjogbnVsbCxcclxuICBjb25zdHJ1Y3RvcjogZnVuY3Rpb24gY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG4gICAgdGhpcy5fY29ubmVjdHMgPSBbXTtcclxuICAgIHRoaXMuX2FwcFN0YXRlUHJvbWlzZXMgPSBbXTtcclxuICAgIHRoaXMuX3NpZ25hbHMgPSBbXTtcclxuICAgIHRoaXMuX3N1YnNjcmliZXMgPSBbXTtcclxuXHJcbiAgICB0aGlzLmN1c3RvbWl6YXRpb25zID0ge307XHJcbiAgICB0aGlzLnNlcnZpY2VzID0ge307IC8vIFRPRE86IFJlbW92ZVxyXG4gICAgdGhpcy5fY29ubmVjdGlvbnMgPSB7fTtcclxuICAgIHRoaXMubW9kdWxlcyA9IFtdO1xyXG4gICAgdGhpcy52aWV3cyA9IHt9O1xyXG4gICAgdGhpcy5iYXJzID0ge307XHJcblxyXG4gICAgdGhpcy5jb250ZXh0ID0ge307XHJcbiAgICB0aGlzLnZpZXdTaG93T3B0aW9ucyA9IFtdO1xyXG4gICAgY29uc3QgYWN0aW9ucyA9IGludGVudCgpO1xyXG4gICAgdGhpcy5zdGF0ZSQgPSBtb2RlbChhY3Rpb25zKTtcclxuICAgIHRoaXMuc3RhdGUkLnN1YnNjcmliZSh0aGlzLl9vblN0YXRlQ2hhbmdlLmJpbmQodGhpcyksIHRoaXMuX29uU3RhdGVFcnJvci5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICB0aGlzLnBpbmcgPSB1dGlsLmRlYm91bmNlKCgpID0+IHtcclxuICAgICAgY29uc3QgcGluZyQgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKHRoaXMuUElOR19USU1FT1VUKVxyXG4gICAgICAgIC5mbGF0TWFwKCgpID0+IHtcclxuICAgICAgICAgIHJldHVybiBSeC5PYnNlcnZhYmxlLmZyb21Qcm9taXNlKHRoaXMuX3BpbmcoKSlcclxuICAgICAgICAgICAgLmZsYXRNYXAoKG9ubGluZSkgPT4ge1xyXG4gICAgICAgICAgICAgIGlmIChvbmxpbmUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBSeC5PYnNlcnZhYmxlLmp1c3Qob25saW5lKTtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIHJldHVybiBSeC5PYnNlcnZhYmxlLnRocm93KG5ldyBFcnJvcigpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAucmV0cnkodGhpcy5QSU5HX1JFVFJZKVxyXG4gICAgICAgIC50YWtlKDEpO1xyXG5cclxuICAgICAgcGluZyQuc3Vic2NyaWJlKGZ1bmN0aW9uIG9uTmV4dCgpIHtcclxuICAgICAgICB1cGRhdGVDb25uZWN0aW9uU3RhdGUodHJ1ZSk7XHJcbiAgICAgIH0sIGZ1bmN0aW9uIG9uRXJyb3IoKSB7XHJcbiAgICAgICAgdXBkYXRlQ29ubmVjdGlvblN0YXRlKGZhbHNlKTtcclxuICAgICAgfSk7XHJcbiAgICB9LCB0aGlzLlBJTkdfREVCT1VOQ0UpO1xyXG5cclxuICAgIHRoaXMuTW9kZWxNYW5hZ2VyID0gTW9kZWxNYW5hZ2VyO1xyXG4gICAgbGFuZy5taXhpbih0aGlzLCBvcHRpb25zKTtcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIExvb3BzIHRocm91Z2ggYW5kIGRpc2Nvbm5lY3Rpb25zIGNvbm5lY3Rpb25zIGFuZCB1bnN1YnNjcmliZXMgc3Vic2NyaXB0aW9ucy5cclxuICAgKiBBbHNvIGNhbGxzIHtAbGluayAjdW5pbml0aWFsaXplIHVuaW5pdGlhbGl6ZX0uXHJcbiAgICovXHJcbiAgZGVzdHJveTogZnVuY3Rpb24gZGVzdHJveSgpIHtcclxuICAgIGFycmF5LmZvckVhY2godGhpcy5fY29ubmVjdHMsIChoYW5kbGUpID0+IHtcclxuICAgICAgY29ubmVjdC5kaXNjb25uZWN0KGhhbmRsZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBhcnJheS5mb3JFYWNoKHRoaXMuX3N1YnNjcmliZXMsIChoYW5kbGUpID0+IHtcclxuICAgICAgY29ubmVjdC51bnN1YnNjcmliZShoYW5kbGUpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgYXJyYXkuZm9yRWFjaCh0aGlzLl9zaWduYWxzLCAoc2lnbmFsKSA9PiB7XHJcbiAgICAgIHNpZ25hbC5yZW1vdmUoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMudW5pbml0aWFsaXplKCk7XHJcbiAgfSxcclxuICAvKipcclxuICAgKiBTaGVsbGVkIGZ1bmN0aW9uIHRoYXQgaXMgY2FsbGVkIGZyb20ge0BsaW5rICNkZXN0cm95IGRlc3Ryb3l9LCBtYXkgYmUgdXNlZCB0byByZWxlYXNlIGFueSBmdXJ0aGVyIGhhbmRsZXMuXHJcbiAgICovXHJcbiAgdW5pbml0aWFsaXplOiBmdW5jdGlvbiB1bmluaXRpYWxpemUoKSB7fSxcclxuICAvKipcclxuICAgKiBDbGVhbnMgdXAgVVJMIHRvIHByZXZlbnQgUmVVSSB1cmwgaGFuZGxpbmcgYW5kIHRoZW4gaW52b2tlcyBSZVVJLlxyXG4gICAqL1xyXG4gIGluaXRSZVVJOiBmdW5jdGlvbiBpbml0UmVVSSgpIHtcclxuICAgIC8vIHByZXZlbnQgUmVVSSBmcm9tIGF0dGVtcHRpbmcgdG8gbG9hZCB0aGUgVVJMcyB2aWV3IGFzIHdlIGhhbmRsZSB0aGF0IG91cnNlbHZlcy5cclxuICAgIC8vIHRvZG86IGFkZCBzdXBwb3J0IGZvciBoYW5kbGluZyB0aGUgVVJMP1xyXG4gICAgY29uc3QgaCA9IHRoaXMuaGFzaCgpO1xyXG4gICAgaWYgKGggIT09ICcnKSB7XHJcbiAgICAgIHRoaXMucmVkaXJlY3RIYXNoID0gaDtcclxuICAgIH1cclxuXHJcbiAgICBoaXN0b3J5LnJlcGxhY2VTdGF0ZShudWxsLCAnJywgJyMnKTtcclxuICAgIFJlVUkuaW5pdCgpO1xyXG4gIH0sXHJcbiAgX29uT2ZmbGluZTogZnVuY3Rpb24gX29uT2ZmbGluZSgpIHtcclxuICAgIHRoaXMucGluZygpO1xyXG4gIH0sXHJcbiAgX29uT25saW5lOiBmdW5jdGlvbiBfb25PbmxpbmUoKSB7XHJcbiAgICB0aGlzLnBpbmcoKTtcclxuICB9LFxyXG4gIF9vblN0YXRlQ2hhbmdlOiBmdW5jdGlvbiBfb25TdGF0ZUNoYW5nZSh2YWwpIHtcclxuICAgIHRoaXMuX3VwZGF0ZUNvbm5lY3Rpb25TdGF0ZSh2YWwuY29ubmVjdGlvblN0YXRlKTtcclxuICAgIHRoaXMub25TdGF0ZUNoYW5nZSh2YWwpO1xyXG4gIH0sXHJcbiAgX29uU3RhdGVFcnJvcjogZnVuY3Rpb24gX29uU3RhdGVFcnJvcihlcnJvcikge1xyXG4gICAgdGhpcy5vblN0YXRlRXJyb3IoZXJyb3IpO1xyXG4gIH0sXHJcbiAgb25TdGF0ZUNoYW5nZTogZnVuY3Rpb24gb25TdGF0ZUNoYW5nZSh2YWwpIHt9LCAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXHJcbiAgb25TdGF0ZUVycm9yOiBmdW5jdGlvbiBvblN0YXRlRXJyb3IoZXJyb3IpIHt9LCAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXHJcbiAgX3VwZGF0ZUNvbm5lY3Rpb25TdGF0ZTogZnVuY3Rpb24gX3VwZGF0ZUNvbm5lY3Rpb25TdGF0ZShvbmxpbmUpIHtcclxuICAgIC8vIERvbid0IGZpcmUgdGhlIG9uQ29ubmVjdGlvbkNoYW5nZSBpZiB3ZSBhcmUgaW4gdGhlIHNhbWUgc3RhdGUuXHJcbiAgICBpZiAodGhpcy5vbkxpbmUgPT09IG9ubGluZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5vbkxpbmUgPSBvbmxpbmU7XHJcbiAgICB0aGlzLm9uQ29ubmVjdGlvbkNoYW5nZShvbmxpbmUpO1xyXG4gIH0sXHJcbiAgZm9yY2VPbmxpbmU6IGZ1bmN0aW9uIGZvcmNlT25saW5lKCkge1xyXG4gICAgdXBkYXRlQ29ubmVjdGlvblN0YXRlKHRydWUpO1xyXG4gIH0sXHJcbiAgZm9yY2VPZmZsaW5lOiBmdW5jdGlvbiBmb3JjZU9mZmxpbmUoKSB7XHJcbiAgICB1cGRhdGVDb25uZWN0aW9uU3RhdGUoZmFsc2UpO1xyXG4gIH0sXHJcbiAgb25Db25uZWN0aW9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNvbm5lY3Rpb25DaGFuZ2UoIC8qb25saW5lKi8gKSB7fSxcclxuICAvKipcclxuICAgKiBFc3RhYmxpc2hlcyB2YXJpb3VzIGNvbm5lY3Rpb25zIHRvIGV2ZW50cy5cclxuICAgKi9cclxuICBpbml0Q29ubmVjdHM6IGZ1bmN0aW9uIGluaXRDb25uZWN0cygpIHtcclxuICAgIHRoaXMuX2Nvbm5lY3RzLnB1c2goY29ubmVjdC5jb25uZWN0KHdpbmRvdywgJ3Jlc2l6ZScsIHRoaXMsIHRoaXMub25SZXNpemUpKTtcclxuICAgIHRoaXMuX2Nvbm5lY3RzLnB1c2goY29ubmVjdC5jb25uZWN0KHdpbi5ib2R5KCksICdiZWZvcmV0cmFuc2l0aW9uJywgdGhpcywgdGhpcy5fb25CZWZvcmVUcmFuc2l0aW9uKSk7XHJcbiAgICB0aGlzLl9jb25uZWN0cy5wdXNoKGNvbm5lY3QuY29ubmVjdCh3aW4uYm9keSgpLCAnYWZ0ZXJ0cmFuc2l0aW9uJywgdGhpcywgdGhpcy5fb25BZnRlclRyYW5zaXRpb24pKTtcclxuICAgIHRoaXMuX2Nvbm5lY3RzLnB1c2goY29ubmVjdC5jb25uZWN0KHdpbi5ib2R5KCksICdzaG93JywgdGhpcywgdGhpcy5fb25BY3RpdmF0ZSkpO1xyXG4gICAgcmVhZHkoKCkgPT4ge1xyXG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignb25saW5lJywgdGhpcy5fb25PbmxpbmUuYmluZCh0aGlzKSk7XHJcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdvZmZsaW5lJywgdGhpcy5fb25PZmZsaW5lLmJpbmQodGhpcykpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5waW5nKCk7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogUmV0dXJucyBhIHByb21pc2UuIFRoZSByZXN1bHRzIGFyZSB0cnVlIG9mIHRoZSByZXNvdXJjZSBjYW1lIGJhY2tcclxuICAgKiBiZWZvcmUgdGhlIFBJTkdfVElNRU9VVC4gVGhlIHByb21pc2UgaXMgcmVqZWN0ZWQgaWYgdGhlcmUgaXMgdGltZW91dCBvclxyXG4gICAqIHRoZSByZXNwb25zZSBpcyBub3QgYSAyMDAgb3IgMzA0LlxyXG4gICAqL1xyXG4gIF9waW5nOiBmdW5jdGlvbiBfcGluZygpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgICBjb25zdCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgeGhyLm9udGltZW91dCA9ICgpID0+IHJlc29sdmUoZmFsc2UpO1xyXG4gICAgICB4aHIub25lcnJvciA9ICgpID0+IHJlc29sdmUoZmFsc2UpO1xyXG4gICAgICB4aHIub25sb2FkID0gKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IERPTkUgPSA0O1xyXG4gICAgICAgIGNvbnN0IEhUVFBfT0sgPSAyMDA7XHJcbiAgICAgICAgY29uc3QgSFRUUF9OT1RfTU9ESUZJRUQgPSAzMDQ7XHJcblxyXG4gICAgICAgIGlmICh4aHIucmVhZHlTdGF0ZSA9PT0gRE9ORSkge1xyXG4gICAgICAgICAgaWYgKHhoci5zdGF0dXMgPT09IEhUVFBfT0sgfHwgeGhyLnN0YXR1cyA9PT0gSFRUUF9OT1RfTU9ESUZJRUQpIHtcclxuICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJlc29sdmUoZmFsc2UpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgICAgeGhyLm9wZW4oJ0dFVCcsIGAke3RoaXMuUElOR19SRVNPVVJDRX0/Y2FjaGU9JHtNYXRoLnJhbmRvbSgpfWApO1xyXG4gICAgICB4aHIudGltZW91dCA9IHRoaXMuUElOR19USU1FT1VUO1xyXG4gICAgICB4aHIuc2VuZCgpO1xyXG4gICAgfSk7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogRXN0YWJsaXNoZXMgc2lnbmFscy9oYW5kbGVzIGZyb20gZG9qbydzIG5ld2VyIEFQSXNcclxuICAgKi9cclxuICBpbml0U2lnbmFsczogZnVuY3Rpb24gaW5pdFNpZ25hbHMoKSB7XHJcbiAgICB0aGlzLl9zaWduYWxzLnB1c2goYXNwZWN0LmFmdGVyKHdpbmRvdy5SZVVJLCAnc2V0T3JpZW50YXRpb24nLCAocmVzdWx0LCBhcmdzKSA9PiB7XHJcbiAgICAgIGlmIChhcmdzICYmIGFyZ3MubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGNvbnN0IHZhbHVlID0gYXJnc1swXTtcclxuICAgICAgICB0aGlzLmN1cnJlbnRPcmllbnRhdGlvbiA9IHZhbHVlO1xyXG4gICAgICAgIHRoaXMub25TZXRPcmllbnRhdGlvbih2YWx1ZSk7XHJcbiAgICAgICAgY29ubmVjdC5wdWJsaXNoKCcvYXBwL3NldE9yaWVudGF0aW9uJywgW3ZhbHVlXSk7XHJcbiAgICAgIH1cclxuICAgIH0pKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIEV4ZWN1dGVzIHRoZSBjaGFpbiBvZiBwcm9taXNlcyByZWdpc3RlcmVkIHdpdGggcmVnaXN0ZXJBcHBTdGF0ZVByb21pc2UuXHJcbiAgICogV2hlbiBhbGwgcHJvbWlzZXMgYXJlIGRvbmUsIGEgbmV3IHByb21pc2UgaXMgcmV0dXJuZWQgdG8gdGhlIGNhbGxlciwgYW5kIGFsbFxyXG4gICAqIHJlZ2lzdGVyZWQgcHJvbWlzZXMgYXJlIGZsdXNoZWQuXHJcbiAgICogRWFjaCBhcHAgc3RhdGUgY2FuIGJlIHByb2Nlc3NlZCBhbGwgYXQgb25jZSBvciBpbiBhIHNwZWNmaWMgc2VxZW5jZS5cclxuICAgKiBFeGFtcGxlOlxyXG4gICAqIFdlIGNhbiByZWdpc3RlciAgQXBwIHN0YXRlIHNlcWV1bmNlcyBhcyB0aGUgZm9sbG93aW5nLCB3aGVyZSBlYWNoIHNlcXVlbmNlXHJcbiAgICogaXMgcHJvY2Nlc3NlZCBpbiBhIGRlc2VuZGluZyBvcmRlciBmb3JtIDAgdG8gbi4gVGhlIGZpcnN0IHR3byBpbiB0aGlzIGV4YW1wbGUgYXJlIGRlZmV1bHRlZCB0byBhXHJcbiAgICogc2VxdWVuY2Ugb2YgemVybyAoMCkgYW5kIGFyZSBwcm9jY2VkIGZpcnN0IGluIHdoaWNoIGFmdGVyIHRoZSBuZXh0IHNlcXVlbmNlICgxKSBpcyBwcm9jY2Vzc2VkXHJcbiAgICogYW5kIG9uY2UgYWxsIG9mIGl0cyBpdGVtcyBhcmUgZmluc2hlZCB0aGVuIHRoZSBsYXN0IHNlcXVlbmNlIDIgd2lsbCBzdGFydCBhbmQgcHJvY2VzcyBhbGwgb2YgaXRzIGl0ZW1zLlxyXG4gICAqXHJcbiAgICogSWYgdHdvIHNlcWVuY2VzIGhhdmUgdGhlIHNhbWUgbnVtYmVyIHRoZW4gdGhheSB3aWxsIGdldCBjb21iaW5kZWQgYXMgaWYgdGhleSB3aGVyZSByZWdpc3RlcmQgdG9nZXRoZXIuXHJcbiAgICogQXNvIG5vdCBhbGwgaXRlbXMgd2hpdGggaW4gYSBwcm9jZXNzIGFyZSBwcm9jZXNzZWQgYW5kIGFuc3luYyBvZiBlYWNoIG90aGVyIGFuZCBtYXkgbm90IGZpbmlzaCBhdCB0aGUgc2FtZSB0aW1lLlxyXG4gICAqXHJcbiAgICogVG8gbWFrZSB0d28gaXRlbXMgcHJvY2VzcyBvbmUgYWZ0ZXIgdGhlIG90aGVyIHNpbXBsZXkgcHV0IHRoZW0gaW4gdG8gZGlmZnJlbnQgc2VxdWVuY2VzLlxyXG4gICAqXHJcbiAgICogICB0aGlzLnJlZ2lzdGVyQXBwU3RhdGVQcm9taXNlKCgpID0+IHtzb21lIGZ1bmN0aW9ucyB0aGF0IHJldHVybnMgYSBwcm9taXNlfSk7XHJcbiAgICogICB0aGlzLnJlZ2lzdGVyQXBwU3RhdGVQcm9taXNlKCgpID0+IHtzb21lIGZ1bmN0aW9ucyB0aGF0IHJldHVybnMgYSBwcm9taXNlfSk7XHJcbiAgICpcclxuICAgKiAgIHRoaXMucmVnaXN0ZXJBcHBTdGF0ZVByb21pc2Uoe1xyXG4gICAqICAgICBzZXE6IDEsXHJcbiAgICogICAgIGRlc2NyaXB0aW9uOiAnU2VxdWVuY2UgMScsXHJcbiAgICogICAgIGl0ZW1zOiBbe1xyXG4gICAqICAgICAgIG5hbWU6ICdpdGVtQScsXHJcbiAgICogICAgICAgZGVzY3JpcHRpb246ICdpdGVtIEEnLFxyXG4gICAqICAgICAgIGZuOiAoKSA9PiB7IHNvbWUgZnVuY3Rpb25zIHRoYXQgcmV0dXJucyBhIHByb21pc2UgfSxcclxuICAgKiAgICAgICB9LCB7XHJcbiAgICogICAgICAgICBuYW1lOiAnaXRlbWInLFxyXG4gICAqICAgICAgICAgZGVzY3JpcHRpb246ICdJdGVtIEInLFxyXG4gICAqICAgICAgICAgZm46ICgpID0+IHtzb21lIGZ1bmN0aW9ucyB0aGF0IHJldHVybnMgYSBwcm9taXNlfSxcclxuICAgKiAgICAgICB9XSxcclxuICAgKiAgIH0pO1xyXG4gICAqXHJcbiAgICogICB0aGlzLnJlZ2lzdGVyQXBwU3RhdGVQcm9taXNlKHtcclxuICAgKiAgICAgc2VxOiAyLFxyXG4gICAqICAgICBkZXNjcmlwdGlvbjogJ1NlcXVlbmNlIDInLFxyXG4gICAqICAgICBpdGVtczogW3tcclxuICAgKiAgICAgICBuYW1lOiAnaXRlbSBDJyxcclxuICAgKiAgICAgICBkZXNjcmlwdGlvbjogJ2l0ZW0gQycsXHJcbiAgICogICAgICAgZm46ICgpID0+IHsgc29tZSBmdW5jdGlvbnMgdGhhdCByZXR1cm5zIGEgcHJvbWlzZSB9LFxyXG4gICAqICAgICAgIH0sXHJcbiAgICogICAgfSk7XHJcbiAgICpcclxuICAgKiBUaGVyZSBhcmUgdGhlcmUgQXBwIHN0YXRlIHNlcWVuY2VzIHJlXHJcbiAgICpcclxuICAgKiBAcmV0dXJuIHtQcm9taXNlfVxyXG4gICAqL1xyXG4gIGluaXRBcHBTdGF0ZTogZnVuY3Rpb24gaW5pdEFwcFN0YXRlKCkge1xyXG4gICAgY29uc3QgZGVmID0gbmV3IERlZmVycmVkKCk7XHJcbiAgICBjb25zdCBzZXF1ZW5jZXMgPSBbXTtcclxuICAgIHRoaXMuX2FwcFN0YXRlUHJvbWlzZXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICBsZXQgc2VxO1xyXG4gICAgICBpZiAodHlwZW9mIGl0ZW0gPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICBzZXEgPSBzZXF1ZW5jZXMuZmluZCh4ID0+IHguc2VxID09PSAwKTtcclxuICAgICAgICBpZiAoIXNlcSkge1xyXG4gICAgICAgICAgc2VxID0ge1xyXG4gICAgICAgICAgICBzZXE6IDAsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiByZXNvdXJjZS5sb2FkaW5nQXBwbGljYXRpb25TdGF0ZVRleHQsXHJcbiAgICAgICAgICAgIGl0ZW1zOiBbXSxcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgICBzZXF1ZW5jZXMucHVzaChzZXEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZXEuaXRlbXMucHVzaCh7XHJcbiAgICAgICAgICBuYW1lOiAnZGVmYXVsdCcsXHJcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJycsXHJcbiAgICAgICAgICBmbjogaXRlbSxcclxuICAgICAgICB9KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAoaXRlbS5zZXEgJiYgaXRlbS5pdGVtcyApIHtcclxuICAgICAgICAgIHNlcSA9IHNlcXVlbmNlcy5maW5kKHggPT4geC5zZXEgPT09ICgoaXRlbS5zZXEpID8gaXRlbS5zZXEgOiAwKSk7XHJcbiAgICAgICAgICBpZiAoc2VxKSB7XHJcbiAgICAgICAgICAgIGl0ZW0uaXRlbXMuZm9yRWFjaCgoX2l0ZW0pID0+IHtcclxuICAgICAgICAgICAgICBzZXEuaXRlbXMucHVzaChfaXRlbSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2VxdWVuY2VzLnB1c2goaXRlbSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIC8vIFNvcnQgdGhlIHNlcXVlbmNlIGFzY2VuZGluZyBzbyB3ZSBjYW4gcHJvY2Vzc2VzIHRoZW0gaW4gdGhlIHJpZ2h0IG9yZGVyLlxyXG4gICAgc2VxdWVuY2VzLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgaWYgKGEuc2VxID4gYi5zZXEpIHtcclxuICAgICAgICByZXR1cm4gMTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGEuc2VxIDwgYi5zZXEpIHtcclxuICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiAwO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5faW5pdEFwcFN0YXRlU2VxdWVuY2UoMCwgc2VxdWVuY2VzKS50aGVuKChyZXN1bHRzKSA9PiB7XHJcbiAgICAgIHRoaXMuY2xlYXJBcHBTdGF0ZVByb21pc2VzKCk7XHJcbiAgICAgIGRlZi5yZXNvbHZlKHJlc3VsdHMpO1xyXG4gICAgfSwgKGVycikgPT4ge1xyXG4gICAgICB0aGlzLmNsZWFyQXBwU3RhdGVQcm9taXNlcygpO1xyXG4gICAgICBkZWYucmVqZWN0KGVycik7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBkZWYucHJvbWlzZTtcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIFByb2Nlc3MgYSBhcHAgc3RhdGUgc2VxdWVuY2UgYW5kIHN0YXJ0IHRoZSBuZXh0IHNlcXVuY2Ugd2hlbiBkb25lLlxyXG4gICAqIEBwYXJhbSB7aW5kZXgpIHRoZSBpbmRleCBvZiB0aGUgc2VxdWVuY2UgdG8gc3RhcnRcclxuICAgKiBAcGFyYW0ge3NlcXVlbmNlcykgYW4gYXJyYXkgb2Ygc2VxdWVuY2VzXHJcbiAgICovXHJcbiAgX2luaXRBcHBTdGF0ZVNlcXVlbmNlOiBmdW5jdGlvbiBfaW5pdEFwcFN0YXRlU2VxdW5jZShpbmRleCwgc2VxdWVuY2VzKSB7XHJcbiAgICBjb25zdCBkZWYgPSBuZXcgRGVmZXJyZWQoKTtcclxuICAgIGNvbnN0IHNlcSA9IHNlcXVlbmNlc1tpbmRleF07XHJcblxyXG4gICAgaWYgKHNlcSkgeyAvLyBXZSBuZWVkIHRvIHNlbmQgYW4gb2JzZXJ2YWJsZSBhbmQgZ2V0IHJpZGUgb2YgdGhlIHVpIGVsZW1lbnQuXHJcbiAgICAgIGNvbnN0IGluZGljYXRvciA9IG5ldyBCdXN5SW5kaWNhdG9yKHtcclxuICAgICAgICBpZDogJ2J1c3lJbmRpY2F0b3JfX2FwcFN0YXRlXycgKyBzZXEuc2VxLFxyXG4gICAgICAgIGxhYmVsOiByZXNvdXJjZS5pbml0aWFsaXppbmdUZXh0ICsgJyAnICsgc2VxLmRlc2NyaXB0aW9uLFxyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy5tb2RhbC5kaXNhYmxlQ2xvc2UgPSB0cnVlO1xyXG4gICAgICB0aGlzLm1vZGFsLnNob3dUb29sYmFyID0gZmFsc2U7XHJcbiAgICAgIHRoaXMubW9kYWwuYWRkKGluZGljYXRvcik7XHJcbiAgICAgIGluZGljYXRvci5zdGFydCgpO1xyXG4gICAgICBjb25zdCBwcm9taXNlcyA9IGFycmF5Lm1hcChzZXEuaXRlbXMsIChpdGVtKT0+IHtcclxuICAgICAgICByZXR1cm4gaXRlbS5mbigpO1xyXG4gICAgICB9KTtcclxuICAgICAgY29uc3Qgb2RlZiA9IGRlZjtcclxuICAgICAgYWxsKHByb21pc2VzKS50aGVuKCgpID0+IHtcclxuICAgICAgICBpbmRpY2F0b3IuY29tcGxldGUodHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5tb2RhbC5kaXNhYmxlQ2xvc2UgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLm1vZGFsLmhpZGUoKTtcclxuICAgICAgICB0aGlzLl9pbml0QXBwU3RhdGVTZXF1ZW5jZShpbmRleCArIDEsIHNlcXVlbmNlcykudGhlbigocmVzdWx0cykgPT4ge1xyXG4gICAgICAgICAgb2RlZi5yZXNvbHZlKHJlc3VsdHMpO1xyXG4gICAgICAgIH0sIChlcnIpID0+IHtcclxuICAgICAgICAgIGluZGljYXRvci5jb21wbGV0ZSh0cnVlKTtcclxuICAgICAgICAgIHRoaXMubW9kYWwuZGlzYWJsZUNsb3NlID0gZmFsc2U7XHJcbiAgICAgICAgICB0aGlzLm1vZGFsLmhpZGUoKTtcclxuICAgICAgICAgIG9kZWYucmVqZWN0KGVycik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0sIChlcnIpID0+IHtcclxuICAgICAgICBFcnJvck1hbmFnZXIuYWRkU2ltcGxlRXJyb3IoaW5kaWNhdG9yLmxhYmVsLCBlcnIpO1xyXG4gICAgICAgIGluZGljYXRvci5jb21wbGV0ZSh0cnVlKTtcclxuICAgICAgICB0aGlzLm1vZGFsLmRpc2FibGVDbG9zZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMubW9kYWwuaGlkZSgpO1xyXG4gICAgICAgIGRlZi5yZWplY3QoZXJyKTtcclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBkZWYucmVzb2x2ZSgpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRlZi5wcm9taXNlO1xyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogUmVnaXN0ZXJzIGEgcHJvbWlzZSB0aGF0IHdpbGwgcmVzb2x2ZSB3aGVuIGluaXRBcHBTdGF0ZSBpcyBpbnZva2VkLlxyXG4gICAqIEBwYXJhbSB7UHJvbWlzZXxGdW5jdGlvbn0gcHJvbWlzZSBBIHByb21pc2Ugb3IgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBwcm9taXNlXHJcbiAgICovXHJcbiAgcmVnaXN0ZXJBcHBTdGF0ZVByb21pc2U6IGZ1bmN0aW9uIHJlZ2lzdGVyQXBwU3RhdGVQcm9taXNlKHByb21pc2UpIHtcclxuICAgIHRoaXMuX2FwcFN0YXRlUHJvbWlzZXMucHVzaChwcm9taXNlKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH0sXHJcbiAgY2xlYXJBcHBTdGF0ZVByb21pc2VzOiBmdW5jdGlvbiBjbGVhckFwcFN0YXRlUHJvbWlzZXMoKSB7XHJcbiAgICB0aGlzLl9hcHBTdGF0ZVByb21pc2VzID0gW107XHJcbiAgfSxcclxuICBvblNldE9yaWVudGF0aW9uOiBmdW5jdGlvbiBvblNldE9yaWVudGF0aW9uKCAvKnZhbHVlKi8gKSB7fSxcclxuICAvKipcclxuICAgKiBMb29wcyB0aHJvdWdoIGNvbm5lY3Rpb25zIGFuZCBjYWxscyB7QGxpbmsgI3JlZ2lzdGVyU2VydmljZSByZWdpc3RlclNlcnZpY2V9IG9uIGVhY2guXHJcbiAgICovXHJcbiAgaW5pdFNlcnZpY2VzOiBmdW5jdGlvbiBpbml0U2VydmljZXMoKSB7XHJcbiAgICBmb3IgKGNvbnN0IG5hbWUgaW4gdGhpcy5jb25uZWN0aW9ucykge1xyXG4gICAgICBpZiAodGhpcy5jb25uZWN0aW9ucy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJTZXJ2aWNlKG5hbWUsIHRoaXMuY29ubmVjdGlvbnNbbmFtZV0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSxcclxuICAvKipcclxuICAgKiBMb29wcyB0aHJvdWdoIG1vZHVsZXMgYW5kIGNhbGxzIHRoZWlyIGBpbml0KClgIGZ1bmN0aW9uLlxyXG4gICAqL1xyXG4gIGluaXRNb2R1bGVzOiBmdW5jdGlvbiBpbml0TW9kdWxlcygpIHtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5tb2R1bGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIHRoaXMubW9kdWxlc1tpXS5pbml0KHRoaXMpO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogTG9vcHMgdGhyb3VnaCAodG9vbCliYXJzIGFuZCBjYWxscyB0aGVpciBgaW5pdCgpYCBmdW5jdGlvbi5cclxuICAgKi9cclxuICBpbml0VG9vbGJhcnM6IGZ1bmN0aW9uIGluaXRUb29sYmFycygpIHtcclxuICAgIGZvciAoY29uc3QgbiBpbiB0aGlzLmJhcnMpIHtcclxuICAgICAgaWYgKHRoaXMuYmFycy5oYXNPd25Qcm9wZXJ0eShuKSkge1xyXG4gICAgICAgIHRoaXMuYmFyc1tuXS5pbml0KCk7IC8vIHRvZG86IGNoYW5nZSB0byBzdGFydHVwXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIFNldHMgdGhlIGdsb2JhbCB2YXJpYWJsZSBgQXBwYCB0byB0aGlzIGluc3RhbmNlLlxyXG4gICAqL1xyXG4gIGFjdGl2YXRlOiBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcclxuICAgIHdpbmRvdy5BcHAgPSB0aGlzO1xyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogSW5pdGlhbGl6ZXMgdGhpcyBhcHBsaWNhdGlvbiBhcyB3ZWxsIGFzIHRoZSB0b29sYmFyIGFuZCBhbGwgY3VycmVudGx5IHJlZ2lzdGVyZWQgdmlld3MuXHJcbiAgICovXHJcbiAgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHtcclxuICAgIHRoaXMuaW5pdFByZWZlcmVuY2VzKCk7XHJcbiAgICB0aGlzLmluaXRDb25uZWN0cygpO1xyXG4gICAgdGhpcy5pbml0U2lnbmFscygpO1xyXG4gICAgdGhpcy5pbml0U2VydmljZXMoKTsgLy8gVE9ETzogUmVtb3ZlXHJcbiAgICB0aGlzLl9zdGFydHVwQ29ubmVjdGlvbnMoKTtcclxuICAgIHRoaXMuaW5pdE1vZHVsZXMoKTtcclxuICAgIHRoaXMuaW5pdFRvb2xiYXJzKCk7XHJcbiAgICB0aGlzLmluaXRSZVVJKCk7XHJcbiAgICB0aGlzLmluaXRNb2RhbCgpO1xyXG4gIH0sXHJcbiAgaW5pdFByZWZlcmVuY2VzOiBmdW5jdGlvbiBpbml0UHJlZmVyZW5jZXMoKSB7XHJcbiAgICB0aGlzLl9sb2FkUHJlZmVyZW5jZXMoKTtcclxuICB9LFxyXG4gIGluaXRNb2RhbDogZnVuY3Rpb24gaW5pdE1vZGFsKCkge1xyXG4gICAgdGhpcy5tb2RhbCA9IG5ldyBNb2RhbCgpO1xyXG4gICAgdGhpcy5tb2RhbC5wbGFjZShkb2N1bWVudC5ib2R5KVxyXG4gICAgICAuaGlkZSgpO1xyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogQ2hlY2sgaWYgdGhlIGJyb3dzZXIgc3VwcG9ydHMgdG91Y2ggZXZlbnRzLlxyXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59IHRydWUgaWYgdGhlIGN1cnJlbnQgYnJvd3NlciBzdXBwb3J0cyB0b3VjaCBldmVudHMsIGZhbHNlIG90aGVyd2lzZS5cclxuICAgKi9cclxuICBzdXBwb3J0c1RvdWNoOiBmdW5jdGlvbiBzdXBwb3J0c1RvdWNoKCkge1xyXG4gICAgLy8gVGFrZW4gZnJvbSBodHRwczovL2dpdGh1Yi5jb20vTW9kZXJuaXpyL01vZGVybml6ci8gKE1JVCBMaWNlbnNlZClcclxuICAgIHJldHVybiAoJ29udG91Y2hzdGFydCcgaW4gd2luZG93KSB8fCAod2luZG93LkRvY3VtZW50VG91Y2ggJiYgZG9jdW1lbnQgaW5zdGFuY2VvZiB3aW5kb3cuRG9jdW1lbnRUb3VjaCk7XHJcbiAgfSxcclxuICBwZXJzaXN0UHJlZmVyZW5jZXM6IGZ1bmN0aW9uIHBlcnNpc3RQcmVmZXJlbmNlcygpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGlmICh3aW5kb3cubG9jYWxTdG9yYWdlKSB7XHJcbiAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwcmVmZXJlbmNlcycsIGpzb24uc3RyaW5naWZ5KHRoaXMucHJlZmVyZW5jZXMpKTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGUpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXHJcbiAgICB9XHJcbiAgfSxcclxuICBfbG9hZFByZWZlcmVuY2VzOiBmdW5jdGlvbiBfbG9hZFByZWZlcmVuY2VzKCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKHdpbmRvdy5sb2NhbFN0b3JhZ2UpIHtcclxuICAgICAgICB0aGlzLnByZWZlcmVuY2VzID0ganNvbi5wYXJzZSh3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3ByZWZlcmVuY2VzJykpO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcclxuICAgIH1cclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIEVzdGFibGlzaGVzIHZhcmlvdXMgY29ubmVjdGlvbnMgdG8gZXZlbnRzLlxyXG4gICAqL1xyXG4gIF9zdGFydHVwQ29ubmVjdGlvbnM6IGZ1bmN0aW9uIF9zdGFydHVwQ29ubmVjdGlvbnMoKSB7XHJcbiAgICBmb3IgKGNvbnN0IG5hbWUgaW4gdGhpcy5jb25uZWN0aW9ucykge1xyXG4gICAgICBpZiAodGhpcy5jb25uZWN0aW9ucy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xyXG4gICAgICAgIGlmICh0aGlzLmNvbm5lY3Rpb25zLmhhc093blByb3BlcnR5KG5hbWUpKSB7XHJcbiAgICAgICAgICB0aGlzLnJlZ2lzdGVyQ29ubmVjdGlvbihuYW1lLCB0aGlzLmNvbm5lY3Rpb25zW25hbWVdKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKiB0b2RvOiBzaG91bGQgd2UgYmUgbWl4aW5nIHRoaXMgaW4/ICovXHJcbiAgICBkZWxldGUgdGhpcy5jb25uZWN0aW9ucztcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIFNldHMgYF9zdGFydGVkYCB0byB0cnVlLlxyXG4gICAqL1xyXG4gIHJ1bjogZnVuY3Rpb24gcnVuKCkge1xyXG4gICAgdGhpcy5fc3RhcnRlZCA9IHRydWU7XHJcbiAgfSxcclxuICAvKipcclxuICAgKiBSZXR1cm5zIHRoZSBgd2luZG93Lm5hdmlnYXRvci5vbkxpbmVgIHByb3BlcnR5IGZvciBkZXRlY3RpbmcgaWYgYW4gaW50ZXJuZXQgY29ubmVjdGlvbiBpcyBhdmFpbGFibGUuXHJcbiAgICovXHJcbiAgaXNPbmxpbmU6IGZ1bmN0aW9uIGlzT25saW5lKCkge1xyXG4gICAgcmV0dXJuIHRoaXMub25MaW5lO1xyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogUmV0dXJucyB0cnVlL2ZhbHNlIGlmIHRoZSBjdXJyZW50IHZpZXcgaXMgdGhlIGZpcnN0L2luaXRpYWwgdmlldy5cclxuICAgKiBUaGlzIGlzIHVzZWZ1bCBmb3IgZGlzYWJsaW5nIHRoZSBiYWNrIGJ1dHRvbiAoc28geW91IGRvbid0IGhpdCB0aGUgbG9naW4gcGFnZSkuXHJcbiAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICovXHJcbiAgaXNPbkZpcnN0VmlldzogZnVuY3Rpb24gaXNPbkZpcnN0VmlldygpIHt9LFxyXG5cclxuICAvKipcclxuICAgKiBPcHRpb25hbCBjcmVhdGVzLCB0aGVuIHJlZ2lzdGVycyBhbiBTYWdlLlNEYXRhLkNsaWVudC5TRGF0YVNlcnZpY2UgYW5kIGFkZHMgdGhlIHJlc3VsdCB0byBgQXBwLnNlcnZpY2VzYC5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBVbmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIHNlcnZpY2UuXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IHNlcnZpY2UgTWF5IGJlIGEgU0RhdGFTZXJ2aWNlIGluc3RhbmNlIG9yIGNvbnN0cnVjdG9yIHBhcmFtZXRlcnMgdG8gY3JlYXRlIGEgbmV3IFNEYXRhU2VydmljZSBpbnN0YW5jZS5cclxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBPcHRpb25hbCBzZXR0aW5ncyBmb3IgdGhlIHJlZ2lzdGVyZWQgc2VydmljZS5cclxuICAgKi9cclxuICByZWdpc3RlclNlcnZpY2U6IGZ1bmN0aW9uIHJlZ2lzdGVyU2VydmljZShuYW1lLCBzZXJ2aWNlLCBvcHRpb25zID0ge30pIHtcclxuICAgIGNvbnN0IGluc3RhbmNlID0gc2VydmljZSBpbnN0YW5jZW9mIFNhZ2UuU0RhdGEuQ2xpZW50LlNEYXRhU2VydmljZSA/IHNlcnZpY2UgOiBuZXcgU2FnZS5TRGF0YS5DbGllbnQuU0RhdGFTZXJ2aWNlKHNlcnZpY2UpO1xyXG5cclxuICAgIHRoaXMuc2VydmljZXNbbmFtZV0gPSBpbnN0YW5jZTtcclxuXHJcbiAgICBpbnN0YW5jZS5vbigncmVxdWVzdHRpbWVvdXQnLCB0aGlzLm9uUmVxdWVzdFRpbWVvdXQsIHRoaXMpO1xyXG5cclxuICAgIGlmICgob3B0aW9ucy5pc0RlZmF1bHQgfHwgc2VydmljZS5pc0RlZmF1bHQpIHx8ICF0aGlzLmRlZmF1bHRTZXJ2aWNlKSB7XHJcbiAgICAgIHRoaXMuZGVmYXVsdFNlcnZpY2UgPSBpbnN0YW5jZTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIE9wdGlvbmFsIGNyZWF0ZXMsIHRoZW4gcmVnaXN0ZXJzIGFuIFNhZ2UuU0RhdGEuQ2xpZW50LlNEYXRhU2VydmljZSBhbmQgYWRkcyB0aGUgcmVzdWx0IHRvIGBBcHAuc2VydmljZXNgLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIFVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgc2VydmljZS5cclxuICAgKiBAcGFyYW0ge09iamVjdH0gZGVmaW5pdGlvbiBNYXkgYmUgYSBTRGF0YVNlcnZpY2UgaW5zdGFuY2Ugb3IgY29uc3RydWN0b3IgcGFyYW1ldGVycyB0byBjcmVhdGUgYSBuZXcgU0RhdGFTZXJ2aWNlIGluc3RhbmNlLlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIE9wdGlvbmFsIHNldHRpbmdzIGZvciB0aGUgcmVnaXN0ZXJlZCBzZXJ2aWNlLlxyXG4gICAqL1xyXG4gIHJlZ2lzdGVyQ29ubmVjdGlvbjogZnVuY3Rpb24gcmVnaXN0ZXJDb25uZWN0aW9uKG5hbWUsIGRlZmluaXRpb24sIG9wdGlvbnMgPSB7fSkge1xyXG4gICAgY29uc3QgaW5zdGFuY2UgPSBkZWZpbml0aW9uIGluc3RhbmNlb2YgU2FnZS5TRGF0YS5DbGllbnQuU0RhdGFTZXJ2aWNlID8gZGVmaW5pdGlvbiA6IG5ldyBTYWdlLlNEYXRhLkNsaWVudC5TRGF0YVNlcnZpY2UoZGVmaW5pdGlvbik7XHJcblxyXG4gICAgdGhpcy5fY29ubmVjdGlvbnNbbmFtZV0gPSBpbnN0YW5jZTtcclxuXHJcbiAgICBpbnN0YW5jZS5vbigncmVxdWVzdHRpbWVvdXQnLCB0aGlzLm9uUmVxdWVzdFRpbWVvdXQsIHRoaXMpO1xyXG5cclxuICAgIGlmICgob3B0aW9ucy5pc0RlZmF1bHQgfHwgZGVmaW5pdGlvbi5pc0RlZmF1bHQpIHx8ICF0aGlzLl9jb25uZWN0aW9ucy5kZWZhdWx0KSB7XHJcbiAgICAgIHRoaXMuX2Nvbm5lY3Rpb25zLmRlZmF1bHQgPSBpbnN0YW5jZTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9LFxyXG4gIG9uUmVxdWVzdFRpbWVvdXQ6IGZ1bmN0aW9uIF9vblRpbWVvdXQoKSB7XHJcbiAgICB0aGlzLnBpbmcoKTtcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIERldGVybWluZXMgdGhlIHRoZSBzcGVjaWZpZWQgc2VydmljZSBuYW1lIGlzIGZvdW5kIGluIHRoZSBBcHBzIHNlcnZpY2Ugb2JqZWN0LlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIE5hbWUgb2YgdGhlIFNEYXRhU2VydmljZSB0byBkZXRlY3RcclxuICAgKi9cclxuICBoYXNTZXJ2aWNlOiBmdW5jdGlvbiBoYXNTZXJ2aWNlKG5hbWUpIHtcclxuICAgIHJldHVybiAhIXRoaXMuc2VydmljZXNbbmFtZV07XHJcbiAgfSxcclxuICBfY3JlYXRlVmlld0NvbnRhaW5lcnM6IGZ1bmN0aW9uIF9jcmVhdGVWaWV3Q29udGFpbmVycygpIHtcclxuICAgIGNvbnN0IG5vZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmlld0NvbnRhaW5lcicpO1xyXG5cclxuICAgIGlmIChub2RlKSB7XHJcbiAgICAgIHRoaXMuX3Jvb3REb21Ob2RlID0gbm9kZTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLl9yb290RG9tTm9kZSA9PT0gbnVsbCB8fCB0eXBlb2YgdGhpcy5fcm9vdERvbU5vZGUgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgIHRoaXMuX3Jvb3REb21Ob2RlID0gZG9tQ29uc3RydWN0LmNyZWF0ZSgnZGl2Jywge1xyXG4gICAgICAgICdpZCc6ICd2aWV3Q29udGFpbmVyJyxcclxuICAgICAgICAnY2xhc3MnOiAndmlld0NvbnRhaW5lcicsXHJcbiAgICAgIH0sIHdpbi5ib2R5KCkpO1xyXG5cclxuICAgICAgY29uc3QgZHJhd2VycyA9IGRvbUNvbnN0cnVjdC5jcmVhdGUoJ2RpdicsIHtcclxuICAgICAgICAnY2xhc3MnOiAnZHJhd2VycyBhYnNvbHV0ZScsXHJcbiAgICAgIH0sIHdpbi5ib2R5KCkpO1xyXG5cclxuICAgICAgZG9tQ29uc3RydWN0LmNyZWF0ZSgnZGl2Jywge1xyXG4gICAgICAgICdjbGFzcyc6ICdvdmVydGhyb3cgbGVmdC1kcmF3ZXIgYWJzb2x1dGUnLFxyXG4gICAgICB9LCBkcmF3ZXJzKTtcclxuXHJcbiAgICAgIGRvbUNvbnN0cnVjdC5jcmVhdGUoJ2RpdicsIHtcclxuICAgICAgICAnY2xhc3MnOiAnb3ZlcnRocm93IHJpZ2h0LWRyYXdlciBhYnNvbHV0ZScsXHJcbiAgICAgIH0sIGRyYXdlcnMpO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogUmVnaXN0ZXJzIGEgdmlldyB3aXRoIHRoZSBhcHBsaWNhdGlvbiBhbmQgcmVuZGVycyBpdCB0byBIVE1MLlxyXG4gICAqIElmIHRoZSBhcHBsaWNhdGlvbiBoYXMgYWxyZWFkeSBiZWVuIGluaXRpYWxpemVkLCB0aGUgdmlldyBpcyBpbW1lZGlhdGVseSBpbml0aWFsaXplZCBhcyB3ZWxsLlxyXG4gICAqIEBwYXJhbSB7Vmlld30gdmlldyBBIHZpZXcgaW5zdGFuY2UgdG8gYmUgcmVnaXN0ZXJlZC5cclxuICAgKiBAcGFyYW0ge2RvbU5vZGV9IGRvbU5vZGUgT3B0aW9uYWwuIEEgRE9NIG5vZGUgdG8gcGxhY2UgdGhlIHZpZXcgaW4uXHJcbiAgICovXHJcbiAgcmVnaXN0ZXJWaWV3OiBmdW5jdGlvbiByZWdpc3RlclZpZXcodmlldywgZG9tTm9kZSkge1xyXG4gICAgdGhpcy52aWV3c1t2aWV3LmlkXSA9IHZpZXc7XHJcblxyXG4gICAgaWYgKCFkb21Ob2RlKSB7XHJcbiAgICAgIHRoaXMuX2NyZWF0ZVZpZXdDb250YWluZXJzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdmlldy5fcGxhY2VBdCA9IGRvbU5vZGUgfHwgdGhpcy5fcm9vdERvbU5vZGU7XHJcblxyXG4gICAgdGhpcy5vblJlZ2lzdGVyZWQodmlldyk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfSxcclxuICAvKipcclxuICAgKiBSZWdpc3RlcnMgYSB0b29sYmFyIHdpdGggdGhlIGFwcGxpY2F0aW9uIGFuZCByZW5kZXJzIGl0IHRvIEhUTUwuXHJcbiAgICogSWYgdGhlIGFwcGxpY2F0aW9uIGhhcyBhbHJlYWR5IGJlZW4gaW5pdGlhbGl6ZWQsIHRoZSB0b29sYmFyIGlzIGltbWVkaWF0ZWx5IGluaXRpYWxpemVkIGFzIHdlbGwuXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgVW5pcXVlIG5hbWUgb2YgdGhlIHRvb2xiYXJcclxuICAgKiBAcGFyYW0ge1Rvb2xiYXJ9IHRiYXIgVG9vbGJhciBpbnN0YW5jZSB0byByZWdpc3RlclxyXG4gICAqIEBwYXJhbSB7ZG9tTm9kZX0gZG9tTm9kZSBPcHRpb25hbC4gQSBET00gbm9kZSB0byBwbGFjZSB0aGUgdmlldyBpbi5cclxuICAgKi9cclxuICByZWdpc3RlclRvb2xiYXI6IGZ1bmN0aW9uIHJlZ2lzdGVyVG9vbGJhcihuLCB0LCBkb21Ob2RlKSB7XHJcbiAgICBsZXQgbmFtZSA9IG47XHJcbiAgICBsZXQgdGJhciA9IHQ7XHJcblxyXG4gICAgaWYgKHR5cGVvZiBuYW1lID09PSAnb2JqZWN0Jykge1xyXG4gICAgICB0YmFyID0gbmFtZTtcclxuICAgICAgbmFtZSA9IHRiYXIubmFtZTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmJhcnNbbmFtZV0gPSB0YmFyO1xyXG5cclxuICAgIGlmICh0aGlzLl9zdGFydGVkKSB7XHJcbiAgICAgIHRiYXIuaW5pdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghZG9tTm9kZSkge1xyXG4gICAgICB0aGlzLl9jcmVhdGVWaWV3Q29udGFpbmVycygpO1xyXG4gICAgfVxyXG5cclxuICAgIHRiYXIucGxhY2VBdChkb21Ob2RlIHx8IHRoaXMuX3Jvb3REb21Ob2RlLCAnbGFzdCcpO1xyXG5cclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogUmV0dXJucyBhbGwgdGhlIHJlZ2lzdGVyZWQgdmlld3MuXHJcbiAgICogQHJldHVybiB7Vmlld1tdfSBBbiBhcnJheSBjb250YWluaW5nIHRoZSBjdXJyZW50bHkgcmVnaXN0ZXJlZCB2aWV3cy5cclxuICAgKi9cclxuICBnZXRWaWV3czogZnVuY3Rpb24gZ2V0Vmlld3MoKSB7XHJcbiAgICBjb25zdCByZXN1bHRzID0gW107XHJcblxyXG4gICAgZm9yIChjb25zdCB2aWV3IGluIHRoaXMudmlld3MpIHtcclxuICAgICAgaWYgKHRoaXMudmlld3MuaGFzT3duUHJvcGVydHkodmlldykpIHtcclxuICAgICAgICByZXN1bHRzLnB1c2godGhpcy52aWV3c1t2aWV3XSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmVzdWx0cztcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIENoZWNrcyB0byBzZWUgaWYgdGhlIHBhc3NlZCB2aWV3IGluc3RhbmNlIGlzIHRoZSBjdXJyZW50bHkgYWN0aXZlIG9uZSBieSBjb21wYXJpbmcgaXQgdG8ge0BsaW5rICNnZXRQcmltYXJ5QWN0aXZlVmlldyBwcmltYXJ5QWN0aXZlVmlld30uXHJcbiAgICogQHBhcmFtIHtWaWV3fSB2aWV3XHJcbiAgICogQHJldHVybiB7Qm9vbGVhbn0gVHJ1ZSBpZiB0aGUgcGFzc2VkIHZpZXcgaXMgdGhlIHNhbWUgYXMgdGhlIGFjdGl2ZSB2aWV3LlxyXG4gICAqL1xyXG4gIGlzVmlld0FjdGl2ZTogZnVuY3Rpb24gaXNWaWV3QWN0aXZlKHZpZXcpIHtcclxuICAgIC8vIHRvZG86IGFkZCBjaGVjayBmb3IgbXVsdGlwbGUgYWN0aXZlIHZpZXdzLlxyXG4gICAgcmV0dXJuICh0aGlzLmdldFByaW1hcnlBY3RpdmVWaWV3KCkgPT09IHZpZXcpO1xyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogVGFsa3MgdG8gUmVVSSB0byBnZXQgdGhlIGN1cnJlbnQgcGFnZSBvciBkaWFsb2cgbmFtZSBhbmQgdGhlbiByZXR1cm5zIHRoZSByZXN1bHQgb2Yge0BsaW5rICNnZXRWaWV3IGdldFZpZXcobmFtZSl9LlxyXG4gICAqIEByZXR1cm4ge1ZpZXd9IFJldHVybnMgdGhlIGFjdGl2ZSB2aWV3IGluc3RhbmNlLCBpZiBubyB2aWV3IGlzIGFjdGl2ZSByZXR1cm5zIG51bGwuXHJcbiAgICovXHJcbiAgZ2V0UHJpbWFyeUFjdGl2ZVZpZXc6IGZ1bmN0aW9uIGdldFByaW1hcnlBY3RpdmVWaWV3KCkge1xyXG4gICAgY29uc3QgZWwgPSBSZVVJLmdldEN1cnJlbnRQYWdlKCkgfHwgUmVVSS5nZXRDdXJyZW50RGlhbG9nKCk7XHJcbiAgICBpZiAoZWwpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuZ2V0VmlldyhlbCk7XHJcbiAgICB9XHJcbiAgfSxcclxuICAvKipcclxuICAgKiBEZXRlcm1pbmVzIGlmIGFueSByZWdpc3RlcmVkIHZpZXcgaGFzIGJlZW4gcmVnaXN0ZXJlZCB3aXRoIHRoZSBwcm92aWRlZCBrZXkuXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGtleSBVbmlxdWUgaWQgb2YgdGhlIHZpZXcuXHJcbiAgICogQHJldHVybiB7Qm9vbGVhbn0gVHJ1ZSBpZiB0aGVyZSBpcyBhIHJlZ2lzdGVyZWQgdmlldyBuYW1lIG1hdGNoaW5nIHRoZSBrZXkuXHJcbiAgICovXHJcbiAgaGFzVmlldzogZnVuY3Rpb24gaGFzVmlldyhrZXkpIHtcclxuICAgIHJldHVybiAhIXRoaXMuX2ludGVybmFsR2V0Vmlldyh7XHJcbiAgICAgIGtleToga2V5LFxyXG4gICAgICBpbml0OiBmYWxzZSxcclxuICAgIH0pO1xyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogUmV0dXJucyB0aGUgcmVnaXN0ZXJlZCB2aWV3IGluc3RhbmNlIHdpdGggdGhlIGFzc29jaWF0ZWQga2V5LlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nL09iamVjdH0ga2V5IFRoZSBpZCBvZiB0aGUgdmlldyB0byByZXR1cm4sIGlmIG9iamVjdCB0aGVuIGBrZXkuaWRgIGlzIHVzZWQuXHJcbiAgICogQHJldHVybiB7Vmlld30gdmlldyBUaGUgcmVxdWVzdGVkIHZpZXcuXHJcbiAgICovXHJcbiAgZ2V0VmlldzogZnVuY3Rpb24gZ2V0VmlldyhrZXkpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbnRlcm5hbEdldFZpZXcoe1xyXG4gICAgICBrZXk6IGtleSxcclxuICAgICAgaW5pdDogdHJ1ZSxcclxuICAgIH0pO1xyXG4gIH0sXHJcbiAgX2ludGVybmFsR2V0VmlldzogZnVuY3Rpb24gX2ludGVybmFsR2V0VmlldyhvcHRpb25zKSB7XHJcbiAgICBjb25zdCBrZXkgPSBvcHRpb25zICYmIG9wdGlvbnMua2V5O1xyXG4gICAgY29uc3QgaW5pdCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5pbml0O1xyXG5cclxuICAgIGlmIChrZXkpIHtcclxuICAgICAgbGV0IHZpZXc7XHJcbiAgICAgIGlmICh0eXBlb2Yga2V5ID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHZpZXcgPSB0aGlzLnZpZXdzW2tleV07XHJcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGtleS5pZCA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICB2aWV3ID0gdGhpcy52aWV3c1trZXkuaWRdO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoaW5pdCAmJiB2aWV3ICYmICF2aWV3Ll9zdGFydGVkKSB7XHJcbiAgICAgICAgdmlldy5pbml0KHRoaXMuc3RhdGUkKTtcclxuICAgICAgICB2aWV3LnBsYWNlQXQodmlldy5fcGxhY2VBdCwgJ2ZpcnN0Jyk7XHJcbiAgICAgICAgdmlldy5fc3RhcnRlZCA9IHRydWU7XHJcbiAgICAgICAgdmlldy5fcGxhY2VBdCA9IG51bGw7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB2aWV3O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBudWxsO1xyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogUmV0dXJucyB0aGUgZGVmaW5lZCBzZWN1cml0eSBmb3IgYSBzcGVjaWZpYyB2aWV3XHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGtleSBJZCBvZiB0aGUgcmVnaXN0ZXJlZCB2aWV3IHRvIHF1ZXJ5LlxyXG4gICAqIEBwYXJhbSBhY2Nlc3NcclxuICAgKi9cclxuICBnZXRWaWV3U2VjdXJpdHk6IGZ1bmN0aW9uIGdldFZpZXdTZWN1cml0eShrZXksIGFjY2Vzcykge1xyXG4gICAgY29uc3QgdmlldyA9IHRoaXMuX2ludGVybmFsR2V0Vmlldyh7XHJcbiAgICAgIGtleToga2V5LFxyXG4gICAgICBpbml0OiBmYWxzZSxcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuICh2aWV3ICYmIHZpZXcuZ2V0U2VjdXJpdHkoYWNjZXNzKSk7XHJcbiAgfSxcclxuICAvKipcclxuICAgKiBSZXR1cm5zIHRoZSByZWdpc3RlcmVkIFNEYXRhU2VydmljZSBpbnN0YW5jZSBieSBuYW1lLCBvciByZXR1cm5zIHRoZSBkZWZhdWx0IHNlcnZpY2UuXHJcbiAgICogQHBhcmFtIHtTdHJpbmcvQm9vbGVhbn0gbmFtZSBJZiBzdHJpbmcgc2VydmljZSBpcyBsb29rZWQgdXAgYnkgbmFtZS4gSWYgZmFsc2UsIGRlZmF1bHQgc2VydmljZSBpcyByZXR1cm5lZC5cclxuICAgKiBAcmV0dXJuIHtPYmplY3R9IFRoZSByZWdpc3RlcmVkIFNhZ2UuU0RhdGEuQ2xpZW50LlNEYXRhU2VydmljZSBpbnN0YW5jZS5cclxuICAgKi9cclxuICBnZXRTZXJ2aWNlOiBmdW5jdGlvbiBnZXRTZXJ2aWNlKG5hbWUpIHtcclxuICAgIGlmICh0eXBlb2YgbmFtZSA9PT0gJ3N0cmluZycgJiYgdGhpcy5zZXJ2aWNlc1tuYW1lXSkge1xyXG4gICAgICByZXR1cm4gdGhpcy5zZXJ2aWNlc1tuYW1lXTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdGhpcy5kZWZhdWx0U2VydmljZTtcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIERldGVybWluZXMgdGhlIHRoZSBzcGVjaWZpZWQgc2VydmljZSBuYW1lIGlzIGZvdW5kIGluIHRoZSBBcHBzIHNlcnZpY2Ugb2JqZWN0LlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIE5hbWUgb2YgdGhlIFNEYXRhU2VydmljZSB0byBkZXRlY3RcclxuICAgKi9cclxuICBoYXNDb25uZWN0aW9uOiBmdW5jdGlvbiBoYXNDb25uZWN0aW9uKG5hbWUpIHtcclxuICAgIHJldHVybiAhIXRoaXMuX2Nvbm5lY3Rpb25zW25hbWVdO1xyXG4gIH0sXHJcbiAgZ2V0Q29ubmVjdGlvbjogZnVuY3Rpb24gZ2V0Q29ubmVjdGlvbihuYW1lKSB7XHJcbiAgICBpZiAodGhpcy5fY29ubmVjdGlvbnNbbmFtZV0pIHtcclxuICAgICAgcmV0dXJuIHRoaXMuX2Nvbm5lY3Rpb25zW25hbWVdO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0aGlzLl9jb25uZWN0aW9ucy5kZWZhdWx0O1xyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogU2V0cyB0aGUgYXBwbGljYXRpb25zIGN1cnJlbnQgdGl0bGUuXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IHRpdGxlIFRoZSBuZXcgdGl0bGUuXHJcbiAgICovXHJcbiAgc2V0UHJpbWFyeVRpdGxlOiBmdW5jdGlvbiBzZXRQcmltYXJ5VGl0bGUodGl0bGUpIHtcclxuICAgIGZvciAoY29uc3QgbiBpbiB0aGlzLmJhcnMpIHtcclxuICAgICAgaWYgKHRoaXMuYmFycy5oYXNPd25Qcm9wZXJ0eShuKSkge1xyXG4gICAgICAgIGlmICh0aGlzLmJhcnNbbl0ubWFuYWdlZCkge1xyXG4gICAgICAgICAgdGhpcy5iYXJzW25dLnNldCgndGl0bGUnLCB0aXRsZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfSxcclxuICAvKipcclxuICAgKiBSZXNpemUgaGFuZGxlLCBwdWJsaXNoZXMgdGhlIGdsb2JhbCBldmVudCBgL2FwcC9yZXNpemVgIHdoaWNoIHZpZXdzIG1heSBzdWJzY3JpYmUgdG8uXHJcbiAgICovXHJcbiAgb25SZXNpemU6IGZ1bmN0aW9uIG9uUmVzaXplKCkge1xyXG4gICAgaWYgKHRoaXMucmVzaXplVGltZXIpIHtcclxuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucmVzaXplVGltZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMucmVzaXplVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgY29ubmVjdC5wdWJsaXNoKCcvYXBwL3Jlc2l6ZScsIFtdKTtcclxuICAgIH0sIDEwMCk7XHJcbiAgfSxcclxuICBvblJlZ2lzdGVyZWQ6IGZ1bmN0aW9uIG9uUmVnaXN0ZXJlZCggLyp2aWV3Ki8gKSB7fSxcclxuICBvbkJlZm9yZVZpZXdUcmFuc2l0aW9uQXdheTogZnVuY3Rpb24gb25CZWZvcmVWaWV3VHJhbnNpdGlvbkF3YXkoIC8qdmlldyovICkge30sXHJcbiAgb25CZWZvcmVWaWV3VHJhbnNpdGlvblRvOiBmdW5jdGlvbiBvbkJlZm9yZVZpZXdUcmFuc2l0aW9uVG8oIC8qdmlldyovICkge30sXHJcbiAgb25WaWV3VHJhbnNpdGlvbkF3YXk6IGZ1bmN0aW9uIG9uVmlld1RyYW5zaXRpb25Bd2F5KCAvKnZpZXcqLyApIHt9LFxyXG4gIG9uVmlld1RyYW5zaXRpb25UbzogZnVuY3Rpb24gb25WaWV3VHJhbnNpdGlvblRvKCAvKnZpZXcqLyApIHt9LFxyXG4gIG9uVmlld0FjdGl2YXRlOiBmdW5jdGlvbiBvblZpZXdBY3RpdmF0ZSggLyp2aWV3LCB0YWcsIGRhdGEqLyApIHt9LFxyXG4gIF9vbkJlZm9yZVRyYW5zaXRpb246IGZ1bmN0aW9uIF9vbkJlZm9yZVRyYW5zaXRpb24oZXZ0KSB7XHJcbiAgICBjb25zdCB2aWV3ID0gdGhpcy5nZXRWaWV3KGV2dC50YXJnZXQpO1xyXG4gICAgaWYgKHZpZXcpIHtcclxuICAgICAgaWYgKGV2dC5vdXQpIHtcclxuICAgICAgICB0aGlzLl9iZWZvcmVWaWV3VHJhbnNpdGlvbkF3YXkodmlldyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5fYmVmb3JlVmlld1RyYW5zaXRpb25Ubyh2aWV3KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0sXHJcbiAgX29uQWZ0ZXJUcmFuc2l0aW9uOiBmdW5jdGlvbiBfb25BZnRlclRyYW5zaXRpb24oZXZ0KSB7XHJcbiAgICBjb25zdCB2aWV3ID0gdGhpcy5nZXRWaWV3KGV2dC50YXJnZXQpO1xyXG4gICAgaWYgKHZpZXcpIHtcclxuICAgICAgaWYgKGV2dC5vdXQpIHtcclxuICAgICAgICB0aGlzLl92aWV3VHJhbnNpdGlvbkF3YXkodmlldyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5fdmlld1RyYW5zaXRpb25Ubyh2aWV3KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0sXHJcbiAgX29uQWN0aXZhdGU6IGZ1bmN0aW9uIF9vbkFjdGl2YXRlKGV2dCkge1xyXG4gICAgY29uc3QgdmlldyA9IHRoaXMuZ2V0VmlldyhldnQudGFyZ2V0KTtcclxuICAgIGlmICh2aWV3KSB7XHJcbiAgICAgIHRoaXMuX3ZpZXdBY3RpdmF0ZSh2aWV3LCBldnQudGFnLCBldnQuZGF0YSk7XHJcbiAgICB9XHJcbiAgfSxcclxuICBfYmVmb3JlVmlld1RyYW5zaXRpb25Bd2F5OiBmdW5jdGlvbiBfYmVmb3JlVmlld1RyYW5zaXRpb25Bd2F5KHZpZXcpIHtcclxuICAgIHRoaXMub25CZWZvcmVWaWV3VHJhbnNpdGlvbkF3YXkodmlldyk7XHJcblxyXG4gICAgdmlldy5iZWZvcmVUcmFuc2l0aW9uQXdheSgpO1xyXG4gIH0sXHJcbiAgX2JlZm9yZVZpZXdUcmFuc2l0aW9uVG86IGZ1bmN0aW9uIF9iZWZvcmVWaWV3VHJhbnNpdGlvblRvKHZpZXcpIHtcclxuICAgIHRoaXMub25CZWZvcmVWaWV3VHJhbnNpdGlvblRvKHZpZXcpO1xyXG5cclxuICAgIGZvciAoY29uc3QgbiBpbiB0aGlzLmJhcnMpIHtcclxuICAgICAgaWYgKHRoaXMuYmFyc1tuXS5tYW5hZ2VkKSB7XHJcbiAgICAgICAgdGhpcy5iYXJzW25dLmNsZWFyKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB2aWV3LmJlZm9yZVRyYW5zaXRpb25UbygpO1xyXG4gIH0sXHJcbiAgX3ZpZXdUcmFuc2l0aW9uQXdheTogZnVuY3Rpb24gX3ZpZXdUcmFuc2l0aW9uQXdheSh2aWV3KSB7XHJcbiAgICB0aGlzLm9uVmlld1RyYW5zaXRpb25Bd2F5KHZpZXcpO1xyXG5cclxuICAgIHZpZXcudHJhbnNpdGlvbkF3YXkoKTtcclxuICB9LFxyXG4gIF92aWV3VHJhbnNpdGlvblRvOiBmdW5jdGlvbiBfdmlld1RyYW5zaXRpb25Ubyh2aWV3KSB7XHJcbiAgICB0aGlzLm9uVmlld1RyYW5zaXRpb25Ubyh2aWV3KTtcclxuXHJcbiAgICBjb25zdCB0b29scyA9ICh2aWV3Lm9wdGlvbnMgJiYgdmlldy5vcHRpb25zLnRvb2xzKSB8fCB2aWV3LmdldFRvb2xzKCkgfHwge307XHJcblxyXG4gICAgZm9yIChjb25zdCBuIGluIHRoaXMuYmFycykge1xyXG4gICAgICBpZiAodGhpcy5iYXJzW25dLm1hbmFnZWQpIHtcclxuICAgICAgICB0aGlzLmJhcnNbbl0uc2hvd1Rvb2xzKHRvb2xzW25dKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHZpZXcudHJhbnNpdGlvblRvKCk7XHJcbiAgfSxcclxuICBfdmlld0FjdGl2YXRlOiBmdW5jdGlvbiBfdmlld0FjdGl2YXRlKHZpZXcsIHRhZywgZGF0YSkge1xyXG4gICAgdGhpcy5vblZpZXdBY3RpdmF0ZSh2aWV3KTtcclxuXHJcbiAgICB2aWV3LmFjdGl2YXRlKHRhZywgZGF0YSk7XHJcbiAgfSxcclxuICAvKipcclxuICAgKiBTZWFyY2hlcyBSZVVJLmNvbnRleHQuaGlzdG9yeSBieSBwYXNzaW5nIGEgcHJlZGljYXRlIGZ1bmN0aW9uIHRoYXQgc2hvdWxkIHJldHVybiB0cnVlIGlmIGEgbWF0Y2ggaXMgZm91bmQsIGZhbHNlIG90aGVyd2lzZS5cclxuICAgKiBUaGlzIGlzIHNpbWlsYXIgdG8gcXVlcnlOYXZpZ2F0aW9uQ29udGV4dCwgaG93ZXZlciwgdGhpcyBmdW5jdGlvbiB3aWxsIHJldHVybiBhbiBhcnJheSBvZiBmb3VuZCBpdGVtcyBpbnN0ZWFkIG9mIGEgc2luZ2xlIGl0ZW0uXHJcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZGljYXRlXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IHNjb3BlXHJcbiAgICogQHJldHVybiB7QXJyYXl9IGNvbnRleHQgaGlzdG9yeSBmaWx0ZXJlZCBvdXQgYnkgdGhlIHByZWRpY2F0ZS5cclxuICAgKi9cclxuICBmaWx0ZXJOYXZpZ2F0aW9uQ29udGV4dDogZnVuY3Rpb24gZmlsdGVyTmF2aWdhdGlvbkNvbnRleHQocHJlZGljYXRlLCBzY29wZSkge1xyXG4gICAgY29uc3QgbGlzdCA9IFJlVUkuY29udGV4dC5oaXN0b3J5IHx8IFtdO1xyXG4gICAgY29uc3QgZmlsdGVyZWQgPSBhcnJheS5maWx0ZXIobGlzdCwgZnVuY3Rpb24gZmlsdGVyKGl0ZW0pIHtcclxuICAgICAgcmV0dXJuIHByZWRpY2F0ZS5jYWxsKHNjb3BlIHx8IHRoaXMsIGl0ZW0uZGF0YSk7XHJcbiAgICB9LmJpbmQodGhpcykpO1xyXG5cclxuICAgIHJldHVybiBhcnJheS5tYXAoZmlsdGVyZWQsIGZ1bmN0aW9uIG1hcChpdGVtKSB7XHJcbiAgICAgIHJldHVybiBpdGVtLmRhdGE7XHJcbiAgICB9KTtcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIFNlYXJjaGVzIFJlVUkuY29udGV4dC5oaXN0b3J5IGJ5IHBhc3NpbmcgYSBwcmVkaWNhdGUgZnVuY3Rpb24gdGhhdCBzaG91bGQgcmV0dXJuIHRydWVcclxuICAgKiB3aGVuIGEgbWF0Y2ggaXMgZm91bmQuXHJcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZGljYXRlIEZ1bmN0aW9uIHRoYXQgaXMgY2FsbGVkIGluIHRoZSBwcm92aWRlZCBzY29wZSB3aXRoIHRoZSBjdXJyZW50IGhpc3RvcnkgaXRlcmF0aW9uLiBJdCBzaG91bGQgcmV0dXJuIHRydWUgaWYgdGhlIGhpc3RvcnkgaXRlbSBpcyB0aGUgZGVzaXJlZCBjb250ZXh0LlxyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBkZXB0aFxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBzY29wZVxyXG4gICAqIEByZXR1cm4ge09iamVjdC9Cb29sZWFufSBjb250ZXh0IEhpc3RvcnkgZGF0YSBjb250ZXh0IGlmIGZvdW5kLCBmYWxzZSBpZiBub3QuXHJcbiAgICovXHJcbiAgcXVlcnlOYXZpZ2F0aW9uQ29udGV4dDogZnVuY3Rpb24gcXVlcnlOYXZpZ2F0aW9uQ29udGV4dChwcmVkaWNhdGUsIGQsIHMpIHtcclxuICAgIGxldCBzY29wZSA9IHM7XHJcbiAgICBsZXQgZGVwdGggPSBkO1xyXG5cclxuICAgIGlmICh0eXBlb2YgZGVwdGggIT09ICdudW1iZXInKSB7XHJcbiAgICAgIHNjb3BlID0gZGVwdGg7XHJcbiAgICAgIGRlcHRoID0gMDtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBsaXN0ID0gUmVVSS5jb250ZXh0Lmhpc3RvcnkgfHwgW107XHJcblxyXG4gICAgZGVwdGggPSBkZXB0aCB8fCAwO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSBsaXN0Lmxlbmd0aCAtIDIsIGogPSAwOyBpID49IDAgJiYgKGRlcHRoIDw9IDAgfHwgaiA8IGRlcHRoKTsgaS0tLCBqKyspIHtcclxuICAgICAgaWYgKHByZWRpY2F0ZS5jYWxsKHNjb3BlIHx8IHRoaXMsIGxpc3RbaV0uZGF0YSkpIHtcclxuICAgICAgICByZXR1cm4gbGlzdFtpXS5kYXRhO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogU2hvcnRjdXQgbWV0aG9kIHRvIHtAbGluayAjcXVlcnlOYXZpZ2F0aW9uQ29udGV4dCBxdWVyeU5hdmlnYXRpb25Db250ZXh0fSB0aGF0IG1hdGNoZXMgdGhlIHNwZWNpZmllZCByZXNvdXJjZUtpbmQgcHJvdmlkZWRcclxuICAgKiBAcGFyYW0ge1N0cmluZy9TdHJpbmdbXX0ga2luZCBUaGUgcmVzb3VyY2VLaW5kKHMpIHRoZSBoaXN0b3J5IGl0ZW0gbXVzdCBtYXRjaFxyXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRpY2F0ZSBPcHRpb25hbC4gSWYgcHJvdmlkZWQgaXQgd2lsbCBiZSBjYWxsZWQgb24gbWF0Y2hlcyBzbyB5b3UgbWF5IGRvIGFuIHNlY29uZGFyeSBjaGVjayBvZiB0aGUgaXRlbSAtIHJldHVybmluZyB0cnVlIGZvciBnb29kIGl0ZW1zLlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBzY29wZSBTY29wZSB0aGUgcHJlZGljYXRlIHNob3VsZCBiZSBjYWxsZWQgaW4uXHJcbiAgICogQHJldHVybiB7T2JqZWN0fSBjb250ZXh0IEhpc3RvcnkgZGF0YSBjb250ZXh0IGlmIGZvdW5kLCBmYWxzZSBpZiBub3QuXHJcbiAgICovXHJcbiAgaXNOYXZpZ2F0aW9uRnJvbVJlc291cmNlS2luZDogZnVuY3Rpb24gaXNOYXZpZ2F0aW9uRnJvbVJlc291cmNlS2luZChraW5kLCBwcmVkaWNhdGUsIHNjb3BlKSB7XHJcbiAgICBjb25zdCBsb29rdXAgPSB7fTtcclxuICAgIGlmIChsYW5nLmlzQXJyYXkoa2luZCkpIHtcclxuICAgICAgYXJyYXkuZm9yRWFjaChraW5kLCBmdW5jdGlvbiBmb3JFYWNoKGl0ZW0pIHtcclxuICAgICAgICB0aGlzW2l0ZW1dID0gdHJ1ZTtcclxuICAgICAgfSwgbG9va3VwKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGxvb2t1cFtraW5kXSA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXMucXVlcnlOYXZpZ2F0aW9uQ29udGV4dChmdW5jdGlvbiBxdWVyeU5hdmlnYXRpb25Db250ZXh0KG8pIHtcclxuICAgICAgY29uc3QgY29udGV4dCA9IChvLm9wdGlvbnMgJiYgby5vcHRpb25zLnNvdXJjZSkgfHwgbztcclxuICAgICAgY29uc3QgcmVzb3VyY2VLaW5kID0gY29udGV4dCAmJiBjb250ZXh0LnJlc291cmNlS2luZDtcclxuXHJcbiAgICAgIC8vIGlmIGEgcHJlZGljYXRlIGlzIGRlZmluZWQsIGJvdGggcmVzb3VyY2VLaW5kIEFORCBwcmVkaWNhdGUgbXVzdCBtYXRjaC5cclxuICAgICAgaWYgKGxvb2t1cFtyZXNvdXJjZUtpbmRdKSB7XHJcbiAgICAgICAgaWYgKHByZWRpY2F0ZSkge1xyXG4gICAgICAgICAgaWYgKHByZWRpY2F0ZS5jYWxsKHNjb3BlIHx8IHRoaXMsIG8sIGNvbnRleHQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBvO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICByZXR1cm4gbztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogUmVnaXN0ZXJzIGEgY3VzdG9taXphdGlvbiB0byBhIHRhcmdldCBwYXRoLlxyXG4gICAqXHJcbiAgICogQSBDdXN0b21pemF0aW9uIFNwZWMgaXMgYSBzcGVjaWFsIG9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcga2V5czpcclxuICAgKlxyXG4gICAqICogYGF0YDogYGZ1bmN0aW9uKGl0ZW0pYCAtIHBhc3NlcyB0aGUgY3VycmVudCBpdGVtIGluIHRoZSBsaXN0LCB0aGUgZnVuY3Rpb24gc2hvdWxkIHJldHVybiB0cnVlIGlmIHRoaXMgaXMgdGhlIGl0ZW0gYmVpbmcgbW9kaWZpZWQgKG9yIGlzIGF0IHdoZXJlIHlvdSB3YW50IHRvIGluc2VydCBzb21ldGhpbmcpLlxyXG4gICAqICogYGF0YDogYHtOdW1iZXJ9YCAtIE1heSBvcHRpb25hbGx5IGRlZmluZSB0aGUgaW5kZXggb2YgdGhlIGl0ZW0gaW5zdGVhZCBvZiBhIGZ1bmN0aW9uLlxyXG4gICAqICogYHR5cGVgOiBge1N0cmluZ31gIC0gZW51bSBvZiBgaW5zZXJ0YCwgYG1vZGlmeWAsIGByZXBsYWNlYCBvciBgcmVtb3ZlYCB0aGF0IGluZGljYXRlcyB0aGUgdHlwZSBvZiBjdXN0b21pemF0aW9uLlxyXG4gICAqICogYHdoZXJlYDogYHtTdHJpbmd9YCAtIGVudW0gb2YgYGJlZm9yZWAgb3IgYGFmdGVyYCBvbmx5IG5lZWRlZCB3aGVuIHR5cGUgaXMgYGluc2VydGAuXHJcbiAgICogKiBgdmFsdWVgOiBge09iamVjdH1gIC0gdGhlIGVudGlyZSBvYmplY3QgdG8gY3JlYXRlIChpbnNlcnQgb3IgcmVwbGFjZSkgb3IgdGhlIHZhbHVlcyB0byBvdmVyd3JpdGUgKG1vZGlmeSksIG5vdCBuZWVkZWQgZm9yIHJlbW92ZS5cclxuICAgKiAqIGB2YWx1ZWA6IGB7T2JqZWN0W119YCAtIGlmIGluc2VydGluZyB5b3UgbWF5IHBhc3MgYW4gYXJyYXkgb2YgaXRlbXMgdG8gY3JlYXRlLlxyXG4gICAqXHJcbiAgICogTm90ZTogVGhpcyBhbHNvIGFjY2VwdHMgdGhlIGxlZ2FjeSBzaWduYXR1cmU6XHJcbiAgICogYHJlZ2lzdGVyQ3VzdG9taXphdGlvbihwYXRoLCBpZCwgc3BlYylgXHJcbiAgICogV2hlcmUgdGhlIHBhdGggaXMgYGxpc3QvdG9vbHNgIGFuZCBgaWRgIGlzIHRoZSB2aWV3IGlkXHJcbiAgICpcclxuICAgKiBBbGwgY3VzdG9taXphdGlvbnMgYXJlIHJlZ2lzdGVyZWQgdG8gYHRoaXMuY3VzdG9taXphdGlvbnNbcGF0aF1gLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGggVGhlIGN1c3RvbWl6YXRpb24gc2V0IHN1Y2ggYXMgYGxpc3QvdG9vbHMjYWNjb3VudF9saXN0YCBvciBgZGV0YWlsI2NvbnRhY3RfZGV0YWlsYC4gRmlyc3QgaGFsZiBiZWluZyB0aGUgdHlwZSBvZiBjdXN0b21pemF0aW9uIGFuZCB0aGUgc2Vjb25kIHRoZSB2aWV3IGlkLlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBzcGVjIFRoZSBjdXN0b21pemF0aW9uIHNwZWNpZmljYXRpb25cclxuICAgKi9cclxuICByZWdpc3RlckN1c3RvbWl6YXRpb246IGZ1bmN0aW9uIHJlZ2lzdGVyQ3VzdG9taXphdGlvbihwLCBzKSB7XHJcbiAgICBsZXQgcGF0aCA9IHA7XHJcbiAgICBsZXQgc3BlYyA9IHM7XHJcblxyXG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAyKSB7XHJcbiAgICAgIGNvbnN0IGN1c3RvbWl6YXRpb25TZXQgPSBhcmd1bWVudHNbMF07XHJcbiAgICAgIGNvbnN0IGlkID0gYXJndW1lbnRzWzFdO1xyXG5cclxuICAgICAgc3BlYyA9IGFyZ3VtZW50c1syXTtcclxuICAgICAgcGF0aCA9IGlkID8gY3VzdG9taXphdGlvblNldCArICcjJyArIGlkIDogY3VzdG9taXphdGlvblNldDtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmN1c3RvbWl6YXRpb25zW3BhdGhdIHx8ICh0aGlzLmN1c3RvbWl6YXRpb25zW3BhdGhdID0gW10pO1xyXG4gICAgaWYgKGNvbnRhaW5lcikge1xyXG4gICAgICBjb250YWluZXIucHVzaChzcGVjKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIFJldHVybnMgdGhlIGN1c3RvbWl6YXRpb25zIHJlZ2lzdGVyZWQgZm9yIHRoZSBwcm92aWRlZCBwYXRoLlxyXG4gICAqXHJcbiAgICogTm90ZTogVGhpcyBhbHNvIGFjY2VwdHMgdGhlIGxlZ2FjeSBzaWduYXR1cmU6XHJcbiAgICogYGdldEN1c3RvbWl6YXRpb25zRm9yKHNldCwgaWQpYFxyXG4gICAqIFdoZXJlIHRoZSBwYXRoIGlzIGBsaXN0L3Rvb2xzYCBhbmQgYGlkYCBpcyB0aGUgdmlldyBpZFxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGggVGhlIGN1c3RvbWl6YXRpb24gc2V0IHN1Y2ggYXMgYGxpc3QvdG9vbHMjYWNjb3VudF9saXN0YCBvciBgZGV0YWlsI2NvbnRhY3RfZGV0YWlsYC4gRmlyc3QgaGFsZiBiZWluZyB0aGUgdHlwZSBvZiBjdXN0b21pemF0aW9uIGFuZCB0aGUgc2Vjb25kIHRoZSB2aWV3IGlkLlxyXG4gICAqL1xyXG4gIGdldEN1c3RvbWl6YXRpb25zRm9yOiBmdW5jdGlvbiBnZXRDdXN0b21pemF0aW9uc0ZvcihwKSB7XHJcbiAgICBsZXQgcGF0aCA9IHA7XHJcblxyXG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XHJcbiAgICAgIHBhdGggPSBhcmd1bWVudHNbMV0gPyBhcmd1bWVudHNbMF0gKyAnIycgKyBhcmd1bWVudHNbMV0gOiBhcmd1bWVudHNbMF07XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgc2VnbWVudHMgPSBwYXRoLnNwbGl0KCcjJyk7XHJcbiAgICBjb25zdCBjdXN0b21pemF0aW9uU2V0ID0gc2VnbWVudHNbMF07XHJcbiAgICBjb25zdCBmb3JQYXRoID0gdGhpcy5jdXN0b21pemF0aW9uc1twYXRoXSB8fCBbXTtcclxuICAgIGNvbnN0IGZvclNldCA9IHRoaXMuY3VzdG9taXphdGlvbnNbY3VzdG9taXphdGlvblNldF0gfHwgW107XHJcblxyXG4gICAgcmV0dXJuIGZvclBhdGguY29uY2F0KGZvclNldCk7XHJcbiAgfSxcclxuICBoYXNBY2Nlc3NUbzogZnVuY3Rpb24gaGFzQWNjZXNzVG8oIC8qc2VjdXJpdHkqLyApIHtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogT3ZlcnJpZGUgdGhpcyBmdW5jdGlvbiB0byBsb2FkIGEgdmlldyBpbiB0aGUgbGVmdCBkcmF3ZXIuXHJcbiAgICovXHJcbiAgc2hvd0xlZnREcmF3ZXI6IGZ1bmN0aW9uIHNob3dMZWZ0RHJhd2VyKCkge1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfSxcclxuICAvKipcclxuICAgKiBPdmVycmlkZSB0aGlzIGZ1bmN0aW9uIHRvIGxvYWQgYSB2aWV3IGluIHRoZSByaWdodCBkcmF3ZXIuXHJcbiAgICovXHJcbiAgc2hvd1JpZ2h0RHJhd2VyOiBmdW5jdGlvbiBzaG93UmlnaHREcmF3ZXIoKSB7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIExvYWRzIFNuYXAuanMgYW5kIGFzc2lnbnMgdGhlIGluc3RhbmNlIHRvIEFwcC5zbmFwcGVyLiBUaGlzIG1ldGhvZCB3b3VsZCB0eXBpY2FsbHkgYmUgY2FsbGVkIGJlZm9yZSBuYXZpZ2F0aW5nIHRvIHRoZSBpbml0aWFsIHZpZXcsIHNvIHRoZSBsb2dpbiBwYWdlIGRvZXMgbm90IGNvbnRhaW4gdGhlIG1lbnUuXHJcbiAgICogQHBhcmFtIHtET01Ob2RlfSBlbGVtZW50IE9wdGlvbmFsLiBTbmFwLmpzIG9wdGlvbnMuZWxlbWVudCBwcm9wZXJ0eS4gSWYgbm90IHByb3ZpZGVkIGRlZmF1bHRzIHRvIHRoZSBcInZpZXdDb250YWllbnJcIiBET01Ob2RlLlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIE9wdGlvbmFsLiBTbmFwLmpzIG9wdGlvbnMgb2JqZWN0LiBBIGRlZmF1bHQgaXMgcHJvdmlkZWQgaWYgdGhpcyBpcyB1bmRlZmluZWQuIFByb3ZpZGluZyBvcHRpb25zIHdpbGwgb3ZlcnJpZGUgdGhlIGVsZW1lbnQgcGFyYW1ldGVyLlxyXG4gICAqL1xyXG4gIGxvYWRTbmFwcGVyOiBmdW5jdGlvbiBsb2FkU25hcHBlcihlbGVtZW50LCBvcHRpb25zKSB7XHJcbiAgICAvLyBUT0RPOiBQcm92aWRlIGEgZG9tTm9kZSBwYXJhbSBhbmQgZGVmYXVsdCB0byB2aWV3Q29udGFpbmVyIGlmIG5vdCBwcm92aWRlZFxyXG4gICAgaWYgKHRoaXMuc25hcHBlcikge1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBzbmFwcGVyID0gbmV3IHNuYXAob3B0aW9ucyB8fCB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcclxuICAgICAgZWxlbWVudDogZWxlbWVudCB8fCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmlld0NvbnRhaW5lcicpLFxyXG4gICAgICBkcmFnZ2VyOiBudWxsLFxyXG4gICAgICBkaXNhYmxlOiAnbm9uZScsXHJcbiAgICAgIGFkZEJvZHlDbGFzc2VzOiB0cnVlLFxyXG4gICAgICBoeXBlcmV4dGVuc2libGU6IGZhbHNlLFxyXG4gICAgICByZXNpc3RhbmNlOiAwLjEsXHJcbiAgICAgIGZsaWNrVGhyZXNob2xkOiA1MCxcclxuICAgICAgdHJhbnNpdGlvblNwZWVkOiAwLjIsXHJcbiAgICAgIGVhc2luZzogJ2Vhc2UnLFxyXG4gICAgICBtYXhQb3NpdGlvbjogMjY2LFxyXG4gICAgICBtaW5Qb3NpdGlvbjogLTI2NixcclxuICAgICAgdGFwVG9DbG9zZTogaGFzKCdpZScpID8gZmFsc2UgOiB0cnVlLCAvLyBjYXVzZXMgaXNzdWVzIG9uIHdpbmRvd3MgcGhvbmVzIHdoZXJlIHRhcHBpbmcgdGhlIGNsb3NlIGJ1dHRvbiBjYXVzZXMgc25hcC5qcyBlbmREcmFnIHRvIGZpcmUsIGNsb3NpbmcgdGhlIG1lbnUgYmVmb3JlIHdlIGNhbiBjaGVjayB0aGUgc3RhdGUgcHJvcGVybHlcclxuICAgICAgdG91Y2hUb0RyYWc6IGZhbHNlLFxyXG4gICAgICBzbGlkZUludGVudDogNDAsXHJcbiAgICAgIG1pbkRyYWdEaXN0YW5jZTogNSxcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuc25hcHBlciA9IHNuYXBwZXI7XHJcblxyXG4gICAgdGhpcy5zaG93TGVmdERyYXdlcigpO1xyXG4gICAgdGhpcy5zaG93UmlnaHREcmF3ZXIoKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH0sXHJcbiAgc2V0VG9vbEJhck1vZGU6IGZ1bmN0aW9uIHNldFRvb2xCYXJNb2RlKG9uTGluZSkge1xyXG4gICAgZm9yIChjb25zdCBuIGluIHRoaXMuYmFycykge1xyXG4gICAgICBpZiAodGhpcy5iYXJzW25dLm1hbmFnZWQpIHtcclxuICAgICAgICB0aGlzLmJhcnNbbl0uc2V0TW9kZShvbkxpbmUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSxcclxufSk7XHJcblxyXG4vLyBCYWNrd2FyZHMgY29tcGF0aWJpbGl0eSBmb3IgY3VzdG9tIG1vZHVsZXMgc3RpbGwgcmVmZXJlbmNpbmcgdGhlIG9sZCBkZWNsYXJlIGdsb2JhbFxyXG5sYW5nLnNldE9iamVjdCgnU2FnZS5QbGF0Zm9ybS5Nb2JpbGUuQXBwbGljYXRpb24nLCBfX2NsYXNzKTtcclxuZXhwb3J0IGRlZmF1bHQgX19jbGFzcztcclxuIl19
</pre>
</body>
</html>
