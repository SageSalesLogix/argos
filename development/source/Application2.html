<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">define('argos/Application', ['exports', 'module', 'dojo/json', 'dojo/_base/array', 'dojo/_base/connect', 'dojo/aspect', 'dojo/_base/declare', 'dojo/_base/lang', 'dojo/_base/window', 'dojo/hash', 'dojo/has', 'dojo/dom-construct', 'dojo/promise/all', 'snap', './ReUI/main', 'dojo/ready', './Utility', './Models/Manager', './Dialogs/Toast', './Model', './Intent', './Intents/update-connection', './Dialogs/Modal', './Dialogs/BusyIndicator', 'dojo/Deferred', './ErrorManager', './I18n', 'dojo/sniff'], function (exports, module, _dojoJson, _dojo_baseArray, _dojo_baseConnect, _dojoAspect, _dojo_baseDeclare, _dojo_baseLang, _dojo_baseWindow, _dojoHash, _dojoHas, _dojoDomConstruct, _dojoPromiseAll, _snap, _ReUIMain, _dojoReady, _Utility, _ModelsManager, _DialogsToast, _Model, _Intent, _IntentsUpdateConnection, _DialogsModal, _DialogsBusyIndicator, _dojoDeferred, _ErrorManager, _I18n, _dojoSniff) {
  function _interopRequireDefault(obj) { return obj &amp;&amp; obj.__esModule ? obj : { 'default': obj }; }

  /* Copyright (c) 2010, Sage Software, Inc. All rights reserved.
   *
   * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *     http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */

  var _json = _interopRequireDefault(_dojoJson);

  var _array = _interopRequireDefault(_dojo_baseArray);

  var _connect = _interopRequireDefault(_dojo_baseConnect);

  var _aspect = _interopRequireDefault(_dojoAspect);

  var _declare = _interopRequireDefault(_dojo_baseDeclare);

  var _lang = _interopRequireDefault(_dojo_baseLang);

  var _win = _interopRequireDefault(_dojo_baseWindow);

  var _hash = _interopRequireDefault(_dojoHash);

  var _has = _interopRequireDefault(_dojoHas);

  var _domConstruct = _interopRequireDefault(_dojoDomConstruct);

  var _all = _interopRequireDefault(_dojoPromiseAll);

  var _snap2 = _interopRequireDefault(_snap);

  var _ReUI = _interopRequireDefault(_ReUIMain);

  var _ready = _interopRequireDefault(_dojoReady);

  var _util = _interopRequireDefault(_Utility);

  var _ModelManager = _interopRequireDefault(_ModelsManager);

  var _Toast = _interopRequireDefault(_DialogsToast);

  var _Modal = _interopRequireDefault(_DialogsModal);

  var _BusyIndicator = _interopRequireDefault(_DialogsBusyIndicator);

  var _Deferred = _interopRequireDefault(_dojoDeferred);

  var _ErrorManager2 = _interopRequireDefault(_ErrorManager);

  var _getResource = _interopRequireDefault(_I18n);

  var resource = (0, _getResource['default'])('sdkApplication');

  _has['default'].add('html5-file-api', function hasFileApi(global) {
    if ((0, _has['default'])('ie')) {
      return false;
    }

    if (global.File &amp;&amp; global.FileReader &amp;&amp; global.FileList &amp;&amp; global.Blob) {
      return true;
    }
    return false;
  });

  _lang['default'].extend(Function, {
    // TODO: Deprecate this in favor of the standard &quot;bind&quot;
    bindDelegate: function bindDelegate(scope) {
      var self = this;

      if (arguments.length === 1) {
        return function bound() {
          return self.apply(scope || this, arguments);
        };
      }

      var optional = Array.prototype.slice.call(arguments, 1);
      return function boundWArgs() {
        var called = Array.prototype.slice.call(arguments, 0);
        return self.apply(scope || this, called.concat(optional));
      };
    }
  });

  // Patching backwards compatablity so that customizations will not break and where moment
  // was required.
  define('moment', [], function getMoment() {
    // eslint-disable-line
    return window.moment;
  });

  function applyLocalizationTo(object, localization) {
    if (!object) {
      return;
    }

    var target = object.prototype || object;
    for (var key in localization) {
      if (_lang['default'].isObject(localization[key])) {
        applyLocalizationTo(target[key], localization[key]);
      } else {
        target[key] = localization[key];
      }
    }
  }

  function localize(name, localization) {
    var target = _lang['default'].getObject(name);
    if (target &amp;&amp; target.prototype) {
      target = target.prototype;
    }

    if (target) {
      applyLocalizationTo(target, localization);
    }
  }

  function mergeConfiguration(baseConfiguration, moduleConfiguration) {
    if (baseConfiguration) {
      if (baseConfiguration.modules &amp;&amp; moduleConfiguration.modules) {
        baseConfiguration.modules = baseConfiguration.modules.concat(moduleConfiguration.modules);
      }

      if (baseConfiguration.connections &amp;&amp; moduleConfiguration.connections) {
        baseConfiguration.connections = _lang['default'].mixin(baseConfiguration.connections, moduleConfiguration.connections);
      }
    }

    return baseConfiguration;
  }

  _lang['default'].mixin(_win['default'].global, {
    'localize': localize,
    'mergeConfiguration': mergeConfiguration
  });

<span id='argos-Application'>  /**
</span>   * @class argos.Application
   * Application is a nexus that provides many routing and global application services that may be used
   * from anywhere within the app.
   *
   * It provides a shortcut alias to `window.App` (`App`) with the most common usage being `App.getView(id)`.
   *
   * @alternateClassName App
   */
  var __class = (0, _declare['default'])('argos.Application', null, {
<span id='argos-Application-property-enableConcurrencyCheck'>    /**
</span>     * @property enableConcurrencyCheck {Boolean} Option to skip concurrency checks to avoid precondition/412 errors.
     */
    enableConcurrencyCheck: false,

<span id='argos-Application-property-ReUI'>    /**
</span>     * Instance of a ReUI
     */
    ReUI: _ReUI['default'],

<span id='argos-Application-property-viewShowOptions'>    /**
</span>     * @property viewShowOptions {Array} Array with one configuration object that gets pushed before showing a view.
     * Allows passing in options via routing. Value gets removed once the view is shown.
     */
    viewShowOptions: null,

<span id='argos-Application-property-snapper'>    /**
</span>     * Instance of a Snap.js object (https://github.com/jakiestfu/Snap.js/)
     */
    snapper: null,

<span id='argos-Application-property-currentOrientation'>    /**
</span>     * @property {String}
     * Current orientation of the application. Can be landscape or portrait.
     */
    currentOrientation: 'portrait',

<span id='argos-Application-property-_connects'>    /**
</span>     * Array of all connections for App
     * @property {Object[]}
     * @private
     */
    _connects: null,

<span id='argos-Application-property-_signals'>    /**
</span>     * Array of handles for App
     * @property {Object[]}
     * @private
     */
    _signals: null,

<span id='argos-Application-property-_subscribes'>    /**
</span>     * @private
     * Array of all subscriptions for App
     */
    _subscribes: null,

<span id='argos-Application-property-_appStatePromises'>    /**
</span>     * Array of promises to load app state
     * @property {Array}
     * @private
     */
    _appStatePromises: null,

<span id='argos-Application-property-_started'>    /**
</span>     * Signifies the App has been initialized
     * @property {Boolean}
     * @private
     */
    _started: false,

    _rootDomNode: null,
    customizations: null,
    services: null, // TODO: Remove
    _connections: null,
    modules: null,
    views: null,
    hash: _hash['default'],
    onLine: true,
    _currentPage: null,
<span id='argos-Application-property-bars'>    /**
</span>     * Toolbar instances by key name
     * @property {Object}
     */
    bars: null,
    enableCaching: false,
<span id='argos-Application-property-defaultService'>    /**
</span>     * The default Sage.SData.Client.SDataService instance
     * @property {Object}
     */
    defaultService: null,
    resizeTimer: null,

<span id='argos-Application-property-redirectHash'>    /**
</span>     * The hash to redirect to after login.
     * @property {String}
     */
    redirectHash: '',
<span id='argos-Application-property-maxUploadFileSize'>    /**
</span>     * Signifies the maximum file size that can be uploaded in bytes
     * @property {int}
     */
    maxUploadFileSize: 4000000,

<span id='argos-Application-property-PING_TIMEOUT'>    /**
</span>     * Timeout for the connection check.
     */
    PING_TIMEOUT: 3000,

<span id='argos-Application-property-PING_DEBOUNCE'>    /**
</span>     * Ping debounce time.
     */
    PING_DEBOUNCE: 1000,

<span id='argos-Application-property-PING_RETRY'>    /**
</span>     * Number of times to attempt to ping.
     */
    PING_RETRY: 5,

    /*
     * Static resource to request on the ping. Should be a small file.
     */
    PING_RESOURCE: 'ping.gif',
<span id='argos-Application-method-ModelManager'>    /**
</span>     * All options are mixed into App itself
     * @param {Object} options
     */
    ModelManager: null,
    constructor: function constructor(options) {
      var _this = this;

      this._connects = [];
      this._appStatePromises = [];
      this._signals = [];
      this._subscribes = [];

      this.customizations = {};
      this.services = {}; // TODO: Remove
      this._connections = {};
      this.modules = [];
      this.views = {};
      this.bars = {};

      this.context = {};
      this.viewShowOptions = [];
      var actions = (0, _Intent.intent)();
      this.state$ = (0, _Model.model)(actions);
      this.state$.subscribe(this._onStateChange.bind(this), this._onStateError.bind(this));

      this.ping = options.ping || _util['default'].debounce(function () {
        _this.toast.add({
          message: resource.checkingText,
          title: resource.connectionToastTitleText,
          toastTime: _this.PING_TIMEOUT
        });
        var ping$ = Rx.Observable.interval(_this.PING_TIMEOUT).flatMap(function () {
          return Rx.Observable.fromPromise(_this._ping()).flatMap(function (online) {
            if (online) {
              return Rx.Observable.just(online);
            }

            return Rx.Observable['throw'](new Error());
          });
        }).retry(_this.PING_RETRY).take(1);

        ping$.subscribe(function onNext() {
          (0, _IntentsUpdateConnection.updateConnectionState)(true);
        }, function onError() {
          (0, _IntentsUpdateConnection.updateConnectionState)(false);
        });
      }, this.PING_DEBOUNCE);

      this.ModelManager = _ModelManager['default'];
      _lang['default'].mixin(this, options);
    },
<span id='argos-Application-method-destroy'>    /**
</span>     * Loops through and disconnections connections and unsubscribes subscriptions.
     * Also calls {@link #uninitialize uninitialize}.
     */
    destroy: function destroy() {
      _array['default'].forEach(this._connects, function (handle) {
        _connect['default'].disconnect(handle);
      });

      _array['default'].forEach(this._subscribes, function (handle) {
        _connect['default'].unsubscribe(handle);
      });

      _array['default'].forEach(this._signals, function (signal) {
        signal.remove();
      });

      this.uninitialize();
    },
<span id='argos-Application-method-uninitialize'>    /**
</span>     * Shelled function that is called from {@link #destroy destroy}, may be used to release any further handles.
     */
    uninitialize: function uninitialize() {},
<span id='argos-Application-method-initReUI'>    /**
</span>     * Cleans up URL to prevent ReUI url handling and then invokes ReUI.
     */
    initReUI: function initReUI() {
      // prevent ReUI from attempting to load the URLs view as we handle that ourselves.
      // todo: add support for handling the URL?
      var h = this.hash();
      if (h !== '') {
        this.redirectHash = h;
      }

      history.replaceState(null, '', '#');
      _ReUI['default'].init();
    },
    _onOffline: function _onOffline() {
      this.ping();
    },
    _onOnline: function _onOnline() {
      this.ping();
    },
    _onStateChange: function _onStateChange(val) {
      this._updateConnectionState(val.connectionState);
      this.onStateChange(val);
    },
    _onStateError: function _onStateError(error) {
      this.onStateError(error);
    },
    onStateChange: function onStateChange(val) {}, // eslint-disable-line
    onStateError: function onStateError(error) {}, // eslint-disable-line
    _updateConnectionState: function _updateConnectionState(online) {
      // Don't fire the onConnectionChange if we are in the same state.
      if (this.onLine === online) {
        return;
      }

      this.onLine = online;
      this.onConnectionChange(online);
    },
    forceOnline: function forceOnline() {
      (0, _IntentsUpdateConnection.updateConnectionState)(true);
    },
    forceOffline: function forceOffline() {
      (0, _IntentsUpdateConnection.updateConnectionState)(false);
    },
    onConnectionChange: function onConnectionChange() /*online*/{},
<span id='argos-Application-method-initConnects'>    /**
</span>     * Establishes various connections to events.
     */
    initConnects: function initConnects() {
      var _this2 = this;

      this._connects.push(_connect['default'].connect(window, 'resize', this, this.onResize));
      this._connects.push(_connect['default'].connect(_win['default'].body(), 'beforetransition', this, this._onBeforeTransition));
      this._connects.push(_connect['default'].connect(_win['default'].body(), 'aftertransition', this, this._onAfterTransition));
      this._connects.push(_connect['default'].connect(_win['default'].body(), 'show', this, this._onActivate));
      (0, _ready['default'])(function () {
        window.addEventListener('online', _this2._onOnline.bind(_this2));
        window.addEventListener('offline', _this2._onOffline.bind(_this2));
      });

      this.ping();
    },

<span id='argos-Application-method-_ping'>    /**
</span>     * Returns a promise. The results are true of the resource came back
     * before the PING_TIMEOUT. The promise is rejected if there is timeout or
     * the response is not a 200 or 304.
     */
    _ping: function _ping() {
      var _this3 = this;

      return new Promise(function (resolve) {
        var xhr = new XMLHttpRequest();
        xhr.ontimeout = function () {
          return resolve(false);
        };
        xhr.onerror = function () {
          return resolve(false);
        };
        xhr.onload = function () {
          var DONE = 4;
          var HTTP_OK = 200;
          var HTTP_NOT_MODIFIED = 304;

          if (xhr.readyState === DONE) {
            if (xhr.status === HTTP_OK || xhr.status === HTTP_NOT_MODIFIED) {
              resolve(true);
            } else {
              resolve(false);
            }
          }
        };
        xhr.open('GET', _this3.PING_RESOURCE + '?cache=' + Math.random());
        xhr.timeout = _this3.PING_TIMEOUT;
        xhr.send();
      });
    },

<span id='argos-Application-method-initSignals'>    /**
</span>     * Establishes signals/handles from dojo's newer APIs
     */
    initSignals: function initSignals() {
      var _this4 = this;

      this._signals.push(_aspect['default'].after(window.ReUI, 'setOrientation', function (result, args) {
        if (args &amp;&amp; args.length &gt; 0) {
          var value = args[0];
          _this4.currentOrientation = value;
          _this4.onSetOrientation(value);
          _connect['default'].publish('/app/setOrientation', [value]);
        }
      }));

      return this;
    },
<span id='argos-Application-method-initAppState'>    /**
</span>     * Executes the chain of promises registered with registerAppStatePromise.
     * When all promises are done, a new promise is returned to the caller, and all
     * registered promises are flushed.
     * Each app state can be processed all at once or in a specfic seqence.
     * Example:
     * We can register  App state seqeunces as the following, where each sequence
     * is proccessed in a desending order form 0 to n. The first two in this example are defeulted to a
     * sequence of zero (0) and are procced first in which after the next sequence (1) is proccessed
     * and once all of its items are finshed then the last sequence 2 will start and process all of its items.
     *
     * If two seqences have the same number then thay will get combinded as if they where registerd together.
     * Aso not all items whith in a process are processed and ansync of each other and may not finish at the same time.
     *
     * To make two items process one after the other simpley put them in to diffrent sequences.
     *
     *   this.registerAppStatePromise(() =&gt; {some functions that returns a promise});
     *   this.registerAppStatePromise(() =&gt; {some functions that returns a promise});
     *
     *   this.registerAppStatePromise({
     *     seq: 1,
     *     description: 'Sequence 1',
     *     items: [{
     *       name: 'itemA',
     *       description: 'item A',
     *       fn: () =&gt; { some functions that returns a promise },
     *       }, {
     *         name: 'itemb',
     *         description: 'Item B',
     *         fn: () =&gt; {some functions that returns a promise},
     *       }],
     *   });
     *
     *   this.registerAppStatePromise({
     *     seq: 2,
     *     description: 'Sequence 2',
     *     items: [{
     *       name: 'item C',
     *       description: 'item C',
     *       fn: () =&gt; { some functions that returns a promise },
     *       },
     *    });
     *
     * There are there App state seqences re
     *
     * @return {Promise}
     */
    initAppState: function initAppState() {
      var _this5 = this;

      var def = new _Deferred['default']();
      var sequences = [];
      this._appStatePromises.forEach(function (item) {
        var seq = undefined;
        if (typeof item === 'function') {
          seq = sequences.find(function (x) {
            return x.seq === 0;
          });
          if (!seq) {
            seq = {
              seq: 0,
              description: resource.loadingApplicationStateText,
              items: []
            };
            sequences.push(seq);
          }
          seq.items.push({
            name: 'default',
            description: '',
            fn: item
          });
        } else {
          if (item.seq &amp;&amp; item.items) {
            seq = sequences.find(function (x) {
              return x.seq === (item.seq ? item.seq : 0);
            });
            if (seq) {
              item.items.forEach(function (_item) {
                seq.items.push(_item);
              });
            } else {
              sequences.push(item);
            }
          }
        }
      });
      // Sort the sequence ascending so we can processes them in the right order.
      sequences.sort(function (a, b) {
        if (a.seq &gt; b.seq) {
          return 1;
        }

        if (a.seq &lt; b.seq) {
          return -1;
        }

        return 0;
      });

      this._initAppStateSequence(0, sequences).then(function (results) {
        _this5.clearAppStatePromises();
        _this5.initModulesDynamic();
        def.resolve(results);
      }, function (err) {
        _this5.clearAppStatePromises();
        def.reject(err);
      });
      return def.promise;
    },
<span id='argos-Application-method-_initAppStateSequence'>    /**
</span>     * Process a app state sequence and start the next sequnce when done.
     * @param {index) the index of the sequence to start
     * @param {sequences) an array of sequences
     */
    _initAppStateSequence: function _initAppStateSequnce(index, sequences) {
      var _this6 = this;

      var def = new _Deferred['default']();
      var seq = sequences[index];

      if (seq) {
        (function () {
          // We need to send an observable and get ride of the ui element.
          var indicator = new _BusyIndicator['default']({
            id: 'busyIndicator__appState_' + seq.seq,
            label: resource.initializingText + ' ' + seq.description
          });
          _this6.modal.disableClose = true;
          _this6.modal.showToolbar = false;
          _this6.modal.add(indicator);
          indicator.start();
          var promises = _array['default'].map(seq.items, function (item) {
            return item.fn();
          });
          var odef = def;
          (0, _all['default'])(promises).then(function () {
            indicator.complete(true);
            _this6.modal.disableClose = false;
            _this6.modal.hide();
            _this6._initAppStateSequence(index + 1, sequences).then(function (results) {
              odef.resolve(results);
            }, function (err) {
              indicator.complete(true);
              _this6.modal.disableClose = false;
              _this6.modal.hide();
              odef.reject(err);
            });
          }, function (err) {
            _ErrorManager2['default'].addSimpleError(indicator.label, err);
            indicator.complete(true);
            _this6.modal.disableClose = false;
            _this6.modal.hide();
            def.reject(err);
          });
        })();
      } else {
        def.resolve();
      }
      return def.promise;
    },
<span id='argos-Application-method-registerAppStatePromise'>    /**
</span>     * Registers a promise that will resolve when initAppState is invoked.
     * @param {Promise|Function} promise A promise or a function that returns a promise
     */
    registerAppStatePromise: function registerAppStatePromise(promise) {
      this._appStatePromises.push(promise);
      return this;
    },
    clearAppStatePromises: function clearAppStatePromises() {
      this._appStatePromises = [];
    },
    onSetOrientation: function onSetOrientation() /*value*/{},
<span id='argos-Application-method-initServices'>    /**
</span>     * Loops through connections and calls {@link #registerService registerService} on each.
     */
    initServices: function initServices() {
      for (var _name in this.connections) {
        if (this.connections.hasOwnProperty(_name)) {
          this.registerService(_name, this.connections[_name]);
        }
      }
    },
<span id='argos-Application-method-initModules'>    /**
</span>     * Loops through modules and calls their `init()` function.
     */
    initModules: function initModules() {
      for (var i = 0; i &lt; this.modules.length; i++) {
        this.modules[i].init(this);
      }
    },
<span id='argos-Application-method-initModulesDynamic'>    /**
</span>     * Loops through modules and calls their `initDynamic()` function.
     */
    initModulesDynamic: function initModules() {
      for (var i = 0; i &lt; this.modules.length; i++) {
        this.modules[i].initDynamic(this);
      }
    },
<span id='argos-Application-method-initToolbars'>    /**
</span>     * Loops through (tool)bars and calls their `init()` function.
     */
    initToolbars: function initToolbars() {
      for (var n in this.bars) {
        if (this.bars.hasOwnProperty(n)) {
          this.bars[n].init(); // todo: change to startup
        }
      }
    },
<span id='argos-Application-method-activate'>    /**
</span>     * Sets the global variable `App` to this instance.
     */
    activate: function activate() {
      window.App = this;
    },
<span id='argos-Application-method-init'>    /**
</span>     * Initializes this application as well as the toolbar and all currently registered views.
     */
    init: function init() {
      this.initPreferences();
      this.initConnects();
      this.initSignals();
      this.initServices(); // TODO: Remove
      this._startupConnections();
      this.initModules();
      this.initToolbars();
      this.initReUI();
      this.initModal();
      this.initToasts();
    },
    initToasts: function initToasts() {
      this.toast = new _Toast['default']();
      this.toast.show();
    },
    initPreferences: function initPreferences() {
      this._loadPreferences();
    },
    initModal: function initModal() {
      this.modal = new _Modal['default']();
      this.modal.place(document.body).hide();
    },
<span id='argos-Application-method-supportsTouch'>    /**
</span>     * Check if the browser supports touch events.
     * @return {Boolean} true if the current browser supports touch events, false otherwise.
     */
    supportsTouch: function supportsTouch() {
      // Taken from https://github.com/Modernizr/Modernizr/ (MIT Licensed)
      return 'ontouchstart' in window || window.DocumentTouch &amp;&amp; document instanceof window.DocumentTouch;
    },
    persistPreferences: function persistPreferences() {
      try {
        if (window.localStorage) {
          window.localStorage.setItem('preferences', _json['default'].stringify(this.preferences));
        }
      } catch (e) {
        console.error(e); // eslint-disable-line
      }
    },
    _loadPreferences: function _loadPreferences() {
      try {
        if (window.localStorage) {
          this.preferences = _json['default'].parse(window.localStorage.getItem('preferences'));
        }
      } catch (e) {
        console.error(e); // eslint-disable-line
      }
    },
<span id='argos-Application-method-_startupConnections'>    /**
</span>     * Establishes various connections to events.
     */
    _startupConnections: function _startupConnections() {
      for (var _name2 in this.connections) {
        if (this.connections.hasOwnProperty(_name2)) {
          if (this.connections.hasOwnProperty(_name2)) {
            this.registerConnection(_name2, this.connections[_name2]);
          }
        }
      }

      /* todo: should we be mixing this in? */
      delete this.connections;
    },
<span id='argos-Application-method-run'>    /**
</span>     * Sets `_started` to true.
     */
    run: function run() {
      this._started = true;
    },
<span id='argos-Application-method-isOnline'>    /**
</span>     * Returns the `window.navigator.onLine` property for detecting if an internet connection is available.
     */
    isOnline: function isOnline() {
      return this.onLine;
    },
<span id='argos-Application-method-isOnFirstView'>    /**
</span>     * Returns true/false if the current view is the first/initial view.
     * This is useful for disabling the back button (so you don't hit the login page).
     * @returns {boolean}
     */
    isOnFirstView: function isOnFirstView() {},

<span id='argos-Application-method-registerService'>    /**
</span>     * Optional creates, then registers an Sage.SData.Client.SDataService and adds the result to `App.services`.
     * @param {String} name Unique identifier for the service.
     * @param {Object} service May be a SDataService instance or constructor parameters to create a new SDataService instance.
     * @param {Object} options Optional settings for the registered service.
     */
    registerService: function registerService(name, service) {
      var options = arguments.length &lt;= 2 || arguments[2] === undefined ? {} : arguments[2];

      var instance = service instanceof Sage.SData.Client.SDataService ? service : new Sage.SData.Client.SDataService(service);

      this.services[name] = instance;

      instance.on('requesttimeout', this.onRequestTimeout, this);

      if (options.isDefault || service.isDefault || !this.defaultService) {
        this.defaultService = instance;
      }

      return this;
    },
<span id='argos-Application-method-registerConnection'>    /**
</span>     * Optional creates, then registers an Sage.SData.Client.SDataService and adds the result to `App.services`.
     * @param {String} name Unique identifier for the service.
     * @param {Object} definition May be a SDataService instance or constructor parameters to create a new SDataService instance.
     * @param {Object} options Optional settings for the registered service.
     */
    registerConnection: function registerConnection(name, definition) {
      var options = arguments.length &lt;= 2 || arguments[2] === undefined ? {} : arguments[2];

      var instance = definition instanceof Sage.SData.Client.SDataService ? definition : new Sage.SData.Client.SDataService(definition);

      this._connections[name] = instance;

      instance.on('requesttimeout', this.onRequestTimeout, this);

      if (options.isDefault || definition.isDefault || !this._connections['default']) {
        this._connections['default'] = instance;
      }

      return this;
    },
    onRequestTimeout: function _onTimeout() {
      this.ping();
    },
<span id='argos-Application-method-hasService'>    /**
</span>     * Determines the the specified service name is found in the Apps service object.
     * @param {String} name Name of the SDataService to detect
     */
    hasService: function hasService(name) {
      return !!this.services[name];
    },
    _createViewContainers: function _createViewContainers() {
      var node = document.getElementById('viewContainer');

      if (node) {
        this._rootDomNode = node;
        return;
      }

      if (this._rootDomNode === null || typeof this._rootDomNode === 'undefined') {
        this._rootDomNode = _domConstruct['default'].create('div', {
          'id': 'viewContainer',
          'class': 'viewContainer'
        }, _win['default'].body());

        var drawers = _domConstruct['default'].create('div', {
          'class': 'drawers absolute'
        }, _win['default'].body());

        _domConstruct['default'].create('div', {
          'class': 'overthrow left-drawer absolute'
        }, drawers);

        _domConstruct['default'].create('div', {
          'class': 'overthrow right-drawer absolute'
        }, drawers);
      }
    },
<span id='argos-Application-method-registerView'>    /**
</span>     * Registers a view with the application and renders it to HTML.
     * If the application has already been initialized, the view is immediately initialized as well.
     * @param {View} view A view instance to be registered.
     * @param {domNode} domNode Optional. A DOM node to place the view in.
     */
    registerView: function registerView(view, domNode) {
      this.views[view.id] = view;

      if (!domNode) {
        this._createViewContainers();
      }

      view._placeAt = domNode || this._rootDomNode;

      this.onRegistered(view);

      return this;
    },
<span id='argos-Application-method-registerToolbar'>    /**
</span>     * Registers a toolbar with the application and renders it to HTML.
     * If the application has already been initialized, the toolbar is immediately initialized as well.
     * @param {String} name Unique name of the toolbar
     * @param {Toolbar} tbar Toolbar instance to register
     * @param {domNode} domNode Optional. A DOM node to place the view in.
     */
    registerToolbar: function registerToolbar(n, t, domNode) {
      var name = n;
      var tbar = t;

      if (typeof name === 'object') {
        tbar = name;
        name = tbar.name;
      }

      this.bars[name] = tbar;

      if (this._started) {
        tbar.init();
      }

      if (!domNode) {
        this._createViewContainers();
      }

      tbar.placeAt(domNode || this._rootDomNode, 'last');

      return this;
    },
<span id='argos-Application-method-getViews'>    /**
</span>     * Returns all the registered views.
     * @return {View[]} An array containing the currently registered views.
     */
    getViews: function getViews() {
      var results = [];

      for (var view in this.views) {
        if (this.views.hasOwnProperty(view)) {
          results.push(this.views[view]);
        }
      }

      return results;
    },
<span id='argos-Application-method-isViewActive'>    /**
</span>     * Checks to see if the passed view instance is the currently active one by comparing it to {@link #getPrimaryActiveView primaryActiveView}.
     * @param {View} view
     * @return {Boolean} True if the passed view is the same as the active view.
     */
    isViewActive: function isViewActive(view) {
      // todo: add check for multiple active views.
      return this.getPrimaryActiveView() === view;
    },
<span id='argos-Application-method-getPrimaryActiveView'>    /**
</span>     * Talks to ReUI to get the current page or dialog name and then returns the result of {@link #getView getView(name)}.
     * @return {View} Returns the active view instance, if no view is active returns null.
     */
    getPrimaryActiveView: function getPrimaryActiveView() {
      var el = _ReUI['default'].getCurrentPage() || _ReUI['default'].getCurrentDialog();
      if (el) {
        return this.getView(el);
      }
    },
<span id='argos-Application-method-hasView'>    /**
</span>     * Determines if any registered view has been registered with the provided key.
     * @param {String} key Unique id of the view.
     * @return {Boolean} True if there is a registered view name matching the key.
     */
    hasView: function hasView(key) {
      return !!this._internalGetView({
        key: key,
        init: false
      });
    },
<span id='argos-Application-method-getView'>    /**
</span>     * Returns the registered view instance with the associated key.
     * @param {String/Object} key The id of the view to return, if object then `key.id` is used.
     * @return {View} view The requested view.
     */
    getView: function getView(key) {
      return this._internalGetView({
        key: key,
        init: true
      });
    },
    _internalGetView: function _internalGetView(options) {
      var key = options &amp;&amp; options.key;
      var init = options &amp;&amp; options.init;

      if (key) {
        var view = undefined;
        if (typeof key === 'string') {
          view = this.views[key];
        } else if (typeof key.id === 'string') {
          view = this.views[key.id];
        }

        if (init &amp;&amp; view &amp;&amp; !view._started) {
          view.init(this.state$);
          view.placeAt(view._placeAt, 'first');
          view._started = true;
          view._placeAt = null;
        }

        return view;
      }

      return null;
    },
<span id='argos-Application-method-getViewSecurity'>    /**
</span>     * Returns the defined security for a specific view
     * @param {String} key Id of the registered view to query.
     * @param access
     */
    getViewSecurity: function getViewSecurity(key, access) {
      var view = this._internalGetView({
        key: key,
        init: false
      });
      return view &amp;&amp; view.getSecurity(access);
    },
<span id='argos-Application-method-getService'>    /**
</span>     * Returns the registered SDataService instance by name, or returns the default service.
     * @param {String/Boolean} name If string service is looked up by name. If false, default service is returned.
     * @return {Object} The registered Sage.SData.Client.SDataService instance.
     */
    getService: function getService(name) {
      if (typeof name === 'string' &amp;&amp; this.services[name]) {
        return this.services[name];
      }

      return this.defaultService;
    },
<span id='argos-Application-method-hasConnection'>    /**
</span>     * Determines the the specified service name is found in the Apps service object.
     * @param {String} name Name of the SDataService to detect
     */
    hasConnection: function hasConnection(name) {
      return !!this._connections[name];
    },
    getConnection: function getConnection(name) {
      if (this._connections[name]) {
        return this._connections[name];
      }

      return this._connections['default'];
    },
<span id='argos-Application-method-setPrimaryTitle'>    /**
</span>     * Sets the applications current title.
     * @param {String} title The new title.
     */
    setPrimaryTitle: function setPrimaryTitle(title) {
      for (var n in this.bars) {
        if (this.bars.hasOwnProperty(n)) {
          if (this.bars[n].managed) {
            this.bars[n].set('title', title);
          }
        }
      }

      return this;
    },
<span id='argos-Application-method-onResize'>    /**
</span>     * Resize handle, publishes the global event `/app/resize` which views may subscribe to.
     */
    onResize: function onResize() {
      if (this.resizeTimer) {
        clearTimeout(this.resizeTimer);
      }

      this.resizeTimer = setTimeout(function () {
        _connect['default'].publish('/app/resize', []);
      }, 100);
    },
    onRegistered: function onRegistered() /*view*/{},
    onBeforeViewTransitionAway: function onBeforeViewTransitionAway() /*view*/{},
    onBeforeViewTransitionTo: function onBeforeViewTransitionTo() /*view*/{},
    onViewTransitionAway: function onViewTransitionAway() /*view*/{},
    onViewTransitionTo: function onViewTransitionTo() /*view*/{},
    onViewActivate: function onViewActivate() /*view, tag, data*/{},
    _onBeforeTransition: function _onBeforeTransition(evt) {
      var view = this.getView(evt.target);
      if (view) {
        if (evt.out) {
          this._beforeViewTransitionAway(view);
        } else {
          this._beforeViewTransitionTo(view);
        }
      }
    },
    _onAfterTransition: function _onAfterTransition(evt) {
      var view = this.getView(evt.target);
      if (view) {
        if (evt.out) {
          this._viewTransitionAway(view);
        } else {
          this._viewTransitionTo(view);
        }
      }
    },
    _onActivate: function _onActivate(evt) {
      var view = this.getView(evt.target);
      if (view) {
        this._viewActivate(view, evt.tag, evt.data);
      }
    },
    _beforeViewTransitionAway: function _beforeViewTransitionAway(view) {
      this.onBeforeViewTransitionAway(view);

      view.beforeTransitionAway();
    },
    _beforeViewTransitionTo: function _beforeViewTransitionTo(view) {
      this.onBeforeViewTransitionTo(view);

      for (var n in this.bars) {
        if (this.bars[n].managed) {
          this.bars[n].clear();
        }
      }

      view.beforeTransitionTo();
    },
    _viewTransitionAway: function _viewTransitionAway(view) {
      this.onViewTransitionAway(view);

      view.transitionAway();
    },
    _viewTransitionTo: function _viewTransitionTo(view) {
      this.onViewTransitionTo(view);

      var tools = view.options &amp;&amp; view.options.tools || view.getTools() || {};

      for (var n in this.bars) {
        if (this.bars[n].managed) {
          this.bars[n].showTools(tools[n]);
        }
      }

      view.transitionTo();
    },
    _viewActivate: function _viewActivate(view, tag, data) {
      this.onViewActivate(view);

      view.activate(tag, data);
    },
<span id='argos-Application-method-filterNavigationContext'>    /**
</span>     * Searches ReUI.context.history by passing a predicate function that should return true if a match is found, false otherwise.
     * This is similar to queryNavigationContext, however, this function will return an array of found items instead of a single item.
     * @param {Function} predicate
     * @param {Object} scope
     * @return {Array} context history filtered out by the predicate.
     */
    filterNavigationContext: function filterNavigationContext(predicate, scope) {
      var list = _ReUI['default'].context.history || [];
      var filtered = _array['default'].filter(list, (function filter(item) {
        return predicate.call(scope || this, item.data);
      }).bind(this));

      return _array['default'].map(filtered, function map(item) {
        return item.data;
      });
    },
<span id='argos-Application-method-queryNavigationContext'>    /**
</span>     * Searches ReUI.context.history by passing a predicate function that should return true
     * when a match is found.
     * @param {Function} predicate Function that is called in the provided scope with the current history iteration. It should return true if the history item is the desired context.
     * @param {Number} depth
     * @param {Object} scope
     * @return {Object/Boolean} context History data context if found, false if not.
     */
    queryNavigationContext: function queryNavigationContext(predicate, d, s) {
      var scope = s;
      var depth = d;

      if (typeof depth !== 'number') {
        scope = depth;
        depth = 0;
      }

      var list = _ReUI['default'].context.history || [];

      depth = depth || 0;

      for (var i = list.length - 2, j = 0; i &gt;= 0 &amp;&amp; (depth &lt;= 0 || j &lt; depth); i--, j++) {
        if (predicate.call(scope || this, list[i].data)) {
          return list[i].data;
        }
      }

      return false;
    },
<span id='argos-Application-method-isNavigationFromResourceKind'>    /**
</span>     * Shortcut method to {@link #queryNavigationContext queryNavigationContext} that matches the specified resourceKind provided
     * @param {String/String[]} kind The resourceKind(s) the history item must match
     * @param {Function} predicate Optional. If provided it will be called on matches so you may do an secondary check of the item - returning true for good items.
     * @param {Object} scope Scope the predicate should be called in.
     * @return {Object} context History data context if found, false if not.
     */
    isNavigationFromResourceKind: function isNavigationFromResourceKind(kind, predicate, scope) {
      var lookup = {};
      if (_lang['default'].isArray(kind)) {
        _array['default'].forEach(kind, function forEach(item) {
          this[item] = true;
        }, lookup);
      } else {
        lookup[kind] = true;
      }

      return this.queryNavigationContext(function queryNavigationContext(o) {
        var context = o.options &amp;&amp; o.options.source || o;
        var resourceKind = context &amp;&amp; context.resourceKind;

        // if a predicate is defined, both resourceKind AND predicate must match.
        if (lookup[resourceKind]) {
          if (predicate) {
            if (predicate.call(scope || this, o, context)) {
              return o;
            }
          } else {
            return o;
          }
        }
      });
    },
<span id='argos-Application-method-registerCustomization'>    /**
</span>     * Registers a customization to a target path.
     *
     * A Customization Spec is a special object with the following keys:
     *
     * * `at`: `function(item)` - passes the current item in the list, the function should return true if this is the item being modified (or is at where you want to insert something).
     * * `at`: `{Number}` - May optionally define the index of the item instead of a function.
     * * `type`: `{String}` - enum of `insert`, `modify`, `replace` or `remove` that indicates the type of customization.
     * * `where`: `{String}` - enum of `before` or `after` only needed when type is `insert`.
     * * `value`: `{Object}` - the entire object to create (insert or replace) or the values to overwrite (modify), not needed for remove.
     * * `value`: `{Object[]}` - if inserting you may pass an array of items to create.
     *
     * Note: This also accepts the legacy signature:
     * `registerCustomization(path, id, spec)`
     * Where the path is `list/tools` and `id` is the view id
     *
     * All customizations are registered to `this.customizations[path]`.
     *
     * @param {String} path The customization set such as `list/tools#account_list` or `detail#contact_detail`. First half being the type of customization and the second the view id.
     * @param {Object} spec The customization specification
     */
    registerCustomization: function registerCustomization(p, s) {
      var path = p;
      var spec = s;

      if (arguments.length &gt; 2) {
        var customizationSet = arguments[0];
        var id = arguments[1];

        spec = arguments[2];
        path = id ? customizationSet + '#' + id : customizationSet;
      }

      var container = this.customizations[path] || (this.customizations[path] = []);
      if (container) {
        container.push(spec);
      }

      return this;
    },
<span id='argos-Application-method-getCustomizationsFor'>    /**
</span>     * Returns the customizations registered for the provided path.
     *
     * Note: This also accepts the legacy signature:
     * `getCustomizationsFor(set, id)`
     * Where the path is `list/tools` and `id` is the view id
     *
     * @param {String} path The customization set such as `list/tools#account_list` or `detail#contact_detail`. First half being the type of customization and the second the view id.
     */
    getCustomizationsFor: function getCustomizationsFor(p) {
      var path = p;

      if (arguments.length &gt; 1) {
        path = arguments[1] ? arguments[0] + '#' + arguments[1] : arguments[0];
      }

      var segments = path.split('#');
      var customizationSet = segments[0];
      var forPath = this.customizations[path] || [];
      var forSet = this.customizations[customizationSet] || [];

      return forPath.concat(forSet);
    },
    hasAccessTo: function hasAccessTo() /*security*/{
      return true;
    },
<span id='argos-Application-method-showLeftDrawer'>    /**
</span>     * Override this function to load a view in the left drawer.
     */
    showLeftDrawer: function showLeftDrawer() {
      return this;
    },
<span id='argos-Application-method-showRightDrawer'>    /**
</span>     * Override this function to load a view in the right drawer.
     */
    showRightDrawer: function showRightDrawer() {
      return this;
    },
<span id='argos-Application-method-loadSnapper'>    /**
</span>     * Loads Snap.js and assigns the instance to App.snapper. This method would typically be called before navigating to the initial view, so the login page does not contain the menu.
     * @param {DOMNode} element Optional. Snap.js options.element property. If not provided defaults to the &quot;viewContaienr&quot; DOMNode.
     * @param {Object} options Optional. Snap.js options object. A default is provided if this is undefined. Providing options will override the element parameter.
     */
    loadSnapper: function loadSnapper(element, options) {
      // TODO: Provide a domNode param and default to viewContainer if not provided
      if (this.snapper) {
        return this;
      }

      var snapper = new _snap2['default'](options || { // eslint-disable-line
        element: element || document.getElementById('viewContainer'),
        dragger: null,
        disable: 'none',
        addBodyClasses: true,
        hyperextensible: false,
        resistance: 0.1,
        flickThreshold: 50,
        transitionSpeed: 0.2,
        easing: 'ease',
        maxPosition: 266,
        minPosition: -266,
        tapToClose: (0, _has['default'])('ie') ? false : true, // causes issues on windows phones where tapping the close button causes snap.js endDrag to fire, closing the menu before we can check the state properly
        touchToDrag: false,
        slideIntent: 40,
        minDragDistance: 5
      });

      this.snapper = snapper;

      this.showLeftDrawer();
      this.showRightDrawer();
      return this;
    },
    setToolBarMode: function setToolBarMode(onLine) {
      for (var n in this.bars) {
        if (this.bars[n].managed) {
          this.bars[n].setMode(onLine);
        }
      }
    }
  });

  // Backwards compatibility for custom modules still referencing the old declare global
  _lang['default'].setObject('Sage.Platform.Mobile.Application', __class);
  module.exports = __class;
});
//# sourceMappingURL=data:application/json;base64,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QUFJO0FBQ3BCLHVCQUFlLEVBQUUsS0FBSztBQUN0QixrQkFBVSxFQUFFLEdBQUc7QUFDZixzQkFBYyxFQUFFLEVBQUU7QUFDbEIsdUJBQWUsRUFBRSxHQUFHO0FBQ3BCLGNBQU0sRUFBRSxNQUFNO0FBQ2QsbUJBQVcsRUFBRSxHQUFHO0FBQ2hCLG1CQUFXLEVBQUUsQ0FBQyxHQUFHO0FBQ2pCLGtCQUFVLEVBQUUscUJBQUksSUFBSSxDQUFDLEdBQUcsS0FBSyxHQUFHLElBQUk7QUFDcEMsbUJBQVcsRUFBRSxLQUFLO0FBQ2xCLG1CQUFXLEVBQUUsRUFBRTtBQUNmLHVCQUFlLEVBQUUsQ0FBQztPQUNuQixDQUFDLENBQUM7O0FBRUgsVUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUM7O0FBRXZCLFVBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQztBQUN0QixVQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7QUFDdkIsYUFBTyxJQUFJLENBQUM7S0FDYjtBQUNELGtCQUFjLEVBQUUsU0FBUyxjQUFjLENBQUMsTUFBTSxFQUFFO0FBQzlDLFdBQUssSUFBTSxDQUFDLElBQUksSUFBSSxDQUFDLElBQUksRUFBRTtBQUN6QixZQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUFFO0FBQ3hCLGNBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1NBQzlCO09BQ0Y7S0FDRjtHQUNGLENBQUMsQ0FBQzs7O0FBR0gsbUJBQUssU0FBUyxDQUFDLGtDQUFrQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO21CQUM3QyxPQUFPIiwiZmlsZSI6InNyYy9BcHBsaWNhdGlvbi5qcyIsInNvdXJjZVJvb3QiOiJzcmMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBDb3B5cmlnaHQgKGMpIDIwMTAsIFNhZ2UgU29mdHdhcmUsIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5pbXBvcnQganNvbiBmcm9tICdkb2pvL2pzb24nO1xyXG5pbXBvcnQgYXJyYXkgZnJvbSAnZG9qby9fYmFzZS9hcnJheSc7XHJcbmltcG9ydCBjb25uZWN0IGZyb20gJ2Rvam8vX2Jhc2UvY29ubmVjdCc7XHJcbmltcG9ydCBhc3BlY3QgZnJvbSAnZG9qby9hc3BlY3QnO1xyXG5pbXBvcnQgZGVjbGFyZSBmcm9tICdkb2pvL19iYXNlL2RlY2xhcmUnO1xyXG5pbXBvcnQgbGFuZyBmcm9tICdkb2pvL19iYXNlL2xhbmcnO1xyXG5pbXBvcnQgd2luIGZyb20gJ2Rvam8vX2Jhc2Uvd2luZG93JztcclxuaW1wb3J0IGhhc2ggZnJvbSAnZG9qby9oYXNoJztcclxuaW1wb3J0IGhhcyBmcm9tICdkb2pvL2hhcyc7XHJcbmltcG9ydCBkb21Db25zdHJ1Y3QgZnJvbSAnZG9qby9kb20tY29uc3RydWN0JztcclxuaW1wb3J0IGFsbCBmcm9tICdkb2pvL3Byb21pc2UvYWxsJztcclxuaW1wb3J0IHNuYXAgZnJvbSAnc25hcCc7XHJcbmltcG9ydCBSZVVJIGZyb20gJy4vUmVVSS9tYWluJztcclxuaW1wb3J0IHJlYWR5IGZyb20gJ2Rvam8vcmVhZHknO1xyXG5pbXBvcnQgdXRpbCBmcm9tICcuL1V0aWxpdHknO1xyXG5pbXBvcnQgTW9kZWxNYW5hZ2VyIGZyb20gJy4vTW9kZWxzL01hbmFnZXInO1xyXG5pbXBvcnQgVG9hc3QgZnJvbSAnLi9EaWFsb2dzL1RvYXN0JztcclxuaW1wb3J0IHttb2RlbH0gZnJvbSAnLi9Nb2RlbCc7XHJcbmltcG9ydCB7aW50ZW50fSBmcm9tICcuL0ludGVudCc7XHJcbmltcG9ydCB7dXBkYXRlQ29ubmVjdGlvblN0YXRlfSBmcm9tICcuL0ludGVudHMvdXBkYXRlLWNvbm5lY3Rpb24nO1xyXG5pbXBvcnQgTW9kYWwgZnJvbSAnLi9EaWFsb2dzL01vZGFsJztcclxuaW1wb3J0IEJ1c3lJbmRpY2F0b3IgZnJvbSAnLi9EaWFsb2dzL0J1c3lJbmRpY2F0b3InO1xyXG5pbXBvcnQgRGVmZXJyZWQgZnJvbSAnZG9qby9EZWZlcnJlZCc7XHJcbmltcG9ydCBFcnJvck1hbmFnZXIgZnJvbSAnLi9FcnJvck1hbmFnZXInO1xyXG5pbXBvcnQgZ2V0UmVzb3VyY2UgZnJvbSAnLi9JMThuJztcclxuaW1wb3J0ICdkb2pvL3NuaWZmJztcclxuXHJcbmNvbnN0IHJlc291cmNlID0gZ2V0UmVzb3VyY2UoJ3Nka0FwcGxpY2F0aW9uJyk7XHJcblxyXG5oYXMuYWRkKCdodG1sNS1maWxlLWFwaScsIGZ1bmN0aW9uIGhhc0ZpbGVBcGkoZ2xvYmFsKSB7XHJcbiAgaWYgKGhhcygnaWUnKSkge1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgaWYgKGdsb2JhbC5GaWxlICYmIGdsb2JhbC5GaWxlUmVhZGVyICYmIGdsb2JhbC5GaWxlTGlzdCAmJiBnbG9iYWwuQmxvYikge1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG4gIHJldHVybiBmYWxzZTtcclxufSk7XHJcblxyXG5sYW5nLmV4dGVuZChGdW5jdGlvbiwge1xyXG4gIC8vIFRPRE86IERlcHJlY2F0ZSB0aGlzIGluIGZhdm9yIG9mIHRoZSBzdGFuZGFyZCBcImJpbmRcIlxyXG4gIGJpbmREZWxlZ2F0ZTogZnVuY3Rpb24gYmluZERlbGVnYXRlKHNjb3BlKSB7XHJcbiAgICBjb25zdCBzZWxmID0gdGhpcztcclxuXHJcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICByZXR1cm4gZnVuY3Rpb24gYm91bmQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuYXBwbHkoc2NvcGUgfHwgdGhpcywgYXJndW1lbnRzKTtcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBvcHRpb25hbCA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gYm91bmRXQXJncygpIHtcclxuICAgICAgY29uc3QgY2FsbGVkID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKTtcclxuICAgICAgcmV0dXJuIHNlbGYuYXBwbHkoc2NvcGUgfHwgdGhpcywgY2FsbGVkLmNvbmNhdChvcHRpb25hbCkpO1xyXG4gICAgfTtcclxuICB9LFxyXG59KTtcclxuXHJcbi8vIFBhdGNoaW5nIGJhY2t3YXJkcyBjb21wYXRhYmxpdHkgc28gdGhhdCBjdXN0b21pemF0aW9ucyB3aWxsIG5vdCBicmVhayBhbmQgd2hlcmUgbW9tZW50XHJcbi8vIHdhcyByZXF1aXJlZC5cclxuZGVmaW5lKCdtb21lbnQnLCBbXSwgZnVuY3Rpb24gZ2V0TW9tZW50KCkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXHJcbiAgcmV0dXJuIHdpbmRvdy5tb21lbnQ7XHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gYXBwbHlMb2NhbGl6YXRpb25UbyhvYmplY3QsIGxvY2FsaXphdGlvbikge1xyXG4gIGlmICghb2JqZWN0KSB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICBjb25zdCB0YXJnZXQgPSBvYmplY3QucHJvdG90eXBlIHx8IG9iamVjdDtcclxuICBmb3IgKGNvbnN0IGtleSBpbiBsb2NhbGl6YXRpb24pIHtcclxuICAgIGlmIChsYW5nLmlzT2JqZWN0KGxvY2FsaXphdGlvbltrZXldKSkge1xyXG4gICAgICBhcHBseUxvY2FsaXphdGlvblRvKHRhcmdldFtrZXldLCBsb2NhbGl6YXRpb25ba2V5XSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0YXJnZXRba2V5XSA9IGxvY2FsaXphdGlvbltrZXldO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gbG9jYWxpemUobmFtZSwgbG9jYWxpemF0aW9uKSB7XHJcbiAgbGV0IHRhcmdldCA9IGxhbmcuZ2V0T2JqZWN0KG5hbWUpO1xyXG4gIGlmICh0YXJnZXQgJiYgdGFyZ2V0LnByb3RvdHlwZSkge1xyXG4gICAgdGFyZ2V0ID0gdGFyZ2V0LnByb3RvdHlwZTtcclxuICB9XHJcblxyXG4gIGlmICh0YXJnZXQpIHtcclxuICAgIGFwcGx5TG9jYWxpemF0aW9uVG8odGFyZ2V0LCBsb2NhbGl6YXRpb24pO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gbWVyZ2VDb25maWd1cmF0aW9uKGJhc2VDb25maWd1cmF0aW9uLCBtb2R1bGVDb25maWd1cmF0aW9uKSB7XHJcbiAgaWYgKGJhc2VDb25maWd1cmF0aW9uKSB7XHJcbiAgICBpZiAoYmFzZUNvbmZpZ3VyYXRpb24ubW9kdWxlcyAmJiBtb2R1bGVDb25maWd1cmF0aW9uLm1vZHVsZXMpIHtcclxuICAgICAgYmFzZUNvbmZpZ3VyYXRpb24ubW9kdWxlcyA9IGJhc2VDb25maWd1cmF0aW9uLm1vZHVsZXMuY29uY2F0KG1vZHVsZUNvbmZpZ3VyYXRpb24ubW9kdWxlcyk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGJhc2VDb25maWd1cmF0aW9uLmNvbm5lY3Rpb25zICYmIG1vZHVsZUNvbmZpZ3VyYXRpb24uY29ubmVjdGlvbnMpIHtcclxuICAgICAgYmFzZUNvbmZpZ3VyYXRpb24uY29ubmVjdGlvbnMgPSBsYW5nLm1peGluKGJhc2VDb25maWd1cmF0aW9uLmNvbm5lY3Rpb25zLCBtb2R1bGVDb25maWd1cmF0aW9uLmNvbm5lY3Rpb25zKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJldHVybiBiYXNlQ29uZmlndXJhdGlvbjtcclxufVxyXG5cclxubGFuZy5taXhpbih3aW4uZ2xvYmFsLCB7XHJcbiAgJ2xvY2FsaXplJzogbG9jYWxpemUsXHJcbiAgJ21lcmdlQ29uZmlndXJhdGlvbic6IG1lcmdlQ29uZmlndXJhdGlvbixcclxufSk7XHJcblxyXG4vKipcclxuICogQGNsYXNzIGFyZ29zLkFwcGxpY2F0aW9uXHJcbiAqIEFwcGxpY2F0aW9uIGlzIGEgbmV4dXMgdGhhdCBwcm92aWRlcyBtYW55IHJvdXRpbmcgYW5kIGdsb2JhbCBhcHBsaWNhdGlvbiBzZXJ2aWNlcyB0aGF0IG1heSBiZSB1c2VkXHJcbiAqIGZyb20gYW55d2hlcmUgd2l0aGluIHRoZSBhcHAuXHJcbiAqXHJcbiAqIEl0IHByb3ZpZGVzIGEgc2hvcnRjdXQgYWxpYXMgdG8gYHdpbmRvdy5BcHBgIChgQXBwYCkgd2l0aCB0aGUgbW9zdCBjb21tb24gdXNhZ2UgYmVpbmcgYEFwcC5nZXRWaWV3KGlkKWAuXHJcbiAqXHJcbiAqIEBhbHRlcm5hdGVDbGFzc05hbWUgQXBwXHJcbiAqL1xyXG5jb25zdCBfX2NsYXNzID0gZGVjbGFyZSgnYXJnb3MuQXBwbGljYXRpb24nLCBudWxsLCB7XHJcbiAgLyoqXHJcbiAgICogQHByb3BlcnR5IGVuYWJsZUNvbmN1cnJlbmN5Q2hlY2sge0Jvb2xlYW59IE9wdGlvbiB0byBza2lwIGNvbmN1cnJlbmN5IGNoZWNrcyB0byBhdm9pZCBwcmVjb25kaXRpb24vNDEyIGVycm9ycy5cclxuICAgKi9cclxuICBlbmFibGVDb25jdXJyZW5jeUNoZWNrOiBmYWxzZSxcclxuXHJcbiAgLyoqXHJcbiAgICogSW5zdGFuY2Ugb2YgYSBSZVVJXHJcbiAgICovXHJcbiAgUmVVSTogUmVVSSxcclxuXHJcbiAgLyoqXHJcbiAgICogQHByb3BlcnR5IHZpZXdTaG93T3B0aW9ucyB7QXJyYXl9IEFycmF5IHdpdGggb25lIGNvbmZpZ3VyYXRpb24gb2JqZWN0IHRoYXQgZ2V0cyBwdXNoZWQgYmVmb3JlIHNob3dpbmcgYSB2aWV3LlxyXG4gICAqIEFsbG93cyBwYXNzaW5nIGluIG9wdGlvbnMgdmlhIHJvdXRpbmcuIFZhbHVlIGdldHMgcmVtb3ZlZCBvbmNlIHRoZSB2aWV3IGlzIHNob3duLlxyXG4gICAqL1xyXG4gIHZpZXdTaG93T3B0aW9uczogbnVsbCxcclxuXHJcbiAgLyoqXHJcbiAgICogSW5zdGFuY2Ugb2YgYSBTbmFwLmpzIG9iamVjdCAoaHR0cHM6Ly9naXRodWIuY29tL2pha2llc3RmdS9TbmFwLmpzLylcclxuICAgKi9cclxuICBzbmFwcGVyOiBudWxsLFxyXG5cclxuICAvKipcclxuICAgKiBAcHJvcGVydHkge1N0cmluZ31cclxuICAgKiBDdXJyZW50IG9yaWVudGF0aW9uIG9mIHRoZSBhcHBsaWNhdGlvbi4gQ2FuIGJlIGxhbmRzY2FwZSBvciBwb3J0cmFpdC5cclxuICAgKi9cclxuICBjdXJyZW50T3JpZW50YXRpb246ICdwb3J0cmFpdCcsXHJcblxyXG4gIC8qKlxyXG4gICAqIEFycmF5IG9mIGFsbCBjb25uZWN0aW9ucyBmb3IgQXBwXHJcbiAgICogQHByb3BlcnR5IHtPYmplY3RbXX1cclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIF9jb25uZWN0czogbnVsbCxcclxuXHJcbiAgLyoqXHJcbiAgICogQXJyYXkgb2YgaGFuZGxlcyBmb3IgQXBwXHJcbiAgICogQHByb3BlcnR5IHtPYmplY3RbXX1cclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIF9zaWduYWxzOiBudWxsLFxyXG5cclxuICAvKipcclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqIEFycmF5IG9mIGFsbCBzdWJzY3JpcHRpb25zIGZvciBBcHBcclxuICAgKi9cclxuICBfc3Vic2NyaWJlczogbnVsbCxcclxuXHJcbiAgLyoqXHJcbiAgICogQXJyYXkgb2YgcHJvbWlzZXMgdG8gbG9hZCBhcHAgc3RhdGVcclxuICAgKiBAcHJvcGVydHkge0FycmF5fVxyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgX2FwcFN0YXRlUHJvbWlzZXM6IG51bGwsXHJcblxyXG4gIC8qKlxyXG4gICAqIFNpZ25pZmllcyB0aGUgQXBwIGhhcyBiZWVuIGluaXRpYWxpemVkXHJcbiAgICogQHByb3BlcnR5IHtCb29sZWFufVxyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgX3N0YXJ0ZWQ6IGZhbHNlLFxyXG5cclxuICBfcm9vdERvbU5vZGU6IG51bGwsXHJcbiAgY3VzdG9taXphdGlvbnM6IG51bGwsXHJcbiAgc2VydmljZXM6IG51bGwsIC8vIFRPRE86IFJlbW92ZVxyXG4gIF9jb25uZWN0aW9uczogbnVsbCxcclxuICBtb2R1bGVzOiBudWxsLFxyXG4gIHZpZXdzOiBudWxsLFxyXG4gIGhhc2g6IGhhc2gsXHJcbiAgb25MaW5lOiB0cnVlLFxyXG4gIF9jdXJyZW50UGFnZTogbnVsbCxcclxuICAvKipcclxuICAgKiBUb29sYmFyIGluc3RhbmNlcyBieSBrZXkgbmFtZVxyXG4gICAqIEBwcm9wZXJ0eSB7T2JqZWN0fVxyXG4gICAqL1xyXG4gIGJhcnM6IG51bGwsXHJcbiAgZW5hYmxlQ2FjaGluZzogZmFsc2UsXHJcbiAgLyoqXHJcbiAgICogVGhlIGRlZmF1bHQgU2FnZS5TRGF0YS5DbGllbnQuU0RhdGFTZXJ2aWNlIGluc3RhbmNlXHJcbiAgICogQHByb3BlcnR5IHtPYmplY3R9XHJcbiAgICovXHJcbiAgZGVmYXVsdFNlcnZpY2U6IG51bGwsXHJcbiAgcmVzaXplVGltZXI6IG51bGwsXHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBoYXNoIHRvIHJlZGlyZWN0IHRvIGFmdGVyIGxvZ2luLlxyXG4gICAqIEBwcm9wZXJ0eSB7U3RyaW5nfVxyXG4gICAqL1xyXG4gIHJlZGlyZWN0SGFzaDogJycsXHJcbiAgLyoqXHJcbiAgICogU2lnbmlmaWVzIHRoZSBtYXhpbXVtIGZpbGUgc2l6ZSB0aGF0IGNhbiBiZSB1cGxvYWRlZCBpbiBieXRlc1xyXG4gICAqIEBwcm9wZXJ0eSB7aW50fVxyXG4gICAqL1xyXG4gIG1heFVwbG9hZEZpbGVTaXplOiA0MDAwMDAwLFxyXG5cclxuICAvKipcclxuICAgKiBUaW1lb3V0IGZvciB0aGUgY29ubmVjdGlvbiBjaGVjay5cclxuICAgKi9cclxuICBQSU5HX1RJTUVPVVQ6IDMwMDAsXHJcblxyXG4gIC8qKlxyXG4gICAqIFBpbmcgZGVib3VuY2UgdGltZS5cclxuICAgKi9cclxuICBQSU5HX0RFQk9VTkNFOiAxMDAwLFxyXG5cclxuICAvKipcclxuICAgKiBOdW1iZXIgb2YgdGltZXMgdG8gYXR0ZW1wdCB0byBwaW5nLlxyXG4gICAqL1xyXG4gIFBJTkdfUkVUUlk6IDUsXHJcblxyXG4gIC8qXHJcbiAgICogU3RhdGljIHJlc291cmNlIHRvIHJlcXVlc3Qgb24gdGhlIHBpbmcuIFNob3VsZCBiZSBhIHNtYWxsIGZpbGUuXHJcbiAgICovXHJcbiAgUElOR19SRVNPVVJDRTogJ3BpbmcuZ2lmJyxcclxuICAvKipcclxuICAgKiBBbGwgb3B0aW9ucyBhcmUgbWl4ZWQgaW50byBBcHAgaXRzZWxmXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcclxuICAgKi9cclxuICBNb2RlbE1hbmFnZXI6IG51bGwsXHJcbiAgY29uc3RydWN0b3I6IGZ1bmN0aW9uIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcclxuICAgIHRoaXMuX2Nvbm5lY3RzID0gW107XHJcbiAgICB0aGlzLl9hcHBTdGF0ZVByb21pc2VzID0gW107XHJcbiAgICB0aGlzLl9zaWduYWxzID0gW107XHJcbiAgICB0aGlzLl9zdWJzY3JpYmVzID0gW107XHJcblxyXG4gICAgdGhpcy5jdXN0b21pemF0aW9ucyA9IHt9O1xyXG4gICAgdGhpcy5zZXJ2aWNlcyA9IHt9OyAvLyBUT0RPOiBSZW1vdmVcclxuICAgIHRoaXMuX2Nvbm5lY3Rpb25zID0ge307XHJcbiAgICB0aGlzLm1vZHVsZXMgPSBbXTtcclxuICAgIHRoaXMudmlld3MgPSB7fTtcclxuICAgIHRoaXMuYmFycyA9IHt9O1xyXG5cclxuICAgIHRoaXMuY29udGV4dCA9IHt9O1xyXG4gICAgdGhpcy52aWV3U2hvd09wdGlvbnMgPSBbXTtcclxuICAgIGNvbnN0IGFjdGlvbnMgPSBpbnRlbnQoKTtcclxuICAgIHRoaXMuc3RhdGUkID0gbW9kZWwoYWN0aW9ucyk7XHJcbiAgICB0aGlzLnN0YXRlJC5zdWJzY3JpYmUodGhpcy5fb25TdGF0ZUNoYW5nZS5iaW5kKHRoaXMpLCB0aGlzLl9vblN0YXRlRXJyb3IuYmluZCh0aGlzKSk7XHJcblxyXG4gICAgdGhpcy5waW5nID0gb3B0aW9ucy5waW5nIHx8IHV0aWwuZGVib3VuY2UoKCkgPT4ge1xyXG4gICAgICB0aGlzLnRvYXN0LmFkZCh7XHJcbiAgICAgICAgbWVzc2FnZTogcmVzb3VyY2UuY2hlY2tpbmdUZXh0LFxyXG4gICAgICAgIHRpdGxlOiByZXNvdXJjZS5jb25uZWN0aW9uVG9hc3RUaXRsZVRleHQsXHJcbiAgICAgICAgdG9hc3RUaW1lOiB0aGlzLlBJTkdfVElNRU9VVCxcclxuICAgICAgfSk7XHJcbiAgICAgIGNvbnN0IHBpbmckID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCh0aGlzLlBJTkdfVElNRU9VVClcclxuICAgICAgICAuZmxhdE1hcCgoKSA9PiB7XHJcbiAgICAgICAgICByZXR1cm4gUnguT2JzZXJ2YWJsZS5mcm9tUHJvbWlzZSh0aGlzLl9waW5nKCkpXHJcbiAgICAgICAgICAgIC5mbGF0TWFwKChvbmxpbmUpID0+IHtcclxuICAgICAgICAgICAgICBpZiAob25saW5lKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUnguT2JzZXJ2YWJsZS5qdXN0KG9ubGluZSk7XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICByZXR1cm4gUnguT2JzZXJ2YWJsZS50aHJvdyhuZXcgRXJyb3IoKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnJldHJ5KHRoaXMuUElOR19SRVRSWSlcclxuICAgICAgICAudGFrZSgxKTtcclxuXHJcbiAgICAgIHBpbmckLnN1YnNjcmliZShmdW5jdGlvbiBvbk5leHQoKSB7XHJcbiAgICAgICAgdXBkYXRlQ29ubmVjdGlvblN0YXRlKHRydWUpO1xyXG4gICAgICB9LCBmdW5jdGlvbiBvbkVycm9yKCkge1xyXG4gICAgICAgIHVwZGF0ZUNvbm5lY3Rpb25TdGF0ZShmYWxzZSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSwgdGhpcy5QSU5HX0RFQk9VTkNFKTtcclxuXHJcbiAgICB0aGlzLk1vZGVsTWFuYWdlciA9IE1vZGVsTWFuYWdlcjtcclxuICAgIGxhbmcubWl4aW4odGhpcywgb3B0aW9ucyk7XHJcbiAgfSxcclxuICAvKipcclxuICAgKiBMb29wcyB0aHJvdWdoIGFuZCBkaXNjb25uZWN0aW9ucyBjb25uZWN0aW9ucyBhbmQgdW5zdWJzY3JpYmVzIHN1YnNjcmlwdGlvbnMuXHJcbiAgICogQWxzbyBjYWxscyB7QGxpbmsgI3VuaW5pdGlhbGl6ZSB1bmluaXRpYWxpemV9LlxyXG4gICAqL1xyXG4gIGRlc3Ryb3k6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7XHJcbiAgICBhcnJheS5mb3JFYWNoKHRoaXMuX2Nvbm5lY3RzLCAoaGFuZGxlKSA9PiB7XHJcbiAgICAgIGNvbm5lY3QuZGlzY29ubmVjdChoYW5kbGUpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgYXJyYXkuZm9yRWFjaCh0aGlzLl9zdWJzY3JpYmVzLCAoaGFuZGxlKSA9PiB7XHJcbiAgICAgIGNvbm5lY3QudW5zdWJzY3JpYmUoaGFuZGxlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGFycmF5LmZvckVhY2godGhpcy5fc2lnbmFscywgKHNpZ25hbCkgPT4ge1xyXG4gICAgICBzaWduYWwucmVtb3ZlKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLnVuaW5pdGlhbGl6ZSgpO1xyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogU2hlbGxlZCBmdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCBmcm9tIHtAbGluayAjZGVzdHJveSBkZXN0cm95fSwgbWF5IGJlIHVzZWQgdG8gcmVsZWFzZSBhbnkgZnVydGhlciBoYW5kbGVzLlxyXG4gICAqL1xyXG4gIHVuaW5pdGlhbGl6ZTogZnVuY3Rpb24gdW5pbml0aWFsaXplKCkge30sXHJcbiAgLyoqXHJcbiAgICogQ2xlYW5zIHVwIFVSTCB0byBwcmV2ZW50IFJlVUkgdXJsIGhhbmRsaW5nIGFuZCB0aGVuIGludm9rZXMgUmVVSS5cclxuICAgKi9cclxuICBpbml0UmVVSTogZnVuY3Rpb24gaW5pdFJlVUkoKSB7XHJcbiAgICAvLyBwcmV2ZW50IFJlVUkgZnJvbSBhdHRlbXB0aW5nIHRvIGxvYWQgdGhlIFVSTHMgdmlldyBhcyB3ZSBoYW5kbGUgdGhhdCBvdXJzZWx2ZXMuXHJcbiAgICAvLyB0b2RvOiBhZGQgc3VwcG9ydCBmb3IgaGFuZGxpbmcgdGhlIFVSTD9cclxuICAgIGNvbnN0IGggPSB0aGlzLmhhc2goKTtcclxuICAgIGlmIChoICE9PSAnJykge1xyXG4gICAgICB0aGlzLnJlZGlyZWN0SGFzaCA9IGg7XHJcbiAgICB9XHJcblxyXG4gICAgaGlzdG9yeS5yZXBsYWNlU3RhdGUobnVsbCwgJycsICcjJyk7XHJcbiAgICBSZVVJLmluaXQoKTtcclxuICB9LFxyXG4gIF9vbk9mZmxpbmU6IGZ1bmN0aW9uIF9vbk9mZmxpbmUoKSB7XHJcbiAgICB0aGlzLnBpbmcoKTtcclxuICB9LFxyXG4gIF9vbk9ubGluZTogZnVuY3Rpb24gX29uT25saW5lKCkge1xyXG4gICAgdGhpcy5waW5nKCk7XHJcbiAgfSxcclxuICBfb25TdGF0ZUNoYW5nZTogZnVuY3Rpb24gX29uU3RhdGVDaGFuZ2UodmFsKSB7XHJcbiAgICB0aGlzLl91cGRhdGVDb25uZWN0aW9uU3RhdGUodmFsLmNvbm5lY3Rpb25TdGF0ZSk7XHJcbiAgICB0aGlzLm9uU3RhdGVDaGFuZ2UodmFsKTtcclxuICB9LFxyXG4gIF9vblN0YXRlRXJyb3I6IGZ1bmN0aW9uIF9vblN0YXRlRXJyb3IoZXJyb3IpIHtcclxuICAgIHRoaXMub25TdGF0ZUVycm9yKGVycm9yKTtcclxuICB9LFxyXG4gIG9uU3RhdGVDaGFuZ2U6IGZ1bmN0aW9uIG9uU3RhdGVDaGFuZ2UodmFsKSB7fSwgLy8gZXNsaW50LWRpc2FibGUtbGluZVxyXG4gIG9uU3RhdGVFcnJvcjogZnVuY3Rpb24gb25TdGF0ZUVycm9yKGVycm9yKSB7fSwgLy8gZXNsaW50LWRpc2FibGUtbGluZVxyXG4gIF91cGRhdGVDb25uZWN0aW9uU3RhdGU6IGZ1bmN0aW9uIF91cGRhdGVDb25uZWN0aW9uU3RhdGUob25saW5lKSB7XHJcbiAgICAvLyBEb24ndCBmaXJlIHRoZSBvbkNvbm5lY3Rpb25DaGFuZ2UgaWYgd2UgYXJlIGluIHRoZSBzYW1lIHN0YXRlLlxyXG4gICAgaWYgKHRoaXMub25MaW5lID09PSBvbmxpbmUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMub25MaW5lID0gb25saW5lO1xyXG4gICAgdGhpcy5vbkNvbm5lY3Rpb25DaGFuZ2Uob25saW5lKTtcclxuICB9LFxyXG4gIGZvcmNlT25saW5lOiBmdW5jdGlvbiBmb3JjZU9ubGluZSgpIHtcclxuICAgIHVwZGF0ZUNvbm5lY3Rpb25TdGF0ZSh0cnVlKTtcclxuICB9LFxyXG4gIGZvcmNlT2ZmbGluZTogZnVuY3Rpb24gZm9yY2VPZmZsaW5lKCkge1xyXG4gICAgdXBkYXRlQ29ubmVjdGlvblN0YXRlKGZhbHNlKTtcclxuICB9LFxyXG4gIG9uQ29ubmVjdGlvbkNoYW5nZTogZnVuY3Rpb24gb25Db25uZWN0aW9uQ2hhbmdlKCAvKm9ubGluZSovICkge30sXHJcbiAgLyoqXHJcbiAgICogRXN0YWJsaXNoZXMgdmFyaW91cyBjb25uZWN0aW9ucyB0byBldmVudHMuXHJcbiAgICovXHJcbiAgaW5pdENvbm5lY3RzOiBmdW5jdGlvbiBpbml0Q29ubmVjdHMoKSB7XHJcbiAgICB0aGlzLl9jb25uZWN0cy5wdXNoKGNvbm5lY3QuY29ubmVjdCh3aW5kb3csICdyZXNpemUnLCB0aGlzLCB0aGlzLm9uUmVzaXplKSk7XHJcbiAgICB0aGlzLl9jb25uZWN0cy5wdXNoKGNvbm5lY3QuY29ubmVjdCh3aW4uYm9keSgpLCAnYmVmb3JldHJhbnNpdGlvbicsIHRoaXMsIHRoaXMuX29uQmVmb3JlVHJhbnNpdGlvbikpO1xyXG4gICAgdGhpcy5fY29ubmVjdHMucHVzaChjb25uZWN0LmNvbm5lY3Qod2luLmJvZHkoKSwgJ2FmdGVydHJhbnNpdGlvbicsIHRoaXMsIHRoaXMuX29uQWZ0ZXJUcmFuc2l0aW9uKSk7XHJcbiAgICB0aGlzLl9jb25uZWN0cy5wdXNoKGNvbm5lY3QuY29ubmVjdCh3aW4uYm9keSgpLCAnc2hvdycsIHRoaXMsIHRoaXMuX29uQWN0aXZhdGUpKTtcclxuICAgIHJlYWR5KCgpID0+IHtcclxuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ29ubGluZScsIHRoaXMuX29uT25saW5lLmJpbmQodGhpcykpO1xyXG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignb2ZmbGluZScsIHRoaXMuX29uT2ZmbGluZS5iaW5kKHRoaXMpKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMucGluZygpO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIFJldHVybnMgYSBwcm9taXNlLiBUaGUgcmVzdWx0cyBhcmUgdHJ1ZSBvZiB0aGUgcmVzb3VyY2UgY2FtZSBiYWNrXHJcbiAgICogYmVmb3JlIHRoZSBQSU5HX1RJTUVPVVQuIFRoZSBwcm9taXNlIGlzIHJlamVjdGVkIGlmIHRoZXJlIGlzIHRpbWVvdXQgb3JcclxuICAgKiB0aGUgcmVzcG9uc2UgaXMgbm90IGEgMjAwIG9yIDMwNC5cclxuICAgKi9cclxuICBfcGluZzogZnVuY3Rpb24gX3BpbmcoKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuICAgICAgY29uc3QgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgIHhoci5vbnRpbWVvdXQgPSAoKSA9PiByZXNvbHZlKGZhbHNlKTtcclxuICAgICAgeGhyLm9uZXJyb3IgPSAoKSA9PiByZXNvbHZlKGZhbHNlKTtcclxuICAgICAgeGhyLm9ubG9hZCA9ICgpID0+IHtcclxuICAgICAgICBjb25zdCBET05FID0gNDtcclxuICAgICAgICBjb25zdCBIVFRQX09LID0gMjAwO1xyXG4gICAgICAgIGNvbnN0IEhUVFBfTk9UX01PRElGSUVEID0gMzA0O1xyXG5cclxuICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT09IERPTkUpIHtcclxuICAgICAgICAgIGlmICh4aHIuc3RhdHVzID09PSBIVFRQX09LIHx8IHhoci5zdGF0dXMgPT09IEhUVFBfTk9UX01PRElGSUVEKSB7XHJcbiAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXNvbHZlKGZhbHNlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICAgIHhoci5vcGVuKCdHRVQnLCBgJHt0aGlzLlBJTkdfUkVTT1VSQ0V9P2NhY2hlPSR7TWF0aC5yYW5kb20oKX1gKTtcclxuICAgICAgeGhyLnRpbWVvdXQgPSB0aGlzLlBJTkdfVElNRU9VVDtcclxuICAgICAgeGhyLnNlbmQoKTtcclxuICAgIH0pO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIEVzdGFibGlzaGVzIHNpZ25hbHMvaGFuZGxlcyBmcm9tIGRvam8ncyBuZXdlciBBUElzXHJcbiAgICovXHJcbiAgaW5pdFNpZ25hbHM6IGZ1bmN0aW9uIGluaXRTaWduYWxzKCkge1xyXG4gICAgdGhpcy5fc2lnbmFscy5wdXNoKGFzcGVjdC5hZnRlcih3aW5kb3cuUmVVSSwgJ3NldE9yaWVudGF0aW9uJywgKHJlc3VsdCwgYXJncykgPT4ge1xyXG4gICAgICBpZiAoYXJncyAmJiBhcmdzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBjb25zdCB2YWx1ZSA9IGFyZ3NbMF07XHJcbiAgICAgICAgdGhpcy5jdXJyZW50T3JpZW50YXRpb24gPSB2YWx1ZTtcclxuICAgICAgICB0aGlzLm9uU2V0T3JpZW50YXRpb24odmFsdWUpO1xyXG4gICAgICAgIGNvbm5lY3QucHVibGlzaCgnL2FwcC9zZXRPcmllbnRhdGlvbicsIFt2YWx1ZV0pO1xyXG4gICAgICB9XHJcbiAgICB9KSk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfSxcclxuICAvKipcclxuICAgKiBFeGVjdXRlcyB0aGUgY2hhaW4gb2YgcHJvbWlzZXMgcmVnaXN0ZXJlZCB3aXRoIHJlZ2lzdGVyQXBwU3RhdGVQcm9taXNlLlxyXG4gICAqIFdoZW4gYWxsIHByb21pc2VzIGFyZSBkb25lLCBhIG5ldyBwcm9taXNlIGlzIHJldHVybmVkIHRvIHRoZSBjYWxsZXIsIGFuZCBhbGxcclxuICAgKiByZWdpc3RlcmVkIHByb21pc2VzIGFyZSBmbHVzaGVkLlxyXG4gICAqIEVhY2ggYXBwIHN0YXRlIGNhbiBiZSBwcm9jZXNzZWQgYWxsIGF0IG9uY2Ugb3IgaW4gYSBzcGVjZmljIHNlcWVuY2UuXHJcbiAgICogRXhhbXBsZTpcclxuICAgKiBXZSBjYW4gcmVnaXN0ZXIgIEFwcCBzdGF0ZSBzZXFldW5jZXMgYXMgdGhlIGZvbGxvd2luZywgd2hlcmUgZWFjaCBzZXF1ZW5jZVxyXG4gICAqIGlzIHByb2NjZXNzZWQgaW4gYSBkZXNlbmRpbmcgb3JkZXIgZm9ybSAwIHRvIG4uIFRoZSBmaXJzdCB0d28gaW4gdGhpcyBleGFtcGxlIGFyZSBkZWZldWx0ZWQgdG8gYVxyXG4gICAqIHNlcXVlbmNlIG9mIHplcm8gKDApIGFuZCBhcmUgcHJvY2NlZCBmaXJzdCBpbiB3aGljaCBhZnRlciB0aGUgbmV4dCBzZXF1ZW5jZSAoMSkgaXMgcHJvY2Nlc3NlZFxyXG4gICAqIGFuZCBvbmNlIGFsbCBvZiBpdHMgaXRlbXMgYXJlIGZpbnNoZWQgdGhlbiB0aGUgbGFzdCBzZXF1ZW5jZSAyIHdpbGwgc3RhcnQgYW5kIHByb2Nlc3MgYWxsIG9mIGl0cyBpdGVtcy5cclxuICAgKlxyXG4gICAqIElmIHR3byBzZXFlbmNlcyBoYXZlIHRoZSBzYW1lIG51bWJlciB0aGVuIHRoYXkgd2lsbCBnZXQgY29tYmluZGVkIGFzIGlmIHRoZXkgd2hlcmUgcmVnaXN0ZXJkIHRvZ2V0aGVyLlxyXG4gICAqIEFzbyBub3QgYWxsIGl0ZW1zIHdoaXRoIGluIGEgcHJvY2VzcyBhcmUgcHJvY2Vzc2VkIGFuZCBhbnN5bmMgb2YgZWFjaCBvdGhlciBhbmQgbWF5IG5vdCBmaW5pc2ggYXQgdGhlIHNhbWUgdGltZS5cclxuICAgKlxyXG4gICAqIFRvIG1ha2UgdHdvIGl0ZW1zIHByb2Nlc3Mgb25lIGFmdGVyIHRoZSBvdGhlciBzaW1wbGV5IHB1dCB0aGVtIGluIHRvIGRpZmZyZW50IHNlcXVlbmNlcy5cclxuICAgKlxyXG4gICAqICAgdGhpcy5yZWdpc3RlckFwcFN0YXRlUHJvbWlzZSgoKSA9PiB7c29tZSBmdW5jdGlvbnMgdGhhdCByZXR1cm5zIGEgcHJvbWlzZX0pO1xyXG4gICAqICAgdGhpcy5yZWdpc3RlckFwcFN0YXRlUHJvbWlzZSgoKSA9PiB7c29tZSBmdW5jdGlvbnMgdGhhdCByZXR1cm5zIGEgcHJvbWlzZX0pO1xyXG4gICAqXHJcbiAgICogICB0aGlzLnJlZ2lzdGVyQXBwU3RhdGVQcm9taXNlKHtcclxuICAgKiAgICAgc2VxOiAxLFxyXG4gICAqICAgICBkZXNjcmlwdGlvbjogJ1NlcXVlbmNlIDEnLFxyXG4gICAqICAgICBpdGVtczogW3tcclxuICAgKiAgICAgICBuYW1lOiAnaXRlbUEnLFxyXG4gICAqICAgICAgIGRlc2NyaXB0aW9uOiAnaXRlbSBBJyxcclxuICAgKiAgICAgICBmbjogKCkgPT4geyBzb21lIGZ1bmN0aW9ucyB0aGF0IHJldHVybnMgYSBwcm9taXNlIH0sXHJcbiAgICogICAgICAgfSwge1xyXG4gICAqICAgICAgICAgbmFtZTogJ2l0ZW1iJyxcclxuICAgKiAgICAgICAgIGRlc2NyaXB0aW9uOiAnSXRlbSBCJyxcclxuICAgKiAgICAgICAgIGZuOiAoKSA9PiB7c29tZSBmdW5jdGlvbnMgdGhhdCByZXR1cm5zIGEgcHJvbWlzZX0sXHJcbiAgICogICAgICAgfV0sXHJcbiAgICogICB9KTtcclxuICAgKlxyXG4gICAqICAgdGhpcy5yZWdpc3RlckFwcFN0YXRlUHJvbWlzZSh7XHJcbiAgICogICAgIHNlcTogMixcclxuICAgKiAgICAgZGVzY3JpcHRpb246ICdTZXF1ZW5jZSAyJyxcclxuICAgKiAgICAgaXRlbXM6IFt7XHJcbiAgICogICAgICAgbmFtZTogJ2l0ZW0gQycsXHJcbiAgICogICAgICAgZGVzY3JpcHRpb246ICdpdGVtIEMnLFxyXG4gICAqICAgICAgIGZuOiAoKSA9PiB7IHNvbWUgZnVuY3Rpb25zIHRoYXQgcmV0dXJucyBhIHByb21pc2UgfSxcclxuICAgKiAgICAgICB9LFxyXG4gICAqICAgIH0pO1xyXG4gICAqXHJcbiAgICogVGhlcmUgYXJlIHRoZXJlIEFwcCBzdGF0ZSBzZXFlbmNlcyByZVxyXG4gICAqXHJcbiAgICogQHJldHVybiB7UHJvbWlzZX1cclxuICAgKi9cclxuICBpbml0QXBwU3RhdGU6IGZ1bmN0aW9uIGluaXRBcHBTdGF0ZSgpIHtcclxuICAgIGNvbnN0IGRlZiA9IG5ldyBEZWZlcnJlZCgpO1xyXG4gICAgY29uc3Qgc2VxdWVuY2VzID0gW107XHJcbiAgICB0aGlzLl9hcHBTdGF0ZVByb21pc2VzLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgbGV0IHNlcTtcclxuICAgICAgaWYgKHR5cGVvZiBpdGVtID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgc2VxID0gc2VxdWVuY2VzLmZpbmQoeCA9PiB4LnNlcSA9PT0gMCk7XHJcbiAgICAgICAgaWYgKCFzZXEpIHtcclxuICAgICAgICAgIHNlcSA9IHtcclxuICAgICAgICAgICAgc2VxOiAwLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogcmVzb3VyY2UubG9hZGluZ0FwcGxpY2F0aW9uU3RhdGVUZXh0LFxyXG4gICAgICAgICAgICBpdGVtczogW10sXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgc2VxdWVuY2VzLnB1c2goc2VxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2VxLml0ZW1zLnB1c2goe1xyXG4gICAgICAgICAgbmFtZTogJ2RlZmF1bHQnLFxyXG4gICAgICAgICAgZGVzY3JpcHRpb246ICcnLFxyXG4gICAgICAgICAgZm46IGl0ZW0sXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKGl0ZW0uc2VxICYmIGl0ZW0uaXRlbXMgKSB7XHJcbiAgICAgICAgICBzZXEgPSBzZXF1ZW5jZXMuZmluZCh4ID0+IHguc2VxID09PSAoKGl0ZW0uc2VxKSA/IGl0ZW0uc2VxIDogMCkpO1xyXG4gICAgICAgICAgaWYgKHNlcSkge1xyXG4gICAgICAgICAgICBpdGVtLml0ZW1zLmZvckVhY2goKF9pdGVtKSA9PiB7XHJcbiAgICAgICAgICAgICAgc2VxLml0ZW1zLnB1c2goX2l0ZW0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHNlcXVlbmNlcy5wdXNoKGl0ZW0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICAvLyBTb3J0IHRoZSBzZXF1ZW5jZSBhc2NlbmRpbmcgc28gd2UgY2FuIHByb2Nlc3NlcyB0aGVtIGluIHRoZSByaWdodCBvcmRlci5cclxuICAgIHNlcXVlbmNlcy5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgIGlmIChhLnNlcSA+IGIuc2VxKSB7XHJcbiAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChhLnNlcSA8IGIuc2VxKSB7XHJcbiAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gMDtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX2luaXRBcHBTdGF0ZVNlcXVlbmNlKDAsIHNlcXVlbmNlcykudGhlbigocmVzdWx0cykgPT4ge1xyXG4gICAgICB0aGlzLmNsZWFyQXBwU3RhdGVQcm9taXNlcygpO1xyXG4gICAgICB0aGlzLmluaXRNb2R1bGVzRHluYW1pYygpO1xyXG4gICAgICBkZWYucmVzb2x2ZShyZXN1bHRzKTtcclxuICAgIH0sIChlcnIpID0+IHtcclxuICAgICAgdGhpcy5jbGVhckFwcFN0YXRlUHJvbWlzZXMoKTtcclxuICAgICAgZGVmLnJlamVjdChlcnIpO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gZGVmLnByb21pc2U7XHJcbiAgfSxcclxuICAvKipcclxuICAgKiBQcm9jZXNzIGEgYXBwIHN0YXRlIHNlcXVlbmNlIGFuZCBzdGFydCB0aGUgbmV4dCBzZXF1bmNlIHdoZW4gZG9uZS5cclxuICAgKiBAcGFyYW0ge2luZGV4KSB0aGUgaW5kZXggb2YgdGhlIHNlcXVlbmNlIHRvIHN0YXJ0XHJcbiAgICogQHBhcmFtIHtzZXF1ZW5jZXMpIGFuIGFycmF5IG9mIHNlcXVlbmNlc1xyXG4gICAqL1xyXG4gIF9pbml0QXBwU3RhdGVTZXF1ZW5jZTogZnVuY3Rpb24gX2luaXRBcHBTdGF0ZVNlcXVuY2UoaW5kZXgsIHNlcXVlbmNlcykge1xyXG4gICAgY29uc3QgZGVmID0gbmV3IERlZmVycmVkKCk7XHJcbiAgICBjb25zdCBzZXEgPSBzZXF1ZW5jZXNbaW5kZXhdO1xyXG5cclxuICAgIGlmIChzZXEpIHsgLy8gV2UgbmVlZCB0byBzZW5kIGFuIG9ic2VydmFibGUgYW5kIGdldCByaWRlIG9mIHRoZSB1aSBlbGVtZW50LlxyXG4gICAgICBjb25zdCBpbmRpY2F0b3IgPSBuZXcgQnVzeUluZGljYXRvcih7XHJcbiAgICAgICAgaWQ6ICdidXN5SW5kaWNhdG9yX19hcHBTdGF0ZV8nICsgc2VxLnNlcSxcclxuICAgICAgICBsYWJlbDogcmVzb3VyY2UuaW5pdGlhbGl6aW5nVGV4dCArICcgJyArIHNlcS5kZXNjcmlwdGlvbixcclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMubW9kYWwuZGlzYWJsZUNsb3NlID0gdHJ1ZTtcclxuICAgICAgdGhpcy5tb2RhbC5zaG93VG9vbGJhciA9IGZhbHNlO1xyXG4gICAgICB0aGlzLm1vZGFsLmFkZChpbmRpY2F0b3IpO1xyXG4gICAgICBpbmRpY2F0b3Iuc3RhcnQoKTtcclxuICAgICAgY29uc3QgcHJvbWlzZXMgPSBhcnJheS5tYXAoc2VxLml0ZW1zLCAoaXRlbSk9PiB7XHJcbiAgICAgICAgcmV0dXJuIGl0ZW0uZm4oKTtcclxuICAgICAgfSk7XHJcbiAgICAgIGNvbnN0IG9kZWYgPSBkZWY7XHJcbiAgICAgIGFsbChwcm9taXNlcykudGhlbigoKSA9PiB7XHJcbiAgICAgICAgaW5kaWNhdG9yLmNvbXBsZXRlKHRydWUpO1xyXG4gICAgICAgIHRoaXMubW9kYWwuZGlzYWJsZUNsb3NlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5tb2RhbC5oaWRlKCk7XHJcbiAgICAgICAgdGhpcy5faW5pdEFwcFN0YXRlU2VxdWVuY2UoaW5kZXggKyAxLCBzZXF1ZW5jZXMpLnRoZW4oKHJlc3VsdHMpID0+IHtcclxuICAgICAgICAgIG9kZWYucmVzb2x2ZShyZXN1bHRzKTtcclxuICAgICAgICB9LCAoZXJyKSA9PiB7XHJcbiAgICAgICAgICBpbmRpY2F0b3IuY29tcGxldGUodHJ1ZSk7XHJcbiAgICAgICAgICB0aGlzLm1vZGFsLmRpc2FibGVDbG9zZSA9IGZhbHNlO1xyXG4gICAgICAgICAgdGhpcy5tb2RhbC5oaWRlKCk7XHJcbiAgICAgICAgICBvZGVmLnJlamVjdChlcnIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9LCAoZXJyKSA9PiB7XHJcbiAgICAgICAgRXJyb3JNYW5hZ2VyLmFkZFNpbXBsZUVycm9yKGluZGljYXRvci5sYWJlbCwgZXJyKTtcclxuICAgICAgICBpbmRpY2F0b3IuY29tcGxldGUodHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5tb2RhbC5kaXNhYmxlQ2xvc2UgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLm1vZGFsLmhpZGUoKTtcclxuICAgICAgICBkZWYucmVqZWN0KGVycik7XHJcbiAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZGVmLnJlc29sdmUoKTtcclxuICAgIH1cclxuICAgIHJldHVybiBkZWYucHJvbWlzZTtcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIFJlZ2lzdGVycyBhIHByb21pc2UgdGhhdCB3aWxsIHJlc29sdmUgd2hlbiBpbml0QXBwU3RhdGUgaXMgaW52b2tlZC5cclxuICAgKiBAcGFyYW0ge1Byb21pc2V8RnVuY3Rpb259IHByb21pc2UgQSBwcm9taXNlIG9yIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgcHJvbWlzZVxyXG4gICAqL1xyXG4gIHJlZ2lzdGVyQXBwU3RhdGVQcm9taXNlOiBmdW5jdGlvbiByZWdpc3RlckFwcFN0YXRlUHJvbWlzZShwcm9taXNlKSB7XHJcbiAgICB0aGlzLl9hcHBTdGF0ZVByb21pc2VzLnB1c2gocHJvbWlzZSk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9LFxyXG4gIGNsZWFyQXBwU3RhdGVQcm9taXNlczogZnVuY3Rpb24gY2xlYXJBcHBTdGF0ZVByb21pc2VzKCkge1xyXG4gICAgdGhpcy5fYXBwU3RhdGVQcm9taXNlcyA9IFtdO1xyXG4gIH0sXHJcbiAgb25TZXRPcmllbnRhdGlvbjogZnVuY3Rpb24gb25TZXRPcmllbnRhdGlvbiggLyp2YWx1ZSovICkge30sXHJcbiAgLyoqXHJcbiAgICogTG9vcHMgdGhyb3VnaCBjb25uZWN0aW9ucyBhbmQgY2FsbHMge0BsaW5rICNyZWdpc3RlclNlcnZpY2UgcmVnaXN0ZXJTZXJ2aWNlfSBvbiBlYWNoLlxyXG4gICAqL1xyXG4gIGluaXRTZXJ2aWNlczogZnVuY3Rpb24gaW5pdFNlcnZpY2VzKCkge1xyXG4gICAgZm9yIChjb25zdCBuYW1lIGluIHRoaXMuY29ubmVjdGlvbnMpIHtcclxuICAgICAgaWYgKHRoaXMuY29ubmVjdGlvbnMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyU2VydmljZShuYW1lLCB0aGlzLmNvbm5lY3Rpb25zW25hbWVdKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogTG9vcHMgdGhyb3VnaCBtb2R1bGVzIGFuZCBjYWxscyB0aGVpciBgaW5pdCgpYCBmdW5jdGlvbi5cclxuICAgKi9cclxuICBpbml0TW9kdWxlczogZnVuY3Rpb24gaW5pdE1vZHVsZXMoKSB7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubW9kdWxlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICB0aGlzLm1vZHVsZXNbaV0uaW5pdCh0aGlzKTtcclxuICAgIH1cclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIExvb3BzIHRocm91Z2ggbW9kdWxlcyBhbmQgY2FsbHMgdGhlaXIgYGluaXREeW5hbWljKClgIGZ1bmN0aW9uLlxyXG4gICAqL1xyXG4gIGluaXRNb2R1bGVzRHluYW1pYzogZnVuY3Rpb24gaW5pdE1vZHVsZXMoKSB7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubW9kdWxlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICB0aGlzLm1vZHVsZXNbaV0uaW5pdER5bmFtaWModGhpcyk7XHJcbiAgICB9XHJcbiAgfSxcclxuICAvKipcclxuICAgKiBMb29wcyB0aHJvdWdoICh0b29sKWJhcnMgYW5kIGNhbGxzIHRoZWlyIGBpbml0KClgIGZ1bmN0aW9uLlxyXG4gICAqL1xyXG4gIGluaXRUb29sYmFyczogZnVuY3Rpb24gaW5pdFRvb2xiYXJzKCkge1xyXG4gICAgZm9yIChjb25zdCBuIGluIHRoaXMuYmFycykge1xyXG4gICAgICBpZiAodGhpcy5iYXJzLmhhc093blByb3BlcnR5KG4pKSB7XHJcbiAgICAgICAgdGhpcy5iYXJzW25dLmluaXQoKTsgLy8gdG9kbzogY2hhbmdlIHRvIHN0YXJ0dXBcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogU2V0cyB0aGUgZ2xvYmFsIHZhcmlhYmxlIGBBcHBgIHRvIHRoaXMgaW5zdGFuY2UuXHJcbiAgICovXHJcbiAgYWN0aXZhdGU6IGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xyXG4gICAgd2luZG93LkFwcCA9IHRoaXM7XHJcbiAgfSxcclxuICAvKipcclxuICAgKiBJbml0aWFsaXplcyB0aGlzIGFwcGxpY2F0aW9uIGFzIHdlbGwgYXMgdGhlIHRvb2xiYXIgYW5kIGFsbCBjdXJyZW50bHkgcmVnaXN0ZXJlZCB2aWV3cy5cclxuICAgKi9cclxuICBpbml0OiBmdW5jdGlvbiBpbml0KCkge1xyXG4gICAgdGhpcy5pbml0UHJlZmVyZW5jZXMoKTtcclxuICAgIHRoaXMuaW5pdENvbm5lY3RzKCk7XHJcbiAgICB0aGlzLmluaXRTaWduYWxzKCk7XHJcbiAgICB0aGlzLmluaXRTZXJ2aWNlcygpOyAvLyBUT0RPOiBSZW1vdmVcclxuICAgIHRoaXMuX3N0YXJ0dXBDb25uZWN0aW9ucygpO1xyXG4gICAgdGhpcy5pbml0TW9kdWxlcygpO1xyXG4gICAgdGhpcy5pbml0VG9vbGJhcnMoKTtcclxuICAgIHRoaXMuaW5pdFJlVUkoKTtcclxuICAgIHRoaXMuaW5pdE1vZGFsKCk7XHJcbiAgICB0aGlzLmluaXRUb2FzdHMoKTtcclxuICB9LFxyXG4gIGluaXRUb2FzdHM6IGZ1bmN0aW9uIGluaXRUb2FzdHMoKSB7XHJcbiAgdGhpcy50b2FzdCA9IG5ldyBUb2FzdCgpO1xyXG4gIHRoaXMudG9hc3Quc2hvdygpO1xyXG59LFxyXG4gIGluaXRQcmVmZXJlbmNlczogZnVuY3Rpb24gaW5pdFByZWZlcmVuY2VzKCkge1xyXG4gICAgdGhpcy5fbG9hZFByZWZlcmVuY2VzKCk7XHJcbiAgfSxcclxuICBpbml0TW9kYWw6IGZ1bmN0aW9uIGluaXRNb2RhbCgpIHtcclxuICAgIHRoaXMubW9kYWwgPSBuZXcgTW9kYWwoKTtcclxuICAgIHRoaXMubW9kYWwucGxhY2UoZG9jdW1lbnQuYm9keSlcclxuICAgICAgLmhpZGUoKTtcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIENoZWNrIGlmIHRoZSBicm93c2VyIHN1cHBvcnRzIHRvdWNoIGV2ZW50cy5cclxuICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlIGlmIHRoZSBjdXJyZW50IGJyb3dzZXIgc3VwcG9ydHMgdG91Y2ggZXZlbnRzLCBmYWxzZSBvdGhlcndpc2UuXHJcbiAgICovXHJcbiAgc3VwcG9ydHNUb3VjaDogZnVuY3Rpb24gc3VwcG9ydHNUb3VjaCgpIHtcclxuICAgIC8vIFRha2VuIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL01vZGVybml6ci9Nb2Rlcm5penIvIChNSVQgTGljZW5zZWQpXHJcbiAgICByZXR1cm4gKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdykgfHwgKHdpbmRvdy5Eb2N1bWVudFRvdWNoICYmIGRvY3VtZW50IGluc3RhbmNlb2Ygd2luZG93LkRvY3VtZW50VG91Y2gpO1xyXG4gIH0sXHJcbiAgcGVyc2lzdFByZWZlcmVuY2VzOiBmdW5jdGlvbiBwZXJzaXN0UHJlZmVyZW5jZXMoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBpZiAod2luZG93LmxvY2FsU3RvcmFnZSkge1xyXG4gICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncHJlZmVyZW5jZXMnLCBqc29uLnN0cmluZ2lmeSh0aGlzLnByZWZlcmVuY2VzKSk7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihlKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxyXG4gICAgfVxyXG4gIH0sXHJcbiAgX2xvYWRQcmVmZXJlbmNlczogZnVuY3Rpb24gX2xvYWRQcmVmZXJlbmNlcygpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGlmICh3aW5kb3cubG9jYWxTdG9yYWdlKSB7XHJcbiAgICAgICAgdGhpcy5wcmVmZXJlbmNlcyA9IGpzb24ucGFyc2Uod2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwcmVmZXJlbmNlcycpKTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGUpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXHJcbiAgICB9XHJcbiAgfSxcclxuICAvKipcclxuICAgKiBFc3RhYmxpc2hlcyB2YXJpb3VzIGNvbm5lY3Rpb25zIHRvIGV2ZW50cy5cclxuICAgKi9cclxuICBfc3RhcnR1cENvbm5lY3Rpb25zOiBmdW5jdGlvbiBfc3RhcnR1cENvbm5lY3Rpb25zKCkge1xyXG4gICAgZm9yIChjb25zdCBuYW1lIGluIHRoaXMuY29ubmVjdGlvbnMpIHtcclxuICAgICAgaWYgKHRoaXMuY29ubmVjdGlvbnMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcclxuICAgICAgICBpZiAodGhpcy5jb25uZWN0aW9ucy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xyXG4gICAgICAgICAgdGhpcy5yZWdpc3RlckNvbm5lY3Rpb24obmFtZSwgdGhpcy5jb25uZWN0aW9uc1tuYW1lXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyogdG9kbzogc2hvdWxkIHdlIGJlIG1peGluZyB0aGlzIGluPyAqL1xyXG4gICAgZGVsZXRlIHRoaXMuY29ubmVjdGlvbnM7XHJcbiAgfSxcclxuICAvKipcclxuICAgKiBTZXRzIGBfc3RhcnRlZGAgdG8gdHJ1ZS5cclxuICAgKi9cclxuICBydW46IGZ1bmN0aW9uIHJ1bigpIHtcclxuICAgIHRoaXMuX3N0YXJ0ZWQgPSB0cnVlO1xyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogUmV0dXJucyB0aGUgYHdpbmRvdy5uYXZpZ2F0b3Iub25MaW5lYCBwcm9wZXJ0eSBmb3IgZGV0ZWN0aW5nIGlmIGFuIGludGVybmV0IGNvbm5lY3Rpb24gaXMgYXZhaWxhYmxlLlxyXG4gICAqL1xyXG4gIGlzT25saW5lOiBmdW5jdGlvbiBpc09ubGluZSgpIHtcclxuICAgIHJldHVybiB0aGlzLm9uTGluZTtcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIFJldHVybnMgdHJ1ZS9mYWxzZSBpZiB0aGUgY3VycmVudCB2aWV3IGlzIHRoZSBmaXJzdC9pbml0aWFsIHZpZXcuXHJcbiAgICogVGhpcyBpcyB1c2VmdWwgZm9yIGRpc2FibGluZyB0aGUgYmFjayBidXR0b24gKHNvIHlvdSBkb24ndCBoaXQgdGhlIGxvZ2luIHBhZ2UpLlxyXG4gICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAqL1xyXG4gIGlzT25GaXJzdFZpZXc6IGZ1bmN0aW9uIGlzT25GaXJzdFZpZXcoKSB7fSxcclxuXHJcbiAgLyoqXHJcbiAgICogT3B0aW9uYWwgY3JlYXRlcywgdGhlbiByZWdpc3RlcnMgYW4gU2FnZS5TRGF0YS5DbGllbnQuU0RhdGFTZXJ2aWNlIGFuZCBhZGRzIHRoZSByZXN1bHQgdG8gYEFwcC5zZXJ2aWNlc2AuXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBzZXJ2aWNlLlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBzZXJ2aWNlIE1heSBiZSBhIFNEYXRhU2VydmljZSBpbnN0YW5jZSBvciBjb25zdHJ1Y3RvciBwYXJhbWV0ZXJzIHRvIGNyZWF0ZSBhIG5ldyBTRGF0YVNlcnZpY2UgaW5zdGFuY2UuXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgT3B0aW9uYWwgc2V0dGluZ3MgZm9yIHRoZSByZWdpc3RlcmVkIHNlcnZpY2UuXHJcbiAgICovXHJcbiAgcmVnaXN0ZXJTZXJ2aWNlOiBmdW5jdGlvbiByZWdpc3RlclNlcnZpY2UobmFtZSwgc2VydmljZSwgb3B0aW9ucyA9IHt9KSB7XHJcbiAgICBjb25zdCBpbnN0YW5jZSA9IHNlcnZpY2UgaW5zdGFuY2VvZiBTYWdlLlNEYXRhLkNsaWVudC5TRGF0YVNlcnZpY2UgPyBzZXJ2aWNlIDogbmV3IFNhZ2UuU0RhdGEuQ2xpZW50LlNEYXRhU2VydmljZShzZXJ2aWNlKTtcclxuXHJcbiAgICB0aGlzLnNlcnZpY2VzW25hbWVdID0gaW5zdGFuY2U7XHJcblxyXG4gICAgaW5zdGFuY2Uub24oJ3JlcXVlc3R0aW1lb3V0JywgdGhpcy5vblJlcXVlc3RUaW1lb3V0LCB0aGlzKTtcclxuXHJcbiAgICBpZiAoKG9wdGlvbnMuaXNEZWZhdWx0IHx8IHNlcnZpY2UuaXNEZWZhdWx0KSB8fCAhdGhpcy5kZWZhdWx0U2VydmljZSkge1xyXG4gICAgICB0aGlzLmRlZmF1bHRTZXJ2aWNlID0gaW5zdGFuY2U7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfSxcclxuICAvKipcclxuICAgKiBPcHRpb25hbCBjcmVhdGVzLCB0aGVuIHJlZ2lzdGVycyBhbiBTYWdlLlNEYXRhLkNsaWVudC5TRGF0YVNlcnZpY2UgYW5kIGFkZHMgdGhlIHJlc3VsdCB0byBgQXBwLnNlcnZpY2VzYC5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBVbmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIHNlcnZpY2UuXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IGRlZmluaXRpb24gTWF5IGJlIGEgU0RhdGFTZXJ2aWNlIGluc3RhbmNlIG9yIGNvbnN0cnVjdG9yIHBhcmFtZXRlcnMgdG8gY3JlYXRlIGEgbmV3IFNEYXRhU2VydmljZSBpbnN0YW5jZS5cclxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBPcHRpb25hbCBzZXR0aW5ncyBmb3IgdGhlIHJlZ2lzdGVyZWQgc2VydmljZS5cclxuICAgKi9cclxuICByZWdpc3RlckNvbm5lY3Rpb246IGZ1bmN0aW9uIHJlZ2lzdGVyQ29ubmVjdGlvbihuYW1lLCBkZWZpbml0aW9uLCBvcHRpb25zID0ge30pIHtcclxuICAgIGNvbnN0IGluc3RhbmNlID0gZGVmaW5pdGlvbiBpbnN0YW5jZW9mIFNhZ2UuU0RhdGEuQ2xpZW50LlNEYXRhU2VydmljZSA/IGRlZmluaXRpb24gOiBuZXcgU2FnZS5TRGF0YS5DbGllbnQuU0RhdGFTZXJ2aWNlKGRlZmluaXRpb24pO1xyXG5cclxuICAgIHRoaXMuX2Nvbm5lY3Rpb25zW25hbWVdID0gaW5zdGFuY2U7XHJcblxyXG4gICAgaW5zdGFuY2Uub24oJ3JlcXVlc3R0aW1lb3V0JywgdGhpcy5vblJlcXVlc3RUaW1lb3V0LCB0aGlzKTtcclxuXHJcbiAgICBpZiAoKG9wdGlvbnMuaXNEZWZhdWx0IHx8IGRlZmluaXRpb24uaXNEZWZhdWx0KSB8fCAhdGhpcy5fY29ubmVjdGlvbnMuZGVmYXVsdCkge1xyXG4gICAgICB0aGlzLl9jb25uZWN0aW9ucy5kZWZhdWx0ID0gaW5zdGFuY2U7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfSxcclxuICBvblJlcXVlc3RUaW1lb3V0OiBmdW5jdGlvbiBfb25UaW1lb3V0KCkge1xyXG4gICAgdGhpcy5waW5nKCk7XHJcbiAgfSxcclxuICAvKipcclxuICAgKiBEZXRlcm1pbmVzIHRoZSB0aGUgc3BlY2lmaWVkIHNlcnZpY2UgbmFtZSBpcyBmb3VuZCBpbiB0aGUgQXBwcyBzZXJ2aWNlIG9iamVjdC5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBOYW1lIG9mIHRoZSBTRGF0YVNlcnZpY2UgdG8gZGV0ZWN0XHJcbiAgICovXHJcbiAgaGFzU2VydmljZTogZnVuY3Rpb24gaGFzU2VydmljZShuYW1lKSB7XHJcbiAgICByZXR1cm4gISF0aGlzLnNlcnZpY2VzW25hbWVdO1xyXG4gIH0sXHJcbiAgX2NyZWF0ZVZpZXdDb250YWluZXJzOiBmdW5jdGlvbiBfY3JlYXRlVmlld0NvbnRhaW5lcnMoKSB7XHJcbiAgICBjb25zdCBub2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZpZXdDb250YWluZXInKTtcclxuXHJcbiAgICBpZiAobm9kZSkge1xyXG4gICAgICB0aGlzLl9yb290RG9tTm9kZSA9IG5vZGU7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5fcm9vdERvbU5vZGUgPT09IG51bGwgfHwgdHlwZW9mIHRoaXMuX3Jvb3REb21Ob2RlID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICB0aGlzLl9yb290RG9tTm9kZSA9IGRvbUNvbnN0cnVjdC5jcmVhdGUoJ2RpdicsIHtcclxuICAgICAgICAnaWQnOiAndmlld0NvbnRhaW5lcicsXHJcbiAgICAgICAgJ2NsYXNzJzogJ3ZpZXdDb250YWluZXInLFxyXG4gICAgICB9LCB3aW4uYm9keSgpKTtcclxuXHJcbiAgICAgIGNvbnN0IGRyYXdlcnMgPSBkb21Db25zdHJ1Y3QuY3JlYXRlKCdkaXYnLCB7XHJcbiAgICAgICAgJ2NsYXNzJzogJ2RyYXdlcnMgYWJzb2x1dGUnLFxyXG4gICAgICB9LCB3aW4uYm9keSgpKTtcclxuXHJcbiAgICAgIGRvbUNvbnN0cnVjdC5jcmVhdGUoJ2RpdicsIHtcclxuICAgICAgICAnY2xhc3MnOiAnb3ZlcnRocm93IGxlZnQtZHJhd2VyIGFic29sdXRlJyxcclxuICAgICAgfSwgZHJhd2Vycyk7XHJcblxyXG4gICAgICBkb21Db25zdHJ1Y3QuY3JlYXRlKCdkaXYnLCB7XHJcbiAgICAgICAgJ2NsYXNzJzogJ292ZXJ0aHJvdyByaWdodC1kcmF3ZXIgYWJzb2x1dGUnLFxyXG4gICAgICB9LCBkcmF3ZXJzKTtcclxuICAgIH1cclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIFJlZ2lzdGVycyBhIHZpZXcgd2l0aCB0aGUgYXBwbGljYXRpb24gYW5kIHJlbmRlcnMgaXQgdG8gSFRNTC5cclxuICAgKiBJZiB0aGUgYXBwbGljYXRpb24gaGFzIGFscmVhZHkgYmVlbiBpbml0aWFsaXplZCwgdGhlIHZpZXcgaXMgaW1tZWRpYXRlbHkgaW5pdGlhbGl6ZWQgYXMgd2VsbC5cclxuICAgKiBAcGFyYW0ge1ZpZXd9IHZpZXcgQSB2aWV3IGluc3RhbmNlIHRvIGJlIHJlZ2lzdGVyZWQuXHJcbiAgICogQHBhcmFtIHtkb21Ob2RlfSBkb21Ob2RlIE9wdGlvbmFsLiBBIERPTSBub2RlIHRvIHBsYWNlIHRoZSB2aWV3IGluLlxyXG4gICAqL1xyXG4gIHJlZ2lzdGVyVmlldzogZnVuY3Rpb24gcmVnaXN0ZXJWaWV3KHZpZXcsIGRvbU5vZGUpIHtcclxuICAgIHRoaXMudmlld3Nbdmlldy5pZF0gPSB2aWV3O1xyXG5cclxuICAgIGlmICghZG9tTm9kZSkge1xyXG4gICAgICB0aGlzLl9jcmVhdGVWaWV3Q29udGFpbmVycygpO1xyXG4gICAgfVxyXG5cclxuICAgIHZpZXcuX3BsYWNlQXQgPSBkb21Ob2RlIHx8IHRoaXMuX3Jvb3REb21Ob2RlO1xyXG5cclxuICAgIHRoaXMub25SZWdpc3RlcmVkKHZpZXcpO1xyXG5cclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogUmVnaXN0ZXJzIGEgdG9vbGJhciB3aXRoIHRoZSBhcHBsaWNhdGlvbiBhbmQgcmVuZGVycyBpdCB0byBIVE1MLlxyXG4gICAqIElmIHRoZSBhcHBsaWNhdGlvbiBoYXMgYWxyZWFkeSBiZWVuIGluaXRpYWxpemVkLCB0aGUgdG9vbGJhciBpcyBpbW1lZGlhdGVseSBpbml0aWFsaXplZCBhcyB3ZWxsLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIFVuaXF1ZSBuYW1lIG9mIHRoZSB0b29sYmFyXHJcbiAgICogQHBhcmFtIHtUb29sYmFyfSB0YmFyIFRvb2xiYXIgaW5zdGFuY2UgdG8gcmVnaXN0ZXJcclxuICAgKiBAcGFyYW0ge2RvbU5vZGV9IGRvbU5vZGUgT3B0aW9uYWwuIEEgRE9NIG5vZGUgdG8gcGxhY2UgdGhlIHZpZXcgaW4uXHJcbiAgICovXHJcbiAgcmVnaXN0ZXJUb29sYmFyOiBmdW5jdGlvbiByZWdpc3RlclRvb2xiYXIobiwgdCwgZG9tTm9kZSkge1xyXG4gICAgbGV0IG5hbWUgPSBuO1xyXG4gICAgbGV0IHRiYXIgPSB0O1xyXG5cclxuICAgIGlmICh0eXBlb2YgbmFtZSA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgdGJhciA9IG5hbWU7XHJcbiAgICAgIG5hbWUgPSB0YmFyLm5hbWU7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5iYXJzW25hbWVdID0gdGJhcjtcclxuXHJcbiAgICBpZiAodGhpcy5fc3RhcnRlZCkge1xyXG4gICAgICB0YmFyLmluaXQoKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIWRvbU5vZGUpIHtcclxuICAgICAgdGhpcy5fY3JlYXRlVmlld0NvbnRhaW5lcnMoKTtcclxuICAgIH1cclxuXHJcbiAgICB0YmFyLnBsYWNlQXQoZG9tTm9kZSB8fCB0aGlzLl9yb290RG9tTm9kZSwgJ2xhc3QnKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIFJldHVybnMgYWxsIHRoZSByZWdpc3RlcmVkIHZpZXdzLlxyXG4gICAqIEByZXR1cm4ge1ZpZXdbXX0gQW4gYXJyYXkgY29udGFpbmluZyB0aGUgY3VycmVudGx5IHJlZ2lzdGVyZWQgdmlld3MuXHJcbiAgICovXHJcbiAgZ2V0Vmlld3M6IGZ1bmN0aW9uIGdldFZpZXdzKCkge1xyXG4gICAgY29uc3QgcmVzdWx0cyA9IFtdO1xyXG5cclxuICAgIGZvciAoY29uc3QgdmlldyBpbiB0aGlzLnZpZXdzKSB7XHJcbiAgICAgIGlmICh0aGlzLnZpZXdzLmhhc093blByb3BlcnR5KHZpZXcpKSB7XHJcbiAgICAgICAgcmVzdWx0cy5wdXNoKHRoaXMudmlld3Nbdmlld10pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHJlc3VsdHM7XHJcbiAgfSxcclxuICAvKipcclxuICAgKiBDaGVja3MgdG8gc2VlIGlmIHRoZSBwYXNzZWQgdmlldyBpbnN0YW5jZSBpcyB0aGUgY3VycmVudGx5IGFjdGl2ZSBvbmUgYnkgY29tcGFyaW5nIGl0IHRvIHtAbGluayAjZ2V0UHJpbWFyeUFjdGl2ZVZpZXcgcHJpbWFyeUFjdGl2ZVZpZXd9LlxyXG4gICAqIEBwYXJhbSB7Vmlld30gdmlld1xyXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59IFRydWUgaWYgdGhlIHBhc3NlZCB2aWV3IGlzIHRoZSBzYW1lIGFzIHRoZSBhY3RpdmUgdmlldy5cclxuICAgKi9cclxuICBpc1ZpZXdBY3RpdmU6IGZ1bmN0aW9uIGlzVmlld0FjdGl2ZSh2aWV3KSB7XHJcbiAgICAvLyB0b2RvOiBhZGQgY2hlY2sgZm9yIG11bHRpcGxlIGFjdGl2ZSB2aWV3cy5cclxuICAgIHJldHVybiAodGhpcy5nZXRQcmltYXJ5QWN0aXZlVmlldygpID09PSB2aWV3KTtcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIFRhbGtzIHRvIFJlVUkgdG8gZ2V0IHRoZSBjdXJyZW50IHBhZ2Ugb3IgZGlhbG9nIG5hbWUgYW5kIHRoZW4gcmV0dXJucyB0aGUgcmVzdWx0IG9mIHtAbGluayAjZ2V0VmlldyBnZXRWaWV3KG5hbWUpfS5cclxuICAgKiBAcmV0dXJuIHtWaWV3fSBSZXR1cm5zIHRoZSBhY3RpdmUgdmlldyBpbnN0YW5jZSwgaWYgbm8gdmlldyBpcyBhY3RpdmUgcmV0dXJucyBudWxsLlxyXG4gICAqL1xyXG4gIGdldFByaW1hcnlBY3RpdmVWaWV3OiBmdW5jdGlvbiBnZXRQcmltYXJ5QWN0aXZlVmlldygpIHtcclxuICAgIGNvbnN0IGVsID0gUmVVSS5nZXRDdXJyZW50UGFnZSgpIHx8IFJlVUkuZ2V0Q3VycmVudERpYWxvZygpO1xyXG4gICAgaWYgKGVsKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmdldFZpZXcoZWwpO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogRGV0ZXJtaW5lcyBpZiBhbnkgcmVnaXN0ZXJlZCB2aWV3IGhhcyBiZWVuIHJlZ2lzdGVyZWQgd2l0aCB0aGUgcHJvdmlkZWQga2V5LlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBrZXkgVW5pcXVlIGlkIG9mIHRoZSB2aWV3LlxyXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59IFRydWUgaWYgdGhlcmUgaXMgYSByZWdpc3RlcmVkIHZpZXcgbmFtZSBtYXRjaGluZyB0aGUga2V5LlxyXG4gICAqL1xyXG4gIGhhc1ZpZXc6IGZ1bmN0aW9uIGhhc1ZpZXcoa2V5KSB7XHJcbiAgICByZXR1cm4gISF0aGlzLl9pbnRlcm5hbEdldFZpZXcoe1xyXG4gICAgICBrZXk6IGtleSxcclxuICAgICAgaW5pdDogZmFsc2UsXHJcbiAgICB9KTtcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIFJldHVybnMgdGhlIHJlZ2lzdGVyZWQgdmlldyBpbnN0YW5jZSB3aXRoIHRoZSBhc3NvY2lhdGVkIGtleS5cclxuICAgKiBAcGFyYW0ge1N0cmluZy9PYmplY3R9IGtleSBUaGUgaWQgb2YgdGhlIHZpZXcgdG8gcmV0dXJuLCBpZiBvYmplY3QgdGhlbiBga2V5LmlkYCBpcyB1c2VkLlxyXG4gICAqIEByZXR1cm4ge1ZpZXd9IHZpZXcgVGhlIHJlcXVlc3RlZCB2aWV3LlxyXG4gICAqL1xyXG4gIGdldFZpZXc6IGZ1bmN0aW9uIGdldFZpZXcoa2V5KSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW50ZXJuYWxHZXRWaWV3KHtcclxuICAgICAga2V5OiBrZXksXHJcbiAgICAgIGluaXQ6IHRydWUsXHJcbiAgICB9KTtcclxuICB9LFxyXG4gIF9pbnRlcm5hbEdldFZpZXc6IGZ1bmN0aW9uIF9pbnRlcm5hbEdldFZpZXcob3B0aW9ucykge1xyXG4gICAgY29uc3Qga2V5ID0gb3B0aW9ucyAmJiBvcHRpb25zLmtleTtcclxuICAgIGNvbnN0IGluaXQgPSBvcHRpb25zICYmIG9wdGlvbnMuaW5pdDtcclxuXHJcbiAgICBpZiAoa2V5KSB7XHJcbiAgICAgIGxldCB2aWV3O1xyXG4gICAgICBpZiAodHlwZW9mIGtleSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICB2aWV3ID0gdGhpcy52aWV3c1trZXldO1xyXG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBrZXkuaWQgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgdmlldyA9IHRoaXMudmlld3Nba2V5LmlkXTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGluaXQgJiYgdmlldyAmJiAhdmlldy5fc3RhcnRlZCkge1xyXG4gICAgICAgIHZpZXcuaW5pdCh0aGlzLnN0YXRlJCk7XHJcbiAgICAgICAgdmlldy5wbGFjZUF0KHZpZXcuX3BsYWNlQXQsICdmaXJzdCcpO1xyXG4gICAgICAgIHZpZXcuX3N0YXJ0ZWQgPSB0cnVlO1xyXG4gICAgICAgIHZpZXcuX3BsYWNlQXQgPSBudWxsO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gdmlldztcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIFJldHVybnMgdGhlIGRlZmluZWQgc2VjdXJpdHkgZm9yIGEgc3BlY2lmaWMgdmlld1xyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBrZXkgSWQgb2YgdGhlIHJlZ2lzdGVyZWQgdmlldyB0byBxdWVyeS5cclxuICAgKiBAcGFyYW0gYWNjZXNzXHJcbiAgICovXHJcbiAgZ2V0Vmlld1NlY3VyaXR5OiBmdW5jdGlvbiBnZXRWaWV3U2VjdXJpdHkoa2V5LCBhY2Nlc3MpIHtcclxuICAgIGNvbnN0IHZpZXcgPSB0aGlzLl9pbnRlcm5hbEdldFZpZXcoe1xyXG4gICAgICBrZXk6IGtleSxcclxuICAgICAgaW5pdDogZmFsc2UsXHJcbiAgICB9KTtcclxuICAgIHJldHVybiAodmlldyAmJiB2aWV3LmdldFNlY3VyaXR5KGFjY2VzcykpO1xyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogUmV0dXJucyB0aGUgcmVnaXN0ZXJlZCBTRGF0YVNlcnZpY2UgaW5zdGFuY2UgYnkgbmFtZSwgb3IgcmV0dXJucyB0aGUgZGVmYXVsdCBzZXJ2aWNlLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nL0Jvb2xlYW59IG5hbWUgSWYgc3RyaW5nIHNlcnZpY2UgaXMgbG9va2VkIHVwIGJ5IG5hbWUuIElmIGZhbHNlLCBkZWZhdWx0IHNlcnZpY2UgaXMgcmV0dXJuZWQuXHJcbiAgICogQHJldHVybiB7T2JqZWN0fSBUaGUgcmVnaXN0ZXJlZCBTYWdlLlNEYXRhLkNsaWVudC5TRGF0YVNlcnZpY2UgaW5zdGFuY2UuXHJcbiAgICovXHJcbiAgZ2V0U2VydmljZTogZnVuY3Rpb24gZ2V0U2VydmljZShuYW1lKSB7XHJcbiAgICBpZiAodHlwZW9mIG5hbWUgPT09ICdzdHJpbmcnICYmIHRoaXMuc2VydmljZXNbbmFtZV0pIHtcclxuICAgICAgcmV0dXJuIHRoaXMuc2VydmljZXNbbmFtZV07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuZGVmYXVsdFNlcnZpY2U7XHJcbiAgfSxcclxuICAvKipcclxuICAgKiBEZXRlcm1pbmVzIHRoZSB0aGUgc3BlY2lmaWVkIHNlcnZpY2UgbmFtZSBpcyBmb3VuZCBpbiB0aGUgQXBwcyBzZXJ2aWNlIG9iamVjdC5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBOYW1lIG9mIHRoZSBTRGF0YVNlcnZpY2UgdG8gZGV0ZWN0XHJcbiAgICovXHJcbiAgaGFzQ29ubmVjdGlvbjogZnVuY3Rpb24gaGFzQ29ubmVjdGlvbihuYW1lKSB7XHJcbiAgICByZXR1cm4gISF0aGlzLl9jb25uZWN0aW9uc1tuYW1lXTtcclxuICB9LFxyXG4gIGdldENvbm5lY3Rpb246IGZ1bmN0aW9uIGdldENvbm5lY3Rpb24obmFtZSkge1xyXG4gICAgaWYgKHRoaXMuX2Nvbm5lY3Rpb25zW25hbWVdKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9jb25uZWN0aW9uc1tuYW1lXTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdGhpcy5fY29ubmVjdGlvbnMuZGVmYXVsdDtcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIFNldHMgdGhlIGFwcGxpY2F0aW9ucyBjdXJyZW50IHRpdGxlLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0aXRsZSBUaGUgbmV3IHRpdGxlLlxyXG4gICAqL1xyXG4gIHNldFByaW1hcnlUaXRsZTogZnVuY3Rpb24gc2V0UHJpbWFyeVRpdGxlKHRpdGxlKSB7XHJcbiAgICBmb3IgKGNvbnN0IG4gaW4gdGhpcy5iYXJzKSB7XHJcbiAgICAgIGlmICh0aGlzLmJhcnMuaGFzT3duUHJvcGVydHkobikpIHtcclxuICAgICAgICBpZiAodGhpcy5iYXJzW25dLm1hbmFnZWQpIHtcclxuICAgICAgICAgIHRoaXMuYmFyc1tuXS5zZXQoJ3RpdGxlJywgdGl0bGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogUmVzaXplIGhhbmRsZSwgcHVibGlzaGVzIHRoZSBnbG9iYWwgZXZlbnQgYC9hcHAvcmVzaXplYCB3aGljaCB2aWV3cyBtYXkgc3Vic2NyaWJlIHRvLlxyXG4gICAqL1xyXG4gIG9uUmVzaXplOiBmdW5jdGlvbiBvblJlc2l6ZSgpIHtcclxuICAgIGlmICh0aGlzLnJlc2l6ZVRpbWVyKSB7XHJcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnJlc2l6ZVRpbWVyKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnJlc2l6ZVRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIGNvbm5lY3QucHVibGlzaCgnL2FwcC9yZXNpemUnLCBbXSk7XHJcbiAgICB9LCAxMDApO1xyXG4gIH0sXHJcbiAgb25SZWdpc3RlcmVkOiBmdW5jdGlvbiBvblJlZ2lzdGVyZWQoIC8qdmlldyovICkge30sXHJcbiAgb25CZWZvcmVWaWV3VHJhbnNpdGlvbkF3YXk6IGZ1bmN0aW9uIG9uQmVmb3JlVmlld1RyYW5zaXRpb25Bd2F5KCAvKnZpZXcqLyApIHt9LFxyXG4gIG9uQmVmb3JlVmlld1RyYW5zaXRpb25UbzogZnVuY3Rpb24gb25CZWZvcmVWaWV3VHJhbnNpdGlvblRvKCAvKnZpZXcqLyApIHt9LFxyXG4gIG9uVmlld1RyYW5zaXRpb25Bd2F5OiBmdW5jdGlvbiBvblZpZXdUcmFuc2l0aW9uQXdheSggLyp2aWV3Ki8gKSB7fSxcclxuICBvblZpZXdUcmFuc2l0aW9uVG86IGZ1bmN0aW9uIG9uVmlld1RyYW5zaXRpb25UbyggLyp2aWV3Ki8gKSB7fSxcclxuICBvblZpZXdBY3RpdmF0ZTogZnVuY3Rpb24gb25WaWV3QWN0aXZhdGUoIC8qdmlldywgdGFnLCBkYXRhKi8gKSB7fSxcclxuICBfb25CZWZvcmVUcmFuc2l0aW9uOiBmdW5jdGlvbiBfb25CZWZvcmVUcmFuc2l0aW9uKGV2dCkge1xyXG4gICAgY29uc3QgdmlldyA9IHRoaXMuZ2V0VmlldyhldnQudGFyZ2V0KTtcclxuICAgIGlmICh2aWV3KSB7XHJcbiAgICAgIGlmIChldnQub3V0KSB7XHJcbiAgICAgICAgdGhpcy5fYmVmb3JlVmlld1RyYW5zaXRpb25Bd2F5KHZpZXcpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuX2JlZm9yZVZpZXdUcmFuc2l0aW9uVG8odmlldyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LFxyXG4gIF9vbkFmdGVyVHJhbnNpdGlvbjogZnVuY3Rpb24gX29uQWZ0ZXJUcmFuc2l0aW9uKGV2dCkge1xyXG4gICAgY29uc3QgdmlldyA9IHRoaXMuZ2V0VmlldyhldnQudGFyZ2V0KTtcclxuICAgIGlmICh2aWV3KSB7XHJcbiAgICAgIGlmIChldnQub3V0KSB7XHJcbiAgICAgICAgdGhpcy5fdmlld1RyYW5zaXRpb25Bd2F5KHZpZXcpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuX3ZpZXdUcmFuc2l0aW9uVG8odmlldyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LFxyXG4gIF9vbkFjdGl2YXRlOiBmdW5jdGlvbiBfb25BY3RpdmF0ZShldnQpIHtcclxuICAgIGNvbnN0IHZpZXcgPSB0aGlzLmdldFZpZXcoZXZ0LnRhcmdldCk7XHJcbiAgICBpZiAodmlldykge1xyXG4gICAgICB0aGlzLl92aWV3QWN0aXZhdGUodmlldywgZXZ0LnRhZywgZXZ0LmRhdGEpO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgX2JlZm9yZVZpZXdUcmFuc2l0aW9uQXdheTogZnVuY3Rpb24gX2JlZm9yZVZpZXdUcmFuc2l0aW9uQXdheSh2aWV3KSB7XHJcbiAgICB0aGlzLm9uQmVmb3JlVmlld1RyYW5zaXRpb25Bd2F5KHZpZXcpO1xyXG5cclxuICAgIHZpZXcuYmVmb3JlVHJhbnNpdGlvbkF3YXkoKTtcclxuICB9LFxyXG4gIF9iZWZvcmVWaWV3VHJhbnNpdGlvblRvOiBmdW5jdGlvbiBfYmVmb3JlVmlld1RyYW5zaXRpb25Ubyh2aWV3KSB7XHJcbiAgICB0aGlzLm9uQmVmb3JlVmlld1RyYW5zaXRpb25Ubyh2aWV3KTtcclxuXHJcbiAgICBmb3IgKGNvbnN0IG4gaW4gdGhpcy5iYXJzKSB7XHJcbiAgICAgIGlmICh0aGlzLmJhcnNbbl0ubWFuYWdlZCkge1xyXG4gICAgICAgIHRoaXMuYmFyc1tuXS5jbGVhcigpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdmlldy5iZWZvcmVUcmFuc2l0aW9uVG8oKTtcclxuICB9LFxyXG4gIF92aWV3VHJhbnNpdGlvbkF3YXk6IGZ1bmN0aW9uIF92aWV3VHJhbnNpdGlvbkF3YXkodmlldykge1xyXG4gICAgdGhpcy5vblZpZXdUcmFuc2l0aW9uQXdheSh2aWV3KTtcclxuXHJcbiAgICB2aWV3LnRyYW5zaXRpb25Bd2F5KCk7XHJcbiAgfSxcclxuICBfdmlld1RyYW5zaXRpb25UbzogZnVuY3Rpb24gX3ZpZXdUcmFuc2l0aW9uVG8odmlldykge1xyXG4gICAgdGhpcy5vblZpZXdUcmFuc2l0aW9uVG8odmlldyk7XHJcblxyXG4gICAgY29uc3QgdG9vbHMgPSAodmlldy5vcHRpb25zICYmIHZpZXcub3B0aW9ucy50b29scykgfHwgdmlldy5nZXRUb29scygpIHx8IHt9O1xyXG5cclxuICAgIGZvciAoY29uc3QgbiBpbiB0aGlzLmJhcnMpIHtcclxuICAgICAgaWYgKHRoaXMuYmFyc1tuXS5tYW5hZ2VkKSB7XHJcbiAgICAgICAgdGhpcy5iYXJzW25dLnNob3dUb29scyh0b29sc1tuXSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB2aWV3LnRyYW5zaXRpb25UbygpO1xyXG4gIH0sXHJcbiAgX3ZpZXdBY3RpdmF0ZTogZnVuY3Rpb24gX3ZpZXdBY3RpdmF0ZSh2aWV3LCB0YWcsIGRhdGEpIHtcclxuICAgIHRoaXMub25WaWV3QWN0aXZhdGUodmlldyk7XHJcblxyXG4gICAgdmlldy5hY3RpdmF0ZSh0YWcsIGRhdGEpO1xyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogU2VhcmNoZXMgUmVVSS5jb250ZXh0Lmhpc3RvcnkgYnkgcGFzc2luZyBhIHByZWRpY2F0ZSBmdW5jdGlvbiB0aGF0IHNob3VsZCByZXR1cm4gdHJ1ZSBpZiBhIG1hdGNoIGlzIGZvdW5kLCBmYWxzZSBvdGhlcndpc2UuXHJcbiAgICogVGhpcyBpcyBzaW1pbGFyIHRvIHF1ZXJ5TmF2aWdhdGlvbkNvbnRleHQsIGhvd2V2ZXIsIHRoaXMgZnVuY3Rpb24gd2lsbCByZXR1cm4gYW4gYXJyYXkgb2YgZm91bmQgaXRlbXMgaW5zdGVhZCBvZiBhIHNpbmdsZSBpdGVtLlxyXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRpY2F0ZVxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBzY29wZVxyXG4gICAqIEByZXR1cm4ge0FycmF5fSBjb250ZXh0IGhpc3RvcnkgZmlsdGVyZWQgb3V0IGJ5IHRoZSBwcmVkaWNhdGUuXHJcbiAgICovXHJcbiAgZmlsdGVyTmF2aWdhdGlvbkNvbnRleHQ6IGZ1bmN0aW9uIGZpbHRlck5hdmlnYXRpb25Db250ZXh0KHByZWRpY2F0ZSwgc2NvcGUpIHtcclxuICAgIGNvbnN0IGxpc3QgPSBSZVVJLmNvbnRleHQuaGlzdG9yeSB8fCBbXTtcclxuICAgIGNvbnN0IGZpbHRlcmVkID0gYXJyYXkuZmlsdGVyKGxpc3QsIGZ1bmN0aW9uIGZpbHRlcihpdGVtKSB7XHJcbiAgICAgIHJldHVybiBwcmVkaWNhdGUuY2FsbChzY29wZSB8fCB0aGlzLCBpdGVtLmRhdGEpO1xyXG4gICAgfS5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICByZXR1cm4gYXJyYXkubWFwKGZpbHRlcmVkLCBmdW5jdGlvbiBtYXAoaXRlbSkge1xyXG4gICAgICByZXR1cm4gaXRlbS5kYXRhO1xyXG4gICAgfSk7XHJcbiAgfSxcclxuICAvKipcclxuICAgKiBTZWFyY2hlcyBSZVVJLmNvbnRleHQuaGlzdG9yeSBieSBwYXNzaW5nIGEgcHJlZGljYXRlIGZ1bmN0aW9uIHRoYXQgc2hvdWxkIHJldHVybiB0cnVlXHJcbiAgICogd2hlbiBhIG1hdGNoIGlzIGZvdW5kLlxyXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRpY2F0ZSBGdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCBpbiB0aGUgcHJvdmlkZWQgc2NvcGUgd2l0aCB0aGUgY3VycmVudCBoaXN0b3J5IGl0ZXJhdGlvbi4gSXQgc2hvdWxkIHJldHVybiB0cnVlIGlmIHRoZSBoaXN0b3J5IGl0ZW0gaXMgdGhlIGRlc2lyZWQgY29udGV4dC5cclxuICAgKiBAcGFyYW0ge051bWJlcn0gZGVwdGhcclxuICAgKiBAcGFyYW0ge09iamVjdH0gc2NvcGVcclxuICAgKiBAcmV0dXJuIHtPYmplY3QvQm9vbGVhbn0gY29udGV4dCBIaXN0b3J5IGRhdGEgY29udGV4dCBpZiBmb3VuZCwgZmFsc2UgaWYgbm90LlxyXG4gICAqL1xyXG4gIHF1ZXJ5TmF2aWdhdGlvbkNvbnRleHQ6IGZ1bmN0aW9uIHF1ZXJ5TmF2aWdhdGlvbkNvbnRleHQocHJlZGljYXRlLCBkLCBzKSB7XHJcbiAgICBsZXQgc2NvcGUgPSBzO1xyXG4gICAgbGV0IGRlcHRoID0gZDtcclxuXHJcbiAgICBpZiAodHlwZW9mIGRlcHRoICE9PSAnbnVtYmVyJykge1xyXG4gICAgICBzY29wZSA9IGRlcHRoO1xyXG4gICAgICBkZXB0aCA9IDA7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgbGlzdCA9IFJlVUkuY29udGV4dC5oaXN0b3J5IHx8IFtdO1xyXG5cclxuICAgIGRlcHRoID0gZGVwdGggfHwgMDtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gbGlzdC5sZW5ndGggLSAyLCBqID0gMDsgaSA+PSAwICYmIChkZXB0aCA8PSAwIHx8IGogPCBkZXB0aCk7IGktLSwgaisrKSB7XHJcbiAgICAgIGlmIChwcmVkaWNhdGUuY2FsbChzY29wZSB8fCB0aGlzLCBsaXN0W2ldLmRhdGEpKSB7XHJcbiAgICAgICAgcmV0dXJuIGxpc3RbaV0uZGF0YTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIFNob3J0Y3V0IG1ldGhvZCB0byB7QGxpbmsgI3F1ZXJ5TmF2aWdhdGlvbkNvbnRleHQgcXVlcnlOYXZpZ2F0aW9uQ29udGV4dH0gdGhhdCBtYXRjaGVzIHRoZSBzcGVjaWZpZWQgcmVzb3VyY2VLaW5kIHByb3ZpZGVkXHJcbiAgICogQHBhcmFtIHtTdHJpbmcvU3RyaW5nW119IGtpbmQgVGhlIHJlc291cmNlS2luZChzKSB0aGUgaGlzdG9yeSBpdGVtIG11c3QgbWF0Y2hcclxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkaWNhdGUgT3B0aW9uYWwuIElmIHByb3ZpZGVkIGl0IHdpbGwgYmUgY2FsbGVkIG9uIG1hdGNoZXMgc28geW91IG1heSBkbyBhbiBzZWNvbmRhcnkgY2hlY2sgb2YgdGhlIGl0ZW0gLSByZXR1cm5pbmcgdHJ1ZSBmb3IgZ29vZCBpdGVtcy5cclxuICAgKiBAcGFyYW0ge09iamVjdH0gc2NvcGUgU2NvcGUgdGhlIHByZWRpY2F0ZSBzaG91bGQgYmUgY2FsbGVkIGluLlxyXG4gICAqIEByZXR1cm4ge09iamVjdH0gY29udGV4dCBIaXN0b3J5IGRhdGEgY29udGV4dCBpZiBmb3VuZCwgZmFsc2UgaWYgbm90LlxyXG4gICAqL1xyXG4gIGlzTmF2aWdhdGlvbkZyb21SZXNvdXJjZUtpbmQ6IGZ1bmN0aW9uIGlzTmF2aWdhdGlvbkZyb21SZXNvdXJjZUtpbmQoa2luZCwgcHJlZGljYXRlLCBzY29wZSkge1xyXG4gICAgY29uc3QgbG9va3VwID0ge307XHJcbiAgICBpZiAobGFuZy5pc0FycmF5KGtpbmQpKSB7XHJcbiAgICAgIGFycmF5LmZvckVhY2goa2luZCwgZnVuY3Rpb24gZm9yRWFjaChpdGVtKSB7XHJcbiAgICAgICAgdGhpc1tpdGVtXSA9IHRydWU7XHJcbiAgICAgIH0sIGxvb2t1cCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBsb29rdXBba2luZF0gPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0aGlzLnF1ZXJ5TmF2aWdhdGlvbkNvbnRleHQoZnVuY3Rpb24gcXVlcnlOYXZpZ2F0aW9uQ29udGV4dChvKSB7XHJcbiAgICAgIGNvbnN0IGNvbnRleHQgPSAoby5vcHRpb25zICYmIG8ub3B0aW9ucy5zb3VyY2UpIHx8IG87XHJcbiAgICAgIGNvbnN0IHJlc291cmNlS2luZCA9IGNvbnRleHQgJiYgY29udGV4dC5yZXNvdXJjZUtpbmQ7XHJcblxyXG4gICAgICAvLyBpZiBhIHByZWRpY2F0ZSBpcyBkZWZpbmVkLCBib3RoIHJlc291cmNlS2luZCBBTkQgcHJlZGljYXRlIG11c3QgbWF0Y2guXHJcbiAgICAgIGlmIChsb29rdXBbcmVzb3VyY2VLaW5kXSkge1xyXG4gICAgICAgIGlmIChwcmVkaWNhdGUpIHtcclxuICAgICAgICAgIGlmIChwcmVkaWNhdGUuY2FsbChzY29wZSB8fCB0aGlzLCBvLCBjb250ZXh0KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmV0dXJuIG87XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIFJlZ2lzdGVycyBhIGN1c3RvbWl6YXRpb24gdG8gYSB0YXJnZXQgcGF0aC5cclxuICAgKlxyXG4gICAqIEEgQ3VzdG9taXphdGlvbiBTcGVjIGlzIGEgc3BlY2lhbCBvYmplY3Qgd2l0aCB0aGUgZm9sbG93aW5nIGtleXM6XHJcbiAgICpcclxuICAgKiAqIGBhdGA6IGBmdW5jdGlvbihpdGVtKWAgLSBwYXNzZXMgdGhlIGN1cnJlbnQgaXRlbSBpbiB0aGUgbGlzdCwgdGhlIGZ1bmN0aW9uIHNob3VsZCByZXR1cm4gdHJ1ZSBpZiB0aGlzIGlzIHRoZSBpdGVtIGJlaW5nIG1vZGlmaWVkIChvciBpcyBhdCB3aGVyZSB5b3Ugd2FudCB0byBpbnNlcnQgc29tZXRoaW5nKS5cclxuICAgKiAqIGBhdGA6IGB7TnVtYmVyfWAgLSBNYXkgb3B0aW9uYWxseSBkZWZpbmUgdGhlIGluZGV4IG9mIHRoZSBpdGVtIGluc3RlYWQgb2YgYSBmdW5jdGlvbi5cclxuICAgKiAqIGB0eXBlYDogYHtTdHJpbmd9YCAtIGVudW0gb2YgYGluc2VydGAsIGBtb2RpZnlgLCBgcmVwbGFjZWAgb3IgYHJlbW92ZWAgdGhhdCBpbmRpY2F0ZXMgdGhlIHR5cGUgb2YgY3VzdG9taXphdGlvbi5cclxuICAgKiAqIGB3aGVyZWA6IGB7U3RyaW5nfWAgLSBlbnVtIG9mIGBiZWZvcmVgIG9yIGBhZnRlcmAgb25seSBuZWVkZWQgd2hlbiB0eXBlIGlzIGBpbnNlcnRgLlxyXG4gICAqICogYHZhbHVlYDogYHtPYmplY3R9YCAtIHRoZSBlbnRpcmUgb2JqZWN0IHRvIGNyZWF0ZSAoaW5zZXJ0IG9yIHJlcGxhY2UpIG9yIHRoZSB2YWx1ZXMgdG8gb3ZlcndyaXRlIChtb2RpZnkpLCBub3QgbmVlZGVkIGZvciByZW1vdmUuXHJcbiAgICogKiBgdmFsdWVgOiBge09iamVjdFtdfWAgLSBpZiBpbnNlcnRpbmcgeW91IG1heSBwYXNzIGFuIGFycmF5IG9mIGl0ZW1zIHRvIGNyZWF0ZS5cclxuICAgKlxyXG4gICAqIE5vdGU6IFRoaXMgYWxzbyBhY2NlcHRzIHRoZSBsZWdhY3kgc2lnbmF0dXJlOlxyXG4gICAqIGByZWdpc3RlckN1c3RvbWl6YXRpb24ocGF0aCwgaWQsIHNwZWMpYFxyXG4gICAqIFdoZXJlIHRoZSBwYXRoIGlzIGBsaXN0L3Rvb2xzYCBhbmQgYGlkYCBpcyB0aGUgdmlldyBpZFxyXG4gICAqXHJcbiAgICogQWxsIGN1c3RvbWl6YXRpb25zIGFyZSByZWdpc3RlcmVkIHRvIGB0aGlzLmN1c3RvbWl6YXRpb25zW3BhdGhdYC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoIFRoZSBjdXN0b21pemF0aW9uIHNldCBzdWNoIGFzIGBsaXN0L3Rvb2xzI2FjY291bnRfbGlzdGAgb3IgYGRldGFpbCNjb250YWN0X2RldGFpbGAuIEZpcnN0IGhhbGYgYmVpbmcgdGhlIHR5cGUgb2YgY3VzdG9taXphdGlvbiBhbmQgdGhlIHNlY29uZCB0aGUgdmlldyBpZC5cclxuICAgKiBAcGFyYW0ge09iamVjdH0gc3BlYyBUaGUgY3VzdG9taXphdGlvbiBzcGVjaWZpY2F0aW9uXHJcbiAgICovXHJcbiAgcmVnaXN0ZXJDdXN0b21pemF0aW9uOiBmdW5jdGlvbiByZWdpc3RlckN1c3RvbWl6YXRpb24ocCwgcykge1xyXG4gICAgbGV0IHBhdGggPSBwO1xyXG4gICAgbGV0IHNwZWMgPSBzO1xyXG5cclxuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMikge1xyXG4gICAgICBjb25zdCBjdXN0b21pemF0aW9uU2V0ID0gYXJndW1lbnRzWzBdO1xyXG4gICAgICBjb25zdCBpZCA9IGFyZ3VtZW50c1sxXTtcclxuXHJcbiAgICAgIHNwZWMgPSBhcmd1bWVudHNbMl07XHJcbiAgICAgIHBhdGggPSBpZCA/IGN1c3RvbWl6YXRpb25TZXQgKyAnIycgKyBpZCA6IGN1c3RvbWl6YXRpb25TZXQ7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jdXN0b21pemF0aW9uc1twYXRoXSB8fCAodGhpcy5jdXN0b21pemF0aW9uc1twYXRoXSA9IFtdKTtcclxuICAgIGlmIChjb250YWluZXIpIHtcclxuICAgICAgY29udGFpbmVyLnB1c2goc3BlYyk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfSxcclxuICAvKipcclxuICAgKiBSZXR1cm5zIHRoZSBjdXN0b21pemF0aW9ucyByZWdpc3RlcmVkIGZvciB0aGUgcHJvdmlkZWQgcGF0aC5cclxuICAgKlxyXG4gICAqIE5vdGU6IFRoaXMgYWxzbyBhY2NlcHRzIHRoZSBsZWdhY3kgc2lnbmF0dXJlOlxyXG4gICAqIGBnZXRDdXN0b21pemF0aW9uc0ZvcihzZXQsIGlkKWBcclxuICAgKiBXaGVyZSB0aGUgcGF0aCBpcyBgbGlzdC90b29sc2AgYW5kIGBpZGAgaXMgdGhlIHZpZXcgaWRcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoIFRoZSBjdXN0b21pemF0aW9uIHNldCBzdWNoIGFzIGBsaXN0L3Rvb2xzI2FjY291bnRfbGlzdGAgb3IgYGRldGFpbCNjb250YWN0X2RldGFpbGAuIEZpcnN0IGhhbGYgYmVpbmcgdGhlIHR5cGUgb2YgY3VzdG9taXphdGlvbiBhbmQgdGhlIHNlY29uZCB0aGUgdmlldyBpZC5cclxuICAgKi9cclxuICBnZXRDdXN0b21pemF0aW9uc0ZvcjogZnVuY3Rpb24gZ2V0Q3VzdG9taXphdGlvbnNGb3IocCkge1xyXG4gICAgbGV0IHBhdGggPSBwO1xyXG5cclxuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xyXG4gICAgICBwYXRoID0gYXJndW1lbnRzWzFdID8gYXJndW1lbnRzWzBdICsgJyMnICsgYXJndW1lbnRzWzFdIDogYXJndW1lbnRzWzBdO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHNlZ21lbnRzID0gcGF0aC5zcGxpdCgnIycpO1xyXG4gICAgY29uc3QgY3VzdG9taXphdGlvblNldCA9IHNlZ21lbnRzWzBdO1xyXG4gICAgY29uc3QgZm9yUGF0aCA9IHRoaXMuY3VzdG9taXphdGlvbnNbcGF0aF0gfHwgW107XHJcbiAgICBjb25zdCBmb3JTZXQgPSB0aGlzLmN1c3RvbWl6YXRpb25zW2N1c3RvbWl6YXRpb25TZXRdIHx8IFtdO1xyXG5cclxuICAgIHJldHVybiBmb3JQYXRoLmNvbmNhdChmb3JTZXQpO1xyXG4gIH0sXHJcbiAgaGFzQWNjZXNzVG86IGZ1bmN0aW9uIGhhc0FjY2Vzc1RvKCAvKnNlY3VyaXR5Ki8gKSB7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIE92ZXJyaWRlIHRoaXMgZnVuY3Rpb24gdG8gbG9hZCBhIHZpZXcgaW4gdGhlIGxlZnQgZHJhd2VyLlxyXG4gICAqL1xyXG4gIHNob3dMZWZ0RHJhd2VyOiBmdW5jdGlvbiBzaG93TGVmdERyYXdlcigpIHtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogT3ZlcnJpZGUgdGhpcyBmdW5jdGlvbiB0byBsb2FkIGEgdmlldyBpbiB0aGUgcmlnaHQgZHJhd2VyLlxyXG4gICAqL1xyXG4gIHNob3dSaWdodERyYXdlcjogZnVuY3Rpb24gc2hvd1JpZ2h0RHJhd2VyKCkge1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfSxcclxuICAvKipcclxuICAgKiBMb2FkcyBTbmFwLmpzIGFuZCBhc3NpZ25zIHRoZSBpbnN0YW5jZSB0byBBcHAuc25hcHBlci4gVGhpcyBtZXRob2Qgd291bGQgdHlwaWNhbGx5IGJlIGNhbGxlZCBiZWZvcmUgbmF2aWdhdGluZyB0byB0aGUgaW5pdGlhbCB2aWV3LCBzbyB0aGUgbG9naW4gcGFnZSBkb2VzIG5vdCBjb250YWluIHRoZSBtZW51LlxyXG4gICAqIEBwYXJhbSB7RE9NTm9kZX0gZWxlbWVudCBPcHRpb25hbC4gU25hcC5qcyBvcHRpb25zLmVsZW1lbnQgcHJvcGVydHkuIElmIG5vdCBwcm92aWRlZCBkZWZhdWx0cyB0byB0aGUgXCJ2aWV3Q29udGFpZW5yXCIgRE9NTm9kZS5cclxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBPcHRpb25hbC4gU25hcC5qcyBvcHRpb25zIG9iamVjdC4gQSBkZWZhdWx0IGlzIHByb3ZpZGVkIGlmIHRoaXMgaXMgdW5kZWZpbmVkLiBQcm92aWRpbmcgb3B0aW9ucyB3aWxsIG92ZXJyaWRlIHRoZSBlbGVtZW50IHBhcmFtZXRlci5cclxuICAgKi9cclxuICBsb2FkU25hcHBlcjogZnVuY3Rpb24gbG9hZFNuYXBwZXIoZWxlbWVudCwgb3B0aW9ucykge1xyXG4gICAgLy8gVE9ETzogUHJvdmlkZSBhIGRvbU5vZGUgcGFyYW0gYW5kIGRlZmF1bHQgdG8gdmlld0NvbnRhaW5lciBpZiBub3QgcHJvdmlkZWRcclxuICAgIGlmICh0aGlzLnNuYXBwZXIpIHtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgc25hcHBlciA9IG5ldyBzbmFwKG9wdGlvbnMgfHwgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXHJcbiAgICAgIGVsZW1lbnQ6IGVsZW1lbnQgfHwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZpZXdDb250YWluZXInKSxcclxuICAgICAgZHJhZ2dlcjogbnVsbCxcclxuICAgICAgZGlzYWJsZTogJ25vbmUnLFxyXG4gICAgICBhZGRCb2R5Q2xhc3NlczogdHJ1ZSxcclxuICAgICAgaHlwZXJleHRlbnNpYmxlOiBmYWxzZSxcclxuICAgICAgcmVzaXN0YW5jZTogMC4xLFxyXG4gICAgICBmbGlja1RocmVzaG9sZDogNTAsXHJcbiAgICAgIHRyYW5zaXRpb25TcGVlZDogMC4yLFxyXG4gICAgICBlYXNpbmc6ICdlYXNlJyxcclxuICAgICAgbWF4UG9zaXRpb246IDI2NixcclxuICAgICAgbWluUG9zaXRpb246IC0yNjYsXHJcbiAgICAgIHRhcFRvQ2xvc2U6IGhhcygnaWUnKSA/IGZhbHNlIDogdHJ1ZSwgLy8gY2F1c2VzIGlzc3VlcyBvbiB3aW5kb3dzIHBob25lcyB3aGVyZSB0YXBwaW5nIHRoZSBjbG9zZSBidXR0b24gY2F1c2VzIHNuYXAuanMgZW5kRHJhZyB0byBmaXJlLCBjbG9zaW5nIHRoZSBtZW51IGJlZm9yZSB3ZSBjYW4gY2hlY2sgdGhlIHN0YXRlIHByb3Blcmx5XHJcbiAgICAgIHRvdWNoVG9EcmFnOiBmYWxzZSxcclxuICAgICAgc2xpZGVJbnRlbnQ6IDQwLFxyXG4gICAgICBtaW5EcmFnRGlzdGFuY2U6IDUsXHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLnNuYXBwZXIgPSBzbmFwcGVyO1xyXG5cclxuICAgIHRoaXMuc2hvd0xlZnREcmF3ZXIoKTtcclxuICAgIHRoaXMuc2hvd1JpZ2h0RHJhd2VyKCk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9LFxyXG4gIHNldFRvb2xCYXJNb2RlOiBmdW5jdGlvbiBzZXRUb29sQmFyTW9kZShvbkxpbmUpIHtcclxuICAgIGZvciAoY29uc3QgbiBpbiB0aGlzLmJhcnMpIHtcclxuICAgICAgaWYgKHRoaXMuYmFyc1tuXS5tYW5hZ2VkKSB7XHJcbiAgICAgICAgdGhpcy5iYXJzW25dLnNldE1vZGUob25MaW5lKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0sXHJcbn0pO1xyXG5cclxuLy8gQmFja3dhcmRzIGNvbXBhdGliaWxpdHkgZm9yIGN1c3RvbSBtb2R1bGVzIHN0aWxsIHJlZmVyZW5jaW5nIHRoZSBvbGQgZGVjbGFyZSBnbG9iYWxcclxubGFuZy5zZXRPYmplY3QoJ1NhZ2UuUGxhdGZvcm0uTW9iaWxlLkFwcGxpY2F0aW9uJywgX19jbGFzcyk7XHJcbmV4cG9ydCBkZWZhdWx0IF9fY2xhc3M7XHJcbiJdfQ==
</pre>
</body>
</html>
