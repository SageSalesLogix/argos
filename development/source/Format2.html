<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">define('argos/Format', ['exports', 'module', 'dojo/_base/json', 'dojo/_base/lang', 'dojo/_base/array', 'dojo/dom-construct', 'dojo/string', 'dojo/number', './Convert', './Utility', './I18n'], function (exports, module, _dojo_baseJson, _dojo_baseLang, _dojo_baseArray, _dojoDomConstruct, _dojoString, _dojoNumber, _Convert, _Utility, _I18n) {
  function _interopRequireDefault(obj) { return obj &amp;&amp; obj.__esModule ? obj : { 'default': obj }; }

  /* Copyright (c) 2010, Sage Software, Inc. All rights reserved.
   *
   * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *     http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */

  var _json = _interopRequireDefault(_dojo_baseJson);

  var _lang = _interopRequireDefault(_dojo_baseLang);

  var _array = _interopRequireDefault(_dojo_baseArray);

  var _domConstruct = _interopRequireDefault(_dojoDomConstruct);

  var _string = _interopRequireDefault(_dojoString);

  var _dNumber = _interopRequireDefault(_dojoNumber);

  var _convert = _interopRequireDefault(_Convert);

  var _utility = _interopRequireDefault(_Utility);

  var _getResource = _interopRequireDefault(_I18n);

  var resource = (0, _getResource['default'])('format');
  var dtFormatResource = (0, _getResource['default'])('formatDateTimeFormat');

  var getVectorMaxSize = function getVectorMaxSize(v) {
    var w = 1;
    var h = 1;

    for (var i = 0; i &lt; v.length; i++) {
      for (var j = 0; j &lt; v[i].length; j++) {
        if (w &lt; v[i][j][0]) {
          w = v[i][j][0];
        }

        if (h &lt; v[i][j][1]) {
          h = v[i][j][1];
        }
      }
    }
    // maybe should return bounding box? (x,y,w,h)
    return {
      width: w,
      height: h
    };
  };

  var phoneLettersMap = [{
    test: /[ABC]/gi,
    val: '2'
  }, {
    test: /[DEF]/gi,
    val: '3'
  }, {
    test: /[GHI]/gi,
    val: '4'
  }, {
    test: /[JKL]/gi,
    val: '5'
  }, {
    test: /[MNO]/gi,
    val: '6'
  }, {
    test: /[PQRS]/gi,
    val: '7'
  }, {
    test: /[TUV]/gi,
    val: '8'
  }, {
    test: /[WXYZwyz]/g, // Note lowercase 'x' should stay for extensions
    val: '9'
  }];

  function isEmpty(val) {
    if (typeof val !== 'string') {
      return !val;
    }

    return val.length &lt;= 0;
  }

  function encode(val) {
    if (typeof val !== 'string') {
      return val;
    }

    return val.replace(/&amp;/g, '&amp;amp;').replace(/&lt;/g, '&amp;lt;').replace(/&gt;/g, '&amp;gt;').replace(/&quot;/g, '&amp;quot;');
  }

  function decode(val) {
    if (typeof val !== 'string') {
      return val;
    }

    return val.replace(/&amp;amp;/g, '&amp;').replace(/&amp;lt;/g, '&lt;').replace(/&amp;gt;/g, '&gt;').replace(/&amp;quot;/g, '&quot;');
  }

  var __class = undefined;
<span id='argos-Format'>  /**
</span>   * @class argos.Format
   * Format is a singleton that provides various formatting functions.
   * @alternateClassName format
   * @requires argos.Convert
   * @singleton
   */
  __class = _lang['default'].setObject('argos.Format', {
<span id='argos-Format-property-yesText'>    /**
</span>     * @property {String}
     * Text used in {@link #yesNo yesNo} formatter for true values
     */
    yesText: resource.yesText,
<span id='argos-Format-property-noText'>    /**
</span>     * @property {String}
     * Text used in {@link #yesNo yesNo} formatter for false values
     */
    noText: resource.noText,
<span id='argos-Format-property-trueText'>    /**
</span>     * @property {String}
     * Text used in {@link #bool bool} formatter for true values
     */
    trueText: resource.trueText,
<span id='argos-Format-property-falseText'>    /**
</span>     * @property {String}
     * Text used in {@link #bool bool} formatter for false values
     */
    falseText: resource.falseText,
<span id='argos-Format-property-hoursText'>    /**
</span>     * @property {String}
     * Text used in {@link #timespan timespan} formatter for more than one hour
     */
    hoursText: resource.hoursText,
<span id='argos-Format-property-hourText'>    /**
</span>     * @property {String}
     * Text used in {@link #timespan timespan} formatter for exactly one hour
     */
    hourText: resource.hourText,
<span id='argos-Format-property-minutesText'>    /**
</span>     * @property {String}
     * Text used in {@link #timespan timespan} formatter for more than one minute
     */
    minutesText: resource.minutesText,
<span id='argos-Format-property-minuteText'>    /**
</span>     * @property {String}
     * Text used in {@link #timespan timespan} formatter for exactly one minute
     */
    minuteText: resource.minuteText,

    shortDateFormatText: dtFormatResource.shortDateFormatText,

<span id='argos-Format-property-percentFormatText'>    /**
</span>     * @property {String}
     * format string for percent
     * * `${0}` - percent value
     * * `${1}` - percent synmbol &quot;%&quot;
     */
    percentFormatText: resource.percentFormatText,
<span id='argos-Format-method-encode'>    /**
</span>     * Takes a String and encodes `&amp;`, `&lt;`, `&gt;`, `&quot;` to HTML entities
     * @param {String} String to encode
     * @return {String} Html encoded string
     */
    encode: encode,
<span id='argos-Format-method-decode'>    /**
</span>     * Takes a String and decodes `&amp;`, `&lt;`, `&gt;`, `&quot;` from HTML entities back to the character
     * @param {String} String to decode
     * @return {String} Html decoded string
     */
    decode: decode,
<span id='argos-Format-method-isEmpty'>    /**
</span>     * Determines if the given item is an empty string or empty arry
     * @param {String/Array} Item to check if empty
     * @return {Boolean} If passed item is empty
     */
    isEmpty: isEmpty,
<span id='argos-Format-property-bytesText'>    /**
</span>     * @property {String}
     * Text used in file size  formatter
     */
    bytesText: resource.bytesText,
<span id='argos-Format-property-phoneFormat'>    /**
</span>     * @property {Object[]}
     * Array of objects that have the keys `test` and `format` where `test` is a RegExp that
     * matches the phone grouping and `format` is the string format to be replaced.
     *
     * The RegExp may have capture groups but when you are defining the format strings use:
     *
     * * `${0}` - original value
     * * `${1}` - cleaned value
     * * `${2}` - entire match (against clean value)
     * * `${3..n}` - match groups (against clean value)
     *
     * The `clean value` is taking the inputted numbers/text and removing any non-number
     * and non-&quot;x&quot; and it replaces A-Z to their respective phone number character.
     *
     * The three default formatters are:
     * * `nnn-nnnn`
     * * `(nnn)-nnn-nnnn`
     * * `(nnn)-nnn-nnnxnnnn`
     *
     * If you plan to override this value make sure you include the default ones provided.
     *
     */
    phoneFormat: [{
      test: /^\+.*/,
      format: '${0}'
    }, {
      test: /^(\d{3})(\d{3,4})$/,
      format: '${3}-${4}'
    }, {
      test: /^(\d{3})(\d{3})(\d{2,4})$/, // 555 555 5555
      format: '(${3})-${4}-${5}'
    }, {
      test: /^(\d{3})(\d{3})(\d{2,4})([^0-9]{1,}.*)$/, // 555 555 5555x
      format: '(${3})-${4}-${5}${6}'
    }, {
      test: /^(\d{11,})(.*)$/,
      format: '${1}'
    }],
<span id='argos-Format-method-link'>    /**
</span>     * Takes a url string and wraps it with an `&lt;a&gt;` element with `href=` pointing to the url.
     * @param {String} val Url string to be wrapped
     * @return {String} An `&lt;a&gt;` element as a string.
     */
    link: function link(val) {
      if (typeof val !== 'string') {
        return val;
      }

      // Check if the user specified a URI scheme,
      // does not include all URI Schemes, such as tel:, etc.
      var schemes = ['://', 'mailto:'];
      var hasURIScheme = _array['default'].some(schemes, function some(scheme) {
        return val.indexOf(scheme) &gt; -1;
      });

      if (hasURIScheme) {
        return _string['default'].substitute('&lt;a target=&quot;_blank&quot; href=&quot;${0}&quot;&gt;${0}&lt;/a&gt;', [val]);
      }

      // Specify a default URI scheme of http
      return _string['default'].substitute('&lt;a target=&quot;_blank&quot; href=&quot;http://${0}&quot;&gt;${0}&lt;/a&gt;', [val]);
    },
<span id='argos-Format-method-mail'>    /**
</span>     * Takes an email string and wraps it with an `&lt;a&gt;` element with `href=&quot;mailto:&quot;` pointing to the email.
     * @param {String} val Email string to be wrapped
     * @return {String} An `&lt;a&gt;` element as a string.
     */
    mail: function mail(val) {
      if (typeof val !== 'string') {
        return val;
      }

      return _string['default'].substitute('&lt;a href=&quot;mailto:${0}&quot;&gt;${0}&lt;/a&gt;', [val]);
    },
<span id='argos-Format-method-trim'>    /**
</span>     * Removes whitespace from from and end of string
     * @param {String} val String to be trimmed
     * @return {String} String without space on either end
     */
    trim: function trim(val) {
      return val.replace(/^\s+|\s+$/g, '');
    },
<span id='argos-Format-method-date'>    /**
</span>     * Takes a date and format string and returns the formatted date as a string.
     * @param {Date/String} val Date to be converted. If string is passed it is converted to a date using {@link convert#toDateFromString Converts toDateFromString}.
     * @param {String} fmt Format string following [datejs formatting](http://code.google.com/p/datejs/wiki/FormatSpecifiers).
     * @param {Boolean} utc If a date should be in UTC time set this flag to true to counter-act javascripts built-in timezone applier.
     * @return {String} Date formatted as a string.
     */
    date: function date(val, fmt, utc) {
      var dateValue = undefined;
      if (val instanceof Date) {
        dateValue = val;
      } else if (_convert['default'].isDateString(val)) {
        dateValue = _convert['default'].toDateFromString(val);
      } else {
        dateValue = null;
      }

      if (dateValue) {
        dateValue = moment(dateValue);
        if (utc) {
          dateValue = dateValue.subtract({
            minutes: dateValue.utcOffset()
          });
        }

        return dateValue.format(fmt || argos.Format.shortDateFormatText);
      }

      return val;
    },
<span id='argos-Format-method-fixed'>    /**
</span>     * Takes a number and decimal place and floors the number to that place:
     *
     * `fixed(5.555, 0)` =&gt; `5`
     * `fixed(5.555, 2)` =&gt; `5.55`
     * `fixed(5.555, 5)` =&gt; `5.555`
     *
     * @param {Number/String} val The value will be `parseFloat` before operating.
     * @param {Number} d Number of decimals places to keep, defaults to 2 if not provided.
     * @return {Number} Fixed number.
     */
    fixed: function fixed(val, d) {
      if (typeof val !== 'number' &amp;&amp; typeof val !== 'string') {
        return val;
      }

      var decimals = 2;
      if (typeof d === 'number') {
        decimals = d;
      }

      var m = Math.pow(10, decimals);
      var v = Math.floor(parseFloat(val) * m) / m;

      return v;
    },
<span id='argos-Format-method-percent'>    /**
</span>     * Takes a decimal number, multiplies by 100 and adds the % sign with the number of palces to the right.
     *
     * `perecent(0.35)` =&gt; `'35.00%'`
     * `perecent(0.35, 0)` =&gt; `'35%'`
     * `percent(2.9950)` =&gt; `'299.50%'`
     * `percent(2.9950,0)` =&gt; `'300%'`
     *
     * @param {Number/String} val The value will be `parseFloat` before operating.
     * @param {Number/String} places If no value is given the default value will be set to 2.
     * @return {String} Number as a percentage with % sign.
     */
    percent: function percent(val, places) {
      var decimalPlaces = 2;
      if (typeof places === 'number') {
        decimalPlaces = places;
      }

      decimalPlaces = Math.floor(decimalPlaces);
      var intVal = 100 * (parseFloat(val) || 0.00);
      var v = _utility['default'].roundNumberTo(intVal, decimalPlaces);

      // get the whole number part
      var wp = (intVal &gt;= 0 ? Math.floor(v) : Math.ceil(v)).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g, '$1' + Mobile.CultureInfo.numberFormat.percentGroupSeparator.replace('\\.', '.'));
      var numberFormated = undefined;
      if (decimalPlaces &lt; 1) {
        // format with out decimal part
        numberFormated = _string['default'].substitute('${0}', [wp]).replace(/ /g, ' '); // keep numbers from breaking
      } else {
          var dp = v % 1; // get the decimal part
          dp = dp.toPrecision(decimalPlaces + 1); // round to significant pecsion
          dp = dp.toString();
          var pos = dp.indexOf('.') &gt; -1 ? dp.indexOf('.') + 1 : 2;
          dp = dp.substr(pos, decimalPlaces); // get the whole decimal part
          numberFormated = _string['default'].substitute('${0}' + Mobile.CultureInfo.numberFormat.percentDecimalSeparator + '${1}', [wp, dp]).replace(/ /g, ' '); // keep numbers from breaking
        }

      return _string['default'].substitute(argos.Format.percentFormatText, [numberFormated, Mobile.CultureInfo.numberFormat.percentSymbol]);
    },
<span id='argos-Format-method-yesNo'>    /**
</span>     * Takes a boolean value and returns the string Yes or No for true or false
     * @param {Boolean/String} val If string it tests if the string is `true` for true, else assumes false
     * @return {String} Yes for true, No for false.
     */
    yesNo: function yesNo(val) {
      var results = val;
      if (typeof val === 'string') {
        results = /^true$/i.test(val);
      }

      return results ? argos.Format.yesText || 'Yes' : argos.Format.noText || 'No';
    },
<span id='argos-Format-method-bool'>    /**
</span>     * Takes a boolean value and returns the string T or F for true or false
     * @param {Boolean/String} val If string it tests if the string is `true` for true, else assumes false
     * @return {String} T for true, F for false.
     */
    bool: function bool(val) {
      var results = val;
      if (typeof val === 'string') {
        results = /^true$/i.test(val);
      }

      return results ? argos.Format.trueText || 'T' : argos.Format.falseText || 'F';
    },
<span id='argos-Format-method-nl2br'>    /**
</span>     * Takes a string and converts all new lines `\n` to HTML `&lt;br&gt;` elements.
     * @param {String} val String with newlines
     * @return {String} String with replaced `\n` with `&lt;br&gt;`
     */
    nl2br: function nl2br(val) {
      if (typeof val !== 'string') {
        return val;
      }

      return val.replace(/\n/g, '&lt;br /&gt;');
    },
<span id='argos-Format-method-timespan'>    /**
</span>     * Takes a number of minutes and turns it into the string: `'n hours m minutes'`
     * @param {Number/String} val Number of minutes, will be `parseFloat` before operations and fixed to 2 decimal places
     * @return {String} A string representation of the minutes as `'n hours m minutes'`
     */
    timespan: function timespan(val) {
      var v = argos.Format.fixed(val);
      if (isNaN(v) || !v) {
        return '';
      }

      var hrs = Math.floor(v / 60);
      var mins = v % 60;

      if (hrs) {
        hrs = hrs &gt; 1 ? _string['default'].substitute('${0} ${1}', [hrs, argos.Format.hoursText || 'hours']) : _string['default'].substitute('${0} ${1}', [hrs, argos.Format.hourText || 'hour']);
      }

      if (mins) {
        mins = mins &gt; 1 ? _string['default'].substitute('${0} ${1}', [mins, argos.Format.minutesText || 'minutes']) : _string['default'].substitute('${0} ${1}', [mins, argos.Format.minuteText || 'minute']);
      }

      if (hrs &amp;&amp; mins) {
        return hrs + ' ' + mins;
      } else if (hrs === 0) {
        return mins;
      }

      return hrs;
    },
<span id='argos-Format-method-canvasDraw'>    /**
</span>     * Takes a 2D array of `[[x,y],[x,y]]` number coordinates and draws them onto the provided canvas
     * The first point marks where the &quot;pen&quot; starts, each sequential point is then &quot;drawn to&quot; as if holding a
     * pen on paper and moving the pen to the new point.
     * @param {Number[][]} vector A series of x,y coordinates in the format of: `[[0,0],[1,5]]`
     * @param {HTMLElement} canvas The `&lt;canvas&gt;` element to be drawn on
     * @param {Object} options Canvas options: scale, lineWidth and penColor.
     */
    canvasDraw: function canvasDraw(vector, canvas, options) {
      var context = canvas.getContext('2d');

      // Paint canvas white vs. clearing as on Android imageFromVector alpha pixels blacken
      // context.clearRect(0, 0, context.canvas.width, context.canvas.height);
      context.fillStyle = 'rgb(255,255,255)';
      context.fillRect(0, 0, context.canvas.width, context.canvas.height);

      var scale = options &amp;&amp; options.scale ? options.scale : 1;
      context.lineWidth = options &amp;&amp; options.lineWidth ? options.lineWidth : 1;
      context.strokeStyle = options &amp;&amp; options.penColor ? options.penColor : 'black';

      for (var trace in vector) {
        if (vector[trace].length &gt; 1) {
          context.beginPath();
          context.moveTo(vector[trace][0][0] * scale, vector[trace][0][1] * scale);
          for (var i = 1; i &lt; vector[trace].length; i++) {
            var x = vector[trace][i][0] * scale;
            var y = vector[trace][i][1] * scale;
            context.lineTo(x, y);
          }
          context.stroke();
        }
      }
    },
<span id='argos-Format-method-imageFromVector'>    /**
</span>     * Returns the image data (or img element) for a series of vectors
     * @param {Number[][]} vector A series of x,y coordinates in the format of: `[[0,0],[1,5]]`. These will be drawn sequentially as one line.
     * @param {Object} options Canvas options: scale, lineWidth and penColor.
     * @param {Boolean} html Flag for returning image as a data-uri or as a stringified `&lt;img&gt;` element.
     * @return {String} The encoded data of the drawn image, optionally wrapped in `&lt;img&gt;` if html was passed as true
     */
    imageFromVector: function imageFromVector(vector, options, html) {
      if (options === undefined) options = {};

      var canvasNode = _domConstruct['default'].create('canvas');
      var _vector = undefined;
      if (typeof vector === 'string' || vector instanceof String) {
        try {
          _vector = _json['default'].fromJson(vector);
        } catch (e) {} //eslint-disable-line
      }

      if (!(_vector instanceof Array) || _vector.length === 0) {
        _vector = [[]]; // blank image.
      }

      var size = getVectorMaxSize(_vector);

      canvasNode.width = options.width || size.width;
      canvasNode.height = options.height || size.height;

      options.scale = Math.min(canvasNode.width / size.width, canvasNode.height / size.height);

      argos.Format.canvasDraw(_vector, canvasNode, options);

      var img = canvasNode.toDataURL('image/png');
      if (img.indexOf('data:image/png') !== 0) {
        img = Canvas2Image.saveAsBMP(canvasNode, true).src;
      }

      return html ? _string['default'].substitute('&lt;img src=&quot;${0}&quot; width=&quot;${1}&quot; height=&quot;${2}&quot; alt=&quot;${3}&quot; /&gt;', [img, options.width, options.height, options.title || '']) : img;
    },
<span id='argos-Format-method-phone'>    /**
</span>     * Takes a string phone input and attempts to match it against the predefined
     * phone formats - if a match is found it is returned formatted if not it is returned
     * as is.
     * @param val {String} String inputted phone number to format
     * @param asLink {Boolean} True to put the phone in an anchor element pointing to a tel: uri
     * @returns {String}
     */
    phone: function phone(val, asLink) {
      if (typeof val !== 'string') {
        return val;
      }

      var phoneVal = argos.Format.alphaToPhoneNumeric(val);
      var formatters = argos.Format.phoneFormat;
      var clean = /^\+/.test(phoneVal) ? phoneVal : phoneVal.replace(/[^0-9x]/ig, '');
      var formattedMatch = undefined;

      for (var i = 0; i &lt; formatters.length; i++) {
        var formatter = formatters[i];
        var match = undefined;
        if (match = formatter.test.exec(clean)) {
          formattedMatch = _string['default'].substitute(formatter.format, [phoneVal, clean].concat(match));
        }
      }

      if (formattedMatch) {
        return asLink ? _string['default'].substitute('&lt;a href=&quot;tel:${0}&quot;&gt;${1}&lt;/a&gt;', [clean, formattedMatch]) : formattedMatch;
      }

      return phoneVal;
    },
<span id='argos-Format-method-alphaToPhoneNumeric'>    /**
</span>     * Takes a string input and converts A-Z to their respective phone number character
     * `1800CALLME` -&gt; `1800225563`
     * @param val
     * @returns {String}
     */
    alphaToPhoneNumeric: function alphaToPhoneNumeric(val) {
      var phoneVal = val;
      for (var i = 0; i &lt; phoneLettersMap.length; i++) {
        phoneVal = phoneVal.replace(phoneLettersMap[i].test, phoneLettersMap[i].val);
      }
      return phoneVal;
    },
    fileSize: function fileSize(size) {
      var parsedSize = parseInt(size, 10);
      if (parsedSize === 0) {
        return '0 KB';
      }
      if (!parsedSize || parsedSize &lt; 0) {
        return 'Unknown';
      }
      if (parsedSize &lt; 1024) {
        return _dNumber['default'].format(Math.round(parsedSize)) + ' ' + argos.Format.bytesText;
      } else if (parsedSize &gt; 1024 &amp;&amp; parsedSize &lt; 1024 * 1000) {
        return _dNumber['default'].format(Math.round(parsedSize / 1024)) + ' KB';
      }
      return _dNumber['default'].format(Math.round(parsedSize / (1024 * 1000))) + ' MB';
    }
  });

  _lang['default'].setObject('Sage.Platform.Mobile.Format', __class);
  module.exports = __class;
});
//# sourceMappingURL=data:application/json;base64,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QUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQztPQUM5RDtBQUNELGFBQU8sb0JBQVEsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsVUFBVSxJQUFJLElBQUksR0FBRyxJQUFJLENBQUEsQUFBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUM7S0FDdkU7R0FDRixDQUFDLENBQUM7O0FBRUgsbUJBQUssU0FBUyxDQUFDLDZCQUE2QixFQUFFLE9BQU8sQ0FBQyxDQUFDO21CQUN4QyxPQUFPIiwiZmlsZSI6InNyYy9Gb3JtYXQuanMiLCJzb3VyY2VSb290Ijoic3JjIiwic291cmNlc0NvbnRlbnQiOlsiLyogQ29weXJpZ2h0IChjKSAyMDEwLCBTYWdlIFNvZnR3YXJlLCBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuaW1wb3J0IGpzb24gZnJvbSAnZG9qby9fYmFzZS9qc29uJztcclxuaW1wb3J0IGxhbmcgZnJvbSAnZG9qby9fYmFzZS9sYW5nJztcclxuaW1wb3J0IGFycmF5IGZyb20gJ2Rvam8vX2Jhc2UvYXJyYXknO1xyXG5pbXBvcnQgZG9tQ29uc3RydWN0IGZyb20gJ2Rvam8vZG9tLWNvbnN0cnVjdCc7XHJcbmltcG9ydCBzdHJpbmcgZnJvbSAnZG9qby9zdHJpbmcnO1xyXG5pbXBvcnQgZE51bWJlciBmcm9tICdkb2pvL251bWJlcic7XHJcbmltcG9ydCBjb252ZXJ0IGZyb20gJy4vQ29udmVydCc7XHJcbmltcG9ydCB1dGlsaXR5IGZyb20gJy4vVXRpbGl0eSc7XHJcbmltcG9ydCBnZXRSZXNvdXJjZSBmcm9tICcuL0kxOG4nO1xyXG5cclxuY29uc3QgcmVzb3VyY2UgPSBnZXRSZXNvdXJjZSgnZm9ybWF0Jyk7XHJcbmNvbnN0IGR0Rm9ybWF0UmVzb3VyY2UgPSBnZXRSZXNvdXJjZSgnZm9ybWF0RGF0ZVRpbWVGb3JtYXQnKTtcclxuXHJcbmNvbnN0IGdldFZlY3Rvck1heFNpemUgPSBmdW5jdGlvbiBnZXRWZWN0b3JNYXhTaXplKHYpIHtcclxuICBsZXQgdyA9IDE7XHJcbiAgbGV0IGggPSAxO1xyXG5cclxuICBmb3IgKGxldCBpID0gMDsgaSA8IHYubGVuZ3RoOyBpKyspIHtcclxuICAgIGZvciAobGV0IGogPSAwOyBqIDwgdltpXS5sZW5ndGg7IGorKykge1xyXG4gICAgICBpZiAodyA8IHZbaV1bal1bMF0pIHtcclxuICAgICAgICB3ID0gdltpXVtqXVswXTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGggPCB2W2ldW2pdWzFdKSB7XHJcbiAgICAgICAgaCA9IHZbaV1bal1bMV07XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbiAgLy8gbWF5YmUgc2hvdWxkIHJldHVybiBib3VuZGluZyBib3g/ICh4LHksdyxoKVxyXG4gIHJldHVybiB7XHJcbiAgICB3aWR0aDogdyxcclxuICAgIGhlaWdodDogaCxcclxuICB9O1xyXG59O1xyXG5cclxuY29uc3QgcGhvbmVMZXR0ZXJzTWFwID0gW3tcclxuICB0ZXN0OiAvW0FCQ10vZ2ksXHJcbiAgdmFsOiAnMicsXHJcbn0sIHtcclxuICB0ZXN0OiAvW0RFRl0vZ2ksXHJcbiAgdmFsOiAnMycsXHJcbn0sIHtcclxuICB0ZXN0OiAvW0dISV0vZ2ksXHJcbiAgdmFsOiAnNCcsXHJcbn0sIHtcclxuICB0ZXN0OiAvW0pLTF0vZ2ksXHJcbiAgdmFsOiAnNScsXHJcbn0sIHtcclxuICB0ZXN0OiAvW01OT10vZ2ksXHJcbiAgdmFsOiAnNicsXHJcbn0sIHtcclxuICB0ZXN0OiAvW1BRUlNdL2dpLFxyXG4gIHZhbDogJzcnLFxyXG59LCB7XHJcbiAgdGVzdDogL1tUVVZdL2dpLFxyXG4gIHZhbDogJzgnLFxyXG59LCB7XHJcbiAgdGVzdDogL1tXWFlad3l6XS9nLCAvLyBOb3RlIGxvd2VyY2FzZSAneCcgc2hvdWxkIHN0YXkgZm9yIGV4dGVuc2lvbnNcclxuICB2YWw6ICc5JyxcclxufV07XHJcblxyXG5cclxuZnVuY3Rpb24gaXNFbXB0eSh2YWwpIHtcclxuICBpZiAodHlwZW9mIHZhbCAhPT0gJ3N0cmluZycpIHtcclxuICAgIHJldHVybiAhdmFsO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuICh2YWwubGVuZ3RoIDw9IDApO1xyXG59XHJcblxyXG5mdW5jdGlvbiBlbmNvZGUodmFsKSB7XHJcbiAgaWYgKHR5cGVvZiB2YWwgIT09ICdzdHJpbmcnKSB7XHJcbiAgICByZXR1cm4gdmFsO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHZhbFxyXG4gICAgLnJlcGxhY2UoLyYvZywgJyZhbXA7JylcclxuICAgIC5yZXBsYWNlKC88L2csICcmbHQ7JylcclxuICAgIC5yZXBsYWNlKC8+L2csICcmZ3Q7JylcclxuICAgIC5yZXBsYWNlKC9cIi9nLCAnJnF1b3Q7Jyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRlY29kZSh2YWwpIHtcclxuICBpZiAodHlwZW9mIHZhbCAhPT0gJ3N0cmluZycpIHtcclxuICAgIHJldHVybiB2YWw7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gdmFsXHJcbiAgICAucmVwbGFjZSgvJmFtcDsvZywgJyYnKVxyXG4gICAgLnJlcGxhY2UoLyZsdDsvZywgJzwnKVxyXG4gICAgLnJlcGxhY2UoLyZndDsvZywgJz4nKVxyXG4gICAgLnJlcGxhY2UoLyZxdW90Oy9nLCAnXCInKTtcclxufVxyXG5cclxubGV0IF9fY2xhc3M7XHJcbi8qKlxyXG4gKiBAY2xhc3MgYXJnb3MuRm9ybWF0XHJcbiAqIEZvcm1hdCBpcyBhIHNpbmdsZXRvbiB0aGF0IHByb3ZpZGVzIHZhcmlvdXMgZm9ybWF0dGluZyBmdW5jdGlvbnMuXHJcbiAqIEBhbHRlcm5hdGVDbGFzc05hbWUgZm9ybWF0XHJcbiAqIEByZXF1aXJlcyBhcmdvcy5Db252ZXJ0XHJcbiAqIEBzaW5nbGV0b25cclxuICovXHJcbl9fY2xhc3MgPSBsYW5nLnNldE9iamVjdCgnYXJnb3MuRm9ybWF0Jywge1xyXG4gIC8qKlxyXG4gICAqIEBwcm9wZXJ0eSB7U3RyaW5nfVxyXG4gICAqIFRleHQgdXNlZCBpbiB7QGxpbmsgI3llc05vIHllc05vfSBmb3JtYXR0ZXIgZm9yIHRydWUgdmFsdWVzXHJcbiAgICovXHJcbiAgeWVzVGV4dDogcmVzb3VyY2UueWVzVGV4dCxcclxuICAvKipcclxuICAgKiBAcHJvcGVydHkge1N0cmluZ31cclxuICAgKiBUZXh0IHVzZWQgaW4ge0BsaW5rICN5ZXNObyB5ZXNOb30gZm9ybWF0dGVyIGZvciBmYWxzZSB2YWx1ZXNcclxuICAgKi9cclxuICBub1RleHQ6IHJlc291cmNlLm5vVGV4dCxcclxuICAvKipcclxuICAgKiBAcHJvcGVydHkge1N0cmluZ31cclxuICAgKiBUZXh0IHVzZWQgaW4ge0BsaW5rICNib29sIGJvb2x9IGZvcm1hdHRlciBmb3IgdHJ1ZSB2YWx1ZXNcclxuICAgKi9cclxuICB0cnVlVGV4dDogcmVzb3VyY2UudHJ1ZVRleHQsXHJcbiAgLyoqXHJcbiAgICogQHByb3BlcnR5IHtTdHJpbmd9XHJcbiAgICogVGV4dCB1c2VkIGluIHtAbGluayAjYm9vbCBib29sfSBmb3JtYXR0ZXIgZm9yIGZhbHNlIHZhbHVlc1xyXG4gICAqL1xyXG4gIGZhbHNlVGV4dDogcmVzb3VyY2UuZmFsc2VUZXh0LFxyXG4gIC8qKlxyXG4gICAqIEBwcm9wZXJ0eSB7U3RyaW5nfVxyXG4gICAqIFRleHQgdXNlZCBpbiB7QGxpbmsgI3RpbWVzcGFuIHRpbWVzcGFufSBmb3JtYXR0ZXIgZm9yIG1vcmUgdGhhbiBvbmUgaG91clxyXG4gICAqL1xyXG4gIGhvdXJzVGV4dDogcmVzb3VyY2UuaG91cnNUZXh0LFxyXG4gIC8qKlxyXG4gICAqIEBwcm9wZXJ0eSB7U3RyaW5nfVxyXG4gICAqIFRleHQgdXNlZCBpbiB7QGxpbmsgI3RpbWVzcGFuIHRpbWVzcGFufSBmb3JtYXR0ZXIgZm9yIGV4YWN0bHkgb25lIGhvdXJcclxuICAgKi9cclxuICBob3VyVGV4dDogcmVzb3VyY2UuaG91clRleHQsXHJcbiAgLyoqXHJcbiAgICogQHByb3BlcnR5IHtTdHJpbmd9XHJcbiAgICogVGV4dCB1c2VkIGluIHtAbGluayAjdGltZXNwYW4gdGltZXNwYW59IGZvcm1hdHRlciBmb3IgbW9yZSB0aGFuIG9uZSBtaW51dGVcclxuICAgKi9cclxuICBtaW51dGVzVGV4dDogcmVzb3VyY2UubWludXRlc1RleHQsXHJcbiAgLyoqXHJcbiAgICogQHByb3BlcnR5IHtTdHJpbmd9XHJcbiAgICogVGV4dCB1c2VkIGluIHtAbGluayAjdGltZXNwYW4gdGltZXNwYW59IGZvcm1hdHRlciBmb3IgZXhhY3RseSBvbmUgbWludXRlXHJcbiAgICovXHJcbiAgbWludXRlVGV4dDogcmVzb3VyY2UubWludXRlVGV4dCxcclxuXHJcbiAgc2hvcnREYXRlRm9ybWF0VGV4dDogZHRGb3JtYXRSZXNvdXJjZS5zaG9ydERhdGVGb3JtYXRUZXh0LFxyXG5cclxuICAvKipcclxuICAgKiBAcHJvcGVydHkge1N0cmluZ31cclxuICAgKiBmb3JtYXQgc3RyaW5nIGZvciBwZXJjZW50XHJcbiAgICogKiBgJHswfWAgLSBwZXJjZW50IHZhbHVlXHJcbiAgICogKiBgJHsxfWAgLSBwZXJjZW50IHN5bm1ib2wgXCIlXCJcclxuICAgKi9cclxuICBwZXJjZW50Rm9ybWF0VGV4dDogcmVzb3VyY2UucGVyY2VudEZvcm1hdFRleHQsXHJcbiAgLyoqXHJcbiAgICogVGFrZXMgYSBTdHJpbmcgYW5kIGVuY29kZXMgYCZgLCBgPGAsIGA+YCwgYFwiYCB0byBIVE1MIGVudGl0aWVzXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IFN0cmluZyB0byBlbmNvZGVcclxuICAgKiBAcmV0dXJuIHtTdHJpbmd9IEh0bWwgZW5jb2RlZCBzdHJpbmdcclxuICAgKi9cclxuICBlbmNvZGU6IGVuY29kZSxcclxuICAvKipcclxuICAgKiBUYWtlcyBhIFN0cmluZyBhbmQgZGVjb2RlcyBgJmAsIGA8YCwgYD5gLCBgXCJgIGZyb20gSFRNTCBlbnRpdGllcyBiYWNrIHRvIHRoZSBjaGFyYWN0ZXJcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gU3RyaW5nIHRvIGRlY29kZVxyXG4gICAqIEByZXR1cm4ge1N0cmluZ30gSHRtbCBkZWNvZGVkIHN0cmluZ1xyXG4gICAqL1xyXG4gIGRlY29kZTogZGVjb2RlLFxyXG4gIC8qKlxyXG4gICAqIERldGVybWluZXMgaWYgdGhlIGdpdmVuIGl0ZW0gaXMgYW4gZW1wdHkgc3RyaW5nIG9yIGVtcHR5IGFycnlcclxuICAgKiBAcGFyYW0ge1N0cmluZy9BcnJheX0gSXRlbSB0byBjaGVjayBpZiBlbXB0eVxyXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59IElmIHBhc3NlZCBpdGVtIGlzIGVtcHR5XHJcbiAgICovXHJcbiAgaXNFbXB0eTogaXNFbXB0eSxcclxuICAvKipcclxuICAgKiBAcHJvcGVydHkge1N0cmluZ31cclxuICAgKiBUZXh0IHVzZWQgaW4gZmlsZSBzaXplICBmb3JtYXR0ZXJcclxuICAgKi9cclxuICBieXRlc1RleHQ6IHJlc291cmNlLmJ5dGVzVGV4dCxcclxuICAvKipcclxuICAgKiBAcHJvcGVydHkge09iamVjdFtdfVxyXG4gICAqIEFycmF5IG9mIG9iamVjdHMgdGhhdCBoYXZlIHRoZSBrZXlzIGB0ZXN0YCBhbmQgYGZvcm1hdGAgd2hlcmUgYHRlc3RgIGlzIGEgUmVnRXhwIHRoYXRcclxuICAgKiBtYXRjaGVzIHRoZSBwaG9uZSBncm91cGluZyBhbmQgYGZvcm1hdGAgaXMgdGhlIHN0cmluZyBmb3JtYXQgdG8gYmUgcmVwbGFjZWQuXHJcbiAgICpcclxuICAgKiBUaGUgUmVnRXhwIG1heSBoYXZlIGNhcHR1cmUgZ3JvdXBzIGJ1dCB3aGVuIHlvdSBhcmUgZGVmaW5pbmcgdGhlIGZvcm1hdCBzdHJpbmdzIHVzZTpcclxuICAgKlxyXG4gICAqICogYCR7MH1gIC0gb3JpZ2luYWwgdmFsdWVcclxuICAgKiAqIGAkezF9YCAtIGNsZWFuZWQgdmFsdWVcclxuICAgKiAqIGAkezJ9YCAtIGVudGlyZSBtYXRjaCAoYWdhaW5zdCBjbGVhbiB2YWx1ZSlcclxuICAgKiAqIGAkezMuLm59YCAtIG1hdGNoIGdyb3VwcyAoYWdhaW5zdCBjbGVhbiB2YWx1ZSlcclxuICAgKlxyXG4gICAqIFRoZSBgY2xlYW4gdmFsdWVgIGlzIHRha2luZyB0aGUgaW5wdXR0ZWQgbnVtYmVycy90ZXh0IGFuZCByZW1vdmluZyBhbnkgbm9uLW51bWJlclxyXG4gICAqIGFuZCBub24tXCJ4XCIgYW5kIGl0IHJlcGxhY2VzIEEtWiB0byB0aGVpciByZXNwZWN0aXZlIHBob25lIG51bWJlciBjaGFyYWN0ZXIuXHJcbiAgICpcclxuICAgKiBUaGUgdGhyZWUgZGVmYXVsdCBmb3JtYXR0ZXJzIGFyZTpcclxuICAgKiAqIGBubm4tbm5ubmBcclxuICAgKiAqIGAobm5uKS1ubm4tbm5ubmBcclxuICAgKiAqIGAobm5uKS1ubm4tbm5ueG5ubm5gXHJcbiAgICpcclxuICAgKiBJZiB5b3UgcGxhbiB0byBvdmVycmlkZSB0aGlzIHZhbHVlIG1ha2Ugc3VyZSB5b3UgaW5jbHVkZSB0aGUgZGVmYXVsdCBvbmVzIHByb3ZpZGVkLlxyXG4gICAqXHJcbiAgICovXHJcbiAgcGhvbmVGb3JtYXQ6IFt7XHJcbiAgICB0ZXN0OiAvXlxcKy4qLyxcclxuICAgIGZvcm1hdDogJyR7MH0nLFxyXG4gIH0sIHtcclxuICAgIHRlc3Q6IC9eKFxcZHszfSkoXFxkezMsNH0pJC8sXHJcbiAgICBmb3JtYXQ6ICckezN9LSR7NH0nLFxyXG4gIH0sIHtcclxuICAgIHRlc3Q6IC9eKFxcZHszfSkoXFxkezN9KShcXGR7Miw0fSkkLywgLy8gNTU1IDU1NSA1NTU1XHJcbiAgICBmb3JtYXQ6ICcoJHszfSktJHs0fS0kezV9JyxcclxuICB9LCB7XHJcbiAgICB0ZXN0OiAvXihcXGR7M30pKFxcZHszfSkoXFxkezIsNH0pKFteMC05XXsxLH0uKikkLywgLy8gNTU1IDU1NSA1NTU1eFxyXG4gICAgZm9ybWF0OiAnKCR7M30pLSR7NH0tJHs1fSR7Nn0nLFxyXG4gIH0sIHtcclxuICAgIHRlc3Q6IC9eKFxcZHsxMSx9KSguKikkLyxcclxuICAgIGZvcm1hdDogJyR7MX0nLFxyXG4gIH1dLFxyXG4gIC8qKlxyXG4gICAqIFRha2VzIGEgdXJsIHN0cmluZyBhbmQgd3JhcHMgaXQgd2l0aCBhbiBgPGE+YCBlbGVtZW50IHdpdGggYGhyZWY9YCBwb2ludGluZyB0byB0aGUgdXJsLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB2YWwgVXJsIHN0cmluZyB0byBiZSB3cmFwcGVkXHJcbiAgICogQHJldHVybiB7U3RyaW5nfSBBbiBgPGE+YCBlbGVtZW50IGFzIGEgc3RyaW5nLlxyXG4gICAqL1xyXG4gIGxpbms6IGZ1bmN0aW9uIGxpbmsodmFsKSB7XHJcbiAgICBpZiAodHlwZW9mIHZhbCAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgcmV0dXJuIHZhbDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDaGVjayBpZiB0aGUgdXNlciBzcGVjaWZpZWQgYSBVUkkgc2NoZW1lLFxyXG4gICAgLy8gZG9lcyBub3QgaW5jbHVkZSBhbGwgVVJJIFNjaGVtZXMsIHN1Y2ggYXMgdGVsOiwgZXRjLlxyXG4gICAgY29uc3Qgc2NoZW1lcyA9IFsnOi8vJywgJ21haWx0bzonXTtcclxuICAgIGNvbnN0IGhhc1VSSVNjaGVtZSA9IGFycmF5LnNvbWUoc2NoZW1lcywgZnVuY3Rpb24gc29tZShzY2hlbWUpIHtcclxuICAgICAgcmV0dXJuIHZhbC5pbmRleE9mKHNjaGVtZSkgPiAtMTtcclxuICAgIH0pO1xyXG5cclxuICAgIGlmIChoYXNVUklTY2hlbWUpIHtcclxuICAgICAgcmV0dXJuIHN0cmluZy5zdWJzdGl0dXRlKCc8YSB0YXJnZXQ9XCJfYmxhbmtcIiBocmVmPVwiJHswfVwiPiR7MH08L2E+JywgW3ZhbF0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFNwZWNpZnkgYSBkZWZhdWx0IFVSSSBzY2hlbWUgb2YgaHR0cFxyXG4gICAgcmV0dXJuIHN0cmluZy5zdWJzdGl0dXRlKCc8YSB0YXJnZXQ9XCJfYmxhbmtcIiBocmVmPVwiaHR0cDovLyR7MH1cIj4kezB9PC9hPicsIFt2YWxdKTtcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIFRha2VzIGFuIGVtYWlsIHN0cmluZyBhbmQgd3JhcHMgaXQgd2l0aCBhbiBgPGE+YCBlbGVtZW50IHdpdGggYGhyZWY9XCJtYWlsdG86XCJgIHBvaW50aW5nIHRvIHRoZSBlbWFpbC5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gdmFsIEVtYWlsIHN0cmluZyB0byBiZSB3cmFwcGVkXHJcbiAgICogQHJldHVybiB7U3RyaW5nfSBBbiBgPGE+YCBlbGVtZW50IGFzIGEgc3RyaW5nLlxyXG4gICAqL1xyXG4gIG1haWw6IGZ1bmN0aW9uIG1haWwodmFsKSB7XHJcbiAgICBpZiAodHlwZW9mIHZhbCAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgcmV0dXJuIHZhbDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gc3RyaW5nLnN1YnN0aXR1dGUoJzxhIGhyZWY9XCJtYWlsdG86JHswfVwiPiR7MH08L2E+JywgW3ZhbF0pO1xyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogUmVtb3ZlcyB3aGl0ZXNwYWNlIGZyb20gZnJvbSBhbmQgZW5kIG9mIHN0cmluZ1xyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB2YWwgU3RyaW5nIHRvIGJlIHRyaW1tZWRcclxuICAgKiBAcmV0dXJuIHtTdHJpbmd9IFN0cmluZyB3aXRob3V0IHNwYWNlIG9uIGVpdGhlciBlbmRcclxuICAgKi9cclxuICB0cmltOiBmdW5jdGlvbiB0cmltKHZhbCkge1xyXG4gICAgcmV0dXJuIHZhbC5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJyk7XHJcbiAgfSxcclxuICAvKipcclxuICAgKiBUYWtlcyBhIGRhdGUgYW5kIGZvcm1hdCBzdHJpbmcgYW5kIHJldHVybnMgdGhlIGZvcm1hdHRlZCBkYXRlIGFzIGEgc3RyaW5nLlxyXG4gICAqIEBwYXJhbSB7RGF0ZS9TdHJpbmd9IHZhbCBEYXRlIHRvIGJlIGNvbnZlcnRlZC4gSWYgc3RyaW5nIGlzIHBhc3NlZCBpdCBpcyBjb252ZXJ0ZWQgdG8gYSBkYXRlIHVzaW5nIHtAbGluayBjb252ZXJ0I3RvRGF0ZUZyb21TdHJpbmcgQ29udmVydHMgdG9EYXRlRnJvbVN0cmluZ30uXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGZtdCBGb3JtYXQgc3RyaW5nIGZvbGxvd2luZyBbZGF0ZWpzIGZvcm1hdHRpbmddKGh0dHA6Ly9jb2RlLmdvb2dsZS5jb20vcC9kYXRlanMvd2lraS9Gb3JtYXRTcGVjaWZpZXJzKS5cclxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IHV0YyBJZiBhIGRhdGUgc2hvdWxkIGJlIGluIFVUQyB0aW1lIHNldCB0aGlzIGZsYWcgdG8gdHJ1ZSB0byBjb3VudGVyLWFjdCBqYXZhc2NyaXB0cyBidWlsdC1pbiB0aW1lem9uZSBhcHBsaWVyLlxyXG4gICAqIEByZXR1cm4ge1N0cmluZ30gRGF0ZSBmb3JtYXR0ZWQgYXMgYSBzdHJpbmcuXHJcbiAgICovXHJcbiAgZGF0ZTogZnVuY3Rpb24gZGF0ZSh2YWwsIGZtdCwgdXRjKSB7XHJcbiAgICBsZXQgZGF0ZVZhbHVlO1xyXG4gICAgaWYgKHZhbCBpbnN0YW5jZW9mIERhdGUpIHtcclxuICAgICAgZGF0ZVZhbHVlID0gdmFsO1xyXG4gICAgfSBlbHNlIGlmIChjb252ZXJ0LmlzRGF0ZVN0cmluZyh2YWwpKSB7XHJcbiAgICAgIGRhdGVWYWx1ZSA9IGNvbnZlcnQudG9EYXRlRnJvbVN0cmluZyh2YWwpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZGF0ZVZhbHVlID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZGF0ZVZhbHVlKSB7XHJcbiAgICAgIGRhdGVWYWx1ZSA9IG1vbWVudChkYXRlVmFsdWUpO1xyXG4gICAgICBpZiAodXRjKSB7XHJcbiAgICAgICAgZGF0ZVZhbHVlID0gZGF0ZVZhbHVlLnN1YnRyYWN0KHtcclxuICAgICAgICAgIG1pbnV0ZXM6IGRhdGVWYWx1ZS51dGNPZmZzZXQoKSxcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIGRhdGVWYWx1ZS5mb3JtYXQoZm10IHx8IGFyZ29zLkZvcm1hdC5zaG9ydERhdGVGb3JtYXRUZXh0KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdmFsO1xyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogVGFrZXMgYSBudW1iZXIgYW5kIGRlY2ltYWwgcGxhY2UgYW5kIGZsb29ycyB0aGUgbnVtYmVyIHRvIHRoYXQgcGxhY2U6XHJcbiAgICpcclxuICAgKiBgZml4ZWQoNS41NTUsIDApYCA9PiBgNWBcclxuICAgKiBgZml4ZWQoNS41NTUsIDIpYCA9PiBgNS41NWBcclxuICAgKiBgZml4ZWQoNS41NTUsIDUpYCA9PiBgNS41NTVgXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge051bWJlci9TdHJpbmd9IHZhbCBUaGUgdmFsdWUgd2lsbCBiZSBgcGFyc2VGbG9hdGAgYmVmb3JlIG9wZXJhdGluZy5cclxuICAgKiBAcGFyYW0ge051bWJlcn0gZCBOdW1iZXIgb2YgZGVjaW1hbHMgcGxhY2VzIHRvIGtlZXAsIGRlZmF1bHRzIHRvIDIgaWYgbm90IHByb3ZpZGVkLlxyXG4gICAqIEByZXR1cm4ge051bWJlcn0gRml4ZWQgbnVtYmVyLlxyXG4gICAqL1xyXG4gIGZpeGVkOiBmdW5jdGlvbiBmaXhlZCh2YWwsIGQpIHtcclxuICAgIGlmICh0eXBlb2YgdmFsICE9PSAnbnVtYmVyJyAmJiB0eXBlb2YgdmFsICE9PSAnc3RyaW5nJykge1xyXG4gICAgICByZXR1cm4gdmFsO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBkZWNpbWFscyA9IDI7XHJcbiAgICBpZiAodHlwZW9mIGQgPT09ICdudW1iZXInKSB7XHJcbiAgICAgIGRlY2ltYWxzID0gZDtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBtID0gTWF0aC5wb3coMTAsIGRlY2ltYWxzKTtcclxuICAgIGNvbnN0IHYgPSBNYXRoLmZsb29yKHBhcnNlRmxvYXQodmFsKSAqIG0pIC8gbTtcclxuXHJcbiAgICByZXR1cm4gdjtcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIFRha2VzIGEgZGVjaW1hbCBudW1iZXIsIG11bHRpcGxpZXMgYnkgMTAwIGFuZCBhZGRzIHRoZSAlIHNpZ24gd2l0aCB0aGUgbnVtYmVyIG9mIHBhbGNlcyB0byB0aGUgcmlnaHQuXHJcbiAgICpcclxuICAgKiBgcGVyZWNlbnQoMC4zNSlgID0+IGAnMzUuMDAlJ2BcclxuICAgKiBgcGVyZWNlbnQoMC4zNSwgMClgID0+IGAnMzUlJ2BcclxuICAgKiBgcGVyY2VudCgyLjk5NTApYCA9PiBgJzI5OS41MCUnYFxyXG4gICAqIGBwZXJjZW50KDIuOTk1MCwwKWAgPT4gYCczMDAlJ2BcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7TnVtYmVyL1N0cmluZ30gdmFsIFRoZSB2YWx1ZSB3aWxsIGJlIGBwYXJzZUZsb2F0YCBiZWZvcmUgb3BlcmF0aW5nLlxyXG4gICAqIEBwYXJhbSB7TnVtYmVyL1N0cmluZ30gcGxhY2VzIElmIG5vIHZhbHVlIGlzIGdpdmVuIHRoZSBkZWZhdWx0IHZhbHVlIHdpbGwgYmUgc2V0IHRvIDIuXHJcbiAgICogQHJldHVybiB7U3RyaW5nfSBOdW1iZXIgYXMgYSBwZXJjZW50YWdlIHdpdGggJSBzaWduLlxyXG4gICAqL1xyXG4gIHBlcmNlbnQ6IGZ1bmN0aW9uIHBlcmNlbnQodmFsLCBwbGFjZXMpIHtcclxuICAgIGxldCBkZWNpbWFsUGxhY2VzID0gMjtcclxuICAgIGlmICh0eXBlb2YgcGxhY2VzID09PSAnbnVtYmVyJykge1xyXG4gICAgICBkZWNpbWFsUGxhY2VzID0gcGxhY2VzO1xyXG4gICAgfVxyXG5cclxuICAgIGRlY2ltYWxQbGFjZXMgPSBNYXRoLmZsb29yKGRlY2ltYWxQbGFjZXMpO1xyXG4gICAgY29uc3QgaW50VmFsID0gMTAwICogKHBhcnNlRmxvYXQodmFsKSB8fCAwLjAwKTtcclxuICAgIGNvbnN0IHYgPSB1dGlsaXR5LnJvdW5kTnVtYmVyVG8oaW50VmFsLCBkZWNpbWFsUGxhY2VzKTtcclxuXHJcbiAgICAvLyBnZXQgdGhlIHdob2xlIG51bWJlciBwYXJ0XHJcbiAgICBjb25zdCB3cCA9ICgoKGludFZhbCA+PSAwKSA/IE1hdGguZmxvb3IodikgOiBNYXRoLmNlaWwodikpKS50b1N0cmluZygpLnJlcGxhY2UoLyhcXGQpKD89KFxcZHszfSkrKD8hXFxkKSkvZywgJyQxJyArIE1vYmlsZS5DdWx0dXJlSW5mby5udW1iZXJGb3JtYXQucGVyY2VudEdyb3VwU2VwYXJhdG9yLnJlcGxhY2UoJ1xcXFwuJywgJy4nKSk7XHJcbiAgICBsZXQgbnVtYmVyRm9ybWF0ZWQ7XHJcbiAgICBpZiAoZGVjaW1hbFBsYWNlcyA8IDEpIHsgLy8gZm9ybWF0IHdpdGggb3V0IGRlY2ltYWwgcGFydFxyXG4gICAgICBudW1iZXJGb3JtYXRlZCA9IHN0cmluZy5zdWJzdGl0dXRlKCckezB9JywgW3dwXSkucmVwbGFjZSgvIC9nLCAnXFx1MDBBMCcpOyAvLyBrZWVwIG51bWJlcnMgZnJvbSBicmVha2luZ1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgbGV0IGRwID0gdiAlIDE7IC8vIGdldCB0aGUgZGVjaW1hbCBwYXJ0XHJcbiAgICAgIGRwID0gZHAudG9QcmVjaXNpb24oZGVjaW1hbFBsYWNlcyArIDEpOyAvLyByb3VuZCB0byBzaWduaWZpY2FudCBwZWNzaW9uXHJcbiAgICAgIGRwID0gZHAudG9TdHJpbmcoKTtcclxuICAgICAgbGV0IHBvcyA9IChkcC5pbmRleE9mKCcuJykgPiAtMSA/IGRwLmluZGV4T2YoJy4nKSArIDEgOiAyKTtcclxuICAgICAgZHAgPSBkcC5zdWJzdHIocG9zLCBkZWNpbWFsUGxhY2VzKTsgLy8gZ2V0IHRoZSB3aG9sZSBkZWNpbWFsIHBhcnRcclxuICAgICAgbnVtYmVyRm9ybWF0ZWQgPSBzdHJpbmcuc3Vic3RpdHV0ZShcclxuICAgICAgICAnJHswfScgKyBNb2JpbGUuQ3VsdHVyZUluZm8ubnVtYmVyRm9ybWF0LnBlcmNlbnREZWNpbWFsU2VwYXJhdG9yICsgJyR7MX0nLCBbd3AsIGRwXVxyXG4gICAgICApLnJlcGxhY2UoLyAvZywgJ1xcdTAwQTAnKTsgLy8ga2VlcCBudW1iZXJzIGZyb20gYnJlYWtpbmdcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gc3RyaW5nLnN1YnN0aXR1dGUoYXJnb3MuRm9ybWF0LnBlcmNlbnRGb3JtYXRUZXh0LCBbbnVtYmVyRm9ybWF0ZWQsIE1vYmlsZS5DdWx0dXJlSW5mby5udW1iZXJGb3JtYXQucGVyY2VudFN5bWJvbF0pO1xyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogVGFrZXMgYSBib29sZWFuIHZhbHVlIGFuZCByZXR1cm5zIHRoZSBzdHJpbmcgWWVzIG9yIE5vIGZvciB0cnVlIG9yIGZhbHNlXHJcbiAgICogQHBhcmFtIHtCb29sZWFuL1N0cmluZ30gdmFsIElmIHN0cmluZyBpdCB0ZXN0cyBpZiB0aGUgc3RyaW5nIGlzIGB0cnVlYCBmb3IgdHJ1ZSwgZWxzZSBhc3N1bWVzIGZhbHNlXHJcbiAgICogQHJldHVybiB7U3RyaW5nfSBZZXMgZm9yIHRydWUsIE5vIGZvciBmYWxzZS5cclxuICAgKi9cclxuICB5ZXNObzogZnVuY3Rpb24geWVzTm8odmFsKSB7XHJcbiAgICBsZXQgcmVzdWx0cyA9IHZhbDtcclxuICAgIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykge1xyXG4gICAgICByZXN1bHRzID0gL150cnVlJC9pLnRlc3QodmFsKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmVzdWx0cyA/IGFyZ29zLkZvcm1hdC55ZXNUZXh0IHx8ICdZZXMnIDogYXJnb3MuRm9ybWF0Lm5vVGV4dCB8fCAnTm8nO1xyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogVGFrZXMgYSBib29sZWFuIHZhbHVlIGFuZCByZXR1cm5zIHRoZSBzdHJpbmcgVCBvciBGIGZvciB0cnVlIG9yIGZhbHNlXHJcbiAgICogQHBhcmFtIHtCb29sZWFuL1N0cmluZ30gdmFsIElmIHN0cmluZyBpdCB0ZXN0cyBpZiB0aGUgc3RyaW5nIGlzIGB0cnVlYCBmb3IgdHJ1ZSwgZWxzZSBhc3N1bWVzIGZhbHNlXHJcbiAgICogQHJldHVybiB7U3RyaW5nfSBUIGZvciB0cnVlLCBGIGZvciBmYWxzZS5cclxuICAgKi9cclxuICBib29sOiBmdW5jdGlvbiBib29sKHZhbCkge1xyXG4gICAgbGV0IHJlc3VsdHMgPSB2YWw7XHJcbiAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgcmVzdWx0cyA9IC9edHJ1ZSQvaS50ZXN0KHZhbCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHJlc3VsdHMgPyBhcmdvcy5Gb3JtYXQudHJ1ZVRleHQgfHwgJ1QnIDogYXJnb3MuRm9ybWF0LmZhbHNlVGV4dCB8fCAnRic7XHJcbiAgfSxcclxuICAvKipcclxuICAgKiBUYWtlcyBhIHN0cmluZyBhbmQgY29udmVydHMgYWxsIG5ldyBsaW5lcyBgXFxuYCB0byBIVE1MIGA8YnI+YCBlbGVtZW50cy5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gdmFsIFN0cmluZyB3aXRoIG5ld2xpbmVzXHJcbiAgICogQHJldHVybiB7U3RyaW5nfSBTdHJpbmcgd2l0aCByZXBsYWNlZCBgXFxuYCB3aXRoIGA8YnI+YFxyXG4gICAqL1xyXG4gIG5sMmJyOiBmdW5jdGlvbiBubDJicih2YWwpIHtcclxuICAgIGlmICh0eXBlb2YgdmFsICE9PSAnc3RyaW5nJykge1xyXG4gICAgICByZXR1cm4gdmFsO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB2YWwucmVwbGFjZSgvXFxuL2csICc8YnIgLz4nKTtcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIFRha2VzIGEgbnVtYmVyIG9mIG1pbnV0ZXMgYW5kIHR1cm5zIGl0IGludG8gdGhlIHN0cmluZzogYCduIGhvdXJzIG0gbWludXRlcydgXHJcbiAgICogQHBhcmFtIHtOdW1iZXIvU3RyaW5nfSB2YWwgTnVtYmVyIG9mIG1pbnV0ZXMsIHdpbGwgYmUgYHBhcnNlRmxvYXRgIGJlZm9yZSBvcGVyYXRpb25zIGFuZCBmaXhlZCB0byAyIGRlY2ltYWwgcGxhY2VzXHJcbiAgICogQHJldHVybiB7U3RyaW5nfSBBIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgbWludXRlcyBhcyBgJ24gaG91cnMgbSBtaW51dGVzJ2BcclxuICAgKi9cclxuICB0aW1lc3BhbjogZnVuY3Rpb24gdGltZXNwYW4odmFsKSB7XHJcbiAgICBjb25zdCB2ID0gYXJnb3MuRm9ybWF0LmZpeGVkKHZhbCk7XHJcbiAgICBpZiAoaXNOYU4odikgfHwgIXYpIHtcclxuICAgICAgcmV0dXJuICcnO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBocnMgPSBNYXRoLmZsb29yKHYgLyA2MCk7XHJcbiAgICBsZXQgbWlucyA9IHYgJSA2MDtcclxuXHJcbiAgICBpZiAoaHJzKSB7XHJcbiAgICAgIGhycyA9IGhycyA+IDEgPyBzdHJpbmcuc3Vic3RpdHV0ZSgnJHswfSAkezF9JywgW2hycywgKGFyZ29zLkZvcm1hdC5ob3Vyc1RleHQgfHwgJ2hvdXJzJyldKSA6IHN0cmluZy5zdWJzdGl0dXRlKCckezB9ICR7MX0nLCBbaHJzLCAoYXJnb3MuRm9ybWF0LmhvdXJUZXh0IHx8ICdob3VyJyldKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAobWlucykge1xyXG4gICAgICBtaW5zID0gbWlucyA+IDEgPyBzdHJpbmcuc3Vic3RpdHV0ZSgnJHswfSAkezF9JywgW21pbnMsIChhcmdvcy5Gb3JtYXQubWludXRlc1RleHQgfHwgJ21pbnV0ZXMnKV0pIDogc3RyaW5nLnN1YnN0aXR1dGUoJyR7MH0gJHsxfScsIFttaW5zLCAoYXJnb3MuRm9ybWF0Lm1pbnV0ZVRleHQgfHwgJ21pbnV0ZScpXSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGhycyAmJiBtaW5zKSB7XHJcbiAgICAgIHJldHVybiBgJHtocnN9ICR7bWluc31gO1xyXG4gICAgfSBlbHNlIGlmIChocnMgPT09IDApIHtcclxuICAgICAgcmV0dXJuIG1pbnM7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGhycztcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIFRha2VzIGEgMkQgYXJyYXkgb2YgYFtbeCx5XSxbeCx5XV1gIG51bWJlciBjb29yZGluYXRlcyBhbmQgZHJhd3MgdGhlbSBvbnRvIHRoZSBwcm92aWRlZCBjYW52YXNcclxuICAgKiBUaGUgZmlyc3QgcG9pbnQgbWFya3Mgd2hlcmUgdGhlIFwicGVuXCIgc3RhcnRzLCBlYWNoIHNlcXVlbnRpYWwgcG9pbnQgaXMgdGhlbiBcImRyYXduIHRvXCIgYXMgaWYgaG9sZGluZyBhXHJcbiAgICogcGVuIG9uIHBhcGVyIGFuZCBtb3ZpbmcgdGhlIHBlbiB0byB0aGUgbmV3IHBvaW50LlxyXG4gICAqIEBwYXJhbSB7TnVtYmVyW11bXX0gdmVjdG9yIEEgc2VyaWVzIG9mIHgseSBjb29yZGluYXRlcyBpbiB0aGUgZm9ybWF0IG9mOiBgW1swLDBdLFsxLDVdXWBcclxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBjYW52YXMgVGhlIGA8Y2FudmFzPmAgZWxlbWVudCB0byBiZSBkcmF3biBvblxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIENhbnZhcyBvcHRpb25zOiBzY2FsZSwgbGluZVdpZHRoIGFuZCBwZW5Db2xvci5cclxuICAgKi9cclxuICBjYW52YXNEcmF3OiBmdW5jdGlvbiBjYW52YXNEcmF3KHZlY3RvciwgY2FudmFzLCBvcHRpb25zKSB7XHJcbiAgICBjb25zdCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcblxyXG4gICAgLy8gUGFpbnQgY2FudmFzIHdoaXRlIHZzLiBjbGVhcmluZyBhcyBvbiBBbmRyb2lkIGltYWdlRnJvbVZlY3RvciBhbHBoYSBwaXhlbHMgYmxhY2tlblxyXG4gICAgLy8gY29udGV4dC5jbGVhclJlY3QoMCwgMCwgY29udGV4dC5jYW52YXMud2lkdGgsIGNvbnRleHQuY2FudmFzLmhlaWdodCk7XHJcbiAgICBjb250ZXh0LmZpbGxTdHlsZSA9ICdyZ2IoMjU1LDI1NSwyNTUpJztcclxuICAgIGNvbnRleHQuZmlsbFJlY3QoMCwgMCwgY29udGV4dC5jYW52YXMud2lkdGgsIGNvbnRleHQuY2FudmFzLmhlaWdodCk7XHJcblxyXG4gICAgY29uc3Qgc2NhbGUgPSBvcHRpb25zICYmIG9wdGlvbnMuc2NhbGUgPyBvcHRpb25zLnNjYWxlIDogMTtcclxuICAgIGNvbnRleHQubGluZVdpZHRoID0gb3B0aW9ucyAmJiBvcHRpb25zLmxpbmVXaWR0aCA/IG9wdGlvbnMubGluZVdpZHRoIDogMTtcclxuICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSBvcHRpb25zICYmIG9wdGlvbnMucGVuQ29sb3IgPyBvcHRpb25zLnBlbkNvbG9yIDogJ2JsYWNrJztcclxuXHJcbiAgICBmb3IgKGNvbnN0IHRyYWNlIGluIHZlY3Rvcikge1xyXG4gICAgICBpZiAodmVjdG9yW3RyYWNlXS5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcclxuICAgICAgICBjb250ZXh0Lm1vdmVUbyh2ZWN0b3JbdHJhY2VdWzBdWzBdICogc2NhbGUsIHZlY3Rvclt0cmFjZV1bMF1bMV0gKiBzY2FsZSk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCB2ZWN0b3JbdHJhY2VdLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICBjb25zdCB4ID0gdmVjdG9yW3RyYWNlXVtpXVswXSAqIHNjYWxlO1xyXG4gICAgICAgICAgY29uc3QgeSA9IHZlY3Rvclt0cmFjZV1baV1bMV0gKiBzY2FsZTtcclxuICAgICAgICAgIGNvbnRleHQubGluZVRvKHgsIHkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb250ZXh0LnN0cm9rZSgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSxcclxuICAvKipcclxuICAgKiBSZXR1cm5zIHRoZSBpbWFnZSBkYXRhIChvciBpbWcgZWxlbWVudCkgZm9yIGEgc2VyaWVzIG9mIHZlY3RvcnNcclxuICAgKiBAcGFyYW0ge051bWJlcltdW119IHZlY3RvciBBIHNlcmllcyBvZiB4LHkgY29vcmRpbmF0ZXMgaW4gdGhlIGZvcm1hdCBvZjogYFtbMCwwXSxbMSw1XV1gLiBUaGVzZSB3aWxsIGJlIGRyYXduIHNlcXVlbnRpYWxseSBhcyBvbmUgbGluZS5cclxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBDYW52YXMgb3B0aW9uczogc2NhbGUsIGxpbmVXaWR0aCBhbmQgcGVuQ29sb3IuXHJcbiAgICogQHBhcmFtIHtCb29sZWFufSBodG1sIEZsYWcgZm9yIHJldHVybmluZyBpbWFnZSBhcyBhIGRhdGEtdXJpIG9yIGFzIGEgc3RyaW5naWZpZWQgYDxpbWc+YCBlbGVtZW50LlxyXG4gICAqIEByZXR1cm4ge1N0cmluZ30gVGhlIGVuY29kZWQgZGF0YSBvZiB0aGUgZHJhd24gaW1hZ2UsIG9wdGlvbmFsbHkgd3JhcHBlZCBpbiBgPGltZz5gIGlmIGh0bWwgd2FzIHBhc3NlZCBhcyB0cnVlXHJcbiAgICovXHJcbiAgaW1hZ2VGcm9tVmVjdG9yOiBmdW5jdGlvbiBpbWFnZUZyb21WZWN0b3IodmVjdG9yLCBvcHRpb25zID0ge30sIGh0bWwpIHtcclxuICAgIGNvbnN0IGNhbnZhc05vZGUgPSBkb21Db25zdHJ1Y3QuY3JlYXRlKCdjYW52YXMnKTtcclxuICAgIGxldCBfdmVjdG9yO1xyXG4gICAgaWYgKHR5cGVvZiB2ZWN0b3IgPT09ICdzdHJpbmcnIHx8IHZlY3RvciBpbnN0YW5jZW9mIFN0cmluZykge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIF92ZWN0b3IgPSBqc29uLmZyb21Kc29uKHZlY3Rvcik7XHJcbiAgICAgIH0gY2F0Y2ggKGUpIHt9Ly9lc2xpbnQtZGlzYWJsZS1saW5lXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCEoX3ZlY3RvciBpbnN0YW5jZW9mIEFycmF5KSB8fCBfdmVjdG9yLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICBfdmVjdG9yID0gW1xyXG4gICAgICAgIFtdLFxyXG4gICAgICBdOyAvLyBibGFuayBpbWFnZS5cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBzaXplID0gZ2V0VmVjdG9yTWF4U2l6ZShfdmVjdG9yKTtcclxuXHJcbiAgICBjYW52YXNOb2RlLndpZHRoID0gb3B0aW9ucy53aWR0aCB8fCBzaXplLndpZHRoO1xyXG4gICAgY2FudmFzTm9kZS5oZWlnaHQgPSBvcHRpb25zLmhlaWdodCB8fCBzaXplLmhlaWdodDtcclxuXHJcbiAgICBvcHRpb25zLnNjYWxlID0gTWF0aC5taW4oXHJcbiAgICAgIGNhbnZhc05vZGUud2lkdGggLyBzaXplLndpZHRoLFxyXG4gICAgICBjYW52YXNOb2RlLmhlaWdodCAvIHNpemUuaGVpZ2h0XHJcbiAgICApO1xyXG5cclxuICAgIGFyZ29zLkZvcm1hdC5jYW52YXNEcmF3KF92ZWN0b3IsIGNhbnZhc05vZGUsIG9wdGlvbnMpO1xyXG5cclxuICAgIGxldCBpbWcgPSBjYW52YXNOb2RlLnRvRGF0YVVSTCgnaW1hZ2UvcG5nJyk7XHJcbiAgICBpZiAoaW1nLmluZGV4T2YoJ2RhdGE6aW1hZ2UvcG5nJykgIT09IDApIHtcclxuICAgICAgaW1nID0gQ2FudmFzMkltYWdlLnNhdmVBc0JNUChjYW52YXNOb2RlLCB0cnVlKS5zcmM7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGh0bWwgPyBzdHJpbmcuc3Vic3RpdHV0ZShcclxuICAgICAgJzxpbWcgc3JjPVwiJHswfVwiIHdpZHRoPVwiJHsxfVwiIGhlaWdodD1cIiR7Mn1cIiBhbHQ9XCIkezN9XCIgLz4nLCBbaW1nLCBvcHRpb25zLndpZHRoLCBvcHRpb25zLmhlaWdodCwgb3B0aW9ucy50aXRsZSB8fCAnJ10pIDogaW1nO1xyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogVGFrZXMgYSBzdHJpbmcgcGhvbmUgaW5wdXQgYW5kIGF0dGVtcHRzIHRvIG1hdGNoIGl0IGFnYWluc3QgdGhlIHByZWRlZmluZWRcclxuICAgKiBwaG9uZSBmb3JtYXRzIC0gaWYgYSBtYXRjaCBpcyBmb3VuZCBpdCBpcyByZXR1cm5lZCBmb3JtYXR0ZWQgaWYgbm90IGl0IGlzIHJldHVybmVkXHJcbiAgICogYXMgaXMuXHJcbiAgICogQHBhcmFtIHZhbCB7U3RyaW5nfSBTdHJpbmcgaW5wdXR0ZWQgcGhvbmUgbnVtYmVyIHRvIGZvcm1hdFxyXG4gICAqIEBwYXJhbSBhc0xpbmsge0Jvb2xlYW59IFRydWUgdG8gcHV0IHRoZSBwaG9uZSBpbiBhbiBhbmNob3IgZWxlbWVudCBwb2ludGluZyB0byBhIHRlbDogdXJpXHJcbiAgICogQHJldHVybnMge1N0cmluZ31cclxuICAgKi9cclxuICBwaG9uZTogZnVuY3Rpb24gcGhvbmUodmFsLCBhc0xpbmspIHtcclxuICAgIGlmICh0eXBlb2YgdmFsICE9PSAnc3RyaW5nJykge1xyXG4gICAgICByZXR1cm4gdmFsO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHBob25lVmFsID0gYXJnb3MuRm9ybWF0LmFscGhhVG9QaG9uZU51bWVyaWModmFsKTtcclxuICAgIGNvbnN0IGZvcm1hdHRlcnMgPSBhcmdvcy5Gb3JtYXQucGhvbmVGb3JtYXQ7XHJcbiAgICBjb25zdCBjbGVhbiA9IC9eXFwrLy50ZXN0KHBob25lVmFsKSA/IHBob25lVmFsIDogcGhvbmVWYWwucmVwbGFjZSgvW14wLTl4XS9pZywgJycpO1xyXG4gICAgbGV0IGZvcm1hdHRlZE1hdGNoO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZm9ybWF0dGVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBjb25zdCBmb3JtYXR0ZXIgPSBmb3JtYXR0ZXJzW2ldO1xyXG4gICAgICBsZXQgbWF0Y2g7XHJcbiAgICAgIGlmICgobWF0Y2ggPSBmb3JtYXR0ZXIudGVzdC5leGVjKGNsZWFuKSkpIHtcclxuICAgICAgICBmb3JtYXR0ZWRNYXRjaCA9IHN0cmluZy5zdWJzdGl0dXRlKGZvcm1hdHRlci5mb3JtYXQsIFtwaG9uZVZhbCwgY2xlYW5dLmNvbmNhdChtYXRjaCkpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGZvcm1hdHRlZE1hdGNoKSB7XHJcbiAgICAgIHJldHVybiBhc0xpbmsgPyBzdHJpbmcuc3Vic3RpdHV0ZSgnPGEgaHJlZj1cInRlbDokezB9XCI+JHsxfTwvYT4nLCBbY2xlYW4sIGZvcm1hdHRlZE1hdGNoXSkgOiBmb3JtYXR0ZWRNYXRjaDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcGhvbmVWYWw7XHJcbiAgfSxcclxuICAvKipcclxuICAgKiBUYWtlcyBhIHN0cmluZyBpbnB1dCBhbmQgY29udmVydHMgQS1aIHRvIHRoZWlyIHJlc3BlY3RpdmUgcGhvbmUgbnVtYmVyIGNoYXJhY3RlclxyXG4gICAqIGAxODAwQ0FMTE1FYCAtPiBgMTgwMDIyNTU2M2BcclxuICAgKiBAcGFyYW0gdmFsXHJcbiAgICogQHJldHVybnMge1N0cmluZ31cclxuICAgKi9cclxuICBhbHBoYVRvUGhvbmVOdW1lcmljOiBmdW5jdGlvbiBhbHBoYVRvUGhvbmVOdW1lcmljKHZhbCkge1xyXG4gICAgbGV0IHBob25lVmFsID0gdmFsO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwaG9uZUxldHRlcnNNYXAubGVuZ3RoOyBpKyspIHtcclxuICAgICAgcGhvbmVWYWwgPSBwaG9uZVZhbC5yZXBsYWNlKHBob25lTGV0dGVyc01hcFtpXS50ZXN0LCBwaG9uZUxldHRlcnNNYXBbaV0udmFsKTtcclxuICAgIH1cclxuICAgIHJldHVybiBwaG9uZVZhbDtcclxuICB9LFxyXG4gIGZpbGVTaXplOiBmdW5jdGlvbiBmaWxlU2l6ZShzaXplKSB7XHJcbiAgICBjb25zdCBwYXJzZWRTaXplID0gcGFyc2VJbnQoc2l6ZSwgMTApO1xyXG4gICAgaWYgKHBhcnNlZFNpemUgPT09IDApIHtcclxuICAgICAgcmV0dXJuICcwIEtCJztcclxuICAgIH1cclxuICAgIGlmICghcGFyc2VkU2l6ZSB8fCBwYXJzZWRTaXplIDwgMCkge1xyXG4gICAgICByZXR1cm4gJ1Vua25vd24nO1xyXG4gICAgfVxyXG4gICAgaWYgKHBhcnNlZFNpemUgPCAxMDI0KSB7XHJcbiAgICAgIHJldHVybiBkTnVtYmVyLmZvcm1hdChNYXRoLnJvdW5kKHBhcnNlZFNpemUpKSArICcgJyArIGFyZ29zLkZvcm1hdC5ieXRlc1RleHQ7XHJcbiAgICB9IGVsc2UgaWYgKChwYXJzZWRTaXplID4gMTAyNCkgJiYgKHBhcnNlZFNpemUgPCAoMTAyNCAqIDEwMDApKSkge1xyXG4gICAgICByZXR1cm4gZE51bWJlci5mb3JtYXQoTWF0aC5yb3VuZChwYXJzZWRTaXplIC8gMTAyNCkpICsgJyBLQic7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZE51bWJlci5mb3JtYXQoTWF0aC5yb3VuZChwYXJzZWRTaXplIC8gKDEwMjQgKiAxMDAwKSkpICsgJyBNQic7XHJcbiAgfSxcclxufSk7XHJcblxyXG5sYW5nLnNldE9iamVjdCgnU2FnZS5QbGF0Zm9ybS5Nb2JpbGUuRm9ybWF0JywgX19jbGFzcyk7XHJcbmV4cG9ydCBkZWZhdWx0IF9fY2xhc3M7XHJcbiJdfQ==
</pre>
</body>
</html>
