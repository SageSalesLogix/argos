<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">define('crm/Integrations/BOE/Views/SalesOrderItems/Edit', ['exports', 'module', 'dojo/_base/declare', 'dojo/_base/lang', 'dojo/string', 'argos/Utility', 'argos/Edit', 'argos/I18n', '../../PricingAvailabilityService', 'crm/Validator', 'dojo/_base/array', '../../Models/Names', 'argos/Models/Types'], function (exports, module, _dojo_baseDeclare, _dojo_baseLang, _dojoString, _argosUtility, _argosEdit, _argosI18n, _PricingAvailabilityService, _crmValidator, _dojo_baseArray, _ModelsNames, _argosModelsTypes) {
  function _interopRequireDefault(obj) { return obj &amp;&amp; obj.__esModule ? obj : { 'default': obj }; }

  var _declare = _interopRequireDefault(_dojo_baseDeclare);

  var _lang = _interopRequireDefault(_dojo_baseLang);

  var _string = _interopRequireDefault(_dojoString);

  var _utility = _interopRequireDefault(_argosUtility);

  var _Edit = _interopRequireDefault(_argosEdit);

  var _getResource = _interopRequireDefault(_argosI18n);

  var _PricingAvailabilityService2 = _interopRequireDefault(_PricingAvailabilityService);

  var _validator = _interopRequireDefault(_crmValidator);

  var _array = _interopRequireDefault(_dojo_baseArray);

  var _MODEL_NAMES = _interopRequireDefault(_ModelsNames);

  var _MODEL_TYPES = _interopRequireDefault(_argosModelsTypes);

  var resource = (0, _getResource['default'])('salesOrderItemEdit');

<span id='crm-Views-QuoteLines-Edit'>  /**
</span>   * @class crm.Views.QuoteLines.Edit
   *
   * @extends argos.Edit
   *
   * @requires argos.Edit
   *
   */
  var __class = (0, _declare['default'])('crm.Integrations.BOE.Views.SalesOrderItems.Edit', [_Edit['default']], {
    // View Properties
    id: 'salesorder_item_edit',
    detailView: 'salesorder_item_detail',
    insertSecurity: 'Entities/SalesOrder/Add',
    updateSecurity: 'Entities/SalesOrder/Edit',
    resourceKind: 'salesOrderItems',
    titleText: resource.titleText,
    productText: resource.productText,
    quantityText: resource.quantityText,
    orderText: resource.orderText,
    priceText: resource.priceText,
    baseAdjustedPriceText: resource.baseAdjustedPriceText,
    docAdjustedPriceText: resource.docAdjustedPriceText,
    baseExtendedPriceText: resource.baseExtendedPriceText,
    docExtendedPriceText: resource.docExtendedPriceText,
    unitOfMeasureText: resource.unitOfMeasureText,
    unitsOfMeasureTitle: resource.unitsOfMeasureTitle,
    docTotalAmountText: resource.docTotalAmountText,
    lineText: resource.lineText,
    warehouseText: resource.warehouseText,
    accountLinked: false,

    init: function init() {
      this.inherited(arguments);
      this.fields.ErpLineNumber.disable();
      this.fields.SlxLocation.disable();
      this.fields.SalesOrder.disable();
      this.fields.Price.disable();
      this.fields.ExtendedPrice.disable();
      this.fields.DocExtendedPrice.disable();
      this.fields.CalculatedPrice.disable();
      this.fields.DocCalculatedPrice.disable();
      this.fields.DocTotalAmount.disable();
      this.connect(this.fields.Product, 'onChange', this.onProductChange);
      this.connect(this.fields.Quantity, 'onChange', this.onQuantityChange);
    },
    _applyLogicValues: function _applyLogicValues(values) {
      var product = this.fields.Product.getSelection();
      values.ProductName = product.Name;
      values.Family = product.Family;
      values.ActualID = product.ActualId;
      values.CommodityType = product.CommodityType;
    },
    applyContext: function applyContext() {
      this.inherited(arguments);
      if (this.options &amp;&amp; this.options.context) {
        if (this.options.context.SalesOrder) {
          this.fields.SalesOrder.setSelection(this.options.context.SalesOrder);
          this.fields.SalesOrder.disable();
          if (this.options.context.SalesOrder.Account) {
            this.accountLinked = this.options.context.SalesOrder.Account.ErpExtId ? true : false;
          }
        } else {
          this.fields.SalesOrder.enable();
        }
      }
      this.setProductDependentFields();
    },
    setProductDependentFields: function setProductDependentFields(product) {
      var _this = this;

      var dependants = this.getProductDependants();
      if (product) {
        dependants.forEach(function (f) {
          _this.fields[f].enable();
          _this.fields[f].dependsOn = 'Product';
          _this.fields[f].where = 'Product.Id eq &quot;' + product.$key + '&quot;';
        });
      } else {
        dependants.forEach(function (f) {
          _this.fields[f].disable();
          _this.fields[f].dependsOn = null;
          _this.fields[f].where = null;
        });
      }
    },
    getProductDependants: function getProductDependants() {
      return ['UnitOfMeasure'];
    },
    onInsert: function onInsert(values) {
      this._applyLogicValues(values);
      this.inherited(arguments);
    },
    onRefresh: function onRefresh() {
      this.inherited(arguments);
      this.setProductDependentFields();
    },
    processEntry: function processEntry(entry) {
      this.setProductDependentFields(entry.Product);
      return entry;
    },
    requestProductPricing: function requestProductPricing(product, quantity, slxLocation, unitOfMeasure) {
      var _this2 = this;

      var salesOrder = null;
      if (this.options &amp;&amp; this.options.context &amp;&amp; this.options.context.SalesOrder) {
        salesOrder = this.options.context.SalesOrder;
      } else {
        if (this.fields.SalesOrder) {
          salesOrder = this.fields.SalesOrder.getValue();
        }
      }
      if (salesOrder &amp;&amp; salesOrder.$key &amp;&amp; !this.isProcessingPricingRequest) {
        this.isProcessingPricingRequest = true;
        this.enablePricingControls(false);
        _PricingAvailabilityService2['default'].getOrderItemPricing(this.entry, salesOrder, product, quantity, slxLocation, unitOfMeasure).then(function (results) {
          _this2.onProductPricingSuccess(results);
        }, function (error) {
          _this2.onProductPricingFailed(error);
        });
      }
    },
    onProductPricingSuccess: function onProductPricingSuccess(result) {
      var _this3 = this;

      this.processProductPricing(result).then(function () {
        _this3.reCalculate();
        _this3.isProcessingPricingRequest = false;
        _this3.enablePricingControls(true);
      }, function () {
        _this3.isProcessingPricingRequest = false;
        _this3.enablePricingControls(true);
      });
    },
    onProductPricingFailed: function onProductPricingFailed(result) {
      this.isProcessingPricingRequest = false;
      this.enablePricingControls(true);
      this.App.modal.createSimpleDialog({
        title: 'alert',
        content: result.Results
      });
    },
    setUomFromCode: function setUomFromCode(uomCode) {
      var _this4 = this;

      var curremtUom = this.fields.UnitOfMeasure.getValue();
      var product = this.fields.Product.getValue();
      var promise = new Promise(function (resolve, reject) {
        if (!_this4._uomModel) {
          _this4._uomModel = App.ModelManager.getModel(_MODEL_NAMES['default'].UNITOFMEASURE, _MODEL_TYPES['default'].SDATA);
        }
        if (_this4._uomModel &amp;&amp; product) {
          if (curremtUom &amp;&amp; curremtUom.Name !== uomCode || !curremtUom) {
            _this4._uomModel.getUnitOfMeasureFromCode(uomCode, product.$key).then(function (uom) {
              _this4.fields.UnitOfMeasure.setValue(uom);
              resolve(true);
            }, function (error) {
              reject(error);
            });
          } else {
            resolve(true);
          }
        } else {
          resolve(true);
        }
      });
      return promise;
    },
    processProductPricing: function processProductPricing(pricingData) {
      var _this5 = this;

      var promise = new Promise(function (resolve, reject) {
        if (pricingData) {
          if (pricingData.DocCalculatedPrice) {
            _this5.fields.DocCalculatedPrice.setValue(pricingData.DocCalculatedPrice.value);
          }
          if (pricingData.DocExtendedPrice) {
            _this5.fields.DocExtendedPrice.setValue(pricingData.DocExtendedPrice.value);
          }
          if (pricingData.DocTotalAmount) {
            _this5.fields.DocTotalAmount.setValue(pricingData.DocTotalAmount.value);
          }
          if (pricingData.SlxLocationId) {
            _this5.fields.SlxLocation.setValue({
              $key: pricingData.SlxLocationId.value,
              Description: pricingData.SlxLocationCode.value
            });
          }
          if (pricingData.UnitOfMeasure) {
            _this5.setUomFromCode(pricingData.UnitOfMeasure.value).then(function () {
              resolve(true);
            }, function (error) {
              reject(error);
            });
          } else {
            resolve(true);
          }
        } else {
          resolve(true);
        }
      });
      return promise;
    },
    onProductChange: function onProductChange(value, field) {
      this.setProductDependentFields(field.currentSelection);
      this.fields.ProductName.setValue(value.text);
      this.fields.SlxLocation.setValue(null);
      this.requestProductPricing(field.currentSelection, this.fields.Quantity.getValue(), this.fields.SlxLocation.getValue(), this.fields.UnitOfMeasure.getValue());
    },
    onQuantityChange: function onQuantityChange(value) {
      if (isNaN(value)) {
        this.fields.Quantity.setValueNoTrigger(0);
      }
      if (this.isAdHocProduct(this.fields.Product.getValue())) {
        this.reCalculate();
      } else {
        this.requestProductPricing(this.fields.Product.getValue(), this.fields.Quantity.getValue(), this.fields.SlxLocation.getValue(), this.fields.UnitOfMeasure.getValue());
      }
    },
    enablePricingControls: function enablePricingControls(enable) {
      if (enable) {
        // To-do make this more dynamic.
        this.fields.Product.enable();
        this.fields.Quantity.enable();
        this.fields.SlxLocation.enable();
        this.fields.UnitOfMeasure.enable();
      } else {
        this.fields.Product.disable();
        this.fields.Quantity.disable();
        this.fields.SlxLocation.disable();
        this.fields.UnitOfMeasure.disable();
      }
    },
    isAdHocProduct: function isAdHocProduct(product) {
      if (product.LineType === 'FreeText') {
        return true;
      }
      return false;
    },
    reCalculate: function reCalculate() {
      var price = this.fields.CalculatedPrice.getValue();
      var quantity = this.fields.Quantity.getValue();
      this.fields.ExtendedPrice.setValue(quantity * price);
    },
    formatDependentQuery: function formatDependentQuery(dependentValue, theFormat, property) {
      return _string['default'].substitute(theFormat, [_utility['default'].getValue(dependentValue, property || '$key')]);
    },
    onUpdateCompleted: function onUpdateCompleted() {
      this._refreshRelatedViews();
      this.inherited(arguments);
    },
    onInsertCompleted: function onInsertCompleted() {
      this._refreshRelatedViews();
      this.inherited(arguments);
    },
    _refreshRelatedViews: function _refreshRelatedViews() {
      var views = [App.getView('salesorder_item_detail'), App.getView('salesorder_items_list')];

      _array['default'].forEach(views, function setViewRefreshRequired(view) {
        if (view) {
          view.refreshRequired = true;
        }
      }, this);
    },
    createLayout: function createLayout() {
      var _this6 = this;

      return this.layout || (this.layout = [{
        title: this.detailsText,
        name: 'DetailsSection',
        children: [{
          label: this.lineText,
          name: 'ErpLineNumber',
          property: 'ErpLineNumber',
          type: 'text'
        }, {
          label: this.orderText,
          name: 'SalesOrder',
          property: 'SalesOrder',
          type: 'lookup',
          emptyText: '',
          valueTextProperty: 'SalesOrderNumber',
          view: 'orderitem_salesorder_list'
        }, {
          label: this.productText,
          name: 'Product',
          property: 'Product',
          type: 'lookup',
          emptyText: '',
          valueTextProperty: 'Name',
          view: 'salesorder_product_related',
          autoFocus: true,
          required: true,
          where: function where() {
            if (_this6.fields.SalesOrder.currentSelection &amp;&amp; _this6.fields.SalesOrder.currentSelection.ErpLogicalId || _this6.options &amp;&amp; _this6.options.context &amp;&amp; _this6.options.context.SalesOrder &amp;&amp; _this6.options.context.SalesOrder.ErpLogicalId) {
              return 'ErpLogicalId eq &quot;' + (_this6.fields.SalesOrder.currentSelection.ErpLogicalId || _this6.options.context.SalesOrder.ErpLogicalId) + '&quot;';
            }
            return null;
          }
        }, {
          name: 'ProductName',
          property: 'ProductName',
          type: 'hidden'
        }, {
          label: this.quantityText,
          name: 'Quantity',
          property: 'Quantity',
          type: 'decimal',
          'default': 1,
          notificationTrigger: 'blur',
          validator: _validator['default'].exists
        }, {
          label: this.unitOfMeasureText,
          name: 'UnitOfMeasure',
          property: 'UnitOfMeasure',
          type: 'lookup',
          emptyText: '',
          valueTextProperty: 'Name',
          view: 'orderitem_unitofmeasure_list',
          title: this.unitsOfMeasureTitle
        }, {
          name: 'SlxLocation',
          property: 'SlxLocation',
          label: this.warehouseText,
          type: 'lookup',
          valueTextProperty: 'Description'
        }, {
          label: this.priceText,
          name: 'Price',
          property: 'Price',
          type: 'decimal',
          'default': 0.00
        }, {
          label: this.baseAdjustedPriceText,
          name: 'CalculatedPrice',
          property: 'CalculatedPrice',
          type: 'decimal',
          'default': 0.00
        }, {
          label: this.docAdjustedPriceText,
          name: 'DocCalculatedPrice',
          property: 'DocCalculatedPrice',
          type: 'decimal',
          'default': 0.00
        }, {
          label: this.baseExtendedPriceText,
          name: 'ExtendedPrice',
          property: 'ExtendedPrice',
          type: 'decimal',
          'default': 0.00
        }, {
          label: this.docExtendedPriceText,
          name: 'DocExtendedPrice',
          property: 'DocExtendedPrice',
          type: 'decimal',
          'default': 0.00
        }, {
          label: this.docTotalAmountText,
          name: 'DocTotalAmount',
          property: 'DocTotalAmount',
          type: 'decimal',
          'default': 0.00
        }] }]);
    }
  });

  _lang['default'].setObject('icboe.Views.SalesOrderItems.Edit', __class);
  module.exports = __class;
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9JbnRlZ3JhdGlvbnMvQk9FL1ZpZXdzL1NhbGVzT3JkZXJJdGVtcy9FZGl0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFZQSxNQUFNLFFBQVEsR0FBRyw2QkFBWSxvQkFBb0IsQ0FBQyxDQUFDOzs7Ozs7Ozs7O0FBVW5ELE1BQU0sT0FBTyxHQUFHLHlCQUFRLGlEQUFpRCxFQUFFLGtCQUFNLEVBQUU7O0FBRWpGLE1BQUUsRUFBRSxzQkFBc0I7QUFDMUIsY0FBVSxFQUFFLHdCQUF3QjtBQUNwQyxrQkFBYyxFQUFFLHlCQUF5QjtBQUN6QyxrQkFBYyxFQUFFLDBCQUEwQjtBQUMxQyxnQkFBWSxFQUFFLGlCQUFpQjtBQUMvQixhQUFTLEVBQUUsUUFBUSxDQUFDLFNBQVM7QUFDN0IsZUFBVyxFQUFFLFFBQVEsQ0FBQyxXQUFXO0FBQ2pDLGdCQUFZLEVBQUUsUUFBUSxDQUFDLFlBQVk7QUFDbkMsYUFBUyxFQUFFLFFBQVEsQ0FBQyxTQUFTO0FBQzdCLGFBQVMsRUFBRSxRQUFRLENBQUMsU0FBUztBQUM3Qix5QkFBcUIsRUFBRSxRQUFRLENBQUMscUJBQXFCO0FBQ3JELHdCQUFvQixFQUFFLFFBQVEsQ0FBQyxvQkFBb0I7QUFDbkQseUJBQXFCLEVBQUUsUUFBUSxDQUFDLHFCQUFxQjtBQUNyRCx3QkFBb0IsRUFBRSxRQUFRLENBQUMsb0JBQW9CO0FBQ25ELHFCQUFpQixFQUFFLFFBQVEsQ0FBQyxpQkFBaUI7QUFDN0MsdUJBQW1CLEVBQUUsUUFBUSxDQUFDLG1CQUFtQjtBQUNqRCxzQkFBa0IsRUFBRSxRQUFRLENBQUMsa0JBQWtCO0FBQy9DLFlBQVEsRUFBRSxRQUFRLENBQUMsUUFBUTtBQUMzQixpQkFBYSxFQUFFLFFBQVEsQ0FBQyxhQUFhO0FBQ3JDLGlCQUFhLEVBQUUsS0FBSzs7QUFFcEIsUUFBSSxFQUFFLFNBQVMsSUFBSSxHQUFHO0FBQ3BCLFVBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFD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bGUiOiJzcmMvSW50ZWdyYXRpb25zL0JPRS9WaWV3cy9TYWxlc09yZGVySXRlbXMvRWRpdC5qcyIsInNvdXJjZVJvb3QiOiJzcmMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZGVjbGFyZSBmcm9tICdkb2pvL19iYXNlL2RlY2xhcmUnO1xyXG5pbXBvcnQgbGFuZyBmcm9tICdkb2pvL19iYXNlL2xhbmcnO1xyXG5pbXBvcnQgc3RyaW5nIGZyb20gJ2Rvam8vc3RyaW5nJztcclxuaW1wb3J0IHV0aWxpdHkgZnJvbSAnYXJnb3MvVXRpbGl0eSc7XHJcbmltcG9ydCBFZGl0IGZyb20gJ2FyZ29zL0VkaXQnO1xyXG5pbXBvcnQgZ2V0UmVzb3VyY2UgZnJvbSAnYXJnb3MvSTE4bic7XHJcbmltcG9ydCBQcmljaW5nQXZhaWxhYmlsaXR5U2VydmljZSBmcm9tICcuLi8uLi9QcmljaW5nQXZhaWxhYmlsaXR5U2VydmljZSc7XHJcbmltcG9ydCB2YWxpZGF0b3IgZnJvbSAnY3JtL1ZhbGlkYXRvcic7XHJcbmltcG9ydCBhcnJheSBmcm9tICdkb2pvL19iYXNlL2FycmF5JztcclxuaW1wb3J0IE1PREVMX05BTUVTIGZyb20gJy4uLy4uL01vZGVscy9OYW1lcyc7XHJcbmltcG9ydCBNT0RFTF9UWVBFUyBmcm9tICdhcmdvcy9Nb2RlbHMvVHlwZXMnO1xyXG5cclxuY29uc3QgcmVzb3VyY2UgPSBnZXRSZXNvdXJjZSgnc2FsZXNPcmRlckl0ZW1FZGl0Jyk7XHJcblxyXG4vKipcclxuICogQGNsYXNzIGNybS5WaWV3cy5RdW90ZUxpbmVzLkVkaXRcclxuICpcclxuICogQGV4dGVuZHMgYXJnb3MuRWRpdFxyXG4gKlxyXG4gKiBAcmVxdWlyZXMgYXJnb3MuRWRpdFxyXG4gKlxyXG4gKi9cclxuY29uc3QgX19jbGFzcyA9IGRlY2xhcmUoJ2NybS5JbnRlZ3JhdGlvbnMuQk9FLlZpZXdzLlNhbGVzT3JkZXJJdGVtcy5FZGl0JywgW0VkaXRdLCB7XHJcbiAgLy8gVmlldyBQcm9wZXJ0aWVzXHJcbiAgaWQ6ICdzYWxlc29yZGVyX2l0ZW1fZWRpdCcsXHJcbiAgZGV0YWlsVmlldzogJ3NhbGVzb3JkZXJfaXRlbV9kZXRhaWwnLFxyXG4gIGluc2VydFNlY3VyaXR5OiAnRW50aXRpZXMvU2FsZXNPcmRlci9BZGQnLFxyXG4gIHVwZGF0ZVNlY3VyaXR5OiAnRW50aXRpZXMvU2FsZXNPcmRlci9FZGl0JyxcclxuICByZXNvdXJjZUtpbmQ6ICdzYWxlc09yZGVySXRlbXMnLFxyXG4gIHRpdGxlVGV4dDogcmVzb3VyY2UudGl0bGVUZXh0LFxyXG4gIHByb2R1Y3RUZXh0OiByZXNvdXJjZS5wcm9kdWN0VGV4dCxcclxuICBxdWFudGl0eVRleHQ6IHJlc291cmNlLnF1YW50aXR5VGV4dCxcclxuICBvcmRlclRleHQ6IHJlc291cmNlLm9yZGVyVGV4dCxcclxuICBwcmljZVRleHQ6IHJlc291cmNlLnByaWNlVGV4dCxcclxuICBiYXNlQWRqdXN0ZWRQcmljZVRleHQ6IHJlc291cmNlLmJhc2VBZGp1c3RlZFByaWNlVGV4dCxcclxuICBkb2NBZGp1c3RlZFByaWNlVGV4dDogcmVzb3VyY2UuZG9jQWRqdXN0ZWRQcmljZVRleHQsXHJcbiAgYmFzZUV4dGVuZGVkUHJpY2VUZXh0OiByZXNvdXJjZS5iYXNlRXh0ZW5kZWRQcmljZVRleHQsXHJcbiAgZG9jRXh0ZW5kZWRQcmljZVRleHQ6IHJlc291cmNlLmRvY0V4dGVuZGVkUHJpY2VUZXh0LFxyXG4gIHVuaXRPZk1lYXN1cmVUZXh0OiByZXNvdXJjZS51bml0T2ZNZWFzdXJlVGV4dCxcclxuICB1bml0c09mTWVhc3VyZVRpdGxlOiByZXNvdXJjZS51bml0c09mTWVhc3VyZVRpdGxlLFxyXG4gIGRvY1RvdGFsQW1vdW50VGV4dDogcmVzb3VyY2UuZG9jVG90YWxBbW91bnRUZXh0LFxyXG4gIGxpbmVUZXh0OiByZXNvdXJjZS5saW5lVGV4dCxcclxuICB3YXJlaG91c2VUZXh0OiByZXNvdXJjZS53YXJlaG91c2VUZXh0LFxyXG4gIGFjY291bnRMaW5rZWQ6IGZhbHNlLFxyXG5cclxuICBpbml0OiBmdW5jdGlvbiBpbml0KCkge1xyXG4gICAgdGhpcy5pbmhlcml0ZWQoYXJndW1lbnRzKTtcclxuICAgIHRoaXMuZmllbGRzLkVycExpbmVOdW1iZXIuZGlzYWJsZSgpO1xyXG4gICAgdGhpcy5maWVsZHMuU2x4TG9jYXRpb24uZGlzYWJsZSgpO1xyXG4gICAgdGhpcy5maWVsZHMuU2FsZXNPcmRlci5kaXNhYmxlKCk7XHJcbiAgICB0aGlzLmZpZWxkcy5QcmljZS5kaXNhYmxlKCk7XHJcbiAgICB0aGlzLmZpZWxkcy5FeHRlbmRlZFByaWNlLmRpc2FibGUoKTtcclxuICAgIHRoaXMuZmllbGRzLkRvY0V4dGVuZGVkUHJpY2UuZGlzYWJsZSgpO1xyXG4gICAgdGhpcy5maWVsZHMuQ2FsY3VsYXRlZFByaWNlLmRpc2FibGUoKTtcclxuICAgIHRoaXMuZmllbGRzLkRvY0NhbGN1bGF0ZWRQcmljZS5kaXNhYmxlKCk7XHJcbiAgICB0aGlzLmZpZWxkcy5Eb2NUb3RhbEFtb3VudC5kaXNhYmxlKCk7XHJcbiAgICB0aGlzLmNvbm5lY3QodGhpcy5maWVsZHMuUHJvZHVjdCwgJ29uQ2hhbmdlJywgdGhpcy5vblByb2R1Y3RDaGFuZ2UpO1xyXG4gICAgdGhpcy5jb25uZWN0KHRoaXMuZmllbGRzLlF1YW50aXR5LCAnb25DaGFuZ2UnLCB0aGlzLm9uUXVhbnRpdHlDaGFuZ2UpO1xyXG4gIH0sXHJcbiAgX2FwcGx5TG9naWNWYWx1ZXM6IGZ1bmN0aW9uIF9hcHBseUxvZ2ljVmFsdWVzKHZhbHVlcykge1xyXG4gICAgY29uc3QgcHJvZHVjdCA9IHRoaXMuZmllbGRzLlByb2R1Y3QuZ2V0U2VsZWN0aW9uKCk7XHJcbiAgICB2YWx1ZXMuUHJvZHVjdE5hbWUgPSBwcm9kdWN0Lk5hbWU7XHJcbiAgICB2YWx1ZXMuRmFtaWx5ID0gcHJvZHVjdC5GYW1pbHk7XHJcbiAgICB2YWx1ZXMuQWN0dWFsSUQgPSBwcm9kdWN0LkFjdHVhbElkO1xyXG4gICAgdmFsdWVzLkNvbW1vZGl0eVR5cGUgPSBwcm9kdWN0LkNvbW1vZGl0eVR5cGU7XHJcbiAgfSxcclxuICBhcHBseUNvbnRleHQ6IGZ1bmN0aW9uIGFwcGx5Q29udGV4dCgpIHtcclxuICAgIHRoaXMuaW5oZXJpdGVkKGFyZ3VtZW50cyk7XHJcbiAgICBpZiAodGhpcy5vcHRpb25zICYmIHRoaXMub3B0aW9ucy5jb250ZXh0KSB7XHJcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuY29udGV4dC5TYWxlc09yZGVyKSB7XHJcbiAgICAgICAgdGhpcy5maWVsZHMuU2FsZXNPcmRlci5zZXRTZWxlY3Rpb24odGhpcy5vcHRpb25zLmNvbnRleHQuU2FsZXNPcmRlcik7XHJcbiAgICAgICAgdGhpcy5maWVsZHMuU2FsZXNPcmRlci5kaXNhYmxlKCk7XHJcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5jb250ZXh0LlNhbGVzT3JkZXIuQWNjb3VudCkge1xyXG4gICAgICAgICAgdGhpcy5hY2NvdW50TGlua2VkID0gdGhpcy5vcHRpb25zLmNvbnRleHQuU2FsZXNPcmRlci5BY2NvdW50LkVycEV4dElkID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmZpZWxkcy5TYWxlc09yZGVyLmVuYWJsZSgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICB0aGlzLnNldFByb2R1Y3REZXBlbmRlbnRGaWVsZHMoKTtcclxuICB9LFxyXG4gIHNldFByb2R1Y3REZXBlbmRlbnRGaWVsZHM6IGZ1bmN0aW9uIHNldFByb2R1Y3REZXBlbmRlbnRGaWVsZHMocHJvZHVjdCkge1xyXG4gICAgY29uc3QgZGVwZW5kYW50cyA9IHRoaXMuZ2V0UHJvZHVjdERlcGVuZGFudHMoKTtcclxuICAgIGlmIChwcm9kdWN0KSB7XHJcbiAgICAgIGRlcGVuZGFudHMuZm9yRWFjaCgoZikgPT4ge1xyXG4gICAgICAgIHRoaXMuZmllbGRzW2ZdLmVuYWJsZSgpO1xyXG4gICAgICAgIHRoaXMuZmllbGRzW2ZdLmRlcGVuZHNPbiA9ICdQcm9kdWN0JztcclxuICAgICAgICB0aGlzLmZpZWxkc1tmXS53aGVyZSA9IGBQcm9kdWN0LklkIGVxIFwiJHtwcm9kdWN0LiRrZXl9XCJgO1xyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGRlcGVuZGFudHMuZm9yRWFjaCgoZikgPT4ge1xyXG4gICAgICAgIHRoaXMuZmllbGRzW2ZdLmRpc2FibGUoKTtcclxuICAgICAgICB0aGlzLmZpZWxkc1tmXS5kZXBlbmRzT24gPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZmllbGRzW2ZdLndoZXJlID0gbnVsbDtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfSxcclxuICBnZXRQcm9kdWN0RGVwZW5kYW50czogZnVuY3Rpb24gZ2V0UHJvZHVjdERlcGVuZGFudHMoKSB7XHJcbiAgICByZXR1cm4gWydVbml0T2ZNZWFzdXJlJ107XHJcbiAgfSxcclxuICBvbkluc2VydDogZnVuY3Rpb24gb25JbnNlcnQodmFsdWVzKSB7XHJcbiAgICB0aGlzLl9hcHBseUxvZ2ljVmFsdWVzKHZhbHVlcyk7XHJcbiAgICB0aGlzLmluaGVyaXRlZChhcmd1bWVudHMpO1xyXG4gIH0sXHJcbiAgb25SZWZyZXNoOiBmdW5jdGlvbiBvblJlZnJlc2goKSB7XHJcbiAgICB0aGlzLmluaGVyaXRlZChhcmd1bWVudHMpO1xyXG4gICAgdGhpcy5zZXRQcm9kdWN0RGVwZW5kZW50RmllbGRzKCk7XHJcbiAgfSxcclxuICBwcm9jZXNzRW50cnk6IGZ1bmN0aW9uIHByb2Nlc3NFbnRyeShlbnRyeSkge1xyXG4gICAgdGhpcy5zZXRQcm9kdWN0RGVwZW5kZW50RmllbGRzKGVudHJ5LlByb2R1Y3QpO1xyXG4gICAgcmV0dXJuIGVudHJ5O1xyXG4gIH0sXHJcbiAgcmVxdWVzdFByb2R1Y3RQcmljaW5nOiBmdW5jdGlvbiByZXF1ZXN0UHJvZHVjdFByaWNpbmcocHJvZHVjdCwgcXVhbnRpdHksIHNseExvY2F0aW9uLCB1bml0T2ZNZWFzdXJlKSB7XHJcbiAgICBsZXQgc2FsZXNPcmRlciA9IG51bGw7XHJcbiAgICBpZiAodGhpcy5vcHRpb25zICYmIHRoaXMub3B0aW9ucy5jb250ZXh0ICYmIHRoaXMub3B0aW9ucy5jb250ZXh0LlNhbGVzT3JkZXIpIHtcclxuICAgICAgc2FsZXNPcmRlciA9IHRoaXMub3B0aW9ucy5jb250ZXh0LlNhbGVzT3JkZXI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAodGhpcy5maWVsZHMuU2FsZXNPcmRlcikge1xyXG4gICAgICAgIHNhbGVzT3JkZXIgPSB0aGlzLmZpZWxkcy5TYWxlc09yZGVyLmdldFZhbHVlKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChzYWxlc09yZGVyICYmIHNhbGVzT3JkZXIuJGtleSAmJiAhdGhpcy5pc1Byb2Nlc3NpbmdQcmljaW5nUmVxdWVzdCkge1xyXG4gICAgICB0aGlzLmlzUHJvY2Vzc2luZ1ByaWNpbmdSZXF1ZXN0ID0gdHJ1ZTtcclxuICAgICAgdGhpcy5lbmFibGVQcmljaW5nQ29udHJvbHMoZmFsc2UpO1xyXG4gICAgICBQcmljaW5nQXZhaWxhYmlsaXR5U2VydmljZS5nZXRPcmRlckl0ZW1QcmljaW5nKHRoaXMuZW50cnksIHNhbGVzT3JkZXIsIHByb2R1Y3QsIHF1YW50aXR5LCBzbHhMb2NhdGlvbiwgdW5pdE9mTWVhc3VyZSkudGhlbihcclxuICAgICAgICAocmVzdWx0cykgPT4ge1xyXG4gICAgICAgICAgdGhpcy5vblByb2R1Y3RQcmljaW5nU3VjY2VzcyhyZXN1bHRzKTtcclxuICAgICAgICB9LCAoZXJyb3IpID0+IHtcclxuICAgICAgICAgIHRoaXMub25Qcm9kdWN0UHJpY2luZ0ZhaWxlZChlcnJvcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfSxcclxuICBvblByb2R1Y3RQcmljaW5nU3VjY2VzczogZnVuY3Rpb24gb25Qcm9kdWN0UHJpY2luZ1N1Y2Nlc3MocmVzdWx0KSB7XHJcbiAgICB0aGlzLnByb2Nlc3NQcm9kdWN0UHJpY2luZyhyZXN1bHQpLnRoZW4oKCkgPT4ge1xyXG4gICAgICB0aGlzLnJlQ2FsY3VsYXRlKCk7XHJcbiAgICAgIHRoaXMuaXNQcm9jZXNzaW5nUHJpY2luZ1JlcXVlc3QgPSBmYWxzZTtcclxuICAgICAgdGhpcy5lbmFibGVQcmljaW5nQ29udHJvbHModHJ1ZSk7XHJcbiAgICB9LCAoKT0+IHtcclxuICAgICAgdGhpcy5pc1Byb2Nlc3NpbmdQcmljaW5nUmVxdWVzdCA9IGZhbHNlO1xyXG4gICAgICB0aGlzLmVuYWJsZVByaWNpbmdDb250cm9scyh0cnVlKTtcclxuICAgIH0pO1xyXG4gIH0sXHJcbiAgb25Qcm9kdWN0UHJpY2luZ0ZhaWxlZDogZnVuY3Rpb24gb25Qcm9kdWN0UHJpY2luZ0ZhaWxlZChyZXN1bHQpIHtcclxuICAgIHRoaXMuaXNQcm9jZXNzaW5nUHJpY2luZ1JlcXVlc3QgPSBmYWxzZTtcclxuICAgIHRoaXMuZW5hYmxlUHJpY2luZ0NvbnRyb2xzKHRydWUpO1xyXG4gICAgdGhpcy5BcHAubW9kYWwuY3JlYXRlU2ltcGxlRGlhbG9nKHtcclxuICAgICAgdGl0bGU6ICdhbGVydCcsXHJcbiAgICAgIGNvbnRlbnQ6IHJlc3VsdC5SZXN1bHRzLFxyXG4gICAgfSk7XHJcbiAgfSxcclxuICBzZXRVb21Gcm9tQ29kZTogZnVuY3Rpb24gc2V0VW9tRnJvbUNvZGUodW9tQ29kZSkge1xyXG4gICAgY29uc3QgY3VycmVtdFVvbSA9IHRoaXMuZmllbGRzLlVuaXRPZk1lYXN1cmUuZ2V0VmFsdWUoKTtcclxuICAgIGNvbnN0IHByb2R1Y3QgPSB0aGlzLmZpZWxkcy5Qcm9kdWN0LmdldFZhbHVlKCk7XHJcbiAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICBpZiAoIXRoaXMuX3VvbU1vZGVsKSB7XHJcbiAgICAgICAgdGhpcy5fdW9tTW9kZWwgPSBBcHAuTW9kZWxNYW5hZ2VyLmdldE1vZGVsKE1PREVMX05BTUVTLlVOSVRPRk1FQVNVUkUsIE1PREVMX1RZUEVTLlNEQVRBKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5fdW9tTW9kZWwgJiYgcHJvZHVjdCkge1xyXG4gICAgICAgIGlmICgoY3VycmVtdFVvbSAmJiAoY3VycmVtdFVvbS5OYW1lICE9PSB1b21Db2RlKSkgfHwgKCFjdXJyZW10VW9tKSkge1xyXG4gICAgICAgICAgdGhpcy5fdW9tTW9kZWwuZ2V0VW5pdE9mTWVhc3VyZUZyb21Db2RlKHVvbUNvZGUsIHByb2R1Y3QuJGtleSkudGhlbigodW9tKT0+IHtcclxuICAgICAgICAgICAgdGhpcy5maWVsZHMuVW5pdE9mTWVhc3VyZS5zZXRWYWx1ZSh1b20pO1xyXG4gICAgICAgICAgICByZXNvbHZlKHRydWUpO1xyXG4gICAgICAgICAgfSwgKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgIHJlamVjdChlcnJvcik7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmVzb2x2ZSh0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmVzb2x2ZSh0cnVlKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gcHJvbWlzZTtcclxuICB9LFxyXG4gIHByb2Nlc3NQcm9kdWN0UHJpY2luZzogZnVuY3Rpb24gcHJvY2Vzc1Byb2R1Y3RQcmljaW5nKHByaWNpbmdEYXRhKSB7XHJcbiAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICBpZiAocHJpY2luZ0RhdGEpIHtcclxuICAgICAgICBpZiAocHJpY2luZ0RhdGEuRG9jQ2FsY3VsYXRlZFByaWNlKSB7XHJcbiAgICAgICAgICB0aGlzLmZpZWxkcy5Eb2NDYWxjdWxhdGVkUHJpY2Uuc2V0VmFsdWUocHJpY2luZ0RhdGEuRG9jQ2FsY3VsYXRlZFByaWNlLnZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHByaWNpbmdEYXRhLkRvY0V4dGVuZGVkUHJpY2UpIHtcclxuICAgICAgICAgIHRoaXMuZmllbGRzLkRvY0V4dGVuZGVkUHJpY2Uuc2V0VmFsdWUocHJpY2luZ0RhdGEuRG9jRXh0ZW5kZWRQcmljZS52YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChwcmljaW5nRGF0YS5Eb2NUb3RhbEFtb3VudCkge1xyXG4gICAgICAgICAgdGhpcy5maWVsZHMuRG9jVG90YWxBbW91bnQuc2V0VmFsdWUocHJpY2luZ0RhdGEuRG9jVG90YWxBbW91bnQudmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocHJpY2luZ0RhdGEuU2x4TG9jYXRpb25JZCkge1xyXG4gICAgICAgICAgdGhpcy5maWVsZHMuU2x4TG9jYXRpb24uc2V0VmFsdWUoe1xyXG4gICAgICAgICAgICAka2V5OiBwcmljaW5nRGF0YS5TbHhMb2NhdGlvbklkLnZhbHVlLFxyXG4gICAgICAgICAgICBEZXNjcmlwdGlvbjogcHJpY2luZ0RhdGEuU2x4TG9jYXRpb25Db2RlLnZhbHVlLFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChwcmljaW5nRGF0YS5Vbml0T2ZNZWFzdXJlKSB7XHJcbiAgICAgICAgICB0aGlzLnNldFVvbUZyb21Db2RlKHByaWNpbmdEYXRhLlVuaXRPZk1lYXN1cmUudmFsdWUpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICByZXNvbHZlKHRydWUpO1xyXG4gICAgICAgICAgfSwgKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgIHJlamVjdChlcnJvcik7XHJcbiAgICAgICAgICB9ICk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJlc29sdmUodHJ1ZSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHByb21pc2U7XHJcbiAgfSxcclxuICBvblByb2R1Y3RDaGFuZ2U6IGZ1bmN0aW9uIG9uUHJvZHVjdENoYW5nZSh2YWx1ZSwgZmllbGQpIHtcclxuICAgIHRoaXMuc2V0UHJvZHVjdERlcGVuZGVudEZpZWxkcyhmaWVsZC5jdXJyZW50U2VsZWN0aW9uKTtcclxuICAgIHRoaXMuZmllbGRzLlByb2R1Y3ROYW1lLnNldFZhbHVlKHZhbHVlLnRleHQpO1xyXG4gICAgdGhpcy5maWVsZHMuU2x4TG9jYXRpb24uc2V0VmFsdWUobnVsbCk7XHJcbiAgICB0aGlzLnJlcXVlc3RQcm9kdWN0UHJpY2luZyhcclxuICAgICAgZmllbGQuY3VycmVudFNlbGVjdGlvbixcclxuICAgICAgdGhpcy5maWVsZHMuUXVhbnRpdHkuZ2V0VmFsdWUoKSxcclxuICAgICAgdGhpcy5maWVsZHMuU2x4TG9jYXRpb24uZ2V0VmFsdWUoKSxcclxuICAgICAgdGhpcy5maWVsZHMuVW5pdE9mTWVhc3VyZS5nZXRWYWx1ZSgpXHJcbiAgICAgKTtcclxuICB9LFxyXG4gIG9uUXVhbnRpdHlDaGFuZ2U6IGZ1bmN0aW9uIG9uUXVhbnRpdHlDaGFuZ2UodmFsdWUpIHtcclxuICAgIGlmIChpc05hTih2YWx1ZSkpIHtcclxuICAgICAgdGhpcy5maWVsZHMuUXVhbnRpdHkuc2V0VmFsdWVOb1RyaWdnZXIoMCk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5pc0FkSG9jUHJvZHVjdCh0aGlzLmZpZWxkcy5Qcm9kdWN0LmdldFZhbHVlKCkpKSB7XHJcbiAgICAgIHRoaXMucmVDYWxjdWxhdGUoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMucmVxdWVzdFByb2R1Y3RQcmljaW5nKFxyXG4gICAgICAgIHRoaXMuZmllbGRzLlByb2R1Y3QuZ2V0VmFsdWUoKSxcclxuICAgICAgICB0aGlzLmZpZWxkcy5RdWFudGl0eS5nZXRWYWx1ZSgpLFxyXG4gICAgICAgIHRoaXMuZmllbGRzLlNseExvY2F0aW9uLmdldFZhbHVlKCksXHJcbiAgICAgICAgdGhpcy5maWVsZHMuVW5pdE9mTWVhc3VyZS5nZXRWYWx1ZSgpXHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgfSxcclxuICBlbmFibGVQcmljaW5nQ29udHJvbHM6IGZ1bmN0aW9uIGVuYWJsZVByaWNpbmdDb250cm9scyhlbmFibGUpIHtcclxuICAgIGlmIChlbmFibGUpIHsgIC8vIFRvLWRvIG1ha2UgdGhpcyBtb3JlIGR5bmFtaWMuXHJcbiAgICAgIHRoaXMuZmllbGRzLlByb2R1Y3QuZW5hYmxlKCk7XHJcbiAgICAgIHRoaXMuZmllbGRzLlF1YW50aXR5LmVuYWJsZSgpO1xyXG4gICAgICB0aGlzLmZpZWxkcy5TbHhMb2NhdGlvbi5lbmFibGUoKTtcclxuICAgICAgdGhpcy5maWVsZHMuVW5pdE9mTWVhc3VyZS5lbmFibGUoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuZmllbGRzLlByb2R1Y3QuZGlzYWJsZSgpO1xyXG4gICAgICB0aGlzLmZpZWxkcy5RdWFudGl0eS5kaXNhYmxlKCk7XHJcbiAgICAgIHRoaXMuZmllbGRzLlNseExvY2F0aW9uLmRpc2FibGUoKTtcclxuICAgICAgdGhpcy5maWVsZHMuVW5pdE9mTWVhc3VyZS5kaXNhYmxlKCk7XHJcbiAgICB9XHJcbiAgfSxcclxuICBpc0FkSG9jUHJvZHVjdDogZnVuY3Rpb24gaXNBZEhvY1Byb2R1Y3QocHJvZHVjdCkge1xyXG4gICAgaWYgKHByb2R1Y3QuTGluZVR5cGUgPT09ICdGcmVlVGV4dCcpIHtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfSxcclxuICByZUNhbGN1bGF0ZTogZnVuY3Rpb24gcmVDYWxjdWxhdGUoKSB7XHJcbiAgICBjb25zdCBwcmljZSA9IHRoaXMuZmllbGRzLkNhbGN1bGF0ZWRQcmljZS5nZXRWYWx1ZSgpO1xyXG4gICAgY29uc3QgcXVhbnRpdHkgPSB0aGlzLmZpZWxkcy5RdWFudGl0eS5nZXRWYWx1ZSgpO1xyXG4gICAgdGhpcy5maWVsZHMuRXh0ZW5kZWRQcmljZS5zZXRWYWx1ZShxdWFudGl0eSAqIHByaWNlKTtcclxuICB9LFxyXG4gIGZvcm1hdERlcGVuZGVudFF1ZXJ5OiBmdW5jdGlvbiBmb3JtYXREZXBlbmRlbnRRdWVyeShkZXBlbmRlbnRWYWx1ZSwgdGhlRm9ybWF0LCBwcm9wZXJ0eSkge1xyXG4gICAgcmV0dXJuIHN0cmluZy5zdWJzdGl0dXRlKHRoZUZvcm1hdCwgW3V0aWxpdHkuZ2V0VmFsdWUoZGVwZW5kZW50VmFsdWUsIHByb3BlcnR5IHx8ICcka2V5JyldKTtcclxuICB9LFxyXG4gIG9uVXBkYXRlQ29tcGxldGVkOiBmdW5jdGlvbiBvblVwZGF0ZUNvbXBsZXRlZCgpIHtcclxuICAgIHRoaXMuX3JlZnJlc2hSZWxhdGVkVmlld3MoKTtcclxuICAgIHRoaXMuaW5oZXJpdGVkKGFyZ3VtZW50cyk7XHJcbiAgfSxcclxuICBvbkluc2VydENvbXBsZXRlZDogZnVuY3Rpb24gb25JbnNlcnRDb21wbGV0ZWQoKSB7XHJcbiAgICB0aGlzLl9yZWZyZXNoUmVsYXRlZFZpZXdzKCk7XHJcbiAgICB0aGlzLmluaGVyaXRlZChhcmd1bWVudHMpO1xyXG4gIH0sXHJcbiAgX3JlZnJlc2hSZWxhdGVkVmlld3M6IGZ1bmN0aW9uIF9yZWZyZXNoUmVsYXRlZFZpZXdzKCkge1xyXG4gICAgY29uc3Qgdmlld3MgPSBbXHJcbiAgICAgIEFwcC5nZXRWaWV3KCdzYWxlc29yZGVyX2l0ZW1fZGV0YWlsJyksXHJcbiAgICAgIEFwcC5nZXRWaWV3KCdzYWxlc29yZGVyX2l0ZW1zX2xpc3QnKSxcclxuICAgIF07XHJcblxyXG4gICAgYXJyYXkuZm9yRWFjaCh2aWV3cywgZnVuY3Rpb24gc2V0Vmlld1JlZnJlc2hSZXF1aXJlZCh2aWV3KSB7XHJcbiAgICAgIGlmICh2aWV3KSB7XHJcbiAgICAgICAgdmlldy5yZWZyZXNoUmVxdWlyZWQgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9LCB0aGlzKTtcclxuICB9LFxyXG4gIGNyZWF0ZUxheW91dDogZnVuY3Rpb24gY3JlYXRlTGF5b3V0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMubGF5b3V0IHx8ICh0aGlzLmxheW91dCA9IFt7XHJcbiAgICAgIHRpdGxlOiB0aGlzLmRldGFpbHNUZXh0LFxyXG4gICAgICBuYW1lOiAnRGV0YWlsc1NlY3Rpb24nLFxyXG4gICAgICBjaGlsZHJlbjogW3tcclxuICAgICAgICBsYWJlbDogdGhpcy5saW5lVGV4dCxcclxuICAgICAgICBuYW1lOiAnRXJwTGluZU51bWJlcicsXHJcbiAgICAgICAgcHJvcGVydHk6ICdFcnBMaW5lTnVtYmVyJyxcclxuICAgICAgICB0eXBlOiAndGV4dCcsXHJcbiAgICAgIH0sIHtcclxuICAgICAgICBsYWJlbDogdGhpcy5vcmRlclRleHQsXHJcbiAgICAgICAgbmFtZTogJ1NhbGVzT3JkZXInLFxyXG4gICAgICAgIHByb3BlcnR5OiAnU2FsZXNPcmRlcicsXHJcbiAgICAgICAgdHlwZTogJ2xvb2t1cCcsXHJcbiAgICAgICAgZW1wdHlUZXh0OiAnJyxcclxuICAgICAgICB2YWx1ZVRleHRQcm9wZXJ0eTogJ1NhbGVzT3JkZXJOdW1iZXInLFxyXG4gICAgICAgIHZpZXc6ICdvcmRlcml0ZW1fc2FsZXNvcmRlcl9saXN0JyxcclxuICAgICAgfSwge1xyXG4gICAgICAgIGxhYmVsOiB0aGlzLnByb2R1Y3RUZXh0LFxyXG4gICAgICAgIG5hbWU6ICdQcm9kdWN0JyxcclxuICAgICAgICBwcm9wZXJ0eTogJ1Byb2R1Y3QnLFxyXG4gICAgICAgIHR5cGU6ICdsb29rdXAnLFxyXG4gICAgICAgIGVtcHR5VGV4dDogJycsXHJcbiAgICAgICAgdmFsdWVUZXh0UHJvcGVydHk6ICdOYW1lJyxcclxuICAgICAgICB2aWV3OiAnc2FsZXNvcmRlcl9wcm9kdWN0X3JlbGF0ZWQnLFxyXG4gICAgICAgIGF1dG9Gb2N1czogdHJ1ZSxcclxuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgICB3aGVyZTogKCkgPT4ge1xyXG4gICAgICAgICAgaWYgKHRoaXMuZmllbGRzLlNhbGVzT3JkZXIuY3VycmVudFNlbGVjdGlvbiAmJiB0aGlzLmZpZWxkcy5TYWxlc09yZGVyLmN1cnJlbnRTZWxlY3Rpb24uRXJwTG9naWNhbElkIHx8IHRoaXMub3B0aW9ucyAmJiB0aGlzLm9wdGlvbnMuY29udGV4dCAmJiB0aGlzLm9wdGlvbnMuY29udGV4dC5TYWxlc09yZGVyICYmIHRoaXMub3B0aW9ucy5jb250ZXh0LlNhbGVzT3JkZXIuRXJwTG9naWNhbElkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBgRXJwTG9naWNhbElkIGVxIFwiJHt0aGlzLmZpZWxkcy5TYWxlc09yZGVyLmN1cnJlbnRTZWxlY3Rpb24uRXJwTG9naWNhbElkIHx8IHRoaXMub3B0aW9ucy5jb250ZXh0LlNhbGVzT3JkZXIuRXJwTG9naWNhbElkfVwiYDtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH0sXHJcbiAgICAgIH0sIHtcclxuICAgICAgICBuYW1lOiAnUHJvZHVjdE5hbWUnLFxyXG4gICAgICAgIHByb3BlcnR5OiAnUHJvZHVjdE5hbWUnLFxyXG4gICAgICAgIHR5cGU6ICdoaWRkZW4nLFxyXG4gICAgICB9LCB7XHJcbiAgICAgICAgbGFiZWw6IHRoaXMucXVhbnRpdHlUZXh0LFxyXG4gICAgICAgIG5hbWU6ICdRdWFudGl0eScsXHJcbiAgICAgICAgcHJvcGVydHk6ICdRdWFudGl0eScsXHJcbiAgICAgICAgdHlwZTogJ2RlY2ltYWwnLFxyXG4gICAgICAgICdkZWZhdWx0JzogMSxcclxuICAgICAgICBub3RpZmljYXRpb25UcmlnZ2VyOiAnYmx1cicsXHJcbiAgICAgICAgdmFsaWRhdG9yOiB2YWxpZGF0b3IuZXhpc3RzLFxyXG4gICAgICB9LCB7XHJcbiAgICAgICAgbGFiZWw6IHRoaXMudW5pdE9mTWVhc3VyZVRleHQsXHJcbiAgICAgICAgbmFtZTogJ1VuaXRPZk1lYXN1cmUnLFxyXG4gICAgICAgIHByb3BlcnR5OiAnVW5pdE9mTWVhc3VyZScsXHJcbiAgICAgICAgdHlwZTogJ2xvb2t1cCcsXHJcbiAgICAgICAgZW1wdHlUZXh0OiAnJyxcclxuICAgICAgICB2YWx1ZVRleHRQcm9wZXJ0eTogJ05hbWUnLFxyXG4gICAgICAgIHZpZXc6ICdvcmRlcml0ZW1fdW5pdG9mbWVhc3VyZV9saXN0JyxcclxuICAgICAgICB0aXRsZTogdGhpcy51bml0c09mTWVhc3VyZVRpdGxlLFxyXG4gICAgICB9LCB7XHJcbiAgICAgICAgbmFtZTogJ1NseExvY2F0aW9uJyxcclxuICAgICAgICBwcm9wZXJ0eTogJ1NseExvY2F0aW9uJyxcclxuICAgICAgICBsYWJlbDogdGhpcy53YXJlaG91c2VUZXh0LFxyXG4gICAgICAgIHR5cGU6ICdsb29rdXAnLFxyXG4gICAgICAgIHZhbHVlVGV4dFByb3BlcnR5OiAnRGVzY3JpcHRpb24nLFxyXG4gICAgICB9LCB7XHJcbiAgICAgICAgbGFiZWw6IHRoaXMucHJpY2VUZXh0LFxyXG4gICAgICAgIG5hbWU6ICdQcmljZScsXHJcbiAgICAgICAgcHJvcGVydHk6ICdQcmljZScsXHJcbiAgICAgICAgdHlwZTogJ2RlY2ltYWwnLFxyXG4gICAgICAgICdkZWZhdWx0JzogMC4wMCxcclxuICAgICAgfSwge1xyXG4gICAgICAgIGxhYmVsOiB0aGlzLmJhc2VBZGp1c3RlZFByaWNlVGV4dCxcclxuICAgICAgICBuYW1lOiAnQ2FsY3VsYXRlZFByaWNlJyxcclxuICAgICAgICBwcm9wZXJ0eTogJ0NhbGN1bGF0ZWRQcmljZScsXHJcbiAgICAgICAgdHlwZTogJ2RlY2ltYWwnLFxyXG4gICAgICAgICdkZWZhdWx0JzogMC4wMCxcclxuICAgICAgfSwge1xyXG4gICAgICAgIGxhYmVsOiB0aGlzLmRvY0FkanVzdGVkUHJpY2VUZXh0LFxyXG4gICAgICAgIG5hbWU6ICdEb2NDYWxjdWxhdGVkUHJpY2UnLFxyXG4gICAgICAgIHByb3BlcnR5OiAnRG9jQ2FsY3VsYXRlZFByaWNlJyxcclxuICAgICAgICB0eXBlOiAnZGVjaW1hbCcsXHJcbiAgICAgICAgJ2RlZmF1bHQnOiAwLjAwLFxyXG4gICAgICB9LCB7XHJcbiAgICAgICAgbGFiZWw6IHRoaXMuYmFzZUV4dGVuZGVkUHJpY2VUZXh0LFxyXG4gICAgICAgIG5hbWU6ICdFeHRlbmRlZFByaWNlJyxcclxuICAgICAgICBwcm9wZXJ0eTogJ0V4dGVuZGVkUHJpY2UnLFxyXG4gICAgICAgIHR5cGU6ICdkZWNpbWFsJyxcclxuICAgICAgICAnZGVmYXVsdCc6IDAuMDAsXHJcbiAgICAgIH0sIHtcclxuICAgICAgICBsYWJlbDogdGhpcy5kb2NFeHRlbmRlZFByaWNlVGV4dCxcclxuICAgICAgICBuYW1lOiAnRG9jRXh0ZW5kZWRQcmljZScsXHJcbiAgICAgICAgcHJvcGVydHk6ICdEb2NFeHRlbmRlZFByaWNlJyxcclxuICAgICAgICB0eXBlOiAnZGVjaW1hbCcsXHJcbiAgICAgICAgJ2RlZmF1bHQnOiAwLjAwLFxyXG4gICAgICB9LCB7XHJcbiAgICAgICAgbGFiZWw6IHRoaXMuZG9jVG90YWxBbW91bnRUZXh0LFxyXG4gICAgICAgIG5hbWU6ICdEb2NUb3RhbEFtb3VudCcsXHJcbiAgICAgICAgcHJvcGVydHk6ICdEb2NUb3RhbEFtb3VudCcsXHJcbiAgICAgICAgdHlwZTogJ2RlY2ltYWwnLFxyXG4gICAgICAgICdkZWZhdWx0JzogMC4wMCxcclxuICAgICAgfSxcclxuXHJcbiAgICBdfSxcclxuICBdKTtcclxuICB9LFxyXG59KTtcclxuXHJcbmxhbmcuc2V0T2JqZWN0KCdpY2JvZS5WaWV3cy5TYWxlc09yZGVySXRlbXMuRWRpdCcsIF9fY2xhc3MpO1xyXG5leHBvcnQgZGVmYXVsdCBfX2NsYXNzO1xyXG4iXX0=
</pre>
</body>
</html>
