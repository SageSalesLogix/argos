<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">define('crm/Integrations/BOE/Views/SalesOrderItems/List', ['exports', 'module', 'dojo/_base/declare', 'dojo/_base/lang', 'dojo/string', 'argos/List', 'crm/Action', 'crm/Format', 'crm/Views/_CardLayoutListMixin', 'crm/Views/_RightDrawerListMixin', 'crm/Views/_MetricListMixin', '../../Models/Names', 'argos/I18n', '../../Utility', '../Locations/SalesOrderItemAvailabilityList'], function (exports, module, _dojo_baseDeclare, _dojo_baseLang, _dojoString, _argosList, _crmAction, _crmFormat, _crmViews_CardLayoutListMixin, _crmViews_RightDrawerListMixin, _crmViews_MetricListMixin, _ModelsNames, _argosI18n, _Utility, _LocationsSalesOrderItemAvailabilityList) {
  function _interopRequireDefault(obj) { return obj &amp;&amp; obj.__esModule ? obj : { 'default': obj }; }

  var _declare = _interopRequireDefault(_dojo_baseDeclare);

  var _lang = _interopRequireDefault(_dojo_baseLang);

  var _string = _interopRequireDefault(_dojoString);

  var _List = _interopRequireDefault(_argosList);

  var _action = _interopRequireDefault(_crmAction);

  var _format = _interopRequireDefault(_crmFormat);

  var _CardLayoutListMixin2 = _interopRequireDefault(_crmViews_CardLayoutListMixin);

  var _RightDrawerListMixin2 = _interopRequireDefault(_crmViews_RightDrawerListMixin);

  var _MetricListMixin2 = _interopRequireDefault(_crmViews_MetricListMixin);

  var _MODEL_NAMES = _interopRequireDefault(_ModelsNames);

  var _getResource = _interopRequireDefault(_argosI18n);

  var _utility = _interopRequireDefault(_Utility);

  var _SalesOrderItemAvailabilityList = _interopRequireDefault(_LocationsSalesOrderItemAvailabilityList);

  var resource = (0, _getResource['default'])('salesOrderItemsList');

  var __class = (0, _declare['default'])('crm.Integrations.BOE.Views.SalesOrderItems.List', [_List['default'], _RightDrawerListMixin2['default'], _MetricListMixin2['default'], _CardLayoutListMixin2['default']], {
    formatter: _format['default'],
    util: _utility['default'],
    // Localization
    titleText: resource.titleText,
    lineText: resource.lineText,
    quantityText: resource.quantityText,
    priceText: resource.priceText,
    adjustedPriceText: resource.adjustedPriceText,
    baseAdjustedPriceText: resource.baseAdjustedPriceText,
    baseAmountText: resource.baseAmountText,
    amountText: resource.amountText,
    productNameText: resource.productNameText,
    descriptionText: resource.descriptionText,
    accountingEntityRequiredText: resource.accountingEntityRequiredText,
    assignWarehouseText: resource.assignWarehouseText,
    warehouseTitleText: resource.warehouseTitleText,
    warehouseText: resource.warehouseText,
    totalAmountText: resource.totalAmountText,

    // Templates
    itemTemplate: new Simplate(['{% if ($.ErpLineNumber) { %}', '&lt;h3&gt;&lt;label class=&quot;group-label&quot;&gt;{%: $$.lineText %}&lt;/label&gt; {%: $.ErpLineNumber %}&lt;/h3&gt;', '{% } %}', '{% if ($.SlxLocation) { %}', '&lt;h4&gt;&lt;label class=&quot;group-label&quot;&gt;{%: $$.warehouseText %}&lt;/label&gt; {%: $.SlxLocation.Description %}&lt;/h4&gt;', '{% } %}', '&lt;h4&gt;&lt;label class=&quot;group-label&quot;&gt;{%: $$.productNameText %}&lt;/label&gt; {%: $.ProductName %}&lt;/h4&gt;', '&lt;h4&gt;&lt;label class=&quot;group-label&quot;&gt;{%: $$.descriptionText %}&lt;/label&gt; {%: $.Description %}&lt;/h4&gt;', '&lt;h4&gt; &lt;label class=&quot;group-label&quot;&gt;{%: $$.priceText %}&lt;/label&gt; ', '{%: $$.util.formatMultiCurrency($.Price, $.SalesOrder.BaseCurrencyCode) %}', '&lt;/h4&gt;', '&lt;h4&gt; &lt;label class=&quot;group-label&quot;&gt;{%: $$.adjustedPriceText %}&lt;/label&gt; ', '{%: $$.util.formatMultiCurrency($.DocCalculatedPrice, $.SalesOrder.CurrencyCode) %}', '&lt;/h4&gt;', '&lt;h4&gt; &lt;label class=&quot;group-label&quot;&gt;{%: $$.baseAdjustedPriceText %}&lt;/label&gt; ', '{%: $$.util.formatMultiCurrency($.CalculatedPrice, $.SalesOrder.BaseCurrencyCode) %}', '&lt;/h4&gt;', '&lt;h4&gt;&lt;label class=&quot;group-label&quot;&gt;{%: $$.quantityText %}&lt;/label&gt; {%: $.Quantity %}&lt;/h4&gt;', '&lt;h4&gt; &lt;label class=&quot;group-label&quot;&gt;{%: $$.baseAmountText %}&lt;/label&gt; ', '{%: $$.util.formatMultiCurrency($.ExtendedPrice, $.SalesOrder.BaseCurrencyCode) %}', '&lt;/h4&gt;', '&lt;h4&gt; &lt;label class=&quot;group-label&quot;&gt;{%: $$.amountText %}&lt;/label&gt; ', '{%: $$.util.formatMultiCurrency($.DocExtendedPrice, $.SalesOrder.CurrencyCode) %}', '&lt;/h4&gt;', '&lt;h4&gt; &lt;label class=&quot;group-label&quot;&gt;{%: $$.totalAmountText %}&lt;/label&gt; ', '{%: $$.util.formatMultiCurrency($.DocTotalAmount, $.SalesOrder.CurrencyCode) %}', '&lt;/h4&gt;']),
    // View Properties
    id: 'salessorder_items_list',
    detailView: 'salesorder_item_detail',
    insertView: 'salesorder_item_edit',
    modelName: _MODEL_NAMES['default'].SALESORDERITEM,
    resourceKind: 'salesOrderItems',
    allowSelection: true,
    enableActions: true,
    security: 'Entities/SalesOrder/View',
    insertSecurity: 'Entities/SalesOrder/Add',

    // Card layout
    itemIconClass: 'fa fa-list-ul fa-2x',

    // Metrics
    entityName: 'SalesOrderItem',

    createActionLayout: function createActionLayout() {
      return this.actions || (this.actions = [{
        id: 'assignWarehouse',
        cls: 'fa fa-truck fa-2x',
        label: this.assignWarehouseText,
        enabled: _action['default'].hasProperty.bindDelegate(this, 'SalesOrder.ErpLogicalId'),
        action: 'assignWarehouseAction'
      }]);
    },
    createToolLayout: function createToolLayout() {
      return this.tools || (this.tools = {
        'tbar': [{
          id: 'new',
          cls: 'fa fa-plus fa-fw fa-lg',
          action: 'preNavigateToInsert',
          security: this.app.getViewSecurity(this.insertView, 'insert')
        }]
      });
    },
    preNavigateToInsert: function preNavigateToInsert(el) {
      var options = {};
      if (this.options &amp;&amp; this.options.fromContext &amp;&amp; this.options.fromContext.entry) {
        options = {
          context: {
            SalesOrder: this.options.fromContext.entry
          }
        };
      }
      this.navigateToInsertView(el, options);
    },
    assignWarehouseAction: function assignWarehouseAction(theAction, selection) {
      var order = this.options.fromContext.entry;
      var orderItemKey = selection.tag.attributes['data-key'].value;
      var orderItem = this.entries[orderItemKey];
      if (orderItem) {
        var view = this.getAvailabilityView();
        if (view) {
          var options = {
            orderItem: orderItem,
            order: order
          };
          this.refreshRequired = true;
          view.show(options);
        }
      }
    },
    getAvailabilityView: function getAvailabilityView() {
      var viewId = 'locations_salesOrderItemAvailabilityList';
      var view = App.getView(viewId);
      if (view) {
        return view;
      }

      App.registerView(new _SalesOrderItemAvailabilityList['default']({ id: viewId }));
      view = App.getView(viewId);
      return view;
    },
    formatSearchQuery: function formatSearchQuery(searchQuery) {
      return _string['default'].substitute('(upper(Description) like &quot;${0}%&quot;) or (upper(ProductName) like &quot;${0}%&quot;) or (upper(SalesOrder.SalesOrderNumber) like &quot;${0}%&quot;) or (upper(ErpLineNumber) like &quot;${0}%&quot;)', [this.escapeSearchQuery(searchQuery.toUpperCase())]);
    }
  });

  _lang['default'].setObject('icboe.Views.SalesOrderItems.List', __class);
  module.exports = __class;
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9JbnRlZ3JhdGlvbnMvQk9FL1ZpZXdzL1NhbGVzT3JkZXJJdGVtcy9MaXN0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBZUEsTUFBTSxRQUFRLEdBQUcsNkJBQVkscUJBQXFCLENBQUMsQ0FBQzs7QUFFcEQsTUFBTSxPQUFPLEdBQUcseUJBQVEsaURBQWlELEVBQUUscUhBQXFFLEVBQUU7QUFDaEosYUFBUyxvQkFBUTtBQUNqQixRQUFJLHFCQUFTOztBQUViLGFBQVMsRUFBRSxRQUFRLENBQUMsU0FBUztBQUM3QixZQUFRLEVBQUUsUUFBUSxDQUFDLFFBQVE7QUFDM0IsZ0JBQVksRUFBRSxRQUFRLENBQUMsWUFBWTtBQUNuQyxhQUFTLEVBQUUsUUFBUSxDQUFDLFNBQVM7QUFDN0IscUJBQWlCLEVBQUUsUUFBUSxDQUFDLGlCQUFpQjtBQUM3Qyx5QkFBcUIsRUFBRSxRQUFRLENBQUMscUJBQXFCO0FBQ3JELGtCQUFjLEVBQUUsUUFBUSxDQUFDLGNBQWM7QUFDdkMsY0FBVSxFQUFFLFFBQVEsQ0FBQyxVQUFVO0FBQy9CLG1CQUFlLEVBQUUsUUFBUSxDQUFDLGVBQWU7QUFDekMsbUJBQWUsRUFBRSxRQUFRLENBQUMsZUFBZTtBQUN6QyxnQ0FBNEIsRUFBRSxRQUFRLENBQUMsNEJBQTRCO0FBQ25FLHVCQUFtQixFQUFFLFFBQVEsQ0FBQyxtQkFBbUI7QUFDakQsc0JBQWtCLEVBQUUsUUFBUSxDQUFDLGtCQUFrQjtBQUMvQyxpQkFBYSxFQUFFLFFBQVEsQ0FBQyxhQUFhO0FBQ3JDLG1CQUFlLEVBQUUsUUFBUSxDQUFDLGVBQWU7OztBQUd6QyxnQkFBWSxFQUFFLElBQUksUUFBUSxDQUFDLENBQ3pCLDhCQUE4QixFQUM1Qix1RkFBdUYsRUFDekYsU0FBUyxFQUNULDRCQUE0QixFQUMxQixzR0FBc0csRUFDeEcsU0FBUyxFQUNULDRGQUE0RixFQUM1Riw0RkFBNEYsRUFDNUYsOERBQThELEVBQzFE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Q0FBQztBQUNGLGNBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDO0FBQzVCLGNBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7U0FDcEI7T0FDRjtLQUNGO0FBQ0QsdUJBQW1CLEVBQUUsU0FBUyxtQkFBbUIsR0FBRztBQUNsRCxVQUFNLE1BQU0sR0FBRywwQ0FBMEMsQ0FBQztBQUMxRCxVQUFJLElBQUksR0FBRyxHQUFHLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQy9CLFVBQUksSUFBSSxFQUFFO0FBQ1IsZUFBTyxJQUFJLENBQUM7T0FDYjs7QUFFRCxTQUFHLENBQUMsWUFBWSxDQUFDLCtDQUFtQyxFQUFDLEVBQUUsRUFBRSxNQUFNLEVBQUMsQ0FBQyxDQUFDLENBQUM7QUFDbkUsVUFBSSxHQUFHLEdBQUcsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDM0IsYUFBTyxJQUFJLENBQUM7S0FDYjtBQUNELHFCQUFpQixFQUFFLFNBQVMsaUJBQWlCLENBQUMsV0FBVyxFQUFFO0FBQ3pELGFBQU8sbUJBQU8sVUFBVSxDQUFDLG9LQUFvSyxFQUFFLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLFdBQVcsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztLQUNyUDtHQUNGLENBQUMsQ0FBQzs7QUFFSCxtQkFBSyxTQUFTLENBQUMsa0NBQWtDLEVBQUUsT0FBTyxDQUFDLENBQUM7bUJBQzdDLE9BQU8iLCJmaWxlIjoic3JjL0ludGVncmF0aW9ucy9CT0UvVmlld3MvU2FsZXNPcmRlckl0ZW1zL0xpc3QuanMiLCJzb3VyY2VSb290Ijoic3JjIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGRlY2xhcmUgZnJvbSAnZG9qby9fYmFzZS9kZWNsYXJlJztcclxuaW1wb3J0IGxhbmcgZnJvbSAnZG9qby9fYmFzZS9sYW5nJztcclxuaW1wb3J0IHN0cmluZyBmcm9tICdkb2pvL3N0cmluZyc7XHJcbmltcG9ydCBMaXN0IGZyb20gJ2FyZ29zL0xpc3QnO1xyXG5pbXBvcnQgYWN0aW9uIGZyb20gJ2NybS9BY3Rpb24nO1xyXG5pbXBvcnQgZm9ybWF0IGZyb20gJ2NybS9Gb3JtYXQnO1xyXG5pbXBvcnQgX0NhcmRMYXlvdXRMaXN0TWl4aW4gZnJvbSAnY3JtL1ZpZXdzL19DYXJkTGF5b3V0TGlzdE1peGluJztcclxuaW1wb3J0IF9SaWdodERyYXdlckxpc3RNaXhpbiBmcm9tICdjcm0vVmlld3MvX1JpZ2h0RHJhd2VyTGlzdE1peGluJztcclxuaW1wb3J0IF9NZXRyaWNMaXN0TWl4aW4gZnJvbSAnY3JtL1ZpZXdzL19NZXRyaWNMaXN0TWl4aW4nO1xyXG5pbXBvcnQgTU9ERUxfTkFNRVMgZnJvbSAnLi4vLi4vTW9kZWxzL05hbWVzJztcclxuaW1wb3J0IGdldFJlc291cmNlIGZyb20gJ2FyZ29zL0kxOG4nO1xyXG5pbXBvcnQgdXRpbGl0eSBmcm9tICcuLi8uLi9VdGlsaXR5JztcclxuaW1wb3J0IFNhbGVzT3JkZXJJdGVtQXZhaWxhYmlsaXR5TGlzdCBmcm9tICcuLi9Mb2NhdGlvbnMvU2FsZXNPcmRlckl0ZW1BdmFpbGFiaWxpdHlMaXN0JztcclxuXHJcblxyXG5jb25zdCByZXNvdXJjZSA9IGdldFJlc291cmNlKCdzYWxlc09yZGVySXRlbXNMaXN0Jyk7XHJcblxyXG5jb25zdCBfX2NsYXNzID0gZGVjbGFyZSgnY3JtLkludGVncmF0aW9ucy5CT0UuVmlld3MuU2FsZXNPcmRlckl0ZW1zLkxpc3QnLCBbTGlzdCwgX1JpZ2h0RHJhd2VyTGlzdE1peGluLCBfTWV0cmljTGlzdE1peGluLCBfQ2FyZExheW91dExpc3RNaXhpbl0sIHtcclxuICBmb3JtYXR0ZXI6IGZvcm1hdCxcclxuICB1dGlsOiB1dGlsaXR5LFxyXG4gIC8vIExvY2FsaXphdGlvblxyXG4gIHRpdGxlVGV4dDogcmVzb3VyY2UudGl0bGVUZXh0LFxyXG4gIGxpbmVUZXh0OiByZXNvdXJjZS5saW5lVGV4dCxcclxuICBxdWFudGl0eVRleHQ6IHJlc291cmNlLnF1YW50aXR5VGV4dCxcclxuICBwcmljZVRleHQ6IHJlc291cmNlLnByaWNlVGV4dCxcclxuICBhZGp1c3RlZFByaWNlVGV4dDogcmVzb3VyY2UuYWRqdXN0ZWRQcmljZVRleHQsXHJcbiAgYmFzZUFkanVzdGVkUHJpY2VUZXh0OiByZXNvdXJjZS5iYXNlQWRqdXN0ZWRQcmljZVRleHQsXHJcbiAgYmFzZUFtb3VudFRleHQ6IHJlc291cmNlLmJhc2VBbW91bnRUZXh0LFxyXG4gIGFtb3VudFRleHQ6IHJlc291cmNlLmFtb3VudFRleHQsXHJcbiAgcHJvZHVjdE5hbWVUZXh0OiByZXNvdXJjZS5wcm9kdWN0TmFtZVRleHQsXHJcbiAgZGVzY3JpcHRpb25UZXh0OiByZXNvdXJjZS5kZXNjcmlwdGlvblRleHQsXHJcbiAgYWNjb3VudGluZ0VudGl0eVJlcXVpcmVkVGV4dDogcmVzb3VyY2UuYWNjb3VudGluZ0VudGl0eVJlcXVpcmVkVGV4dCxcclxuICBhc3NpZ25XYXJlaG91c2VUZXh0OiByZXNvdXJjZS5hc3NpZ25XYXJlaG91c2VUZXh0LFxyXG4gIHdhcmVob3VzZVRpdGxlVGV4dDogcmVzb3VyY2Uud2FyZWhvdXNlVGl0bGVUZXh0LFxyXG4gIHdhcmVob3VzZVRleHQ6IHJlc291cmNlLndhcmVob3VzZVRleHQsXHJcbiAgdG90YWxBbW91bnRUZXh0OiByZXNvdXJjZS50b3RhbEFtb3VudFRleHQsXHJcblxyXG4gIC8vIFRlbXBsYXRlc1xyXG4gIGl0ZW1UZW1wbGF0ZTogbmV3IFNpbXBsYXRlKFtcclxuICAgICd7JSBpZiAoJC5FcnBMaW5lTnVtYmVyKSB7ICV9JyxcclxuICAgICAgJzxoMz48bGFiZWwgY2xhc3M9XCJncm91cC1sYWJlbFwiPnslOiAkJC5saW5lVGV4dCAlfTwvbGFiZWw+IHslOiAkLkVycExpbmVOdW1iZXIgJX08L2gzPicsXHJcbiAgICAneyUgfSAlfScsXHJcbiAgICAneyUgaWYgKCQuU2x4TG9jYXRpb24pIHsgJX0nLFxyXG4gICAgICAnPGg0PjxsYWJlbCBjbGFzcz1cImdyb3VwLWxhYmVsXCI+eyU6ICQkLndhcmVob3VzZVRleHQgJX08L2xhYmVsPiB7JTogJC5TbHhMb2NhdGlvbi5EZXNjcmlwdGlvbiAlfTwvaDQ+JyxcclxuICAgICd7JSB9ICV9JyxcclxuICAgICc8aDQ+PGxhYmVsIGNsYXNzPVwiZ3JvdXAtbGFiZWxcIj57JTogJCQucHJvZHVjdE5hbWVUZXh0ICV9PC9sYWJlbD4geyU6ICQuUHJvZHVjdE5hbWUgJX08L2g0PicsXHJcbiAgICAnPGg0PjxsYWJlbCBjbGFzcz1cImdyb3VwLWxhYmVsXCI+eyU6ICQkLmRlc2NyaXB0aW9uVGV4dCAlfTwvbGFiZWw+IHslOiAkLkRlc2NyaXB0aW9uICV9PC9oND4nLFxyXG4gICAgJzxoND4gPGxhYmVsIGNsYXNzPVwiZ3JvdXAtbGFiZWxcIj57JTogJCQucHJpY2VUZXh0ICV9PC9sYWJlbD4gJyxcclxuICAgICAgICAneyU6ICQkLnV0aWwuZm9ybWF0TXVsdGlDdXJyZW5jeSgkLlByaWNlLCAkLlNhbGVzT3JkZXIuQmFzZUN1cnJlbmN5Q29kZSkgJX0nLFxyXG4gICAgJzwvaDQ+JyxcclxuICAgICc8aDQ+IDxsYWJlbCBjbGFzcz1cImdyb3VwLWxhYmVsXCI+eyU6ICQkLmFkanVzdGVkUHJpY2VUZXh0ICV9PC9sYWJlbD4gJyxcclxuICAgICAgICAneyU6ICQkLnV0aWwuZm9ybWF0TXVsdGlDdXJyZW5jeSgkLkRvY0NhbGN1bGF0ZWRQcmljZSwgJC5TYWxlc09yZGVyLkN1cnJlbmN5Q29kZSkgJX0nLFxyXG4gICAgJzwvaDQ+JyxcclxuICAgICc8aDQ+IDxsYWJlbCBjbGFzcz1cImdyb3VwLWxhYmVsXCI+eyU6ICQkLmJhc2VBZGp1c3RlZFByaWNlVGV4dCAlfTwvbGFiZWw+ICcsXHJcbiAgICAgICAgJ3slOiAkJC51dGlsLmZvcm1hdE11bHRpQ3VycmVuY3koJC5DYWxjdWxhdGVkUHJpY2UsICQuU2FsZXNPcmRlci5CYXNlQ3VycmVuY3lDb2RlKSAlfScsXHJcbiAgICAnPC9oND4nLFxyXG4gICAgJzxoND48bGFiZWwgY2xhc3M9XCJncm91cC1sYWJlbFwiPnslOiAkJC5xdWFudGl0eVRleHQgJX08L2xhYmVsPiB7JTogJC5RdWFudGl0eSAlfTwvaDQ+JyxcclxuICAgICc8aDQ+IDxsYWJlbCBjbGFzcz1cImdyb3VwLWxhYmVsXCI+eyU6ICQkLmJhc2VBbW91bnRUZXh0ICV9PC9sYWJlbD4gJyxcclxuICAgICAgICAneyU6ICQkLnV0aWwuZm9ybWF0TXVsdGlDdXJyZW5jeSgkLkV4dGVuZGVkUHJpY2UsICQuU2FsZXNPcmRlci5CYXNlQ3VycmVuY3lDb2RlKSAlfScsXHJcbiAgICAgJzwvaDQ+JyxcclxuICAgICc8aDQ+IDxsYWJlbCBjbGFzcz1cImdyb3VwLWxhYmVsXCI+eyU6ICQkLmFtb3VudFRleHQgJX08L2xhYmVsPiAnLFxyXG4gICAgICAgICd7JTogJCQudXRpbC5mb3JtYXRNdWx0aUN1cnJlbmN5KCQuRG9jRXh0ZW5kZWRQcmljZSwgJC5TYWxlc09yZGVyLkN1cnJlbmN5Q29kZSkgJX0nLFxyXG4gICAgJzwvaDQ+JyxcclxuICAgICAnPGg0PiA8bGFiZWwgY2xhc3M9XCJncm91cC1sYWJlbFwiPnslOiAkJC50b3RhbEFtb3VudFRleHQgJX08L2xhYmVsPiAnLFxyXG4gICAgICAgICd7JTogJCQudXRpbC5mb3JtYXRNdWx0aUN1cnJlbmN5KCQuRG9jVG90YWxBbW91bnQsICQuU2FsZXNPcmRlci5DdXJyZW5jeUNvZGUpICV9JyxcclxuICAgICAnPC9oND4nLFxyXG4gIF0pLFxyXG4gIC8vIFZpZXcgUHJvcGVydGllc1xyXG4gIGlkOiAnc2FsZXNzb3JkZXJfaXRlbXNfbGlzdCcsXHJcbiAgZGV0YWlsVmlldzogJ3NhbGVzb3JkZXJfaXRlbV9kZXRhaWwnLFxyXG4gIGluc2VydFZpZXc6ICdzYWxlc29yZGVyX2l0ZW1fZWRpdCcsXHJcbiAgbW9kZWxOYW1lOiBNT0RFTF9OQU1FUy5TQUxFU09SREVSSVRFTSxcclxuICByZXNvdXJjZUtpbmQ6ICdzYWxlc09yZGVySXRlbXMnLFxyXG4gIGFsbG93U2VsZWN0aW9uOiB0cnVlLFxyXG4gIGVuYWJsZUFjdGlvbnM6IHRydWUsXHJcbiAgc2VjdXJpdHk6ICdFbnRpdGllcy9TYWxlc09yZGVyL1ZpZXcnLFxyXG4gIGluc2VydFNlY3VyaXR5OiAnRW50aXRpZXMvU2FsZXNPcmRlci9BZGQnLFxyXG5cclxuICAvLyBDYXJkIGxheW91dFxyXG4gIGl0ZW1JY29uQ2xhc3M6ICdmYSBmYS1saXN0LXVsIGZhLTJ4JyxcclxuXHJcbiAgLy8gTWV0cmljc1xyXG4gIGVudGl0eU5hbWU6ICdTYWxlc09yZGVySXRlbScsXHJcblxyXG4gIGNyZWF0ZUFjdGlvbkxheW91dDogZnVuY3Rpb24gY3JlYXRlQWN0aW9uTGF5b3V0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuYWN0aW9ucyB8fCAodGhpcy5hY3Rpb25zID0gW3tcclxuICAgICAgaWQ6ICdhc3NpZ25XYXJlaG91c2UnLFxyXG4gICAgICBjbHM6ICdmYSBmYS10cnVjayBmYS0yeCcsXHJcbiAgICAgIGxhYmVsOiB0aGlzLmFzc2lnbldhcmVob3VzZVRleHQsXHJcbiAgICAgIGVuYWJsZWQ6IGFjdGlvbi5oYXNQcm9wZXJ0eS5iaW5kRGVsZWdhdGUodGhpcywgJ1NhbGVzT3JkZXIuRXJwTG9naWNhbElkJyksXHJcbiAgICAgIGFjdGlvbjogJ2Fzc2lnbldhcmVob3VzZUFjdGlvbicsXHJcbiAgICB9XSk7XHJcbiAgfSxcclxuICBjcmVhdGVUb29sTGF5b3V0OiBmdW5jdGlvbiBjcmVhdGVUb29sTGF5b3V0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMudG9vbHMgfHwgKHRoaXMudG9vbHMgPSB7XHJcbiAgICAgICd0YmFyJzogW3tcclxuICAgICAgICBpZDogJ25ldycsXHJcbiAgICAgICAgY2xzOiAnZmEgZmEtcGx1cyBmYS1mdyBmYS1sZycsXHJcbiAgICAgICAgYWN0aW9uOiAncHJlTmF2aWdhdGVUb0luc2VydCcsXHJcbiAgICAgICAgc2VjdXJpdHk6IHRoaXMuYXBwLmdldFZpZXdTZWN1cml0eSh0aGlzLmluc2VydFZpZXcsICdpbnNlcnQnKSxcclxuICAgICAgfV0sXHJcbiAgICB9KTtcclxuICB9LFxyXG4gIHByZU5hdmlnYXRlVG9JbnNlcnQ6IGZ1bmN0aW9uIHByZU5hdmlnYXRlVG9JbnNlcnQoZWwpIHtcclxuICAgIGxldCBvcHRpb25zID0ge307XHJcbiAgICBpZiAodGhpcy5vcHRpb25zICYmIHRoaXMub3B0aW9ucy5mcm9tQ29udGV4dCAmJiB0aGlzLm9wdGlvbnMuZnJvbUNvbnRleHQuZW50cnkpIHtcclxuICAgICAgb3B0aW9ucyA9IHtcclxuICAgICAgICBjb250ZXh0OiB7XHJcbiAgICAgICAgICBTYWxlc09yZGVyOiB0aGlzLm9wdGlvbnMuZnJvbUNvbnRleHQuZW50cnksXHJcbiAgICAgICAgfSxcclxuICAgICAgfTtcclxuICAgIH1cclxuICAgIHRoaXMubmF2aWdhdGVUb0luc2VydFZpZXcoZWwsIG9wdGlvbnMpO1xyXG4gIH0sXHJcbiAgYXNzaWduV2FyZWhvdXNlQWN0aW9uOiBmdW5jdGlvbiBhc3NpZ25XYXJlaG91c2VBY3Rpb24odGhlQWN0aW9uLCBzZWxlY3Rpb24pIHtcclxuICAgIGNvbnN0IG9yZGVyID0gdGhpcy5vcHRpb25zLmZyb21Db250ZXh0LmVudHJ5O1xyXG4gICAgY29uc3Qgb3JkZXJJdGVtS2V5ID0gc2VsZWN0aW9uLnRhZy5hdHRyaWJ1dGVzWydkYXRhLWtleSddLnZhbHVlO1xyXG4gICAgY29uc3Qgb3JkZXJJdGVtID0gdGhpcy5lbnRyaWVzW29yZGVySXRlbUtleV07XHJcbiAgICBpZiAob3JkZXJJdGVtKSB7XHJcbiAgICAgIGNvbnN0IHZpZXcgPSB0aGlzLmdldEF2YWlsYWJpbGl0eVZpZXcoKTtcclxuICAgICAgaWYgKHZpZXcpIHtcclxuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICAgICAgb3JkZXJJdGVtOiBvcmRlckl0ZW0sXHJcbiAgICAgICAgICBvcmRlcjogb3JkZXIsXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLnJlZnJlc2hSZXF1aXJlZCA9IHRydWU7XHJcbiAgICAgICAgdmlldy5zaG93KG9wdGlvbnMpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSxcclxuICBnZXRBdmFpbGFiaWxpdHlWaWV3OiBmdW5jdGlvbiBnZXRBdmFpbGFiaWxpdHlWaWV3KCkge1xyXG4gICAgY29uc3Qgdmlld0lkID0gJ2xvY2F0aW9uc19zYWxlc09yZGVySXRlbUF2YWlsYWJpbGl0eUxpc3QnO1xyXG4gICAgbGV0IHZpZXcgPSBBcHAuZ2V0Vmlldyh2aWV3SWQpO1xyXG4gICAgaWYgKHZpZXcpIHtcclxuICAgICAgcmV0dXJuIHZpZXc7XHJcbiAgICB9XHJcblxyXG4gICAgQXBwLnJlZ2lzdGVyVmlldyhuZXcgU2FsZXNPcmRlckl0ZW1BdmFpbGFiaWxpdHlMaXN0KHtpZDogdmlld0lkfSkpO1xyXG4gICAgdmlldyA9IEFwcC5nZXRWaWV3KHZpZXdJZCk7XHJcbiAgICByZXR1cm4gdmlldztcclxuICB9LFxyXG4gIGZvcm1hdFNlYXJjaFF1ZXJ5OiBmdW5jdGlvbiBmb3JtYXRTZWFyY2hRdWVyeShzZWFyY2hRdWVyeSkge1xyXG4gICAgcmV0dXJuIHN0cmluZy5zdWJzdGl0dXRlKCcodXBwZXIoRGVzY3JpcHRpb24pIGxpa2UgXCIkezB9JVwiKSBvciAodXBwZXIoUHJvZHVjdE5hbWUpIGxpa2UgXCIkezB9JVwiKSBvciAodXBwZXIoU2FsZXNPcmRlci5TYWxlc09yZGVyTnVtYmVyKSBsaWtlIFwiJHswfSVcIikgb3IgKHVwcGVyKEVycExpbmVOdW1iZXIpIGxpa2UgXCIkezB9JVwiKScsIFt0aGlzLmVzY2FwZVNlYXJjaFF1ZXJ5KHNlYXJjaFF1ZXJ5LnRvVXBwZXJDYXNlKCkpXSk7XHJcbiAgfSxcclxufSk7XHJcblxyXG5sYW5nLnNldE9iamVjdCgnaWNib2UuVmlld3MuU2FsZXNPcmRlckl0ZW1zLkxpc3QnLCBfX2NsYXNzKTtcclxuZXhwb3J0IGRlZmF1bHQgX19jbGFzcztcclxuIl19
</pre>
</body>
</html>
