<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">define('crm/Integrations/BOE/Views/QuoteLines/List', ['exports', 'module', 'dojo/_base/declare', 'dojo/_base/lang', 'dojo/string', 'argos/List', 'crm/Action', 'crm/Format', 'crm/Views/_CardLayoutListMixin', 'crm/Views/_RightDrawerListMixin', 'crm/Views/_MetricListMixin', '../../Models/Names', 'argos/I18n', '../../Utility', '../Locations/QuoteItemAvailabilityList'], function (exports, module, _dojo_baseDeclare, _dojo_baseLang, _dojoString, _argosList, _crmAction, _crmFormat, _crmViews_CardLayoutListMixin, _crmViews_RightDrawerListMixin, _crmViews_MetricListMixin, _ModelsNames, _argosI18n, _Utility, _LocationsQuoteItemAvailabilityList) {
  function _interopRequireDefault(obj) { return obj &amp;&amp; obj.__esModule ? obj : { 'default': obj }; }

  var _declare = _interopRequireDefault(_dojo_baseDeclare);

  var _lang = _interopRequireDefault(_dojo_baseLang);

  var _string = _interopRequireDefault(_dojoString);

  var _List = _interopRequireDefault(_argosList);

  var _action = _interopRequireDefault(_crmAction);

  var _format = _interopRequireDefault(_crmFormat);

  var _CardLayoutListMixin2 = _interopRequireDefault(_crmViews_CardLayoutListMixin);

  var _RightDrawerListMixin2 = _interopRequireDefault(_crmViews_RightDrawerListMixin);

  var _MetricListMixin2 = _interopRequireDefault(_crmViews_MetricListMixin);

  var _MODEL_NAMES = _interopRequireDefault(_ModelsNames);

  var _getResource = _interopRequireDefault(_argosI18n);

  var _utility = _interopRequireDefault(_Utility);

  var _QuoteItemAvailabilityList = _interopRequireDefault(_LocationsQuoteItemAvailabilityList);

  var resource = (0, _getResource['default'])('quoteItemsList');

  var __class = (0, _declare['default'])('crm.Integrations.BOE.Views.QuoteLines.List', [_List['default'], _RightDrawerListMixin2['default'], _MetricListMixin2['default'], _CardLayoutListMixin2['default']], {
    formatter: _format['default'],
    util: _utility['default'],
    // Localization
    titleText: resource.titleText,
    lineText: resource.lineText,
    quantityText: resource.quantityText,
    priceText: resource.priceText,
    adjustedPriceText: resource.adjustedPriceText,
    baseAdjustedPriceText: resource.baseAdjustedPriceText,
    baseAmountText: resource.baseAmountText,
    amountText: resource.amountText,
    productNameText: resource.productNameText,
    descriptionText: resource.descriptionText,
    accountingEntityRequiredText: resource.accountingEntityRequiredText,
    assignWarehouseText: resource.assignWarehouseText,
    warehousesTitleText: resource.warehouseTitleText,
    warehouseText: resource.warehouseText,
    totalAmountText: resource.totalAmountText,

    // Templates
    itemTemplate: new Simplate(['{% if ($.ErpLineNumber) { %}', '&lt;h3&gt;&lt;label class=&quot;group-label&quot;&gt;{%: $$.lineText %}&lt;/label&gt; {%: $.ErpLineNumber %}&lt;/h3&gt;', '{% } %}', '{% if ($.SlxLocation) { %}', '&lt;h4&gt;&lt;label class=&quot;group-label&quot;&gt;{%: $$.warehouseText %}&lt;/label&gt; {%: $.SlxLocation.Description %}&lt;/h4&gt;', '{% } %}', '&lt;h4&gt;&lt;label class=&quot;group-label&quot;&gt;{%: $$.productNameText %}&lt;/label&gt; {%: $.ProductName %}&lt;/h4&gt;', '&lt;h4&gt;&lt;label class=&quot;group-label&quot;&gt;{%: $$.descriptionText %}&lt;/label&gt; {%: $.Description %}&lt;/h4&gt;', '&lt;h4&gt; &lt;label class=&quot;group-label&quot;&gt;{%: $$.priceText %} &lt;/label&gt;', '{%: $$.util.formatMultiCurrency($.Price, $.Quote.BaseCurrencyCode) %}', '&lt;/h4&gt;', '&lt;h4&gt; &lt;label class=&quot;group-label&quot;&gt;{%: $$.adjustedPriceText %}&lt;/label&gt; ', '{%: $$.util.formatMultiCurrency($.DocCalculatedPrice, $.Quote.CurrencyCode) %}', '&lt;/h4&gt;', '&lt;h4&gt; &lt;label class=&quot;group-label&quot;&gt;{%: $$.baseAdjustedPriceText %}&lt;/label&gt; ', '{%: $$.util.formatMultiCurrency($.CalculatedPrice, $.Quote.BaseCurrencyCode) %}', '&lt;/h4&gt;', '&lt;h4&gt;&lt;label class=&quot;group-label&quot;&gt;{%: $$.quantityText %}&lt;/label&gt; {%: $.Quantity %}&lt;/h4&gt;', '&lt;h4&gt; &lt;label class=&quot;group-label&quot;&gt;{%: $$.baseAmountText %}&lt;/label&gt; ', '{%: $$.util.formatMultiCurrency($.ExtendedPrice, $.Quote.BaseCurrencyCode) %}', '&lt;/h4&gt;', '&lt;h4&gt; &lt;label class=&quot;group-label&quot;&gt;{%: $$.amountText %}&lt;/label&gt; ', '{%: $$.util.formatMultiCurrency($.DocExtendedPrice, $.Quote.CurrencyCode) %}', '&lt;/h4&gt;', '&lt;h4&gt; &lt;label class=&quot;group-label&quot;&gt;{%: $$.totalAmountText %}&lt;/label&gt; ', '{%: $$.util.formatMultiCurrency($.DocTotalAmount, $.Quote.CurrencyCode) %}', '&lt;/h4&gt;']),
    // View Properties
    id: 'quote_lines_list',
    detailView: 'quote_line_detail',
    insertView: 'quote_line_edit',
    modelName: _MODEL_NAMES['default'].QUOTEITEM,
    resourceKind: 'quoteItems',
    allowSelection: true,
    enableActions: true,
    security: 'Entities/Quote/View',
    insertSecurity: 'Entities/Quote/Add',

    // Card layout
    itemIconClass: 'fa fa-list-ul fa-2x',

    // Metrics
    entityName: 'QuoteItem',

    createActionLayout: function createActionLayout() {
      return this.actions || (this.actions = [{
        id: 'assignWarehouse',
        cls: 'fa fa-truck fa-2x',
        label: this.assignWarehouseText,
        enabled: _action['default'].hasProperty.bindDelegate(this, 'Quote.ErpLogicalId'),
        action: 'assignWarehouseAction'
      }]);
    },
    createToolLayout: function createToolLayout() {
      return this.tools || (this.tools = {
        'tbar': [{
          id: 'new',
          cls: 'fa fa-plus fa-fw fa-lg',
          action: 'preNavigateToInsert',
          security: this.app.getViewSecurity(this.insertView, 'insert')
        }]
      });
    },
    preNavigateToInsert: function preNavigateToInsert(el) {
      var options = {};
      if (this.options &amp;&amp; this.options.fromContext &amp;&amp; this.options.fromContext.entry) {
        options = {
          context: {
            Quote: this.options.fromContext.entry
          }
        };
      }
      this.navigateToInsertView(el, options);
    },
    formatSearchQuery: function formatSearchQuery(searchQuery) {
      return _string['default'].substitute('(upper(Description) like &quot;${0}%&quot;) or (upper(ProductName) like &quot;${0}%&quot;) or (upper(Quote.QuoteNumber) like &quot;${0}%&quot;) or (upper(ErpLineNumber) like &quot;${0}%&quot;)', [this.escapeSearchQuery(searchQuery.toUpperCase())]);
    },
    assignWarehouseAction: function assignWarehouseAction(theAction, selection) {
      var quote = this.options.fromContext.entry;
      var quoteItemKey = selection.tag.attributes['data-key'].value;
      var quoteItem = this.entries[quoteItemKey];
      if (quoteItem) {
        var view = this.getAvailabilityView();
        if (view) {
          var options = {
            quoteItem: quoteItem,
            quote: quote
          };
          this.refreshRequired = true;
          view.show(options);
        }
      }
    },
    getAvailabilityView: function getAvailabilityView() {
      var viewId = 'locations_quoteItemAvailabilityList';
      var view = App.getView(viewId);
      if (view) {
        return view;
      }

      App.registerView(new _QuoteItemAvailabilityList['default']({ id: viewId }));
      view = App.getView(viewId);
      return view;
    }
  });

  _lang['default'].setObject('icboe.Views.QuoteLines.List', __class);
  module.exports = __class;
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9JbnRlZ3JhdGlvbnMvQk9FL1ZpZXdzL1F1b3RlTGluZXMvTGlzdC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQWNBLE1BQU0sUUFBUSxHQUFHLDZCQUFZLGdCQUFnQixDQUFDLENBQUM7O0FBRS9DLE1BQU0sT0FBTyxHQUFHLHlCQUFRLDRDQUE0QyxFQUFFLHFIQUFxRSxFQUFFO0FBQzNJLGFBQVMsb0JBQVE7QUFDakIsUUFBSSxxQkFBUzs7QUFFYixhQUFTLEVBQUUsUUFBUSxDQUFDLFNBQVM7QUFDN0IsWUFBUSxFQUFFLFFBQVEsQ0FBQyxRQUFRO0FBQzNCLGdCQUFZLEVBQUUsUUFBUSxDQUFDLFlBQVk7QUFDbkMsYUFBUyxFQUFFLFFBQVEsQ0FBQyxTQUFTO0FBQzdCLHFCQUFpQixFQUFFLFFBQVEsQ0FBQyxpQkFBaUI7QUFDN0MseUJBQXFCLEVBQUUsUUFBUSxDQUFDLHFCQUFxQjtBQUNyRCxrQkFBYyxFQUFFLFFBQVEsQ0FBQyxjQUFjO0FBQ3ZDLGNBQVUsRUFBRSxRQUFRLENBQUMsVUFBVTtBQUMvQixtQkFBZSxFQUFFLFFBQVEsQ0FBQyxlQUFlO0FBQ3pDLG1CQUFlLEVBQUUsUUFBUSxDQUFDLGVBQWU7QUFDekMsZ0NBQTRCLEVBQUUsUUFBUSxDQUFDLDRCQUE0QjtBQUNuRSx1QkFBbUIsRUFBRSxRQUFRLENBQUMsbUJBQW1CO0FBQ2pELHVCQUFtQixFQUFFLFFBQVEsQ0FBQyxrQkFBa0I7QUFDaEQsaUJBQWEsRUFBRSxRQUFRLENBQUMsYUFBYTtBQUNyQyxtQkFBZSxFQUFFLFFBQVEsQ0FBQyxlQUFlOzs7QUFHekMsZ0JBQVksRUFBRSxJQUFJLFFBQVEsQ0FBQyxDQUN6Qiw4QkFBOEIsRUFDNUIsdUZBQXVGLEVBQ3pGLFNBQVMsRUFDVCw0QkFBNEIsRUFDMUIsc0dBQXNHLEVBQ3hHLFNBQVMsRUFDVCw0RkFBNEYsRUFDNUYsNEZBQTRGLEVBQzFGLDhEQUE4RCxFQUM1RCx1RUFB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LFNBQVMsRUFBRTtBQUNiLFlBQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxtQkFBbUIsRUFBRSxDQUFDO0FBQ3hDLFlBQUksSUFBSSxFQUFFO0FBQ1IsY0FBTSxPQUFPLEdBQUc7QUFDZCxxQkFBUyxFQUFFLFNBQVM7QUFDcEIsaUJBQUssRUFBRSxLQUFLO1dBQ2IsQ0FBQztBQUNGLGNBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDO0FBQzVCLGNBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7U0FDcEI7T0FDRjtLQUNGO0FBQ0QsdUJBQW1CLEVBQUUsU0FBUyxtQkFBbUIsR0FBRztBQUNsRCxVQUFNLE1BQU0sR0FBRyxxQ0FBcUMsQ0FBQztBQUNyRCxVQUFJLElBQUksR0FBRyxHQUFHLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQy9CLFVBQUksSUFBSSxFQUFFO0FBQ1IsZUFBTyxJQUFJLENBQUM7T0FDYjs7QUFFRCxTQUFHLENBQUMsWUFBWSxDQUFDLDBDQUE4QixFQUFDLEVBQUUsRUFBRSxNQUFNLEVBQUMsQ0FBQyxDQUFDLENBQUM7QUFDOUQsVUFBSSxHQUFHLEdBQUcsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDM0IsYUFBTyxJQUFJLENBQUM7S0FDYjtHQUNGLENBQUMsQ0FBQzs7QUFFSCxtQkFBSyxTQUFTLENBQUMsNkJBQTZCLEVBQUUsT0FBTyxDQUFDLENBQUM7bUJBQ3hDLE9BQU8iLCJmaWxlIjoic3JjL0ludGVncmF0aW9ucy9CT0UvVmlld3MvUXVvdGVMaW5lcy9MaXN0LmpzIiwic291cmNlUm9vdCI6InNyYyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBkZWNsYXJlIGZyb20gJ2Rvam8vX2Jhc2UvZGVjbGFyZSc7XHJcbmltcG9ydCBsYW5nIGZyb20gJ2Rvam8vX2Jhc2UvbGFuZyc7XHJcbmltcG9ydCBzdHJpbmcgZnJvbSAnZG9qby9zdHJpbmcnO1xyXG5pbXBvcnQgTGlzdCBmcm9tICdhcmdvcy9MaXN0JztcclxuaW1wb3J0IGFjdGlvbiBmcm9tICdjcm0vQWN0aW9uJztcclxuaW1wb3J0IGZvcm1hdCBmcm9tICdjcm0vRm9ybWF0JztcclxuaW1wb3J0IF9DYXJkTGF5b3V0TGlzdE1peGluIGZyb20gJ2NybS9WaWV3cy9fQ2FyZExheW91dExpc3RNaXhpbic7XHJcbmltcG9ydCBfUmlnaHREcmF3ZXJMaXN0TWl4aW4gZnJvbSAnY3JtL1ZpZXdzL19SaWdodERyYXdlckxpc3RNaXhpbic7XHJcbmltcG9ydCBfTWV0cmljTGlzdE1peGluIGZyb20gJ2NybS9WaWV3cy9fTWV0cmljTGlzdE1peGluJztcclxuaW1wb3J0IE1PREVMX05BTUVTIGZyb20gJy4uLy4uL01vZGVscy9OYW1lcyc7XHJcbmltcG9ydCBnZXRSZXNvdXJjZSBmcm9tICdhcmdvcy9JMThuJztcclxuaW1wb3J0IHV0aWxpdHkgZnJvbSAnLi4vLi4vVXRpbGl0eSc7XHJcbmltcG9ydCBRdW90ZUl0ZW1BdmFpbGFiaWxpdHlMaXN0IGZyb20gJy4uL0xvY2F0aW9ucy9RdW90ZUl0ZW1BdmFpbGFiaWxpdHlMaXN0JztcclxuXHJcbmNvbnN0IHJlc291cmNlID0gZ2V0UmVzb3VyY2UoJ3F1b3RlSXRlbXNMaXN0Jyk7XHJcblxyXG5jb25zdCBfX2NsYXNzID0gZGVjbGFyZSgnY3JtLkludGVncmF0aW9ucy5CT0UuVmlld3MuUXVvdGVMaW5lcy5MaXN0JywgW0xpc3QsIF9SaWdodERyYXdlckxpc3RNaXhpbiwgX01ldHJpY0xpc3RNaXhpbiwgX0NhcmRMYXlvdXRMaXN0TWl4aW5dLCB7XHJcbiAgZm9ybWF0dGVyOiBmb3JtYXQsXHJcbiAgdXRpbDogdXRpbGl0eSxcclxuICAvLyBMb2NhbGl6YXRpb25cclxuICB0aXRsZVRleHQ6IHJlc291cmNlLnRpdGxlVGV4dCxcclxuICBsaW5lVGV4dDogcmVzb3VyY2UubGluZVRleHQsXHJcbiAgcXVhbnRpdHlUZXh0OiByZXNvdXJjZS5xdWFudGl0eVRleHQsXHJcbiAgcHJpY2VUZXh0OiByZXNvdXJjZS5wcmljZVRleHQsXHJcbiAgYWRqdXN0ZWRQcmljZVRleHQ6IHJlc291cmNlLmFkanVzdGVkUHJpY2VUZXh0LFxyXG4gIGJhc2VBZGp1c3RlZFByaWNlVGV4dDogcmVzb3VyY2UuYmFzZUFkanVzdGVkUHJpY2VUZXh0LFxyXG4gIGJhc2VBbW91bnRUZXh0OiByZXNvdXJjZS5iYXNlQW1vdW50VGV4dCxcclxuICBhbW91bnRUZXh0OiByZXNvdXJjZS5hbW91bnRUZXh0LFxyXG4gIHByb2R1Y3ROYW1lVGV4dDogcmVzb3VyY2UucHJvZHVjdE5hbWVUZXh0LFxyXG4gIGRlc2NyaXB0aW9uVGV4dDogcmVzb3VyY2UuZGVzY3JpcHRpb25UZXh0LFxyXG4gIGFjY291bnRpbmdFbnRpdHlSZXF1aXJlZFRleHQ6IHJlc291cmNlLmFjY291bnRpbmdFbnRpdHlSZXF1aXJlZFRleHQsXHJcbiAgYXNzaWduV2FyZWhvdXNlVGV4dDogcmVzb3VyY2UuYXNzaWduV2FyZWhvdXNlVGV4dCxcclxuICB3YXJlaG91c2VzVGl0bGVUZXh0OiByZXNvdXJjZS53YXJlaG91c2VUaXRsZVRleHQsXHJcbiAgd2FyZWhvdXNlVGV4dDogcmVzb3VyY2Uud2FyZWhvdXNlVGV4dCxcclxuICB0b3RhbEFtb3VudFRleHQ6IHJlc291cmNlLnRvdGFsQW1vdW50VGV4dCxcclxuXHJcbiAgLy8gVGVtcGxhdGVzXHJcbiAgaXRlbVRlbXBsYXRlOiBuZXcgU2ltcGxhdGUoW1xyXG4gICAgJ3slIGlmICgkLkVycExpbmVOdW1iZXIpIHsgJX0nLFxyXG4gICAgICAnPGgzPjxsYWJlbCBjbGFzcz1cImdyb3VwLWxhYmVsXCI+eyU6ICQkLmxpbmVUZXh0ICV9PC9sYWJlbD4geyU6ICQuRXJwTGluZU51bWJlciAlfTwvaDM+JyxcclxuICAgICd7JSB9ICV9JyxcclxuICAgICd7JSBpZiAoJC5TbHhMb2NhdGlvbikgeyAlfScsXHJcbiAgICAgICc8aDQ+PGxhYmVsIGNsYXNzPVwiZ3JvdXAtbGFiZWxcIj57JTogJCQud2FyZWhvdXNlVGV4dCAlfTwvbGFiZWw+IHslOiAkLlNseExvY2F0aW9uLkRlc2NyaXB0aW9uICV9PC9oND4nLFxyXG4gICAgJ3slIH0gJX0nLFxyXG4gICAgJzxoND48bGFiZWwgY2xhc3M9XCJncm91cC1sYWJlbFwiPnslOiAkJC5wcm9kdWN0TmFtZVRleHQgJX08L2xhYmVsPiB7JTogJC5Qcm9kdWN0TmFtZSAlfTwvaDQ+JyxcclxuICAgICc8aDQ+PGxhYmVsIGNsYXNzPVwiZ3JvdXAtbGFiZWxcIj57JTogJCQuZGVzY3JpcHRpb25UZXh0ICV9PC9sYWJlbD4geyU6ICQuRGVzY3JpcHRpb24gJX08L2g0PicsXHJcbiAgICAgICc8aDQ+IDxsYWJlbCBjbGFzcz1cImdyb3VwLWxhYmVsXCI+eyU6ICQkLnByaWNlVGV4dCAlfSA8L2xhYmVsPicsXHJcbiAgICAgICAgJ3slOiAkJC51dGlsLmZvcm1hdE11bHRpQ3VycmVuY3koJC5QcmljZSwgJC5RdW90ZS5CYXNlQ3VycmVuY3lDb2RlKSAlfScsXHJcbiAgICAgICc8L2g0PicsXHJcbiAgICAgICc8aDQ+IDxsYWJlbCBjbGFzcz1cImdyb3VwLWxhYmVsXCI+eyU6ICQkLmFkanVzdGVkUHJpY2VUZXh0ICV9PC9sYWJlbD4gJyxcclxuICAgICAgICAneyU6ICQkLnV0aWwuZm9ybWF0TXVsdGlDdXJyZW5jeSgkLkRvY0NhbGN1bGF0ZWRQcmljZSwgJC5RdW90ZS5DdXJyZW5jeUNvZGUpICV9JyxcclxuICAgICAgJzwvaDQ+JyxcclxuICAgICAgJzxoND4gPGxhYmVsIGNsYXNzPVwiZ3JvdXAtbGFiZWxcIj57JTogJCQuYmFzZUFkanVzdGVkUHJpY2VUZXh0ICV9PC9sYWJlbD4gJyxcclxuICAgICAgICAneyU6ICQkLnV0aWwuZm9ybWF0TXVsdGlDdXJyZW5jeSgkLkNhbGN1bGF0ZWRQcmljZSwgJC5RdW90ZS5CYXNlQ3VycmVuY3lDb2RlKSAlfScsXHJcbiAgICAgICc8L2g0PicsXHJcbiAgICAgICc8aDQ+PGxhYmVsIGNsYXNzPVwiZ3JvdXAtbGFiZWxcIj57JTogJCQucXVhbnRpdHlUZXh0ICV9PC9sYWJlbD4geyU6ICQuUXVhbnRpdHkgJX08L2g0PicsXHJcbiAgICAgICc8aDQ+IDxsYWJlbCBjbGFzcz1cImdyb3VwLWxhYmVsXCI+eyU6ICQkLmJhc2VBbW91bnRUZXh0ICV9PC9sYWJlbD4gJyxcclxuICAgICAgICAneyU6ICQkLnV0aWwuZm9ybWF0TXVsdGlDdXJyZW5jeSgkLkV4dGVuZGVkUHJpY2UsICQuUXVvdGUuQmFzZUN1cnJlbmN5Q29kZSkgJX0nLFxyXG4gICAgICAnPC9oND4nLFxyXG4gICAgICAnPGg0PiA8bGFiZWwgY2xhc3M9XCJncm91cC1sYWJlbFwiPnslOiAkJC5hbW91bnRUZXh0ICV9PC9sYWJlbD4gJyxcclxuICAgICAgICAneyU6ICQkLnV0aWwuZm9ybWF0TXVsdGlDdXJyZW5jeSgkLkRvY0V4dGVuZGVkUHJpY2UsICQuUXVvdGUuQ3VycmVuY3lDb2RlKSAlfScsXHJcbiAgICAgICc8L2g0PicsXHJcbiAgICAgICAnPGg0PiA8bGFiZWwgY2xhc3M9XCJncm91cC1sYWJlbFwiPnslOiAkJC50b3RhbEFtb3VudFRleHQgJX08L2xhYmVsPiAnLFxyXG4gICAgICAgICd7JTogJCQudXRpbC5mb3JtYXRNdWx0aUN1cnJlbmN5KCQuRG9jVG90YWxBbW91bnQsICQuUXVvdGUuQ3VycmVuY3lDb2RlKSAlfScsXHJcbiAgICAgICc8L2g0PicsXHJcblxyXG4gIF0pLFxyXG4gIC8vIFZpZXcgUHJvcGVydGllc1xyXG4gIGlkOiAncXVvdGVfbGluZXNfbGlzdCcsXHJcbiAgZGV0YWlsVmlldzogJ3F1b3RlX2xpbmVfZGV0YWlsJyxcclxuICBpbnNlcnRWaWV3OiAncXVvdGVfbGluZV9lZGl0JyxcclxuICBtb2RlbE5hbWU6IE1PREVMX05BTUVTLlFVT1RFSVRFTSxcclxuICByZXNvdXJjZUtpbmQ6ICdxdW90ZUl0ZW1zJyxcclxuICBhbGxvd1NlbGVjdGlvbjogdHJ1ZSxcclxuICBlbmFibGVBY3Rpb25zOiB0cnVlLFxyXG4gIHNlY3VyaXR5OiAnRW50aXRpZXMvUXVvdGUvVmlldycsXHJcbiAgaW5zZXJ0U2VjdXJpdHk6ICdFbnRpdGllcy9RdW90ZS9BZGQnLFxyXG5cclxuICAvLyBDYXJkIGxheW91dFxyXG4gIGl0ZW1JY29uQ2xhc3M6ICdmYSBmYS1saXN0LXVsIGZhLTJ4JyxcclxuXHJcbiAgLy8gTWV0cmljc1xyXG4gIGVudGl0eU5hbWU6ICdRdW90ZUl0ZW0nLFxyXG5cclxuICBjcmVhdGVBY3Rpb25MYXlvdXQ6IGZ1bmN0aW9uIGNyZWF0ZUFjdGlvbkxheW91dCgpIHtcclxuICAgIHJldHVybiB0aGlzLmFjdGlvbnMgfHwgKHRoaXMuYWN0aW9ucyA9IFt7XHJcbiAgICAgIGlkOiAnYXNzaWduV2FyZWhvdXNlJyxcclxuICAgICAgY2xzOiAnZmEgZmEtdHJ1Y2sgZmEtMngnLFxyXG4gICAgICBsYWJlbDogdGhpcy5hc3NpZ25XYXJlaG91c2VUZXh0LFxyXG4gICAgICBlbmFibGVkOiBhY3Rpb24uaGFzUHJvcGVydHkuYmluZERlbGVnYXRlKHRoaXMsICdRdW90ZS5FcnBMb2dpY2FsSWQnKSxcclxuICAgICAgYWN0aW9uOiAnYXNzaWduV2FyZWhvdXNlQWN0aW9uJyxcclxuICAgIH1dKTtcclxuICB9LFxyXG4gIGNyZWF0ZVRvb2xMYXlvdXQ6IGZ1bmN0aW9uIGNyZWF0ZVRvb2xMYXlvdXQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy50b29scyB8fCAodGhpcy50b29scyA9IHtcclxuICAgICAgJ3RiYXInOiBbe1xyXG4gICAgICAgIGlkOiAnbmV3JyxcclxuICAgICAgICBjbHM6ICdmYSBmYS1wbHVzIGZhLWZ3IGZhLWxnJyxcclxuICAgICAgICBhY3Rpb246ICdwcmVOYXZpZ2F0ZVRvSW5zZXJ0JyxcclxuICAgICAgICBzZWN1cml0eTogdGhpcy5hcHAuZ2V0Vmlld1NlY3VyaXR5KHRoaXMuaW5zZXJ0VmlldywgJ2luc2VydCcpLFxyXG4gICAgICB9XSxcclxuICAgIH0pO1xyXG4gIH0sXHJcbiAgcHJlTmF2aWdhdGVUb0luc2VydDogZnVuY3Rpb24gcHJlTmF2aWdhdGVUb0luc2VydChlbCkge1xyXG4gICAgbGV0IG9wdGlvbnMgPSB7fTtcclxuICAgIGlmICh0aGlzLm9wdGlvbnMgJiYgdGhpcy5vcHRpb25zLmZyb21Db250ZXh0ICYmIHRoaXMub3B0aW9ucy5mcm9tQ29udGV4dC5lbnRyeSkge1xyXG4gICAgICBvcHRpb25zID0ge1xyXG4gICAgICAgIGNvbnRleHQ6IHtcclxuICAgICAgICAgIFF1b3RlOiB0aGlzLm9wdGlvbnMuZnJvbUNvbnRleHQuZW50cnksXHJcbiAgICAgICAgfSxcclxuICAgICAgfTtcclxuICAgIH1cclxuICAgIHRoaXMubmF2aWdhdGVUb0luc2VydFZpZXcoZWwsIG9wdGlvbnMpO1xyXG4gIH0sXHJcbiAgZm9ybWF0U2VhcmNoUXVlcnk6IGZ1bmN0aW9uIGZvcm1hdFNlYXJjaFF1ZXJ5KHNlYXJjaFF1ZXJ5KSB7XHJcbiAgICByZXR1cm4gc3RyaW5nLnN1YnN0aXR1dGUoJyh1cHBlcihEZXNjcmlwdGlvbikgbGlrZSBcIiR7MH0lXCIpIG9yICh1cHBlcihQcm9kdWN0TmFtZSkgbGlrZSBcIiR7MH0lXCIpIG9yICh1cHBlcihRdW90ZS5RdW90ZU51bWJlcikgbGlrZSBcIiR7MH0lXCIpIG9yICh1cHBlcihFcnBMaW5lTnVtYmVyKSBsaWtlIFwiJHswfSVcIiknLCBbdGhpcy5lc2NhcGVTZWFyY2hRdWVyeShzZWFyY2hRdWVyeS50b1VwcGVyQ2FzZSgpKV0pO1xyXG4gIH0sXHJcbiAgYXNzaWduV2FyZWhvdXNlQWN0aW9uOiBmdW5jdGlvbiBhc3NpZ25XYXJlaG91c2VBY3Rpb24odGhlQWN0aW9uLCBzZWxlY3Rpb24pIHtcclxuICAgIGNvbnN0IHF1b3RlID0gdGhpcy5vcHRpb25zLmZyb21Db250ZXh0LmVudHJ5O1xyXG4gICAgY29uc3QgcXVvdGVJdGVtS2V5ID0gc2VsZWN0aW9uLnRhZy5hdHRyaWJ1dGVzWydkYXRhLWtleSddLnZhbHVlO1xyXG4gICAgY29uc3QgcXVvdGVJdGVtID0gdGhpcy5lbnRyaWVzW3F1b3RlSXRlbUtleV07XHJcbiAgICBpZiAocXVvdGVJdGVtKSB7XHJcbiAgICAgIGNvbnN0IHZpZXcgPSB0aGlzLmdldEF2YWlsYWJpbGl0eVZpZXcoKTtcclxuICAgICAgaWYgKHZpZXcpIHtcclxuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICAgICAgcXVvdGVJdGVtOiBxdW90ZUl0ZW0sXHJcbiAgICAgICAgICBxdW90ZTogcXVvdGUsXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLnJlZnJlc2hSZXF1aXJlZCA9IHRydWU7XHJcbiAgICAgICAgdmlldy5zaG93KG9wdGlvbnMpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSxcclxuICBnZXRBdmFpbGFiaWxpdHlWaWV3OiBmdW5jdGlvbiBnZXRBdmFpbGFiaWxpdHlWaWV3KCkge1xyXG4gICAgY29uc3Qgdmlld0lkID0gJ2xvY2F0aW9uc19xdW90ZUl0ZW1BdmFpbGFiaWxpdHlMaXN0JztcclxuICAgIGxldCB2aWV3ID0gQXBwLmdldFZpZXcodmlld0lkKTtcclxuICAgIGlmICh2aWV3KSB7XHJcbiAgICAgIHJldHVybiB2aWV3O1xyXG4gICAgfVxyXG5cclxuICAgIEFwcC5yZWdpc3RlclZpZXcobmV3IFF1b3RlSXRlbUF2YWlsYWJpbGl0eUxpc3Qoe2lkOiB2aWV3SWR9KSk7XHJcbiAgICB2aWV3ID0gQXBwLmdldFZpZXcodmlld0lkKTtcclxuICAgIHJldHVybiB2aWV3O1xyXG4gIH0sXHJcbn0pO1xyXG5cclxubGFuZy5zZXRPYmplY3QoJ2ljYm9lLlZpZXdzLlF1b3RlTGluZXMuTGlzdCcsIF9fY2xhc3MpO1xyXG5leHBvcnQgZGVmYXVsdCBfX2NsYXNzO1xyXG4iXX0=
</pre>
</body>
</html>
