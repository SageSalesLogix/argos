<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">define('argos/Fields/PhoneField', ['exports', 'module', 'dojo/_base/declare', 'dojo/_base/lang', 'dojo/has', '../FieldManager', './TextField', '../Format', 'dojo/_base/sniff'], function (exports, module, _dojo_baseDeclare, _dojo_baseLang, _dojoHas, _FieldManager, _TextField, _Format, _dojo_baseSniff) {
  function _interopRequireDefault(obj) { return obj &amp;&amp; obj.__esModule ? obj : { 'default': obj }; }

  /* Copyright (c) 2010, Sage Software, Inc. All rights reserved.
   *
   * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *     http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */

  var _declare = _interopRequireDefault(_dojo_baseDeclare);

  var _lang = _interopRequireDefault(_dojo_baseLang);

  var _has = _interopRequireDefault(_dojoHas);

  var _FieldManager2 = _interopRequireDefault(_FieldManager);

  var _TextField2 = _interopRequireDefault(_TextField);

  var _format = _interopRequireDefault(_Format);

<span id='argos-Fields-PhoneField'>  /**
</span>   * @class argos.Fields.PhoneField
   * The Phone field is a specialized {@link TextField TextField} that takes a string of numbers
   * and groups them into a phone number on blur or when setting a value directly the value
   * shown to the user gets passed through the
   * {@link #formatNumberForDisplay formatNumberForDisplay} function, while
   * {@link #getValue getValue} will still return an unformatted version.
   *
   * ###Example:
   *     {
   *         name: 'SalesPotential',
   *         property: 'SalesPotential',
   *         label: this.salesPotentialText,
   *         type: 'decimal'
   *     }
   *
   * @alternateClassName PhoneField
   * @extends argos.Fields.TextField
   * @requires argos.FieldManager
   */
  var control = (0, _declare['default'])('argos.Fields.PhoneField', [_TextField2['default']], {
<span id='argos-Fields-PhoneField-property-inputType'>    /**
</span>     * @property {String}
     * Sets the `&lt;input type=` of the field.
     *
     * Currently only iOS supports non-numbers when a tel field has a default value: [Bug Report](http://code.google.com/p/android/issues/detail?id=19724).
     */
    inputType: (0, _has['default'])('safari') ? 'tel' : 'text',

<span id='argos-Fields-PhoneField-method-_onBlur'>    /**
</span>     * Formats the displayed value (inputNode value) using {@link format.phone format.phone}.
     */
    _onBlur: function _onBlur() {
      this.inherited(arguments);

      // temporarily added: http://code.google.com/p/android/issues/detail?id=14519
      this.set('inputValue', _format['default'].phone(this.inputNode.value));
    },
<span id='argos-Fields-PhoneField-method-getValue'>    /**
</span>     * Gets the value and strips out non-numbers and non-letter `x` before returning unless
     * the value starts with `+` in which it is returned unmodified.
     * @return {String}
     */
    getValue: function getValue() {
      var value = this.inherited(arguments);

      if (/^\+/.test(value)) {
        return value;
      }

      value = _format['default'].alphaToPhoneNumeric(value);

      return value.replace(/[^0-9x]/ig, '');
    },
<span id='argos-Fields-PhoneField-method-setValue'>    /**
</span>     * Sets the original value if initial is true and sets the input value to the formatted
     * value using {@link format.phone format.phone}.
     * @param {String/Number} val String to set
     * @param {Boolean} initial True if the value is the original/clean value.
     */
    setValue: function setValue(val, initial) {
      if (initial) {
        this.originalValue = val;
      }

      this.previousValue = false;
      this.set('inputValue', _format['default'].phone(val) || '');
    },
<span id='argos-Fields-PhoneField-method-_onKeyUp'>    /**
</span>     * Currently only calls parent implementation due to an [Android Bug](http://code.google.com/p/android/issues/detail?id=14519).
     * @param {Event} evt Keyup event
     */
    _onKeyUp: function _onKeyUp() /*evt*/{
      /*
      // temporarily removed: http://code.google.com/p/android/issues/detail?id=14519
      this.set('inputValue', format.phone(this.inputNode.value, this.getValue()));
      */
      this.inherited(arguments);
    }
  });

  _lang['default'].setObject('Sage.Platform.Mobile.Fields.PhoneField', control);
  module.exports = _FieldManager2['default'].register('phone', control);
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9GaWVsZHMvUGhvbmVGaWVsZC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQTJDQSxNQUFNLE9BQU8sR0FBRyx5QkFBUSx5QkFBeUIsRUFBRSx3QkFBVyxFQUFFOzs7Ozs7O0FBTzlELGFBQVMsRUFBRSxxQkFBSSxRQUFRLENBQUMsR0FBRyxLQUFLLEdBQUcsTUFBTTs7Ozs7QUFLekMsV0FBTyxFQUFFLFNBQVMsT0FBTyxHQUFHO0FBQzFCLFVBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLENBQUM7OztBQUcxQixVQUFJLENBQUMsR0FBRyxDQUFDLFlBQVksRUFBRSxtQkFBTyxLQUFLLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO0tBQzVEOzs7Ozs7QUFNRCxZQUFRLEVBQUUsU0FBUyxRQUFRLEdBQUc7QUFDNUIsVUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsQ0FBQzs7QUFFdEMsVUFBSSxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFO0FBQ3JCLGVBQU8sS0FBSyxDQUFDO09BQ2Q7O0FBRUQsV0FBSyxHQUFHLG1CQUFPLG1CQUFtQixDQUFDLEtBQUssQ0FBQyxDQUFDOztBQUUxQyxhQUFPLEtBQUssQ0FBQyxPQUFPLENBQUMsV0FBVyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0tBQ3ZDOzs7Ozs7O0FBT0QsWUFBUSxFQUFFLFNBQVMsUUFBUSxDQUFDLEdBQUcsRUFBRSxPQUFPLEVBQUU7QUFDeEMsVUFBSSxPQUFPLEVBQUU7QUFDWCxZQUFJLENBQUMsYUFBYSxHQUFHLEdBQUcsQ0FBQztPQUMxQjs7QUFFRCxVQUFJLENBQUMsYUFBYSxHQUFHLEtBQUssQ0FBQztBQUMzQixVQUFJLENBQUMsR0FBRyxDQUFDLFlBQVksRUFBRSxtQkFBTyxLQUFLLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7S0FDakQ7Ozs7O0FBS0QsWUFBUSxFQUFFLFNBQVMsUUFBUSxVQUFVOzs7OztBQUtuQyxVQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxDQUFDO0tBQzNCO0dBQ0YsQ0FBQyxDQUFDOztBQUVILG1CQUFLLFNBQVMsQ0FBQyx3Q0FBd0MsRUFBRSxPQUFPLENBQUMsQ0FBQzttQkFDbkQsMEJBQWEsUUFBUSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMiLCJmaWxlIjoic3JjL0ZpZWxkcy9QaG9uZUZpZWxkLmpzIiwic291cmNlUm9vdCI6InNyYyIsInNvdXJjZXNDb250ZW50IjpbIi8qIENvcHlyaWdodCAoYykgMjAxMCwgU2FnZSBTb2Z0d2FyZSwgSW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcblxyXG5pbXBvcnQgZGVjbGFyZSBmcm9tICdkb2pvL19iYXNlL2RlY2xhcmUnO1xyXG5pbXBvcnQgbGFuZyBmcm9tICdkb2pvL19iYXNlL2xhbmcnO1xyXG5pbXBvcnQgaGFzIGZyb20gJ2Rvam8vaGFzJztcclxuaW1wb3J0IEZpZWxkTWFuYWdlciBmcm9tICcuLi9GaWVsZE1hbmFnZXInO1xyXG5pbXBvcnQgVGV4dEZpZWxkIGZyb20gJy4vVGV4dEZpZWxkJztcclxuaW1wb3J0IGZvcm1hdCBmcm9tICcuLi9Gb3JtYXQnO1xyXG5pbXBvcnQgJ2Rvam8vX2Jhc2Uvc25pZmYnO1xyXG5cclxuLyoqXHJcbiAqIEBjbGFzcyBhcmdvcy5GaWVsZHMuUGhvbmVGaWVsZFxyXG4gKiBUaGUgUGhvbmUgZmllbGQgaXMgYSBzcGVjaWFsaXplZCB7QGxpbmsgVGV4dEZpZWxkIFRleHRGaWVsZH0gdGhhdCB0YWtlcyBhIHN0cmluZyBvZiBudW1iZXJzXHJcbiAqIGFuZCBncm91cHMgdGhlbSBpbnRvIGEgcGhvbmUgbnVtYmVyIG9uIGJsdXIgb3Igd2hlbiBzZXR0aW5nIGEgdmFsdWUgZGlyZWN0bHkgdGhlIHZhbHVlXHJcbiAqIHNob3duIHRvIHRoZSB1c2VyIGdldHMgcGFzc2VkIHRocm91Z2ggdGhlXHJcbiAqIHtAbGluayAjZm9ybWF0TnVtYmVyRm9yRGlzcGxheSBmb3JtYXROdW1iZXJGb3JEaXNwbGF5fSBmdW5jdGlvbiwgd2hpbGVcclxuICoge0BsaW5rICNnZXRWYWx1ZSBnZXRWYWx1ZX0gd2lsbCBzdGlsbCByZXR1cm4gYW4gdW5mb3JtYXR0ZWQgdmVyc2lvbi5cclxuICpcclxuICogIyMjRXhhbXBsZTpcclxuICogICAgIHtcclxuICogICAgICAgICBuYW1lOiAnU2FsZXNQb3RlbnRpYWwnLFxyXG4gKiAgICAgICAgIHByb3BlcnR5OiAnU2FsZXNQb3RlbnRpYWwnLFxyXG4gKiAgICAgICAgIGxhYmVsOiB0aGlzLnNhbGVzUG90ZW50aWFsVGV4dCxcclxuICogICAgICAgICB0eXBlOiAnZGVjaW1hbCdcclxuICogICAgIH1cclxuICpcclxuICogQGFsdGVybmF0ZUNsYXNzTmFtZSBQaG9uZUZpZWxkXHJcbiAqIEBleHRlbmRzIGFyZ29zLkZpZWxkcy5UZXh0RmllbGRcclxuICogQHJlcXVpcmVzIGFyZ29zLkZpZWxkTWFuYWdlclxyXG4gKi9cclxuY29uc3QgY29udHJvbCA9IGRlY2xhcmUoJ2FyZ29zLkZpZWxkcy5QaG9uZUZpZWxkJywgW1RleHRGaWVsZF0sIHtcclxuICAvKipcclxuICAgKiBAcHJvcGVydHkge1N0cmluZ31cclxuICAgKiBTZXRzIHRoZSBgPGlucHV0IHR5cGU9YCBvZiB0aGUgZmllbGQuXHJcbiAgICpcclxuICAgKiBDdXJyZW50bHkgb25seSBpT1Mgc3VwcG9ydHMgbm9uLW51bWJlcnMgd2hlbiBhIHRlbCBmaWVsZCBoYXMgYSBkZWZhdWx0IHZhbHVlOiBbQnVnIFJlcG9ydF0oaHR0cDovL2NvZGUuZ29vZ2xlLmNvbS9wL2FuZHJvaWQvaXNzdWVzL2RldGFpbD9pZD0xOTcyNCkuXHJcbiAgICovXHJcbiAgaW5wdXRUeXBlOiBoYXMoJ3NhZmFyaScpID8gJ3RlbCcgOiAndGV4dCcsXHJcblxyXG4gIC8qKlxyXG4gICAqIEZvcm1hdHMgdGhlIGRpc3BsYXllZCB2YWx1ZSAoaW5wdXROb2RlIHZhbHVlKSB1c2luZyB7QGxpbmsgZm9ybWF0LnBob25lIGZvcm1hdC5waG9uZX0uXHJcbiAgICovXHJcbiAgX29uQmx1cjogZnVuY3Rpb24gX29uQmx1cigpIHtcclxuICAgIHRoaXMuaW5oZXJpdGVkKGFyZ3VtZW50cyk7XHJcblxyXG4gICAgLy8gdGVtcG9yYXJpbHkgYWRkZWQ6IGh0dHA6Ly9jb2RlLmdvb2dsZS5jb20vcC9hbmRyb2lkL2lzc3Vlcy9kZXRhaWw/aWQ9MTQ1MTlcclxuICAgIHRoaXMuc2V0KCdpbnB1dFZhbHVlJywgZm9ybWF0LnBob25lKHRoaXMuaW5wdXROb2RlLnZhbHVlKSk7XHJcbiAgfSxcclxuICAvKipcclxuICAgKiBHZXRzIHRoZSB2YWx1ZSBhbmQgc3RyaXBzIG91dCBub24tbnVtYmVycyBhbmQgbm9uLWxldHRlciBgeGAgYmVmb3JlIHJldHVybmluZyB1bmxlc3NcclxuICAgKiB0aGUgdmFsdWUgc3RhcnRzIHdpdGggYCtgIGluIHdoaWNoIGl0IGlzIHJldHVybmVkIHVubW9kaWZpZWQuXHJcbiAgICogQHJldHVybiB7U3RyaW5nfVxyXG4gICAqL1xyXG4gIGdldFZhbHVlOiBmdW5jdGlvbiBnZXRWYWx1ZSgpIHtcclxuICAgIGxldCB2YWx1ZSA9IHRoaXMuaW5oZXJpdGVkKGFyZ3VtZW50cyk7XHJcblxyXG4gICAgaWYgKC9eXFwrLy50ZXN0KHZhbHVlKSkge1xyXG4gICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgdmFsdWUgPSBmb3JtYXQuYWxwaGFUb1Bob25lTnVtZXJpYyh2YWx1ZSk7XHJcblxyXG4gICAgcmV0dXJuIHZhbHVlLnJlcGxhY2UoL1teMC05eF0vaWcsICcnKTtcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIFNldHMgdGhlIG9yaWdpbmFsIHZhbHVlIGlmIGluaXRpYWwgaXMgdHJ1ZSBhbmQgc2V0cyB0aGUgaW5wdXQgdmFsdWUgdG8gdGhlIGZvcm1hdHRlZFxyXG4gICAqIHZhbHVlIHVzaW5nIHtAbGluayBmb3JtYXQucGhvbmUgZm9ybWF0LnBob25lfS5cclxuICAgKiBAcGFyYW0ge1N0cmluZy9OdW1iZXJ9IHZhbCBTdHJpbmcgdG8gc2V0XHJcbiAgICogQHBhcmFtIHtCb29sZWFufSBpbml0aWFsIFRydWUgaWYgdGhlIHZhbHVlIGlzIHRoZSBvcmlnaW5hbC9jbGVhbiB2YWx1ZS5cclxuICAgKi9cclxuICBzZXRWYWx1ZTogZnVuY3Rpb24gc2V0VmFsdWUodmFsLCBpbml0aWFsKSB7XHJcbiAgICBpZiAoaW5pdGlhbCkge1xyXG4gICAgICB0aGlzLm9yaWdpbmFsVmFsdWUgPSB2YWw7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5wcmV2aW91c1ZhbHVlID0gZmFsc2U7XHJcbiAgICB0aGlzLnNldCgnaW5wdXRWYWx1ZScsIGZvcm1hdC5waG9uZSh2YWwpIHx8ICcnKTtcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIEN1cnJlbnRseSBvbmx5IGNhbGxzIHBhcmVudCBpbXBsZW1lbnRhdGlvbiBkdWUgdG8gYW4gW0FuZHJvaWQgQnVnXShodHRwOi8vY29kZS5nb29nbGUuY29tL3AvYW5kcm9pZC9pc3N1ZXMvZGV0YWlsP2lkPTE0NTE5KS5cclxuICAgKiBAcGFyYW0ge0V2ZW50fSBldnQgS2V5dXAgZXZlbnRcclxuICAgKi9cclxuICBfb25LZXlVcDogZnVuY3Rpb24gX29uS2V5VXAoLypldnQqLykge1xyXG4gICAgLypcclxuICAgIC8vIHRlbXBvcmFyaWx5IHJlbW92ZWQ6IGh0dHA6Ly9jb2RlLmdvb2dsZS5jb20vcC9hbmRyb2lkL2lzc3Vlcy9kZXRhaWw/aWQ9MTQ1MTlcclxuICAgIHRoaXMuc2V0KCdpbnB1dFZhbHVlJywgZm9ybWF0LnBob25lKHRoaXMuaW5wdXROb2RlLnZhbHVlLCB0aGlzLmdldFZhbHVlKCkpKTtcclxuICAgICovXHJcbiAgICB0aGlzLmluaGVyaXRlZChhcmd1bWVudHMpO1xyXG4gIH0sXHJcbn0pO1xyXG5cclxubGFuZy5zZXRPYmplY3QoJ1NhZ2UuUGxhdGZvcm0uTW9iaWxlLkZpZWxkcy5QaG9uZUZpZWxkJywgY29udHJvbCk7XHJcbmV4cG9ydCBkZWZhdWx0IEZpZWxkTWFuYWdlci5yZWdpc3RlcigncGhvbmUnLCBjb250cm9sKTtcclxuIl19
</pre>
</body>
</html>
