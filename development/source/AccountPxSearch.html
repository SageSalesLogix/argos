<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">define('crm/Integrations/Contour/Views/PxSearch/AccountPxSearch', ['exports', 'module', 'dojo/_base/declare', 'dojo/_base/array', 'dojo/_base/lang', 'dojo/string', 'dojo/dom-class', 'dojo/dom-construct', 'Mobile/SalesLogix/Action', 'Sage/Platform/Mobile/SearchWidget', 'argos/Utility', 'argos/_ListBase', 'argos/_LegacySDataListMixin', 'crm/Views/_CardLayoutListMixin', 'crm/Views/_RightDrawerListMixin', 'argos/I18n', 'argos/CultureInfo', 'crm/Application'], function (exports, module, _dojo_baseDeclare, _dojo_baseArray, _dojo_baseLang, _dojoString, _dojoDomClass, _dojoDomConstruct, _MobileSalesLogixAction, _SagePlatformMobileSearchWidget, _argosUtility, _argos_ListBase, _argos_LegacySDataListMixin, _crmViews_CardLayoutListMixin, _crmViews_RightDrawerListMixin, _argosI18n, _argosCultureInfo, _crmApplication) {
	function _interopRequireDefault(obj) { return obj &amp;&amp; obj.__esModule ? obj : { 'default': obj }; }

	/*
  * Copyright (c) 2016, Infor (US), Inc. All rights reserved.
  */

	var _declare = _interopRequireDefault(_dojo_baseDeclare);

	var _array = _interopRequireDefault(_dojo_baseArray);

	var _lang = _interopRequireDefault(_dojo_baseLang);

	var _string = _interopRequireDefault(_dojoString);

	var _domClass = _interopRequireDefault(_dojoDomClass);

	var _domConstruct = _interopRequireDefault(_dojoDomConstruct);

	var _action = _interopRequireDefault(_MobileSalesLogixAction);

	var _SearchWidget = _interopRequireDefault(_SagePlatformMobileSearchWidget);

	var _utility = _interopRequireDefault(_argosUtility);

	var _ListBase2 = _interopRequireDefault(_argos_ListBase);

	var _LegacyListBase2 = _interopRequireDefault(_argos_LegacySDataListMixin);

	var _CardLayoutListMixin2 = _interopRequireDefault(_crmViews_CardLayoutListMixin);

	var _RightDrawerListMixin2 = _interopRequireDefault(_crmViews_RightDrawerListMixin);

	var _getResource = _interopRequireDefault(_argosI18n);

	var _CultureInfo = _interopRequireDefault(_argosCultureInfo);

	var _application = _interopRequireDefault(_crmApplication);

	var resource = (0, _getResource['default'])('acctPxSearch');

	var __class = (0, _declare['default'])('crm.Integrations.Contour.Views.PxSearch.AccountPxSearch', [_ListBase2['default'], _LegacyListBase2['default'], _CardLayoutListMixin2['default']], {
		// Localization strings
		accountsNearMeText: resource.accountsNearMeText,
		addActivityActionText: resource.addActivityActionText,
		addAttachmentActionText: resource.addAttachmentActionText,
		addNoteActionText: resource.addNoteActionText,
		callMainActionText: resource.callMainActionText,
		currentLocationErrorText: resource.currentLocationErrorText,
		editActionText: resource.editActionText,
		faxAbbreviationText: resource.faxAbbreviationText,
		kilometerAbbrevText: resource.kilometerAbbrevText,
		mileAbbrevText: resource.mileAbbrevText,
		phoneAbbreviationText: resource.phoneAbbreviationText,
		titleText: resource.titleText,
		viewContactsActionText: resource.viewContactsActionText,

		// Templates
		itemTemplate: new Simplate(['&lt;h3&gt;{%: $.AccountName %}&lt;/h3&gt;', '&lt;h4&gt;{%: this.formatDecimal($.Distance) %} {%: this.distanceText() %}&lt;/h4&gt;', '&lt;h4&gt;', '{%: $$.joinFields(&quot; | &quot;, [$.Type, $.SubType]) %}', '&lt;/h4&gt;', '&lt;h4&gt;{%: $.AccountManager &amp;&amp; $.AccountManager.UserInfo ? $.AccountManager.UserInfo.UserName : &quot;&quot; %} | {%: $.Owner.OwnerDescription %}&lt;/h4&gt;', '{% if ($.MainPhone) { %}', '&lt;h4&gt;', '{%: $$.phoneAbbreviationText %} &lt;span class=&quot;href&quot; data-action=&quot;callMain&quot; data-key=&quot;{%: $.$key %}&quot;&gt;{%: argos.Format.phone($.MainPhone) %}&lt;/span&gt;', '&lt;/h4&gt;', '{% } %}']),
		itemRowContainerTemplate: new Simplate(['&lt;li data-action=&quot;activateEntry&quot; data-key=&quot;{%= $$.getItemActionKey($) %}&quot; data-descriptor=&quot;{%: $$.getItemDescriptor($) %}&quot;&gt;', '{%! $$.itemRowContentTemplate %}', '&lt;/li&gt;']),
		itemRowContentTemplate: new Simplate(['&lt;div id=&quot;top_item_indicators&quot; class=&quot;list-item-indicator-content&quot;&gt;&lt;/div&gt;', '{%! $$.itemIconTemplate %}', '&lt;div class=&quot;list-item-content&quot; data-snap-ignore=&quot;true&quot;&gt;{%! $$.itemTemplate %}&lt;/div&gt;', '&lt;div id=&quot;list-item-content-related&quot;&gt;&lt;/div&gt;', '{%! $$.itemFooterTemplate %}']),

		// Functions
		formatDecimal: function formatDecimal(n) {
			return Math.round(n * 100) / 100;
		},
		distanceText: function distanceText() {
			return App.isRegionMetric ? this.kilometerAbbrevText : this.mileAbbrevText;
		},
		distanceCalc: function distanceCalc(gLat, gLon) {
			var conv = App.isRegionMetric ? 1.609344 : 1;
			return conv * Math.sqrt(Math.pow(69.1 * (gLat - this.lat), 2) + Math.pow(53.0 * (gLon - this.lon), 2));
		},
		joinFields: function joinFields(sep, fields) {
			return _utility['default'].joinFields(sep, fields);
		},

		// Add a search template for account type dropdown
		searchWidget: new _SearchWidget['default']({
			'class': 'list-search',
			'owner': this,
			'onSearchExpression': _lang['default'].hitch(this, this._onSearchExpression),
			widgetTemplate: new Simplate(['&lt;div class=&quot;search-widget&quot; style=&quot;display: none;&quot;&gt;', // hide the stock search stuff
			'&lt;div class=&quot;table-layout&quot;&gt;', '&lt;div&gt;&lt;input type=&quot;text&quot; name=&quot;query&quot; class=&quot;query&quot; autocorrect=&quot;off&quot; autocapitalize=&quot;off&quot; data-dojo-attach-point=&quot;queryNode&quot; data-dojo-attach-event=&quot;onfocus:_onFocus,onblur:_onBlur,onkeypress:_onKeyPress&quot; /&gt;&lt;/div&gt;', '&lt;div class=&quot;hasButton&quot;&gt;&lt;button class=&quot;clear-button&quot; data-dojo-attach-event=&quot;onclick: _onClearClick&quot;&gt;&lt;/button&gt;&lt;/div&gt;', '&lt;div class=&quot;hasButton&quot;&gt;&lt;button class=&quot;subHeaderButton searchButton&quot; data-dojo-attach-event=&quot;click: search&quot;&gt;{%= $.searchText %}&lt;/button&gt;&lt;/div&gt;', '&lt;/div&gt;', '&lt;label data-dojo-attach-point=&quot;labelNode&quot;&gt;{%= $.searchText %}&lt;/label&gt;', '&lt;/div&gt;', '&lt;div&gt;Account Type:&lt;select id=&quot;queryType&quot; style=&quot;font-size: 16px&quot;&gt;&lt;/select&gt;&lt;/div&gt;' // add our own search stuff
			])
		}),

		// View Properties
		detailView: 'account_detail',
		itemIconClass: 'fa fa-building-o fa-2x',
		id: 'pxSearch_Accounts',
		security: 'Contour/Map/Account',
		entityName: 'Account',
		allowSelection: true,
		enableActions: true,
		pageSize: 100,
		offlineIds: null,
		resourceKind: 'accounts',
		enableSearch: true,
		editView: 'account_edit',
		editSecurity: 'Entities/Account/Edit',
		relatedViews: {},
		maxDistance: 500,

		lat: null, // latitude
		lon: null, // longitude

		createRequest: function createRequest() {
			var request = new Sage.SData.Client.SDataBaseRequest(this.getService());
			request.uri.setPathSegment(0, 'slx');
			request.uri.setPathSegment(1, 'dynamic');
			request.uri.setPathSegment(2, '-');
			request.uri.setPathSegment(3, &quot;accounts&quot;);
			request.uri.setQueryArg('format', 'JSON');
			request.uri.setQueryArg('select', 'AccountName,Industry,Type,SubType,AccountManager/UserInfo/UserName,Address/GeocodeLatitude,Address/GeocodeLongitude,Owner/OwnerDescription,WebAddress,MainPhone,Fax');
			request.uri.setQueryArg('where', 'Type eq &quot;' + (this.acctType ? this.acctType : 'Customer') + '&quot; and ' + this._requestDistanceCalc());
			return request;
		},
		_requestDistanceCalc: function _requestDistanceCalc() {
			var conv = App.isRegionMetric ? 1.609344 : 1;
			return '((' + conv + ' mul sqrt((((69.1 mul (Address.GeocodeLatitude-(' + this.lat + ')))) mul (69.1 mul (Address.GeocodeLatitude-(' + this.lat + '))))+((53 mul (Address.GeocodeLongitude-(' + this.lon + '))) mul (53 mul (Address.GeocodeLongitude-(' + this.lon + ')))))) lt ' + this.maxDistance + ')';
		},
		requestData: function requestData() {
			this.loadAccountTypes();
			_domClass['default'].add(this.domNode, 'list-loading');

			if (this.lat &amp;&amp; this.lon) {
				var request = this.createRequest();
				request.service.readFeed(request, {
					success: this.onRequestDataSuccess,
					failure: this.onRequestDataFailure,
					aborted: this.onRequestDataAborted,
					scope: this
				});
			} else {
				navigator.geolocation.getCurrentPosition(dojo.hitch(this, &quot;geoLocationReceived&quot;), dojo.hitch(this, &quot;geoLocationError&quot;), { enableHighAccuracy: true });
			}
		},
		// custom request data success method to insert our &quot;me&quot; at the front
		onRequestDataSuccess: function onRequestDataSuccess(feed) {
			var feedResources = feed.$resources;
			if (feedResources) {
				for (var i = 0; i &lt; feed.$resources.length; i++) {
					var entry = feed.$resources[i];
					entry.Distance = this.distanceCalc(entry.Address.GeocodeLatitude, entry.Address.GeocodeLongitude);
				}

				// Sort by distance ASC
				feed.$resources.sort(function (a, b) {
					return a.Distance &gt; b.Distance ? 1 : -1;
				});
			}
			this.processFeed(feed);
			_domClass['default'].remove(this.domNode, 'list-loading');
		},
		processFeed: function processFeed(_feed) {
			var feed = _feed;
			if (!this.feed) {
				this.set('listContent', '');
			}

			this.feed = feed;

			if (this.feed.$totalResults === 0) {
				this.set('listContent', this.noDataTemplate.apply(this));
			} else if (feed.$resources) {
				var docfrag = document.createDocumentFragment();
				for (var i = 0; i &lt; feed.$resources.length; i++) {
					var entry = feed.$resources[i];
					entry.$descriptor = entry.$descriptor || feed.$descriptor;
					this.entries[entry.$key] = entry;
					var rowNode = _domConstruct['default'].toDom(this.rowTemplate.apply(entry, this));
					docfrag.appendChild(rowNode);
					this.onApplyRowTemplate(entry, rowNode);
					if (this.relatedViews.length &gt; 0) {
						this.onProcessRelatedViews(entry, rowNode, feed);
					}
				}

				if (docfrag.childNodes.length &gt; 0) {
					_domConstruct['default'].place(docfrag, this.contentNode, 'last');
				}
			}
		},
		geoLocationError: function geoLocationError(error) {
			alert(this.currentLocationErrorText);
			_domClass['default'].remove(this.domNode, 'list-loading');
		},
		geoLocationReceived: function geoLocationReceived(position) {
			this.lat = position.coords.latitude;
			this.lon = position.coords.longitude;
			this.requestData();
		},
		// only want the top 100 records
		hasMoreData: function hasMoreData() {
			return false;
		},
		options: {},
		// always refresh
		refreshRequiredFor: function refreshRequiredFor(options) {
			if (!options) // if no options were passed in, then we are searching from an account
				{
					this.lat = null;
					this.lon = null;
					this.options.title = this.accountsNearMeText;
				}
			return true;
		},
		createToolLayout: function createToolLayout() {
			return this.tools || (this.tools = {
				'tbar': []
			});
		},
		init: function init() {
			this.startup();
			this.initConnects();
			this.titleEl = document.getElementById('pageTitle');
		},
		loadAccountTypes: function loadAccountTypes() {
			this.queryTypeEl = document.getElementById('queryType');
			this.queryTypeEl.onchange = dojo.hitch(this, &quot;onAccountTypeChange&quot;); //this.;
			var request = new Sage.SData.Client.SDataResourceCollectionRequest(App.getService()).setResourceKind('picklists').setContractName('system');
			var uri = request.getUri();
			uri.setPathSegment(Sage.SData.Client.SDataUri.ResourcePropertyIndex, 'items');
			uri.setCollectionPredicate('name eq &quot;Account Type&quot;');
			request.allowCacheUse = true;
			request.read({
				success: this.onAccountTypeLoad,
				failure: function failure(xhr, o) {
					console.log('failed to load account type');
				},
				scope: this
			});
		},
		onAccountTypeChange: function onAccountTypeChange() {
			this.acctType = this.queryTypeEl.value;
			this.clear();
			this.requestData();
		},
		onAccountTypeLoad: function onAccountTypeLoad(data) {
			if (this.queryTypeEl.options &amp;&amp; this.queryTypeEl.options.length &gt; 0) return;
			for (var i = 0; i &lt; data.$resources.length; i++) {
				this.queryTypeEl.options[i] = new Option(data.$resources[i]['text'], data.$resources[i]['text'], true, false);
				if (this.queryTypeEl.options[i].value == 'Customer') this.queryTypeEl.options[i].selected = 'True';
			}
		},
		formatSearchQuery: function formatSearchQuery(qry) {
			return _string['default'].substitute('AccountName like &quot;${0}%&quot;', [this.escapeSearchQuery(qry)]);
		},
		createActionLayout: function createActionLayout() {
			return this.actions || (this.actions = [{
				id: 'callMain',
				cls: 'fa fa-phone-square fa-2x',
				label: this.callMainActionText,
				enabled: _action['default'].hasProperty.bindDelegate(this, 'MainPhone'),
				fn: _action['default'].callPhone.bindDelegate(this, 'MainPhone')
			}, {
				id: 'addNote',
				cls: 'fa fa-edit fa-2x',
				label: this.addNoteActionText,
				fn: _action['default'].addNote.bindDelegate(this)
			}, {
				id: 'addActivity',
				cls: 'fa fa-calendar fa-2x',
				label: this.addActivityActionText,
				fn: _action['default'].addActivity.bindDelegate(this)
			}, {
				id: 'addAttachment',
				cls: 'fa fa-paperclip fa-2x',
				label: this.addAttachmentActionText,
				fn: _action['default'].addAttachment.bindDelegate(this)
			}]);
		},
		callMain: function callMain(params) {
			this.invokeActionItemBy(function invoke(a) {
				return a.id === 'callMain';
			}, params.key);
		}
	});

	module.exports = __class;
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9JbnRlZ3JhdGlvbnMvQ29udG91ci9WaWV3cy9QeFNlYXJjaC9BY2NvdW50UHhTZWFyY2guanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBb0JBLEtBQU0sUUFBUSxHQUFHLDZCQUFZLGNBQWMsQ0FBQyxDQUFDOztBQUU3QyxLQUFNLE9BQU8sR0FBRyx5QkFBUSx5REFBeUQsRUFBRSxzRkFBa0QsRUFBRTs7QUFFdEksb0JBQWtCLEVBQUUsUUFBUSxDQUFDLGtCQUFrQjtBQUM5Qyx1QkFBcUIsRUFBRSxRQUFRLENBQUMscUJBQXFCO0FBQ3JELHlCQUF1QixFQUFFLFFBQVEsQ0FBQyx1QkFBdUI7QUFDekQsbUJBQWlCLEVBQUUsUUFBUSxDQUFDLGlCQUFpQjtBQUM5QyxvQkFBa0IsRUFBRSxRQUFRLENBQUMsa0JBQWtCO0FBQy9DLDBCQUF3QixFQUFFLFFBQVEsQ0FBQyx3QkFBd0I7QUFDM0QsZ0JBQWMsRUFBRSxRQUFRLENBQUMsY0FBYztBQUN0QyxxQkFBbUIsRUFBRSxRQUFRLENBQUMsbUJBQW1CO0FBQ2xELHFCQUFtQixFQUFFLFFBQVEsQ0FBQyxtQkFBbUI7QUFDakQsZ0JBQWMsRUFBRSxRQUFRLENBQUMsY0FBYztBQUN0Qyx1QkFBcUIsRUFBRSxRQUFRLENBQUMscUJBQXFCO0FBQ3RELFdBQVMsRUFBRSxRQUFRLENBQUMsU0FBUztBQUM3Qix3QkFBc0IsRUFBRSxRQUFRLENBQUMsc0JBQXNCOzs7QUFHdEQsY0FBWSxFQUFFLElBQUksUUFBUSxDQUFDLENBQ3pCLCtCQUErQixFQUMvQiwyRUFBMkUsRUFDM0UsTUFBTSxFQUNOLGtEQUFrRCxFQUNsRCxPQUFPLEVBQ1AsMklBQTJJLEVBQzNJLDBCQUEwQixFQUMxQixNQUFNLEVBQ04sa0pBQWtKLEVBQ2xKLE9BQU8sRUFDUCxTQUFTLENBQ1YsQ0FBQztBQUNILDBCQUF3QixFQUFFLElBQUksUUFBUSxDQUFDLENBQ3BDLDRI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TSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0dBQ2hCO0VBQ0YsQ0FBQyxDQUFDOztrQkFFWSxPQUFPIiwiZmlsZSI6InNyYy9JbnRlZ3JhdGlvbnMvQ29udG91ci9WaWV3cy9QeFNlYXJjaC9BY2NvdW50UHhTZWFyY2guanMiLCJzb3VyY2VSb290Ijoic3JjIiwic291cmNlc0NvbnRlbnQiOlsiLypcclxuICogQ29weXJpZ2h0IChjKSAyMDE2LCBJbmZvciAoVVMpLCBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbiAqL1xyXG5pbXBvcnQgZGVjbGFyZSBmcm9tICdkb2pvL19iYXNlL2RlY2xhcmUnO1xyXG5pbXBvcnQgYXJyYXkgZnJvbSAnZG9qby9fYmFzZS9hcnJheSc7XHJcbmltcG9ydCBsYW5nIGZyb20gJ2Rvam8vX2Jhc2UvbGFuZyc7XHJcbmltcG9ydCBzdHJpbmcgZnJvbSAnZG9qby9zdHJpbmcnO1xyXG5pbXBvcnQgZG9tQ2xhc3MgZnJvbSAnZG9qby9kb20tY2xhc3MnO1xyXG5pbXBvcnQgZG9tQ29uc3RydWN0IGZyb20gJ2Rvam8vZG9tLWNvbnN0cnVjdCc7XHJcbmltcG9ydCBhY3Rpb24gZnJvbSAnTW9iaWxlL1NhbGVzTG9naXgvQWN0aW9uJztcclxuaW1wb3J0IFNlYXJjaFdpZGdldCBmcm9tICdTYWdlL1BsYXRmb3JtL01vYmlsZS9TZWFyY2hXaWRnZXQnO1xyXG5pbXBvcnQgdXRpbGl0eSBmcm9tICdhcmdvcy9VdGlsaXR5JztcclxuaW1wb3J0IF9MaXN0QmFzZSBmcm9tICdhcmdvcy9fTGlzdEJhc2UnO1xyXG5pbXBvcnQgX0xlZ2FjeUxpc3RCYXNlIGZyb20gJ2FyZ29zL19MZWdhY3lTRGF0YUxpc3RNaXhpbic7XHJcbmltcG9ydCBfQ2FyZExheW91dExpc3RNaXhpbiBmcm9tICdjcm0vVmlld3MvX0NhcmRMYXlvdXRMaXN0TWl4aW4nO1xyXG5pbXBvcnQgX1JpZ2h0RHJhd2VyTGlzdE1peGluIGZyb20gJ2NybS9WaWV3cy9fUmlnaHREcmF3ZXJMaXN0TWl4aW4nO1xyXG5pbXBvcnQgZ2V0UmVzb3VyY2UgZnJvbSAnYXJnb3MvSTE4bic7XHJcbmltcG9ydCBDdWx0dXJlSW5mbyBmcm9tICdhcmdvcy9DdWx0dXJlSW5mbyc7XHJcbmltcG9ydCBhcHBsaWNhdGlvbiBmcm9tICdjcm0vQXBwbGljYXRpb24nO1xyXG5cclxuY29uc3QgcmVzb3VyY2UgPSBnZXRSZXNvdXJjZSgnYWNjdFB4U2VhcmNoJyk7XHJcblxyXG5jb25zdCBfX2NsYXNzID0gZGVjbGFyZSgnY3JtLkludGVncmF0aW9ucy5Db250b3VyLlZpZXdzLlB4U2VhcmNoLkFjY291bnRQeFNlYXJjaCcsIFtfTGlzdEJhc2UsIF9MZWdhY3lMaXN0QmFzZSwgX0NhcmRMYXlvdXRMaXN0TWl4aW5dLCB7XHJcblx0Ly8gTG9jYWxpemF0aW9uIHN0cmluZ3NcclxuXHRhY2NvdW50c05lYXJNZVRleHQ6IHJlc291cmNlLmFjY291bnRzTmVhck1lVGV4dCxcclxuICBhZGRBY3Rpdml0eUFjdGlvblRleHQ6IHJlc291cmNlLmFkZEFjdGl2aXR5QWN0aW9uVGV4dCxcclxuICBhZGRBdHRhY2htZW50QWN0aW9uVGV4dDogcmVzb3VyY2UuYWRkQXR0YWNobWVudEFjdGlvblRleHQsXHJcbiAgYWRkTm90ZUFjdGlvblRleHQ6IHJlc291cmNlLmFkZE5vdGVBY3Rpb25UZXh0LFxyXG5cdGNhbGxNYWluQWN0aW9uVGV4dDogcmVzb3VyY2UuY2FsbE1haW5BY3Rpb25UZXh0LFxyXG5cdGN1cnJlbnRMb2NhdGlvbkVycm9yVGV4dDogcmVzb3VyY2UuY3VycmVudExvY2F0aW9uRXJyb3JUZXh0LFxyXG5cdGVkaXRBY3Rpb25UZXh0OiByZXNvdXJjZS5lZGl0QWN0aW9uVGV4dCxcclxuICBmYXhBYmJyZXZpYXRpb25UZXh0OiByZXNvdXJjZS5mYXhBYmJyZXZpYXRpb25UZXh0LFxyXG5cdGtpbG9tZXRlckFiYnJldlRleHQ6IHJlc291cmNlLmtpbG9tZXRlckFiYnJldlRleHQsXHJcblx0bWlsZUFiYnJldlRleHQ6IHJlc291cmNlLm1pbGVBYmJyZXZUZXh0LFxyXG4gIHBob25lQWJicmV2aWF0aW9uVGV4dDogcmVzb3VyY2UucGhvbmVBYmJyZXZpYXRpb25UZXh0LFxyXG5cdHRpdGxlVGV4dDogcmVzb3VyY2UudGl0bGVUZXh0LFxyXG5cdHZpZXdDb250YWN0c0FjdGlvblRleHQ6IHJlc291cmNlLnZpZXdDb250YWN0c0FjdGlvblRleHQsXHJcblxyXG5cdC8vIFRlbXBsYXRlc1xyXG4gIGl0ZW1UZW1wbGF0ZTogbmV3IFNpbXBsYXRlKFtcclxuICAgICc8aDM+eyU6ICQuQWNjb3VudE5hbWUgJX08L2gzPicsXHJcbiAgICAnPGg0PnslOiB0aGlzLmZvcm1hdERlY2ltYWwoJC5EaXN0YW5jZSkgJX0geyU6IHRoaXMuZGlzdGFuY2VUZXh0KCkgJX08L2g0PicsXHJcbiAgICAnPGg0PicsXHJcbiAgICAneyU6ICQkLmpvaW5GaWVsZHMoXCIgfCBcIiwgWyQuVHlwZSwgJC5TdWJUeXBlXSkgJX0nLFxyXG4gICAgJzwvaDQ+JyxcclxuICAgICc8aDQ+eyU6ICQuQWNjb3VudE1hbmFnZXIgJiYgJC5BY2NvdW50TWFuYWdlci5Vc2VySW5mbyA/ICQuQWNjb3VudE1hbmFnZXIuVXNlckluZm8uVXNlck5hbWUgOiBcIlwiICV9IHwgeyU6ICQuT3duZXIuT3duZXJEZXNjcmlwdGlvbiAlfTwvaDQ+JyxcclxuICAgICd7JSBpZiAoJC5NYWluUGhvbmUpIHsgJX0nLFxyXG4gICAgJzxoND4nLFxyXG4gICAgJ3slOiAkJC5waG9uZUFiYnJldmlhdGlvblRleHQgJX0gPHNwYW4gY2xhc3M9XCJocmVmXCIgZGF0YS1hY3Rpb249XCJjYWxsTWFpblwiIGRhdGEta2V5PVwieyU6ICQuJGtleSAlfVwiPnslOiBhcmdvcy5Gb3JtYXQucGhvbmUoJC5NYWluUGhvbmUpICV9PC9zcGFuPicsXHJcbiAgICAnPC9oND4nLFxyXG4gICAgJ3slIH0gJX0nLFxyXG4gIF0pLFxyXG5cdGl0ZW1Sb3dDb250YWluZXJUZW1wbGF0ZTogbmV3IFNpbXBsYXRlKFtcclxuICAgICc8bGkgZGF0YS1hY3Rpb249XCJhY3RpdmF0ZUVudHJ5XCIgZGF0YS1rZXk9XCJ7JT0gJCQuZ2V0SXRlbUFjdGlvbktleSgkKSAlfVwiIGRhdGEtZGVzY3JpcHRvcj1cInslOiAkJC5nZXRJdGVtRGVzY3JpcHRvcigkKSAlfVwiPicsXHJcbiAgICAneyUhICQkLml0ZW1Sb3dDb250ZW50VGVtcGxhdGUgJX0nLFxyXG4gICAgJzwvbGk+JyxcclxuICBdKSxcclxuXHRpdGVtUm93Q29udGVudFRlbXBsYXRlOiBuZXcgU2ltcGxhdGUoW1xyXG4gICAgJzxkaXYgaWQ9XCJ0b3BfaXRlbV9pbmRpY2F0b3JzXCIgY2xhc3M9XCJsaXN0LWl0ZW0taW5kaWNhdG9yLWNvbnRlbnRcIj48L2Rpdj4nLFxyXG4gICAgJ3slISAkJC5pdGVtSWNvblRlbXBsYXRlICV9JyxcclxuICAgICc8ZGl2IGNsYXNzPVwibGlzdC1pdGVtLWNvbnRlbnRcIiBkYXRhLXNuYXAtaWdub3JlPVwidHJ1ZVwiPnslISAkJC5pdGVtVGVtcGxhdGUgJX08L2Rpdj4nLFxyXG4gICAgJzxkaXYgaWQ9XCJsaXN0LWl0ZW0tY29udGVudC1yZWxhdGVkXCI+PC9kaXY+JyxcclxuICAgICd7JSEgJCQuaXRlbUZvb3RlclRlbXBsYXRlICV9JyxcclxuICBdKSxcclxuXHJcblx0Ly8gRnVuY3Rpb25zXHJcbiAgZm9ybWF0RGVjaW1hbDogZnVuY3Rpb24obikge1xyXG4gIFx0cmV0dXJuIE1hdGgucm91bmQobiAqIDEwMCkvMTAwO1xyXG4gIH0sXHJcbiAgZGlzdGFuY2VUZXh0OiBmdW5jdGlvbigpIHtcclxuICBcdHJldHVybiAoQXBwLmlzUmVnaW9uTWV0cmljKSA/IHRoaXMua2lsb21ldGVyQWJicmV2VGV4dCA6IHRoaXMubWlsZUFiYnJldlRleHQ7XHJcbiAgfSxcclxuXHRkaXN0YW5jZUNhbGM6IGZ1bmN0aW9uKGdMYXQsIGdMb24pIHtcclxuXHRcdHZhciBjb252ID0gKEFwcC5pc1JlZ2lvbk1ldHJpYykgPyAxLjYwOTM0NCA6IDE7XHJcblx0XHRyZXR1cm4gY29udiAqIE1hdGguc3FydChcclxuXHRcdFx0TWF0aC5wb3coKDY5LjEgKiAoZ0xhdCAtIHRoaXMubGF0KSksIDIpICtcclxuXHRcdFx0TWF0aC5wb3coKDUzLjAgKiAoZ0xvbiAtIHRoaXMubG9uKSksIDIpXHJcblx0XHQpO1xyXG5cdH0sXHJcbiAgam9pbkZpZWxkczogZnVuY3Rpb24gam9pbkZpZWxkcyhzZXAsIGZpZWxkcykge1xyXG4gICAgcmV0dXJuIHV0aWxpdHkuam9pbkZpZWxkcyhzZXAsIGZpZWxkcyk7XHJcbiAgfSxcclxuXHJcblx0Ly8gQWRkIGEgc2VhcmNoIHRlbXBsYXRlIGZvciBhY2NvdW50IHR5cGUgZHJvcGRvd25cclxuXHRzZWFyY2hXaWRnZXQ6IG5ldyBTZWFyY2hXaWRnZXQoe1xyXG4gICAgJ2NsYXNzJzogJ2xpc3Qtc2VhcmNoJyxcclxuICAgICdvd25lcic6IHRoaXMsXHJcbiAgICAnb25TZWFyY2hFeHByZXNzaW9uJzogbGFuZy5oaXRjaCh0aGlzLCB0aGlzLl9vblNlYXJjaEV4cHJlc3Npb24pLFxyXG4gICAgd2lkZ2V0VGVtcGxhdGU6IG5ldyBTaW1wbGF0ZShbXHJcblx0ICAgICc8ZGl2IGNsYXNzPVwic2VhcmNoLXdpZGdldFwiIHN0eWxlPVwiZGlzcGxheTogbm9uZTtcIj4nLCAvLyBoaWRlIHRoZSBzdG9jayBzZWFyY2ggc3R1ZmZcclxuXHQgICAgJzxkaXYgY2xhc3M9XCJ0YWJsZS1sYXlvdXRcIj4nLFxyXG5cdCAgICAnPGRpdj48aW5wdXQgdHlwZT1cInRleHRcIiBuYW1lPVwicXVlcnlcIiBjbGFzcz1cInF1ZXJ5XCIgYXV0b2NvcnJlY3Q9XCJvZmZcIiBhdXRvY2FwaXRhbGl6ZT1cIm9mZlwiIGRhdGEtZG9qby1hdHRhY2gtcG9pbnQ9XCJxdWVyeU5vZGVcIiBkYXRhLWRvam8tYXR0YWNoLWV2ZW50PVwib25mb2N1czpfb25Gb2N1cyxvbmJsdXI6X29uQmx1cixvbmtleXByZXNzOl9vbktleVByZXNzXCIgLz48L2Rpdj4nLFxyXG5cdCAgICAnPGRpdiBjbGFzcz1cImhhc0J1dHRvblwiPjxidXR0b24gY2xhc3M9XCJjbGVhci1idXR0b25cIiBkYXRhLWRvam8tYXR0YWNoLWV2ZW50PVwib25jbGljazogX29uQ2xlYXJDbGlja1wiPjwvYnV0dG9uPjwvZGl2PicsXHJcblx0ICAgICc8ZGl2IGNsYXNzPVwiaGFzQnV0dG9uXCI+PGJ1dHRvbiBjbGFzcz1cInN1YkhlYWRlckJ1dHRvbiBzZWFyY2hCdXR0b25cIiBkYXRhLWRvam8tYXR0YWNoLWV2ZW50PVwiY2xpY2s6IHNlYXJjaFwiPnslPSAkLnNlYXJjaFRleHQgJX08L2J1dHRvbj48L2Rpdj4nLFxyXG5cdCAgICAnPC9kaXY+JyxcclxuXHQgICAgJzxsYWJlbCBkYXRhLWRvam8tYXR0YWNoLXBvaW50PVwibGFiZWxOb2RlXCI+eyU9ICQuc2VhcmNoVGV4dCAlfTwvbGFiZWw+JyxcclxuXHQgICAgJzwvZGl2PicsXHJcblx0ICAgICc8ZGl2PkFjY291bnQgVHlwZTo8c2VsZWN0IGlkPVwicXVlcnlUeXBlXCIgc3R5bGU9XCJmb250LXNpemU6IDE2cHhcIj48L3NlbGVjdD48L2Rpdj4nLy8gYWRkIG91ciBvd24gc2VhcmNoIHN0dWZmXHJcbiAgICBdKVxyXG4gIH0pLFxyXG5cclxuXHQvLyBWaWV3IFByb3BlcnRpZXNcclxuXHRkZXRhaWxWaWV3OiAnYWNjb3VudF9kZXRhaWwnLFxyXG4gIGl0ZW1JY29uQ2xhc3M6ICdmYSBmYS1idWlsZGluZy1vIGZhLTJ4JyxcclxuXHRpZDogJ3B4U2VhcmNoX0FjY291bnRzJyxcclxuXHRzZWN1cml0eTogJ0NvbnRvdXIvTWFwL0FjY291bnQnLFxyXG5cdGVudGl0eU5hbWU6ICdBY2NvdW50JyxcclxuXHRhbGxvd1NlbGVjdGlvbjogdHJ1ZSxcclxuXHRlbmFibGVBY3Rpb25zOiB0cnVlLFxyXG5cdHBhZ2VTaXplOiAxMDAsXHJcbiAgb2ZmbGluZUlkczogbnVsbCxcclxuICByZXNvdXJjZUtpbmQ6ICdhY2NvdW50cycsXHJcblx0ZW5hYmxlU2VhcmNoOiB0cnVlLFxyXG5cdGVkaXRWaWV3OiAnYWNjb3VudF9lZGl0JyxcclxuXHRlZGl0U2VjdXJpdHk6ICdFbnRpdGllcy9BY2NvdW50L0VkaXQnLFxyXG5cdHJlbGF0ZWRWaWV3czoge30sXHJcblx0bWF4RGlzdGFuY2U6IDUwMCxcclxuXHJcblx0bGF0OiBudWxsLCAvLyBsYXRpdHVkZVxyXG5cdGxvbjogbnVsbCwgLy8gbG9uZ2l0dWRlXHJcblxyXG5cdGNyZWF0ZVJlcXVlc3Q6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHJlcXVlc3QgPSBuZXcgU2FnZS5TRGF0YS5DbGllbnQuU0RhdGFCYXNlUmVxdWVzdCh0aGlzLmdldFNlcnZpY2UoKSk7XHJcblx0XHRyZXF1ZXN0LnVyaS5zZXRQYXRoU2VnbWVudCgwLCAnc2x4Jyk7XHJcblx0XHRyZXF1ZXN0LnVyaS5zZXRQYXRoU2VnbWVudCgxLCAnZHluYW1pYycpO1xyXG5cdFx0cmVxdWVzdC51cmkuc2V0UGF0aFNlZ21lbnQoMiwgJy0nKTtcclxuXHRcdHJlcXVlc3QudXJpLnNldFBhdGhTZWdtZW50KDMsIFwiYWNjb3VudHNcIik7XHJcblx0XHRyZXF1ZXN0LnVyaS5zZXRRdWVyeUFyZygnZm9ybWF0JywgJ0pTT04nKTtcclxuXHRcdHJlcXVlc3QudXJpLnNldFF1ZXJ5QXJnKCdzZWxlY3QnLCAnQWNjb3VudE5hbWUsSW5kdXN0cnksVHlwZSxTdWJUeXBlLEFjY291bnRNYW5hZ2VyL1VzZXJJbmZvL1VzZXJOYW1lLEFkZHJlc3MvR2VvY29kZUxhdGl0dWRlLEFkZHJlc3MvR2VvY29kZUxvbmdpdHVkZSxPd25lci9Pd25lckRlc2NyaXB0aW9uLFdlYkFkZHJlc3MsTWFpblBob25lLEZheCcpO1xyXG5cdFx0cmVxdWVzdC51cmkuc2V0UXVlcnlBcmcoJ3doZXJlJywgJ1R5cGUgZXEgXCInICsgKHRoaXMuYWNjdFR5cGUgPyB0aGlzLmFjY3RUeXBlIDogJ0N1c3RvbWVyJykgKyAnXCIgYW5kICcgKyB0aGlzLl9yZXF1ZXN0RGlzdGFuY2VDYWxjKCkpO1xyXG5cdFx0cmV0dXJuIHJlcXVlc3Q7XHJcblx0fSxcclxuXHRfcmVxdWVzdERpc3RhbmNlQ2FsYzogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgY29udiA9IChBcHAuaXNSZWdpb25NZXRyaWMpID8gMS42MDkzNDQgOiAxO1xyXG5cdFx0cmV0dXJuICcoKCcgKyBjb252ICsgJyBtdWwgc3FydCgoKCg2OS4xIG11bCAoQWRkcmVzcy5HZW9jb2RlTGF0aXR1ZGUtKCcgKyB0aGlzLmxhdCArICcpKSkpIG11bCAoNjkuMSBtdWwgKEFkZHJlc3MuR2VvY29kZUxhdGl0dWRlLSgnICsgdGhpcy5sYXQgKyAnKSkpKSsoKDUzIG11bCAoQWRkcmVzcy5HZW9jb2RlTG9uZ2l0dWRlLSgnICsgdGhpcy5sb24gKyAnKSkpIG11bCAoNTMgbXVsIChBZGRyZXNzLkdlb2NvZGVMb25naXR1ZGUtKCcgKyB0aGlzLmxvbiArICcpKSkpKSkgbHQgJyArIHRoaXMubWF4RGlzdGFuY2UgKyAnKSc7XHJcblx0fSxcclxuXHRyZXF1ZXN0RGF0YTogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLmxvYWRBY2NvdW50VHlwZXMoKTtcclxuXHRcdGRvbUNsYXNzLmFkZCh0aGlzLmRvbU5vZGUsICdsaXN0LWxvYWRpbmcnKTtcclxuXHJcblx0XHRpZiAodGhpcy5sYXQgJiYgdGhpcy5sb24pIHtcclxuICAgIFx0dmFyIHJlcXVlc3QgPSB0aGlzLmNyZWF0ZVJlcXVlc3QoKTtcclxuICAgIFx0cmVxdWVzdC5zZXJ2aWNlLnJlYWRGZWVkKHJlcXVlc3QsIHtcclxuXHQgICAgICBzdWNjZXNzOiB0aGlzLm9uUmVxdWVzdERhdGFTdWNjZXNzLFxyXG5cdCAgICAgIGZhaWx1cmU6IHRoaXMub25SZXF1ZXN0RGF0YUZhaWx1cmUsXHJcblx0ICAgICAgYWJvcnRlZDogdGhpcy5vblJlcXVlc3REYXRhQWJvcnRlZCxcclxuXHQgICAgICBzY29wZTogdGhpc1xyXG5cdCAgICB9KTtcclxuXHRcdH1cclxuXHRcdGVsc2Uge1xyXG5cdFx0XHRuYXZpZ2F0b3IuZ2VvbG9jYXRpb24uZ2V0Q3VycmVudFBvc2l0aW9uKGRvam8uaGl0Y2godGhpcywgXCJnZW9Mb2NhdGlvblJlY2VpdmVkXCIpLCBkb2pvLmhpdGNoKHRoaXMsIFwiZ2VvTG9jYXRpb25FcnJvclwiKSwgeyBlbmFibGVIaWdoQWNjdXJhY3k6IHRydWUgfSk7XHJcblx0XHR9XHJcblx0fSxcclxuXHQvLyBjdXN0b20gcmVxdWVzdCBkYXRhIHN1Y2Nlc3MgbWV0aG9kIHRvIGluc2VydCBvdXIgXCJtZVwiIGF0IHRoZSBmcm9udFxyXG5cdG9uUmVxdWVzdERhdGFTdWNjZXNzOiBmdW5jdGlvbihmZWVkKSB7XHJcbiAgICB2YXIgZmVlZFJlc291cmNlcyA9IGZlZWQuJHJlc291cmNlcztcclxuXHRcdGlmIChmZWVkUmVzb3VyY2VzKSB7XHJcblx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgZmVlZC4kcmVzb3VyY2VzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0Y29uc3QgZW50cnkgPSBmZWVkLiRyZXNvdXJjZXNbaV07XHJcblx0XHRcdFx0ZW50cnkuRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlQ2FsYyhlbnRyeS5BZGRyZXNzLkdlb2NvZGVMYXRpdHVkZSwgZW50cnkuQWRkcmVzcy5HZW9jb2RlTG9uZ2l0dWRlKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gU29ydCBieSBkaXN0YW5jZSBBU0NcclxuXHRcdFx0ZmVlZC4kcmVzb3VyY2VzLnNvcnQoZnVuY3Rpb24oYSwgYikge1xyXG5cdFx0XHRcdHJldHVybiBhLkRpc3RhbmNlID4gYi5EaXN0YW5jZSA/IDEgOiAtMTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0XHR0aGlzLnByb2Nlc3NGZWVkKGZlZWQpO1xyXG5cdFx0ZG9tQ2xhc3MucmVtb3ZlKHRoaXMuZG9tTm9kZSwgJ2xpc3QtbG9hZGluZycpO1xyXG4gIH0sXHJcblx0cHJvY2Vzc0ZlZWQ6IGZ1bmN0aW9uIHByb2Nlc3NGZWVkKF9mZWVkKSB7XHJcblx0XHRsZXQgZmVlZCA9IF9mZWVkO1xyXG4gICAgaWYgKCF0aGlzLmZlZWQpIHtcclxuICAgICAgdGhpcy5zZXQoJ2xpc3RDb250ZW50JywgJycpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuZmVlZCA9IGZlZWQ7XHJcblxyXG4gICAgaWYgKHRoaXMuZmVlZC4kdG90YWxSZXN1bHRzID09PSAwKSB7XHJcbiAgICAgIHRoaXMuc2V0KCdsaXN0Q29udGVudCcsIHRoaXMubm9EYXRhVGVtcGxhdGUuYXBwbHkodGhpcykpO1xyXG4gICAgfSBlbHNlIGlmIChmZWVkLiRyZXNvdXJjZXMpIHtcclxuICAgICAgY29uc3QgZG9jZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmZWVkLiRyZXNvdXJjZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCBlbnRyeSA9IGZlZWQuJHJlc291cmNlc1tpXTtcclxuICAgICAgICBlbnRyeS4kZGVzY3JpcHRvciA9IGVudHJ5LiRkZXNjcmlwdG9yIHx8IGZlZWQuJGRlc2NyaXB0b3I7XHJcbiAgICAgICAgdGhpcy5lbnRyaWVzW2VudHJ5LiRrZXldID0gZW50cnk7XHJcbiAgICAgICAgY29uc3Qgcm93Tm9kZSA9IGRvbUNvbnN0cnVjdC50b0RvbSh0aGlzLnJvd1RlbXBsYXRlLmFwcGx5KGVudHJ5LCB0aGlzKSk7XHJcbiAgICAgICAgZG9jZnJhZy5hcHBlbmRDaGlsZChyb3dOb2RlKTtcclxuICAgICAgICB0aGlzLm9uQXBwbHlSb3dUZW1wbGF0ZShlbnRyeSwgcm93Tm9kZSk7XHJcbiAgICAgICAgaWYgKHRoaXMucmVsYXRlZFZpZXdzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIHRoaXMub25Qcm9jZXNzUmVsYXRlZFZpZXdzKGVudHJ5LCByb3dOb2RlLCBmZWVkKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChkb2NmcmFnLmNoaWxkTm9kZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGRvbUNvbnN0cnVjdC5wbGFjZShkb2NmcmFnLCB0aGlzLmNvbnRlbnROb2RlLCAnbGFzdCcpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblx0fSxcclxuXHRnZW9Mb2NhdGlvbkVycm9yOiBmdW5jdGlvbihlcnJvcikge1xyXG5cdFx0YWxlcnQodGhpcy5jdXJyZW50TG9jYXRpb25FcnJvclRleHQpO1xyXG5cdFx0ZG9tQ2xhc3MucmVtb3ZlKHRoaXMuZG9tTm9kZSwgJ2xpc3QtbG9hZGluZycpO1xyXG5cdH0sXHJcblx0Z2VvTG9jYXRpb25SZWNlaXZlZDogZnVuY3Rpb24ocG9zaXRpb24pIHtcclxuXHRcdHRoaXMubGF0ID0gcG9zaXRpb24uY29vcmRzLmxhdGl0dWRlO1xyXG5cdFx0dGhpcy5sb24gPSAgcG9zaXRpb24uY29vcmRzLmxvbmdpdHVkZTtcclxuXHRcdHRoaXMucmVxdWVzdERhdGEoKTtcclxuXHR9LFxyXG5cdC8vIG9ubHkgd2FudCB0aGUgdG9wIDEwMCByZWNvcmRzXHJcbiAgaGFzTW9yZURhdGE6IGZ1bmN0aW9uKCkge1xyXG4gIFx0cmV0dXJuIGZhbHNlO1xyXG5cdH0sXHJcblx0b3B0aW9uczoge30sXHJcbiAgICAvLyBhbHdheXMgcmVmcmVzaFxyXG5cdHJlZnJlc2hSZXF1aXJlZEZvcjogZnVuY3Rpb24ob3B0aW9ucykge1xyXG5cdFx0aWYgKCFvcHRpb25zKSAvLyBpZiBubyBvcHRpb25zIHdlcmUgcGFzc2VkIGluLCB0aGVuIHdlIGFyZSBzZWFyY2hpbmcgZnJvbSBhbiBhY2NvdW50XHJcblx0XHR7XHJcblx0XHRcdHRoaXMubGF0ID0gbnVsbDtcclxuXHRcdFx0dGhpcy5sb24gPSBudWxsO1xyXG5cdFx0XHR0aGlzLm9wdGlvbnMudGl0bGUgPSB0aGlzLmFjY291bnRzTmVhck1lVGV4dDtcclxuXHRcdH1cclxuICBcdHJldHVybiB0cnVlO1xyXG4gIH0sXHJcblx0Y3JlYXRlVG9vbExheW91dDogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gdGhpcy50b29scyB8fCAodGhpcy50b29scyA9IHtcclxuXHRcdFx0XHQndGJhcic6IFtdXHJcblx0XHR9KTtcclxuXHR9LFxyXG5cdGluaXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5zdGFydHVwKCk7XHJcbiAgICAgICAgdGhpcy5pbml0Q29ubmVjdHMoKTtcclxuICAgICAgICB0aGlzLnRpdGxlRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFnZVRpdGxlJyk7XHJcblx0fSxcclxuXHRsb2FkQWNjb3VudFR5cGVzOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMucXVlcnlUeXBlRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncXVlcnlUeXBlJyk7XHJcblx0XHR0aGlzLnF1ZXJ5VHlwZUVsLm9uY2hhbmdlID0gZG9qby5oaXRjaCh0aGlzLCBcIm9uQWNjb3VudFR5cGVDaGFuZ2VcIik7Ly90aGlzLjtcclxuXHRcdHZhciByZXF1ZXN0ID0gbmV3IFNhZ2UuU0RhdGEuQ2xpZW50LlNEYXRhUmVzb3VyY2VDb2xsZWN0aW9uUmVxdWVzdChBcHAuZ2V0U2VydmljZSgpKVxyXG5cdFx0XHQuc2V0UmVzb3VyY2VLaW5kKCdwaWNrbGlzdHMnKVxyXG5cdFx0XHQuc2V0Q29udHJhY3ROYW1lKCdzeXN0ZW0nKTtcclxuXHRcdHZhciB1cmkgPSByZXF1ZXN0LmdldFVyaSgpO1xyXG5cdFx0dXJpLnNldFBhdGhTZWdtZW50KFNhZ2UuU0RhdGEuQ2xpZW50LlNEYXRhVXJpLlJlc291cmNlUHJvcGVydHlJbmRleCwgJ2l0ZW1zJyk7XHJcblx0XHR1cmkuc2V0Q29sbGVjdGlvblByZWRpY2F0ZSgnbmFtZSBlcSBcIkFjY291bnQgVHlwZVwiJyk7XHJcblx0XHRyZXF1ZXN0LmFsbG93Q2FjaGVVc2UgPSB0cnVlO1xyXG5cdFx0cmVxdWVzdC5yZWFkKHtcclxuXHRcdFx0c3VjY2VzczogdGhpcy5vbkFjY291bnRUeXBlTG9hZCxcclxuXHRcdFx0ZmFpbHVyZTogZnVuY3Rpb24oeGhyLCBvKSB7IGNvbnNvbGUubG9nKCdmYWlsZWQgdG8gbG9hZCBhY2NvdW50IHR5cGUnKTsgfSxcclxuXHRcdFx0c2NvcGU6IHRoaXNcclxuXHRcdH0pO1xyXG5cdH0sXHJcblx0b25BY2NvdW50VHlwZUNoYW5nZTogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLmFjY3RUeXBlID0gdGhpcy5xdWVyeVR5cGVFbC52YWx1ZTtcclxuXHRcdHRoaXMuY2xlYXIoKTtcclxuXHRcdHRoaXMucmVxdWVzdERhdGEoKTtcclxuXHR9LFxyXG5cdG9uQWNjb3VudFR5cGVMb2FkOiBmdW5jdGlvbihkYXRhKSB7XHJcblx0XHRpZiAodGhpcy5xdWVyeVR5cGVFbC5vcHRpb25zICYmIHRoaXMucXVlcnlUeXBlRWwub3B0aW9ucy5sZW5ndGggPiAwKVxyXG5cdFx0XHRyZXR1cm47XHJcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEuJHJlc291cmNlcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHR0aGlzLnF1ZXJ5VHlwZUVsLm9wdGlvbnNbaV0gPSBuZXcgT3B0aW9uKGRhdGEuJHJlc291cmNlc1tpXVsndGV4dCddLCBkYXRhLiRyZXNvdXJjZXNbaV1bJ3RleHQnXSwgdHJ1ZSwgZmFsc2UpO1xyXG5cdFx0XHRpZiAodGhpcy5xdWVyeVR5cGVFbC5vcHRpb25zW2ldLnZhbHVlID09ICdDdXN0b21lcicpXHJcblx0XHRcdFx0dGhpcy5xdWVyeVR5cGVFbC5vcHRpb25zW2ldLnNlbGVjdGVkID0gJ1RydWUnO1xyXG5cdFx0fVxyXG5cdH0sXHJcblx0Zm9ybWF0U2VhcmNoUXVlcnk6IGZ1bmN0aW9uKHFyeSkge1xyXG5cdFx0cmV0dXJuIHN0cmluZy5zdWJzdGl0dXRlKCdBY2NvdW50TmFtZSBsaWtlIFwiJHswfSVcIicsIFt0aGlzLmVzY2FwZVNlYXJjaFF1ZXJ5KHFyeSldKTtcclxuXHR9LFxyXG5cdGNyZWF0ZUFjdGlvbkxheW91dDogZnVuY3Rpb24gY3JlYXRlQWN0aW9uTGF5b3V0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuYWN0aW9ucyB8fCAodGhpcy5hY3Rpb25zID0gW3tcclxuICAgICAgaWQ6ICdjYWxsTWFpbicsXHJcbiAgICAgIGNsczogJ2ZhIGZhLXBob25lLXNxdWFyZSBmYS0yeCcsXHJcbiAgICAgIGxhYmVsOiB0aGlzLmNhbGxNYWluQWN0aW9uVGV4dCxcclxuICAgICAgZW5hYmxlZDogYWN0aW9uLmhhc1Byb3BlcnR5LmJpbmREZWxlZ2F0ZSh0aGlzLCAnTWFpblBob25lJyksXHJcbiAgICAgIGZuOiBhY3Rpb24uY2FsbFBob25lLmJpbmREZWxlZ2F0ZSh0aGlzLCAnTWFpblBob25lJyksXHJcbiAgICB9LCB7XHJcbiAgICAgIGlkOiAnYWRkTm90ZScsXHJcbiAgICAgIGNsczogJ2ZhIGZhLWVkaXQgZmEtMngnLFxyXG4gICAgICBsYWJlbDogdGhpcy5hZGROb3RlQWN0aW9uVGV4dCxcclxuICAgICAgZm46IGFjdGlvbi5hZGROb3RlLmJpbmREZWxlZ2F0ZSh0aGlzKSxcclxuICAgIH0sIHtcclxuICAgICAgaWQ6ICdhZGRBY3Rpdml0eScsXHJcbiAgICAgIGNsczogJ2ZhIGZhLWNhbGVuZGFyIGZhLTJ4JyxcclxuICAgICAgbGFiZWw6IHRoaXMuYWRkQWN0aXZpdHlBY3Rpb25UZXh0LFxyXG4gICAgICBmbjogYWN0aW9uLmFkZEFjdGl2aXR5LmJpbmREZWxlZ2F0ZSh0aGlzKSxcclxuICAgIH0sIHtcclxuICAgICAgaWQ6ICdhZGRBdHRhY2htZW50JyxcclxuICAgICAgY2xzOiAnZmEgZmEtcGFwZXJjbGlwIGZhLTJ4JyxcclxuICAgICAgbGFiZWw6IHRoaXMuYWRkQXR0YWNobWVudEFjdGlvblRleHQsXHJcbiAgICAgIGZuOiBhY3Rpb24uYWRkQXR0YWNobWVudC5iaW5kRGVsZWdhdGUodGhpcyksXHJcbiAgICB9XSk7XHJcbiAgfSxcclxuICBjYWxsTWFpbjogZnVuY3Rpb24gY2FsbE1haW4ocGFyYW1zKSB7XHJcbiAgICB0aGlzLmludm9rZUFjdGlvbkl0ZW1CeShmdW5jdGlvbiBpbnZva2UoYSkge1xyXG4gICAgICByZXR1cm4gYS5pZCA9PT0gJ2NhbGxNYWluJztcclxuICAgIH0sIHBhcmFtcy5rZXkpO1xyXG4gIH0sXHJcbn0pO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgX19jbGFzcztcclxuIl19
</pre>
</body>
</html>
