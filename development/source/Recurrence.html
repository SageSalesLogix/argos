<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">define('crm/Recurrence', ['exports', 'module', 'dojo/_base/lang', 'dojo/string', 'argos/I18n'], function (exports, module, _dojo_baseLang, _dojoString, _argosI18n) {
  function _interopRequireDefault(obj) { return obj &amp;&amp; obj.__esModule ? obj : { 'default': obj }; }

  var _lang = _interopRequireDefault(_dojo_baseLang);

  var _string = _interopRequireDefault(_dojoString);

  var _getResource = _interopRequireDefault(_argosI18n);

  var resource = (0, _getResource['default'])('recurrence');

<span id='crm-Recurrence'>  /**
</span>   * @class crm.Recurrence
   *
   * @requires argos._ActionMixin
   * @requires argos._CustomizationMixin
   * @requires argos._Templated
   *
   */
  var __class = _lang['default'].setObject('crm.Recurrence', {
    // Localization
    neverText: resource.neverText,
    daysText: resource.daysText,
    dailyText: resource.dailyText,
    weeksText: resource.weeksText,
    weeklyText: resource.weeklyText,
    weeklyOnText: resource.weeklyOnText, // eg. {weekly} on {friday}
    monthsText: resource.monthsText,
    monthlyText: resource.monthlyText,
    monthlyOnDayText: resource.monthlyOnDayText, // eg. {monthly} on day {15}
    monthlyOnText: resource.monthlyOnText, // eg. {monthly} on {second} {Monday}
    yearsText: resource.yearsText,
    yearlyText: resource.yearlyText,
    yearlyOnText: resource.yearlyOnText, // eg. {yearly} on {short_date}
    yearlyOnWeekdayText: resource.yearlyOnWeekdayText, // eg. {yearly} on {first} {Thursday} in {April}
    everyText: resource.everyText, // eg. every {2} {weeks}
    afterCompletionText: resource.afterCompletionText,
    untilEndDateText: resource.untilEndDateText, // eg. {daily} until {31/10/2012}
    dayFormatText: resource.dayFormatText,
    monthFormatText: resource.monthFormatText,
    monthAndDayFormatText: resource.monthAndDayFormatText,
    weekdayFormatText: resource.weekdayFormatText,
    endDateFormatText: resource.endDateFormatText,
    weekDaysText: [resource.sunday, resource.monday, resource.tuesday, resource.wednesday, resource.thursday, resource.friday, resource.saturday],
    ordText: [resource.day, resource.first, resource.second, resource.third, resource.fourth, resource.last],

    interval: 1, // repeat every interval days/weeks/months/years
    defaultIterations: [// by RecurPeriod, -1 for After Completed. Configurable.
    7, // days
    -1, 8, // weeks
    -1, 12, // months
    12, -1, 5, // years
    5, -1],
    _weekDayValues: [131072, // sun
    262144, // mon
    524288, // tue
    1048576, // wed
    2097152, // thu
    4194304, // fri
    8388608],
    // sat
    simplifiedOptions: [{
      label: 'neverText',
      Recurring: false,
      RecurPeriod: -1, // not recurring
      basePeriodSpec: 0,
      RecurPeriodSpec: 0,
      RecurIterations: 0,
      RecurrenceState: 'rsNotRecurring'
    }, {
      label: 'dailyText',
      Recurring: true,
      RecurPeriod: 0,
      basePeriodSpec: 0,
      RecurPeriodSpec: 0,
      RecurIterations: 7, // override from this.defaultIterations
      RecurrenceState: 'rstMaster'
    }, {
      label: 'weeklyOnText',
      Recurring: true,
      RecurPeriod: 2,
      basePeriodSpec: 0,
      weekdays: [0, 0, 0, 0, 0, 0, 0], // none selected by default
      RecurPeriodSpec: 0,
      RecurIterations: 8,
      RecurrenceState: 'rstMaster',
      calc: true
    }, {
      label: 'monthlyOnDayText',
      Recurring: true,
      RecurPeriod: 4,
      basePeriodSpec: 1048576,
      RecurPeriodSpec: 0,
      RecurIterations: 12,
      RecurrenceState: 'rstMaster'
    }, {
      label: 'monthlyOnText',
      Recurring: true,
      RecurPeriod: 5,
      basePeriodSpec: 0,
      RecurPeriodSpec: 0,
      RecurIterations: 12,
      RecurrenceState: 'rstMaster',
      calc: true
    }, {
      label: 'yearlyOnText',
      Recurring: true,
      RecurPeriod: 7,
      basePeriodSpec: 38797312,
      RecurPeriodSpec: 0,
      RecurIterations: 5,
      RecurrenceState: 'rstMaster'
    }, {
      // Need one more for Yearly on #ord #weekday of month
      label: 'yearlyOnWeekdayText',
      Recurring: true,
      RecurPeriod: 8,
      basePeriodSpec: 0,
      RecurPeriodSpec: 0,
      weekdays: [0, 0, 0, 0, 0, 0, 0],
      RecurIterations: 5,
      RecurrenceState: 'rstMaster'
    }],

    createSimplifiedOptions: function createSimplifiedOptions(startDate) {
      this.recalculateSimplifiedPeriodSpec(startDate);

      var list = [];
      var currentDate = startDate || new Date();
      var wrapped = moment(currentDate);
      var day = currentDate.getDate();
      var ord = this.ordText[parseInt(((day - 1) / 7).toString(), 10) + 1];
      var textOptions = [null, // scale, replaced in loop
      day, wrapped.format(this.dayFormatText), wrapped.localeData().weekdays(wrapped), wrapped.localeData().monthsShort(wrapped), ord];

      for (var recurOption in this.simplifiedOptions) {
        if (this.simplifiedOptions.hasOwnProperty(recurOption)) {
          textOptions[0] = this.getPanel(this.simplifiedOptions[recurOption].RecurPeriod);
          this.simplifiedOptions[recurOption].RecurIterations = this.defaultIterations[this.simplifiedOptions[recurOption].RecurPeriod] || 0;

          if (this[this.simplifiedOptions[recurOption].label]) {
            list.push({
              '$key': recurOption, // this.simplifiedOptions[recurOption].RecurPeriod,
              '$descriptor': _string['default'].substitute(this[this.simplifiedOptions[recurOption].label], textOptions),
              'recurrence': this.simplifiedOptions[recurOption]
            });
          }
        }
      }

      return {
        '$resources': list
      };
    },
    getPanel: function getPanel(recurPeriod, plural) {
      switch (recurPeriod) {
        case 0:
        case 1:
          return plural ? this.daysText : this.dailyText;
        case 2:
        case 3:
          return plural ? this.weeksText : this.weeklyText;
        case 4:
        case 5:
        case 6:
          return plural ? this.monthsText : this.monthlyText;
        case 7:
        case 8:
        case 9:
          return plural ? this.yearsText : this.yearlyText;
        default:
          return this.neverText;
      }
    },
    isAfterCompletion: function isAfterCompletion(panel) {
      return '1369'.indexOf(panel) &gt;= 0;
    },
    recalculateSimplifiedPeriodSpec: function recalculateSimplifiedPeriodSpec(startDate) {
      for (var recurOption in this.simplifiedOptions) {
        if (this.simplifiedOptions.hasOwnProperty(recurOption)) {
          var opt = this.simplifiedOptions[recurOption];
          this.simplifiedOptions[recurOption].RecurPeriodSpec = this.getRecurPeriodSpec(opt.RecurPeriod, startDate, opt.weekdays);
        }
      }
    },
    getWeekdays: function getWeekdays(rps, names) {
      // pass a RecurPeriodSpec (as long as RecurPeriod corresponds to a Spec with weekdays)
      var weekdays = [];
      for (var i = 0; i &lt; this._weekDayValues.length; i++) {
        if (names) {
          if (rps &amp; this._weekDayValues[i]) {
            weekdays.push(this.weekDaysText[i]);
          }
        } else {
          weekdays.push(rps &amp; this._weekDayValues[i] ? 1 : 0);
        }
      }

      return weekdays;
    },
    getOrd: function getOrd(entry) {
      var nthWeek = 0;
      var weekday = entry.StartDate.getDay();
      var monthNum = entry.StartDate.getMonth() + 1;
      var ordBits = entry.RecurPeriodSpec % 524288;
      var monthBits = entry.RecurPeriodSpec % 4194304 - ordBits;

      if (entry &amp;&amp; (entry.RecurPeriod === 5 || entry.RecurPeriod === 8)) {
        nthWeek = parseInt((ordBits / 65536).toString(), 10) + 1;
        weekday = parseInt((monthBits / 524288).toString(), 10) - 1;
        monthNum = parseInt(((entry.RecurPeriodSpec - monthBits - ordBits) / 4194304).toString(), 10);
      }

      return {
        week: nthWeek,
        weekday: weekday,
        month: monthNum
      };
    },
    getRecurPeriodSpec: function getRecurPeriodSpec(recurPeriod, startDate, weekdays, inter) {
      var spec = 0;
      var interval = inter || this.interval;
      var weekDay = undefined;
      var nthWeek = undefined;
      var monthNum = undefined;

      if (!startDate) {
        return null;
      }

      switch (recurPeriod) {
        case 0:
          // daily
          break;
        case 1:
          // daily occurances *after completion*
          //
          break;
        case 2:
          // weekly
          for (var i = 0; i &lt; weekdays.length; i++) {
            spec += weekdays[i] ? this._weekDayValues[i] : 0;
          }
          if (spec === 0) {
            spec += this._weekDayValues[startDate.getDay()];
          }

          break;
        case 3:
          // weekly occurances *after completion*
          spec = 1048576;
          break;
        case 4:
          // monthly on day ##
          spec = 1048576;
          break;
        case 5:
          // monthly on #ord #weekday
          weekDay = startDate.getDay() + 1;
          nthWeek = parseInt(((startDate.getDate() - 1) / 7).toString(), 10) + 1;
          spec = weekDay * 524288 + (nthWeek - 1) * 65536;
          break;
        case 6:
          // monthly occurances *after completion*
          spec = 1048576;
          break;
        case 7:
          // yearly on #month #day
          spec = 38797312;
          break;
        case 8:
          // yearly on #ord #weekday of #month
          spec = 18546688;
          weekDay = startDate.getDay() + 1;
          monthNum = startDate.getMonth() + 1;
          nthWeek = parseInt(((startDate.getDate() - 1) / 7).toString(), 10) + 1;
          spec = monthNum * 4194304 + weekDay * 524288 + (nthWeek - 1) * 65536;
          break;
        case 9:
          // yearly occurances *after completion*
          spec = 38797312;
          break;
        default:
          // Not recurring, happens only once
          interval = 0;
      }

      return spec + interval; // + every interval days/weeks/months/years
    },

    toString: function toString(entry, dependsOnPanel) {
      if (entry.RecurrenceState !== 'rstMaster' || !entry.StartDate) {
        return '';
      }

      var rp = parseInt(entry.RecurPeriod, 10);
      var recurPeriodSpec = parseInt(entry.RecurPeriodSpec, 10);
      var interval = recurPeriodSpec % 65536;
      var text = 1 &lt; interval ? _string['default'].substitute(this.everyText, [interval, this.getPanel(rp, true)]) : true === dependsOnPanel ? '' : this.getPanel(rp); // eslint-disable-line
      var currentDate = argos.Convert.toDateFromString(entry.StartDate);
      var day = currentDate.getDate();
      var weekday = moment(currentDate).format(this.weekdayFormatText);
      var textOptions = [text, day, moment(currentDate).format(this.monthAndDayFormatText), this.getWeekdays(recurPeriodSpec, true), moment(currentDate).format(this.monthFormatText), this.ordText[parseInt(((day - 1) / 7).toString(), 10) + 1]];

      switch (rp) {
        case 0:
        // daily
        case 1:
          break;
        case 2:
          // weekly
          textOptions[2] = this.getWeekdays(recurPeriodSpec, true);
          text = _string['default'].substitute(this.weeklyOnText, textOptions);
          break;
        case 3:
          break;
        case 4:
          // monthly
          text = _string['default'].substitute(this.monthlyOnDayText, textOptions);
          break;
        case 5:
          textOptions[3] = weekday;
          text = _string['default'].substitute(this.monthlyOnText, textOptions);
          break;
        case 6:
          break;
        case 7:
          // yearly
          text = _string['default'].substitute(this.yearlyOnText, textOptions);
          break;
        case 8:
          textOptions[3] = weekday;
          text = _string['default'].substitute(this.yearlyOnWeekdayText, textOptions);
          break;
        case 9:
          break;
        default:
          return '';
      }

      if (this.isAfterCompletion(rp)) {
        text = _string['default'].substitute('${0} ${1}', [text, this.afterCompletionText]);
      } else {
        text = _string['default'].substitute(this.untilEndDateText, [text, this.calcEndDate(currentDate, entry).format(this.endDateFormatText)]);
      }

      return text;
    },
    calcEndDate: function calcEndDate(date, entry) {
      var interval = entry.RecurPeriodSpec % 65536;
      var weekDay = undefined;
      var nthWeek = undefined;
      var tempDate = moment.isMoment(date) ? date.clone() : new Date(date.getFullYear(), date.getMonth(), date.getDate(), date.getHours(), date.getMinutes(), date.getSeconds());

      tempDate = moment(tempDate);
      switch (parseInt(entry.RecurPeriod, 10)) {
        case 0:
          tempDate.add(interval * (entry.RecurIterations - 1), 'days');
          break;
        case 2:
          tempDate.add(interval * (entry.RecurIterations - 1), 'weeks');
          break;
        case 4:
          tempDate.add(interval * (entry.RecurIterations - 1), 'months');
          break;
        case 5:
          weekDay = tempDate.day();
          nthWeek = parseInt((tempDate.date() / 7).toString(), 10) + 1;
          tempDate.add(interval * (entry.RecurIterations - 1), 'months');
          tempDate = this.calcDateOfNthWeekday(tempDate.toDate(), weekDay, nthWeek);
          break;
        case 7:
          tempDate.add(interval * (entry.RecurIterations - 1), 'years');
          break;
        case 8:
          weekDay = tempDate.day();
          nthWeek = parseInt((tempDate.date() / 7).toString(), 10) + 1;
          tempDate.add(interval * (entry.RecurIterations - 1), 'years');
          tempDate = this.calcDateOfNthWeekday(tempDate.toDate(), weekDay, nthWeek);
          break;
        default:
        // RecurPeriod 1, 3, 6 &amp; 9 are iterations after completion. No end date.
      }

      return tempDate;
    },
    calcDateOfNthWeekday: function calcDateOfNthWeekday(date, weekDay, nthWeek) {
      // calculate date of #nthWeek #weekDay  e.g. First Friday
      var tempDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
      tempDate = moment(tempDate);

      if (nthWeek === 5) {
        // &quot;last&quot; - count backwards...
        tempDate.endOf('month');
        for (var i = 0; i &lt; 7; i++) {
          if (tempDate.day() === weekDay) {
            break;
          }
          tempDate.subtract(1, 'days');
        }
      } else {
        // count from the beginning...
        tempDate.startOf('month');
        // get to the first day that matches...
        for (var i = 0; i &lt; 7; i++) {
          if (tempDate.day() === weekDay) {
            break;
          }
          tempDate.add(1, 'days');
        }
        // then add correct number of weeks (first week - add 0 etc.)
        tempDate.add(nthWeek - 1, 'weeks');
      }
      return tempDate;
    },
    calcRecurIterations: function calcRecurIterations(endDate, startDate, interval, recurPeriod) {
      // calculate number of occurances based on start and end dates
      var days = (endDate - startDate) / (1000 * 60 * 60 * 24);
      var years = endDate.getFullYear() - startDate.getFullYear();
      var result = undefined;

      switch (parseInt(recurPeriod, 10)) {
        case 8:
        case 7:
          result = years;
          break;
        case 5:
        case 4:
          result = endDate.getMonth() - startDate.getMonth() + years * 12;
          break;
        case 2:
          result = days / 7;
          break;
        case 0:
          result = days;
          break;
        default:
        // no cases should fall here
      }

      return Math.floor(result / interval + 1);
    }
  });

  _lang['default'].setObject('Mobile.SalesLogix.Recurrence', __class);
  module.exports = __class;
});
//# sourceMappingURL=data:application/json;base64,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Q1IsYUFBSyxDQUFDLENBQUM7QUFDUCxhQUFLLENBQUM7QUFDSixnQkFBTSxHQUFHLEFBQUMsT0FBTyxDQUFDLFFBQVEsRUFBRSxHQUFHLFNBQVMsQ0FBQyxRQUFRLEVBQUUsR0FBSyxLQUFLLEdBQUcsRUFBRSxBQUFDLENBQUM7QUFDcEUsZ0JBQU07QUFBQSxBQUNSLGFBQUssQ0FBQztBQUNKLGdCQUFNLEdBQUcsSUFBSSxHQUFHLENBQUMsQ0FBQztBQUNsQixnQkFBTTtBQUFBLEFBQ1IsYUFBSyxDQUFDO0FBQ0osZ0JBQU0sR0FBRyxJQUFJLENBQUM7QUFDZCxnQkFBTTtBQUFBLEFBQ1IsZ0JBQVE7O09BRVQ7O0FBRUQsYUFBTyxJQUFJLENBQUMsS0FBSyxDQUFDLEFBQUMsTUFBTSxHQUFHLFFBQVEsR0FBSSxDQUFDLENBQUMsQ0FBQztLQUM1QztHQUNGLENBQUMsQ0FBQzs7QUFFSCxtQkFBSyxTQUFTLENBQUMsOEJBQThCLEVBQUUsT0FBTyxDQUFDLENBQUM7bUJBQ3pDLE9BQU8iLCJmaWxlIjoic3JjL1JlY3VycmVuY2UuanMiLCJzb3VyY2VSb290Ijoic3JjIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGxhbmcgZnJvbSAnZG9qby9fYmFzZS9sYW5nJztcclxuaW1wb3J0IHN0cmluZyBmcm9tICdkb2pvL3N0cmluZyc7XHJcbmltcG9ydCBnZXRSZXNvdXJjZSBmcm9tICdhcmdvcy9JMThuJztcclxuXHJcbmNvbnN0IHJlc291cmNlID0gZ2V0UmVzb3VyY2UoJ3JlY3VycmVuY2UnKTtcclxuXHJcbi8qKlxyXG4gKiBAY2xhc3MgY3JtLlJlY3VycmVuY2VcclxuICpcclxuICogQHJlcXVpcmVzIGFyZ29zLl9BY3Rpb25NaXhpblxyXG4gKiBAcmVxdWlyZXMgYXJnb3MuX0N1c3RvbWl6YXRpb25NaXhpblxyXG4gKiBAcmVxdWlyZXMgYXJnb3MuX1RlbXBsYXRlZFxyXG4gKlxyXG4gKi9cclxuY29uc3QgX19jbGFzcyA9IGxhbmcuc2V0T2JqZWN0KCdjcm0uUmVjdXJyZW5jZScsIHtcclxuICAvLyBMb2NhbGl6YXRpb25cclxuICBuZXZlclRleHQ6IHJlc291cmNlLm5ldmVyVGV4dCxcclxuICBkYXlzVGV4dDogcmVzb3VyY2UuZGF5c1RleHQsXHJcbiAgZGFpbHlUZXh0OiByZXNvdXJjZS5kYWlseVRleHQsXHJcbiAgd2Vla3NUZXh0OiByZXNvdXJjZS53ZWVrc1RleHQsXHJcbiAgd2Vla2x5VGV4dDogcmVzb3VyY2Uud2Vla2x5VGV4dCxcclxuICB3ZWVrbHlPblRleHQ6IHJlc291cmNlLndlZWtseU9uVGV4dCwgLy8gZWcuIHt3ZWVrbHl9IG9uIHtmcmlkYXl9XHJcbiAgbW9udGhzVGV4dDogcmVzb3VyY2UubW9udGhzVGV4dCxcclxuICBtb250aGx5VGV4dDogcmVzb3VyY2UubW9udGhseVRleHQsXHJcbiAgbW9udGhseU9uRGF5VGV4dDogcmVzb3VyY2UubW9udGhseU9uRGF5VGV4dCwgLy8gZWcuIHttb250aGx5fSBvbiBkYXkgezE1fVxyXG4gIG1vbnRobHlPblRleHQ6IHJlc291cmNlLm1vbnRobHlPblRleHQsIC8vIGVnLiB7bW9udGhseX0gb24ge3NlY29uZH0ge01vbmRheX1cclxuICB5ZWFyc1RleHQ6IHJlc291cmNlLnllYXJzVGV4dCxcclxuICB5ZWFybHlUZXh0OiByZXNvdXJjZS55ZWFybHlUZXh0LFxyXG4gIHllYXJseU9uVGV4dDogcmVzb3VyY2UueWVhcmx5T25UZXh0LCAvLyBlZy4ge3llYXJseX0gb24ge3Nob3J0X2RhdGV9XHJcbiAgeWVhcmx5T25XZWVrZGF5VGV4dDogcmVzb3VyY2UueWVhcmx5T25XZWVrZGF5VGV4dCwgLy8gZWcuIHt5ZWFybHl9IG9uIHtmaXJzdH0ge1RodXJzZGF5fSBpbiB7QXByaWx9XHJcbiAgZXZlcnlUZXh0OiByZXNvdXJjZS5ldmVyeVRleHQsIC8vIGVnLiBldmVyeSB7Mn0ge3dlZWtzfVxyXG4gIGFmdGVyQ29tcGxldGlvblRleHQ6IHJlc291cmNlLmFmdGVyQ29tcGxldGlvblRleHQsXHJcbiAgdW50aWxFbmREYXRlVGV4dDogcmVzb3VyY2UudW50aWxFbmREYXRlVGV4dCwgLy8gZWcuIHtkYWlseX0gdW50aWwgezMxLzEwLzIwMTJ9XHJcbiAgZGF5Rm9ybWF0VGV4dDogcmVzb3VyY2UuZGF5Rm9ybWF0VGV4dCxcclxuICBtb250aEZvcm1hdFRleHQ6IHJlc291cmNlLm1vbnRoRm9ybWF0VGV4dCxcclxuICBtb250aEFuZERheUZvcm1hdFRleHQ6IHJlc291cmNlLm1vbnRoQW5kRGF5Rm9ybWF0VGV4dCxcclxuICB3ZWVrZGF5Rm9ybWF0VGV4dDogcmVzb3VyY2Uud2Vla2RheUZvcm1hdFRleHQsXHJcbiAgZW5kRGF0ZUZvcm1hdFRleHQ6IHJlc291cmNlLmVuZERhdGVGb3JtYXRUZXh0LFxyXG4gIHdlZWtEYXlzVGV4dDogW1xyXG4gICAgcmVzb3VyY2Uuc3VuZGF5LFxyXG4gICAgcmVzb3VyY2UubW9uZGF5LFxyXG4gICAgcmVzb3VyY2UudHVlc2RheSxcclxuICAgIHJlc291cmNlLndlZG5lc2RheSxcclxuICAgIHJlc291cmNlLnRodXJzZGF5LFxyXG4gICAgcmVzb3VyY2UuZnJpZGF5LFxyXG4gICAgcmVzb3VyY2Uuc2F0dXJkYXksXHJcbiAgXSxcclxuICBvcmRUZXh0OiBbXHJcbiAgICByZXNvdXJjZS5kYXksXHJcbiAgICByZXNvdXJjZS5maXJzdCxcclxuICAgIHJlc291cmNlLnNlY29uZCxcclxuICAgIHJlc291cmNlLnRoaXJkLFxyXG4gICAgcmVzb3VyY2UuZm91cnRoLFxyXG4gICAgcmVzb3VyY2UubGFzdCxcclxuICBdLFxyXG5cclxuICBpbnRlcnZhbDogMSwgLy8gcmVwZWF0IGV2ZXJ5IGludGVydmFsIGRheXMvd2Vla3MvbW9udGhzL3llYXJzXHJcbiAgZGVmYXVsdEl0ZXJhdGlvbnM6IFsgLy8gYnkgUmVjdXJQZXJpb2QsIC0xIGZvciBBZnRlciBDb21wbGV0ZWQuIENvbmZpZ3VyYWJsZS5cclxuICAgIDcsIC8vIGRheXNcclxuICAgIC0xLFxyXG4gICAgOCwgLy8gd2Vla3NcclxuICAgIC0xLFxyXG4gICAgMTIsIC8vIG1vbnRoc1xyXG4gICAgMTIsIC0xLFxyXG4gICAgNSwgLy8geWVhcnNcclxuICAgIDUsIC0xLFxyXG4gIF0sXHJcbiAgX3dlZWtEYXlWYWx1ZXM6IFtcclxuICAgIDEzMTA3MiwgLy8gc3VuXHJcbiAgICAyNjIxNDQsIC8vIG1vblxyXG4gICAgNTI0Mjg4LCAvLyB0dWVcclxuICAgIDEwNDg1NzYsIC8vIHdlZFxyXG4gICAgMjA5NzE1MiwgLy8gdGh1XHJcbiAgICA0MTk0MzA0LCAvLyBmcmlcclxuICAgIDgzODg2MDgsIC8vIHNhdFxyXG4gIF0sXHJcbiAgc2ltcGxpZmllZE9wdGlvbnM6IFt7XHJcbiAgICBsYWJlbDogJ25ldmVyVGV4dCcsXHJcbiAgICBSZWN1cnJpbmc6IGZhbHNlLFxyXG4gICAgUmVjdXJQZXJpb2Q6IC0xLCAvLyBub3QgcmVjdXJyaW5nXHJcbiAgICBiYXNlUGVyaW9kU3BlYzogMCxcclxuICAgIFJlY3VyUGVyaW9kU3BlYzogMCxcclxuICAgIFJlY3VySXRlcmF0aW9uczogMCxcclxuICAgIFJlY3VycmVuY2VTdGF0ZTogJ3JzTm90UmVjdXJyaW5nJyxcclxuICB9LCB7XHJcbiAgICBsYWJlbDogJ2RhaWx5VGV4dCcsXHJcbiAgICBSZWN1cnJpbmc6IHRydWUsXHJcbiAgICBSZWN1clBlcmlvZDogMCxcclxuICAgIGJhc2VQZXJpb2RTcGVjOiAwLFxyXG4gICAgUmVjdXJQZXJpb2RTcGVjOiAwLFxyXG4gICAgUmVjdXJJdGVyYXRpb25zOiA3LCAvLyBvdmVycmlkZSBmcm9tIHRoaXMuZGVmYXVsdEl0ZXJhdGlvbnNcclxuICAgIFJlY3VycmVuY2VTdGF0ZTogJ3JzdE1hc3RlcicsXHJcbiAgfSwge1xyXG4gICAgbGFiZWw6ICd3ZWVrbHlPblRleHQnLFxyXG4gICAgUmVjdXJyaW5nOiB0cnVlLFxyXG4gICAgUmVjdXJQZXJpb2Q6IDIsXHJcbiAgICBiYXNlUGVyaW9kU3BlYzogMCxcclxuICAgIHdlZWtkYXlzOiBbMCwgMCwgMCwgMCwgMCwgMCwgMF0sIC8vIG5vbmUgc2VsZWN0ZWQgYnkgZGVmYXVsdFxyXG4gICAgUmVjdXJQZXJpb2RTcGVjOiAwLFxyXG4gICAgUmVjdXJJdGVyYXRpb25zOiA4LFxyXG4gICAgUmVjdXJyZW5jZVN0YXRlOiAncnN0TWFzdGVyJyxcclxuICAgIGNhbGM6IHRydWUsXHJcbiAgfSwge1xyXG4gICAgbGFiZWw6ICdtb250aGx5T25EYXlUZXh0JyxcclxuICAgIFJlY3VycmluZzogdHJ1ZSxcclxuICAgIFJlY3VyUGVyaW9kOiA0LFxyXG4gICAgYmFzZVBlcmlvZFNwZWM6IDEwNDg1NzYsXHJcbiAgICBSZWN1clBlcmlvZFNwZWM6IDAsXHJcbiAgICBSZWN1ckl0ZXJhdGlvbnM6IDEyLFxyXG4gICAgUmVjdXJyZW5jZVN0YXRlOiAncnN0TWFzdGVyJyxcclxuICB9LCB7XHJcbiAgICBsYWJlbDogJ21vbnRobHlPblRleHQnLFxyXG4gICAgUmVjdXJyaW5nOiB0cnVlLFxyXG4gICAgUmVjdXJQZXJpb2Q6IDUsXHJcbiAgICBiYXNlUGVyaW9kU3BlYzogMCxcclxuICAgIFJlY3VyUGVyaW9kU3BlYzogMCxcclxuICAgIFJlY3VySXRlcmF0aW9uczogMTIsXHJcbiAgICBSZWN1cnJlbmNlU3RhdGU6ICdyc3RNYXN0ZXInLFxyXG4gICAgY2FsYzogdHJ1ZSxcclxuICB9LCB7XHJcbiAgICBsYWJlbDogJ3llYXJseU9uVGV4dCcsXHJcbiAgICBSZWN1cnJpbmc6IHRydWUsXHJcbiAgICBSZWN1clBlcmlvZDogNyxcclxuICAgIGJhc2VQZXJpb2RTcGVjOiAzODc5NzMxMixcclxuICAgIFJlY3VyUGVyaW9kU3BlYzogMCxcclxuICAgIFJlY3VySXRlcmF0aW9uczogNSxcclxuICAgIFJlY3VycmVuY2VTdGF0ZTogJ3JzdE1hc3RlcicsXHJcbiAgfSwge1xyXG4gICAgLy8gTmVlZCBvbmUgbW9yZSBmb3IgWWVhcmx5IG9uICNvcmQgI3dlZWtkYXkgb2YgbW9udGhcclxuICAgIGxhYmVsOiAneWVhcmx5T25XZWVrZGF5VGV4dCcsXHJcbiAgICBSZWN1cnJpbmc6IHRydWUsXHJcbiAgICBSZWN1clBlcmlvZDogOCxcclxuICAgIGJhc2VQZXJpb2RTcGVjOiAwLFxyXG4gICAgUmVjdXJQZXJpb2RTcGVjOiAwLFxyXG4gICAgd2Vla2RheXM6IFswLCAwLCAwLCAwLCAwLCAwLCAwXSxcclxuICAgIFJlY3VySXRlcmF0aW9uczogNSxcclxuICAgIFJlY3VycmVuY2VTdGF0ZTogJ3JzdE1hc3RlcicsXHJcbiAgfV0sXHJcblxyXG4gIGNyZWF0ZVNpbXBsaWZpZWRPcHRpb25zOiBmdW5jdGlvbiBjcmVhdGVTaW1wbGlmaWVkT3B0aW9ucyhzdGFydERhdGUpIHtcclxuICAgIHRoaXMucmVjYWxjdWxhdGVTaW1wbGlmaWVkUGVyaW9kU3BlYyhzdGFydERhdGUpO1xyXG5cclxuICAgIGNvbnN0IGxpc3QgPSBbXTtcclxuICAgIGNvbnN0IGN1cnJlbnREYXRlID0gc3RhcnREYXRlIHx8IG5ldyBEYXRlKCk7XHJcbiAgICBjb25zdCB3cmFwcGVkID0gbW9tZW50KGN1cnJlbnREYXRlKTtcclxuICAgIGNvbnN0IGRheSA9IGN1cnJlbnREYXRlLmdldERhdGUoKTtcclxuICAgIGNvbnN0IG9yZCA9IHRoaXMub3JkVGV4dFtwYXJzZUludCgoKGRheSAtIDEpIC8gNykudG9TdHJpbmcoKSwgMTApICsgMV07XHJcbiAgICBjb25zdCB0ZXh0T3B0aW9ucyA9IFtcclxuICAgICAgbnVsbCwgLy8gc2NhbGUsIHJlcGxhY2VkIGluIGxvb3BcclxuICAgICAgZGF5LFxyXG4gICAgICB3cmFwcGVkLmZvcm1hdCh0aGlzLmRheUZvcm1hdFRleHQpLFxyXG4gICAgICB3cmFwcGVkLmxvY2FsZURhdGEoKS53ZWVrZGF5cyh3cmFwcGVkKSxcclxuICAgICAgd3JhcHBlZC5sb2NhbGVEYXRhKCkubW9udGhzU2hvcnQod3JhcHBlZCksXHJcbiAgICAgIG9yZCxcclxuICAgIF07XHJcblxyXG4gICAgZm9yIChjb25zdCByZWN1ck9wdGlvbiBpbiB0aGlzLnNpbXBsaWZpZWRPcHRpb25zKSB7XHJcbiAgICAgIGlmICh0aGlzLnNpbXBsaWZpZWRPcHRpb25zLmhhc093blByb3BlcnR5KHJlY3VyT3B0aW9uKSkge1xyXG4gICAgICAgIHRleHRPcHRpb25zWzBdID0gdGhpcy5nZXRQYW5lbCh0aGlzLnNpbXBsaWZpZWRPcHRpb25zW3JlY3VyT3B0aW9uXS5SZWN1clBlcmlvZCk7XHJcbiAgICAgICAgdGhpcy5zaW1wbGlmaWVkT3B0aW9uc1tyZWN1ck9wdGlvbl0uUmVjdXJJdGVyYXRpb25zID0gdGhpcy5kZWZhdWx0SXRlcmF0aW9uc1t0aGlzLnNpbXBsaWZpZWRPcHRpb25zW3JlY3VyT3B0aW9uXS5SZWN1clBlcmlvZF0gfHwgMDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXNbdGhpcy5zaW1wbGlmaWVkT3B0aW9uc1tyZWN1ck9wdGlvbl0ubGFiZWxdKSB7XHJcbiAgICAgICAgICBsaXN0LnB1c2goe1xyXG4gICAgICAgICAgICAnJGtleSc6IHJlY3VyT3B0aW9uLCAvLyB0aGlzLnNpbXBsaWZpZWRPcHRpb25zW3JlY3VyT3B0aW9uXS5SZWN1clBlcmlvZCxcclxuICAgICAgICAgICAgJyRkZXNjcmlwdG9yJzogc3RyaW5nLnN1YnN0aXR1dGUodGhpc1t0aGlzLnNpbXBsaWZpZWRPcHRpb25zW3JlY3VyT3B0aW9uXS5sYWJlbF0sIHRleHRPcHRpb25zKSxcclxuICAgICAgICAgICAgJ3JlY3VycmVuY2UnOiB0aGlzLnNpbXBsaWZpZWRPcHRpb25zW3JlY3VyT3B0aW9uXSxcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICckcmVzb3VyY2VzJzogbGlzdCxcclxuICAgIH07XHJcbiAgfSxcclxuICBnZXRQYW5lbDogZnVuY3Rpb24gZ2V0UGFuZWwocmVjdXJQZXJpb2QsIHBsdXJhbCkge1xyXG4gICAgc3dpdGNoIChyZWN1clBlcmlvZCkge1xyXG4gICAgICBjYXNlIDA6XHJcbiAgICAgIGNhc2UgMTpcclxuICAgICAgICByZXR1cm4gcGx1cmFsID8gdGhpcy5kYXlzVGV4dCA6IHRoaXMuZGFpbHlUZXh0O1xyXG4gICAgICBjYXNlIDI6XHJcbiAgICAgIGNhc2UgMzpcclxuICAgICAgICByZXR1cm4gcGx1cmFsID8gdGhpcy53ZWVrc1RleHQgOiB0aGlzLndlZWtseVRleHQ7XHJcbiAgICAgIGNhc2UgNDpcclxuICAgICAgY2FzZSA1OlxyXG4gICAgICBjYXNlIDY6XHJcbiAgICAgICAgcmV0dXJuIHBsdXJhbCA/IHRoaXMubW9udGhzVGV4dCA6IHRoaXMubW9udGhseVRleHQ7XHJcbiAgICAgIGNhc2UgNzpcclxuICAgICAgY2FzZSA4OlxyXG4gICAgICBjYXNlIDk6XHJcbiAgICAgICAgcmV0dXJuIHBsdXJhbCA/IHRoaXMueWVhcnNUZXh0IDogdGhpcy55ZWFybHlUZXh0O1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIHJldHVybiB0aGlzLm5ldmVyVGV4dDtcclxuICAgIH1cclxuICB9LFxyXG4gIGlzQWZ0ZXJDb21wbGV0aW9uOiBmdW5jdGlvbiBpc0FmdGVyQ29tcGxldGlvbihwYW5lbCkge1xyXG4gICAgcmV0dXJuICcxMzY5Jy5pbmRleE9mKHBhbmVsKSA+PSAwO1xyXG4gIH0sXHJcbiAgcmVjYWxjdWxhdGVTaW1wbGlmaWVkUGVyaW9kU3BlYzogZnVuY3Rpb24gcmVjYWxjdWxhdGVTaW1wbGlmaWVkUGVyaW9kU3BlYyhzdGFydERhdGUpIHtcclxuICAgIGZvciAoY29uc3QgcmVjdXJPcHRpb24gaW4gdGhpcy5zaW1wbGlmaWVkT3B0aW9ucykge1xyXG4gICAgICBpZiAodGhpcy5zaW1wbGlmaWVkT3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShyZWN1ck9wdGlvbikpIHtcclxuICAgICAgICBjb25zdCBvcHQgPSB0aGlzLnNpbXBsaWZpZWRPcHRpb25zW3JlY3VyT3B0aW9uXTtcclxuICAgICAgICB0aGlzLnNpbXBsaWZpZWRPcHRpb25zW3JlY3VyT3B0aW9uXS5SZWN1clBlcmlvZFNwZWMgPSB0aGlzLmdldFJlY3VyUGVyaW9kU3BlYyhcclxuICAgICAgICAgIG9wdC5SZWN1clBlcmlvZCxcclxuICAgICAgICAgIHN0YXJ0RGF0ZSxcclxuICAgICAgICAgIG9wdC53ZWVrZGF5c1xyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LFxyXG4gIGdldFdlZWtkYXlzOiBmdW5jdGlvbiBnZXRXZWVrZGF5cyhycHMsIG5hbWVzKSB7IC8vIHBhc3MgYSBSZWN1clBlcmlvZFNwZWMgKGFzIGxvbmcgYXMgUmVjdXJQZXJpb2QgY29ycmVzcG9uZHMgdG8gYSBTcGVjIHdpdGggd2Vla2RheXMpXHJcbiAgICBjb25zdCB3ZWVrZGF5cyA9IFtdO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl93ZWVrRGF5VmFsdWVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGlmIChuYW1lcykge1xyXG4gICAgICAgIGlmIChycHMgJiB0aGlzLl93ZWVrRGF5VmFsdWVzW2ldKSB7XHJcbiAgICAgICAgICB3ZWVrZGF5cy5wdXNoKHRoaXMud2Vla0RheXNUZXh0W2ldKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgd2Vla2RheXMucHVzaCgocnBzICYgdGhpcy5fd2Vla0RheVZhbHVlc1tpXSkgPyAxIDogMCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gd2Vla2RheXM7XHJcbiAgfSxcclxuICBnZXRPcmQ6IGZ1bmN0aW9uIGdldE9yZChlbnRyeSkge1xyXG4gICAgbGV0IG50aFdlZWsgPSAwO1xyXG4gICAgbGV0IHdlZWtkYXkgPSBlbnRyeS5TdGFydERhdGUuZ2V0RGF5KCk7XHJcbiAgICBsZXQgbW9udGhOdW0gPSBlbnRyeS5TdGFydERhdGUuZ2V0TW9udGgoKSArIDE7XHJcbiAgICBjb25zdCBvcmRCaXRzID0gZW50cnkuUmVjdXJQZXJpb2RTcGVjICUgNTI0Mjg4O1xyXG4gICAgY29uc3QgbW9udGhCaXRzID0gZW50cnkuUmVjdXJQZXJpb2RTcGVjICUgNDE5NDMwNCAtIG9yZEJpdHM7XHJcblxyXG4gICAgaWYgKGVudHJ5ICYmIChlbnRyeS5SZWN1clBlcmlvZCA9PT0gNSB8fCBlbnRyeS5SZWN1clBlcmlvZCA9PT0gOCkpIHtcclxuICAgICAgbnRoV2VlayA9IHBhcnNlSW50KChvcmRCaXRzIC8gNjU1MzYpLnRvU3RyaW5nKCksIDEwKSArIDE7XHJcbiAgICAgIHdlZWtkYXkgPSBwYXJzZUludCgobW9udGhCaXRzIC8gNTI0Mjg4KS50b1N0cmluZygpLCAxMCkgLSAxO1xyXG4gICAgICBtb250aE51bSA9IHBhcnNlSW50KCgoZW50cnkuUmVjdXJQZXJpb2RTcGVjIC0gbW9udGhCaXRzIC0gb3JkQml0cykgLyA0MTk0MzA0KS50b1N0cmluZygpLCAxMCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgd2VlazogbnRoV2VlayxcclxuICAgICAgd2Vla2RheTogd2Vla2RheSxcclxuICAgICAgbW9udGg6IG1vbnRoTnVtLFxyXG4gICAgfTtcclxuICB9LFxyXG4gIGdldFJlY3VyUGVyaW9kU3BlYzogZnVuY3Rpb24gZ2V0UmVjdXJQZXJpb2RTcGVjKHJlY3VyUGVyaW9kLCBzdGFydERhdGUsIHdlZWtkYXlzLCBpbnRlcikge1xyXG4gICAgbGV0IHNwZWMgPSAwO1xyXG4gICAgbGV0IGludGVydmFsID0gaW50ZXIgfHwgdGhpcy5pbnRlcnZhbDtcclxuICAgIGxldCB3ZWVrRGF5O1xyXG4gICAgbGV0IG50aFdlZWs7XHJcbiAgICBsZXQgbW9udGhOdW07XHJcblxyXG4gICAgaWYgKCFzdGFydERhdGUpIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgc3dpdGNoIChyZWN1clBlcmlvZCkge1xyXG4gICAgICBjYXNlIDA6XHJcbiAgICAgICAgLy8gZGFpbHlcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAxOlxyXG4gICAgICAgIC8vIGRhaWx5IG9jY3VyYW5jZXMgKmFmdGVyIGNvbXBsZXRpb24qXHJcbiAgICAgICAgLy9cclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAyOlxyXG4gICAgICAgIC8vIHdlZWtseVxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgd2Vla2RheXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIHNwZWMgKz0gKHdlZWtkYXlzW2ldID8gdGhpcy5fd2Vla0RheVZhbHVlc1tpXSA6IDApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc3BlYyA9PT0gMCkge1xyXG4gICAgICAgICAgc3BlYyArPSB0aGlzLl93ZWVrRGF5VmFsdWVzW3N0YXJ0RGF0ZS5nZXREYXkoKV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAzOlxyXG4gICAgICAgIC8vIHdlZWtseSBvY2N1cmFuY2VzICphZnRlciBjb21wbGV0aW9uKlxyXG4gICAgICAgIHNwZWMgPSAxMDQ4NTc2O1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIDQ6XHJcbiAgICAgICAgLy8gbW9udGhseSBvbiBkYXkgIyNcclxuICAgICAgICBzcGVjID0gMTA0ODU3NjtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSA1OlxyXG4gICAgICAgIC8vIG1vbnRobHkgb24gI29yZCAjd2Vla2RheVxyXG4gICAgICAgIHdlZWtEYXkgPSBzdGFydERhdGUuZ2V0RGF5KCkgKyAxO1xyXG4gICAgICAgIG50aFdlZWsgPSBwYXJzZUludCgoKHN0YXJ0RGF0ZS5nZXREYXRlKCkgLSAxKSAvIDcpLnRvU3RyaW5nKCksIDEwKSArIDE7XHJcbiAgICAgICAgc3BlYyA9ICgod2Vla0RheSAqIDUyNDI4OCkgKyAoKG50aFdlZWsgLSAxKSAqIDY1NTM2KSk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgNjpcclxuICAgICAgICAvLyBtb250aGx5IG9jY3VyYW5jZXMgKmFmdGVyIGNvbXBsZXRpb24qXHJcbiAgICAgICAgc3BlYyA9IDEwNDg1NzY7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgNzpcclxuICAgICAgICAvLyB5ZWFybHkgb24gI21vbnRoICNkYXlcclxuICAgICAgICBzcGVjID0gMzg3OTczMTI7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgODpcclxuICAgICAgICAvLyB5ZWFybHkgb24gI29yZCAjd2Vla2RheSBvZiAjbW9udGhcclxuICAgICAgICBzcGVjID0gMTg1NDY2ODg7XHJcbiAgICAgICAgd2Vla0RheSA9IHN0YXJ0RGF0ZS5nZXREYXkoKSArIDE7XHJcbiAgICAgICAgbW9udGhOdW0gPSBzdGFydERhdGUuZ2V0TW9udGgoKSArIDE7XHJcbiAgICAgICAgbnRoV2VlayA9IHBhcnNlSW50KCgoc3RhcnREYXRlLmdldERhdGUoKSAtIDEpIC8gNykudG9TdHJpbmcoKSwgMTApICsgMTtcclxuICAgICAgICBzcGVjID0gKChtb250aE51bSAqIDQxOTQzMDQpICsgKHdlZWtEYXkgKiA1MjQyODgpICsgKChudGhXZWVrIC0gMSkgKiA2NTUzNikpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIDk6XHJcbiAgICAgICAgLy8geWVhcmx5IG9jY3VyYW5jZXMgKmFmdGVyIGNvbXBsZXRpb24qXHJcbiAgICAgICAgc3BlYyA9IDM4Nzk3MzEyO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIC8vIE5vdCByZWN1cnJpbmcsIGhhcHBlbnMgb25seSBvbmNlXHJcbiAgICAgICAgaW50ZXJ2YWwgPSAwO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBzcGVjICsgaW50ZXJ2YWw7IC8vICsgZXZlcnkgaW50ZXJ2YWwgZGF5cy93ZWVrcy9tb250aHMveWVhcnNcclxuICB9LFxyXG5cclxuICB0b1N0cmluZzogZnVuY3Rpb24gdG9TdHJpbmcoZW50cnksIGRlcGVuZHNPblBhbmVsKSB7XHJcbiAgICBpZiAoZW50cnkuUmVjdXJyZW5jZVN0YXRlICE9PSAncnN0TWFzdGVyJyB8fCAhZW50cnkuU3RhcnREYXRlKSB7XHJcbiAgICAgIHJldHVybiAnJztcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBycCA9IHBhcnNlSW50KGVudHJ5LlJlY3VyUGVyaW9kLCAxMCk7XHJcbiAgICBjb25zdCByZWN1clBlcmlvZFNwZWMgPSBwYXJzZUludChlbnRyeS5SZWN1clBlcmlvZFNwZWMsIDEwKTtcclxuICAgIGNvbnN0IGludGVydmFsID0gcmVjdXJQZXJpb2RTcGVjICUgNjU1MzY7XHJcbiAgICBsZXQgdGV4dCA9ICgxIDwgaW50ZXJ2YWwpID8gc3RyaW5nLnN1YnN0aXR1dGUodGhpcy5ldmVyeVRleHQsIFtpbnRlcnZhbCwgdGhpcy5nZXRQYW5lbChycCwgdHJ1ZSldKSA6ICgodHJ1ZSA9PT0gZGVwZW5kc09uUGFuZWwpID8gJycgOiB0aGlzLmdldFBhbmVsKHJwKSk7Ly8gZXNsaW50LWRpc2FibGUtbGluZVxyXG4gICAgY29uc3QgY3VycmVudERhdGUgPSBhcmdvcy5Db252ZXJ0LnRvRGF0ZUZyb21TdHJpbmcoZW50cnkuU3RhcnREYXRlKTtcclxuICAgIGNvbnN0IGRheSA9IGN1cnJlbnREYXRlLmdldERhdGUoKTtcclxuICAgIGNvbnN0IHdlZWtkYXkgPSBtb21lbnQoY3VycmVudERhdGUpLmZvcm1hdCh0aGlzLndlZWtkYXlGb3JtYXRUZXh0KTtcclxuICAgIGNvbnN0IHRleHRPcHRpb25zID0gW1xyXG4gICAgICB0ZXh0LFxyXG4gICAgICBkYXksXHJcbiAgICAgIG1vbWVudChjdXJyZW50RGF0ZSkuZm9ybWF0KHRoaXMubW9udGhBbmREYXlGb3JtYXRUZXh0KSxcclxuICAgICAgdGhpcy5nZXRXZWVrZGF5cyhyZWN1clBlcmlvZFNwZWMsIHRydWUpLFxyXG4gICAgICBtb21lbnQoY3VycmVudERhdGUpLmZvcm1hdCh0aGlzLm1vbnRoRm9ybWF0VGV4dCksXHJcbiAgICAgIHRoaXMub3JkVGV4dFtwYXJzZUludCgoKGRheSAtIDEpIC8gNykudG9TdHJpbmcoKSwgMTApICsgMV0sXHJcbiAgICBdO1xyXG5cclxuICAgIHN3aXRjaCAocnApIHtcclxuICAgICAgY2FzZSAwOlxyXG4gICAgICAgIC8vIGRhaWx5XHJcbiAgICAgIGNhc2UgMTpcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAyOlxyXG4gICAgICAgIC8vIHdlZWtseVxyXG4gICAgICAgIHRleHRPcHRpb25zWzJdID0gdGhpcy5nZXRXZWVrZGF5cyhyZWN1clBlcmlvZFNwZWMsIHRydWUpO1xyXG4gICAgICAgIHRleHQgPSBzdHJpbmcuc3Vic3RpdHV0ZSh0aGlzLndlZWtseU9uVGV4dCwgdGV4dE9wdGlvbnMpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIDM6XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgNDpcclxuICAgICAgICAvLyBtb250aGx5XHJcbiAgICAgICAgdGV4dCA9IHN0cmluZy5zdWJzdGl0dXRlKHRoaXMubW9udGhseU9uRGF5VGV4dCwgdGV4dE9wdGlvbnMpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIDU6XHJcbiAgICAgICAgdGV4dE9wdGlvbnNbM10gPSB3ZWVrZGF5O1xyXG4gICAgICAgIHRleHQgPSBzdHJpbmcuc3Vic3RpdHV0ZSh0aGlzLm1vbnRobHlPblRleHQsIHRleHRPcHRpb25zKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSA2OlxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIDc6XHJcbiAgICAgICAgLy8geWVhcmx5XHJcbiAgICAgICAgdGV4dCA9IHN0cmluZy5zdWJzdGl0dXRlKHRoaXMueWVhcmx5T25UZXh0LCB0ZXh0T3B0aW9ucyk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgODpcclxuICAgICAgICB0ZXh0T3B0aW9uc1szXSA9IHdlZWtkYXk7XHJcbiAgICAgICAgdGV4dCA9IHN0cmluZy5zdWJzdGl0dXRlKHRoaXMueWVhcmx5T25XZWVrZGF5VGV4dCwgdGV4dE9wdGlvbnMpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIDk6XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLmlzQWZ0ZXJDb21wbGV0aW9uKHJwKSkge1xyXG4gICAgICB0ZXh0ID0gc3RyaW5nLnN1YnN0aXR1dGUoJyR7MH0gJHsxfScsIFt0ZXh0LCB0aGlzLmFmdGVyQ29tcGxldGlvblRleHRdKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRleHQgPSBzdHJpbmcuc3Vic3RpdHV0ZSh0aGlzLnVudGlsRW5kRGF0ZVRleHQsIFt0ZXh0LCB0aGlzLmNhbGNFbmREYXRlKGN1cnJlbnREYXRlLCBlbnRyeSkuZm9ybWF0KHRoaXMuZW5kRGF0ZUZvcm1hdFRleHQpXSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRleHQ7XHJcbiAgfSxcclxuICBjYWxjRW5kRGF0ZTogZnVuY3Rpb24gY2FsY0VuZERhdGUoZGF0ZSwgZW50cnkpIHtcclxuICAgIGNvbnN0IGludGVydmFsID0gZW50cnkuUmVjdXJQZXJpb2RTcGVjICUgNjU1MzY7XHJcbiAgICBsZXQgd2Vla0RheTtcclxuICAgIGxldCBudGhXZWVrO1xyXG4gICAgbGV0IHRlbXBEYXRlID0gbW9tZW50LmlzTW9tZW50KGRhdGUpID8gZGF0ZS5jbG9uZSgpIDpcclxuICAgICAgbmV3IERhdGUoZGF0ZS5nZXRGdWxsWWVhcigpLCBkYXRlLmdldE1vbnRoKCksIGRhdGUuZ2V0RGF0ZSgpLCBkYXRlLmdldEhvdXJzKCksIGRhdGUuZ2V0TWludXRlcygpLCBkYXRlLmdldFNlY29uZHMoKSk7XHJcblxyXG4gICAgdGVtcERhdGUgPSBtb21lbnQodGVtcERhdGUpO1xyXG4gICAgc3dpdGNoIChwYXJzZUludChlbnRyeS5SZWN1clBlcmlvZCwgMTApKSB7XHJcbiAgICAgIGNhc2UgMDpcclxuICAgICAgICB0ZW1wRGF0ZS5hZGQoKGludGVydmFsICogKGVudHJ5LlJlY3VySXRlcmF0aW9ucyAtIDEpKSwgJ2RheXMnKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAyOlxyXG4gICAgICAgIHRlbXBEYXRlLmFkZCgoaW50ZXJ2YWwgKiAoZW50cnkuUmVjdXJJdGVyYXRpb25zIC0gMSkpLCAnd2Vla3MnKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSA0OlxyXG4gICAgICAgIHRlbXBEYXRlLmFkZCgoaW50ZXJ2YWwgKiAoZW50cnkuUmVjdXJJdGVyYXRpb25zIC0gMSkpLCAnbW9udGhzJyk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgNTpcclxuICAgICAgICB3ZWVrRGF5ID0gdGVtcERhdGUuZGF5KCk7XHJcbiAgICAgICAgbnRoV2VlayA9IHBhcnNlSW50KCh0ZW1wRGF0ZS5kYXRlKCkgLyA3KS50b1N0cmluZygpLCAxMCkgKyAxO1xyXG4gICAgICAgIHRlbXBEYXRlLmFkZCgoaW50ZXJ2YWwgKiAoZW50cnkuUmVjdXJJdGVyYXRpb25zIC0gMSkpLCAnbW9udGhzJyk7XHJcbiAgICAgICAgdGVtcERhdGUgPSB0aGlzLmNhbGNEYXRlT2ZOdGhXZWVrZGF5KHRlbXBEYXRlLnRvRGF0ZSgpLCB3ZWVrRGF5LCBudGhXZWVrKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSA3OlxyXG4gICAgICAgIHRlbXBEYXRlLmFkZCgoaW50ZXJ2YWwgKiAoZW50cnkuUmVjdXJJdGVyYXRpb25zIC0gMSkpLCAneWVhcnMnKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSA4OlxyXG4gICAgICAgIHdlZWtEYXkgPSB0ZW1wRGF0ZS5kYXkoKTtcclxuICAgICAgICBudGhXZWVrID0gcGFyc2VJbnQoKHRlbXBEYXRlLmRhdGUoKSAvIDcpLnRvU3RyaW5nKCksIDEwKSArIDE7XHJcbiAgICAgICAgdGVtcERhdGUuYWRkKChpbnRlcnZhbCAqIChlbnRyeS5SZWN1ckl0ZXJhdGlvbnMgLSAxKSksICd5ZWFycycpO1xyXG4gICAgICAgIHRlbXBEYXRlID0gdGhpcy5jYWxjRGF0ZU9mTnRoV2Vla2RheSh0ZW1wRGF0ZS50b0RhdGUoKSwgd2Vla0RheSwgbnRoV2Vlayk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgLy8gUmVjdXJQZXJpb2QgMSwgMywgNiAmIDkgYXJlIGl0ZXJhdGlvbnMgYWZ0ZXIgY29tcGxldGlvbi4gTm8gZW5kIGRhdGUuXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRlbXBEYXRlO1xyXG4gIH0sXHJcbiAgY2FsY0RhdGVPZk50aFdlZWtkYXk6IGZ1bmN0aW9uIGNhbGNEYXRlT2ZOdGhXZWVrZGF5KGRhdGUsIHdlZWtEYXksIG50aFdlZWspIHtcclxuICAgIC8vIGNhbGN1bGF0ZSBkYXRlIG9mICNudGhXZWVrICN3ZWVrRGF5ICBlLmcuIEZpcnN0IEZyaWRheVxyXG4gICAgbGV0IHRlbXBEYXRlID0gbmV3IERhdGUoZGF0ZS5nZXRGdWxsWWVhcigpLCBkYXRlLmdldE1vbnRoKCksIGRhdGUuZ2V0RGF0ZSgpKTtcclxuICAgIHRlbXBEYXRlID0gbW9tZW50KHRlbXBEYXRlKTtcclxuXHJcbiAgICBpZiAobnRoV2VlayA9PT0gNSkge1xyXG4gICAgICAvLyBcImxhc3RcIiAtIGNvdW50IGJhY2t3YXJkcy4uLlxyXG4gICAgICB0ZW1wRGF0ZS5lbmRPZignbW9udGgnKTtcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA3OyBpKyspIHtcclxuICAgICAgICBpZiAodGVtcERhdGUuZGF5KCkgPT09IHdlZWtEYXkpIHtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0ZW1wRGF0ZS5zdWJ0cmFjdCgxLCAnZGF5cycpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBjb3VudCBmcm9tIHRoZSBiZWdpbm5pbmcuLi5cclxuICAgICAgdGVtcERhdGUuc3RhcnRPZignbW9udGgnKTtcclxuICAgICAgLy8gZ2V0IHRvIHRoZSBmaXJzdCBkYXkgdGhhdCBtYXRjaGVzLi4uXHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNzsgaSsrKSB7XHJcbiAgICAgICAgaWYgKHRlbXBEYXRlLmRheSgpID09PSB3ZWVrRGF5KSB7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGVtcERhdGUuYWRkKDEsICdkYXlzJyk7XHJcbiAgICAgIH1cclxuICAgICAgLy8gdGhlbiBhZGQgY29ycmVjdCBudW1iZXIgb2Ygd2Vla3MgKGZpcnN0IHdlZWsgLSBhZGQgMCBldGMuKVxyXG4gICAgICB0ZW1wRGF0ZS5hZGQoKG50aFdlZWsgLSAxKSwgJ3dlZWtzJyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGVtcERhdGU7XHJcbiAgfSxcclxuICBjYWxjUmVjdXJJdGVyYXRpb25zOiBmdW5jdGlvbiBjYWxjUmVjdXJJdGVyYXRpb25zKGVuZERhdGUsIHN0YXJ0RGF0ZSwgaW50ZXJ2YWwsIHJlY3VyUGVyaW9kKSB7XHJcbiAgICAvLyBjYWxjdWxhdGUgbnVtYmVyIG9mIG9jY3VyYW5jZXMgYmFzZWQgb24gc3RhcnQgYW5kIGVuZCBkYXRlc1xyXG4gICAgY29uc3QgZGF5cyA9IChlbmREYXRlIC0gc3RhcnREYXRlKSAvICgxMDAwICogNjAgKiA2MCAqIDI0KTtcclxuICAgIGNvbnN0IHllYXJzID0gZW5kRGF0ZS5nZXRGdWxsWWVhcigpIC0gc3RhcnREYXRlLmdldEZ1bGxZZWFyKCk7XHJcbiAgICBsZXQgcmVzdWx0O1xyXG5cclxuICAgIHN3aXRjaCAocGFyc2VJbnQocmVjdXJQZXJpb2QsIDEwKSkge1xyXG4gICAgICBjYXNlIDg6XHJcbiAgICAgIGNhc2UgNzpcclxuICAgICAgICByZXN1bHQgPSB5ZWFycztcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSA1OlxyXG4gICAgICBjYXNlIDQ6XHJcbiAgICAgICAgcmVzdWx0ID0gKGVuZERhdGUuZ2V0TW9udGgoKSAtIHN0YXJ0RGF0ZS5nZXRNb250aCgpKSArICh5ZWFycyAqIDEyKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAyOlxyXG4gICAgICAgIHJlc3VsdCA9IGRheXMgLyA3O1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIDA6XHJcbiAgICAgICAgcmVzdWx0ID0gZGF5cztcclxuICAgICAgICBicmVhaztcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICAvLyBubyBjYXNlcyBzaG91bGQgZmFsbCBoZXJlXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIE1hdGguZmxvb3IoKHJlc3VsdCAvIGludGVydmFsKSArIDEpO1xyXG4gIH0sXHJcbn0pO1xyXG5cclxubGFuZy5zZXRPYmplY3QoJ01vYmlsZS5TYWxlc0xvZ2l4LlJlY3VycmVuY2UnLCBfX2NsYXNzKTtcclxuZXhwb3J0IGRlZmF1bHQgX19jbGFzcztcclxuIl19
</pre>
</body>
</html>
