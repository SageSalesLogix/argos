<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">define('crm/Application', ['exports', 'module', 'dojo/_base/declare', 'dojo/_base/array', 'dojo/_base/connect', 'dojo/json', 'dojo/_base/lang', 'dojo/has', 'dojo/string', 'dojo/Deferred', './DefaultMetrics', 'argos/ErrorManager', './Environment', 'argos/Application', 'argos/Dialogs/Toast', 'argos/Offline/Manager', 'argos/Models/Types', 'argos/Dialogs/BusyIndicator', 'argos/I18n', 'dojo/sniff'], function (exports, module, _dojo_baseDeclare, _dojo_baseArray, _dojo_baseConnect, _dojoJson, _dojo_baseLang, _dojoHas, _dojoString, _dojoDeferred, _DefaultMetrics, _argosErrorManager, _Environment, _argosApplication, _argosDialogsToast, _argosOfflineManager, _argosModelsTypes, _argosDialogsBusyIndicator, _argosI18n, _dojoSniff) {
  var _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i &amp;&amp; _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n &amp;&amp; _i['return']) _i['return'](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError('Invalid attempt to destructure non-iterable instance'); } }; })();

  function _interopRequireDefault(obj) { return obj &amp;&amp; obj.__esModule ? obj : { 'default': obj }; }

  var _declare = _interopRequireDefault(_dojo_baseDeclare);

  var _array = _interopRequireDefault(_dojo_baseArray);

  var _connect = _interopRequireDefault(_dojo_baseConnect);

  var _json = _interopRequireDefault(_dojoJson);

  var _lang = _interopRequireDefault(_dojo_baseLang);

  var _has = _interopRequireDefault(_dojoHas);

  var _string = _interopRequireDefault(_dojoString);

  var _Deferred = _interopRequireDefault(_dojoDeferred);

  var _DefaultMetrics2 = _interopRequireDefault(_DefaultMetrics);

  var _ErrorManager = _interopRequireDefault(_argosErrorManager);

  var _environment = _interopRequireDefault(_Environment);

  var _Application = _interopRequireDefault(_argosApplication);

  var _Toast = _interopRequireDefault(_argosDialogsToast);

  var _offlineManager = _interopRequireDefault(_argosOfflineManager);

  var _MODEL_TYPES = _interopRequireDefault(_argosModelsTypes);

  var _BusyIndicator = _interopRequireDefault(_argosDialogsBusyIndicator);

  var _getResource = _interopRequireDefault(_argosI18n);

  var resource = (0, _getResource['default'])('application');

<span id='crm-Application'>  /**
</span>   * @class crm.Application
   *
   * @extends argos.Application
   * @requires argos.ErrorManager
   * @requires crm.Environment
   * @requires moment
   *
   */
  var __class = (0, _declare['default'])('crm.Application', [_Application['default']], {
    navigationState: null,
    rememberNavigationState: true,
    enableUpdateNotification: false,
    multiCurrency: false,
    enableGroups: true,
    enableHashTags: true,
    enableOfflineSupport: false,
    speedSearch: {
      includeStemming: true,
      includePhonic: true,
      includeThesaurus: false,
      useFrequentFilter: false,
      searchType: 1
    },
    enableCaching: true,
    userDetailsQuerySelect: ['UserName', 'UserInfo/UserName', 'UserInfo/FirstName', 'UserInfo/LastName', 'DefaultOwner/OwnerDescription'],
    userOptionsToRequest: ['DefaultGroup;ACCOUNT', 'DefaultGroup;CONTACT', 'DefaultGroup;OPPORTUNITY', 'DefaultGroup;LEAD', 'DefaultGroup;TICKET', 'General;InsertSecCodeID', 'General;Currency', 'Calendar;DayStartTime', 'Calendar;WeekStart', 'ActivityMeetingOptions;AlarmEnabled', 'ActivityMeetingOptions;AlarmLead', 'ActivityMeetingOptions;Duration', 'ActivityPhoneOptions;AlarmEnabled', 'ActivityPhoneOptions;AlarmLead', 'ActivityPhoneOptions;Duration', 'ActivityToDoOptions;AlarmEnabled', 'ActivityToDoOptions;AlarmLead', 'ActivityToDoOptions;Duration', 'ActivityPersonalOptions;AlarmEnabled', 'ActivityPersonalOptions;AlarmLead', 'ActivityPersonalOptions;Duration'],
    systemOptionsToRequest: ['BaseCurrency', 'MultiCurrency', 'ChangeOpportunityRate', 'LockOpportunityRate'],
    appName: 'argos-saleslogix',
    serverVersion: {
      'major': 8,
      'minor': 0,
      'revision': 0
    },
    mobileVersion: {
      'major': 3,
      'minor': 4,
      'revision': 0
    },
    versionInfoText: resource.versionInfoText,
    loadingText: resource.loadingText,
    authText: resource.authText,
    connectionToastTitleText: resource.connectionToastTitleText,
    offlineText: resource.offlineText,
    onlineText: resource.onlineText,
    homeViewId: 'myactivity_list',
    offlineHomeViewId: 'recently_viewed_list',
    loginViewId: 'login',
    logOffViewId: 'logoff',

    UID: null,
    init: function init() {
      if ((0, _has['default'])('ie') &amp;&amp; (0, _has['default'])('ie') &lt; 9) {
        window.location.href = 'unsupported.html';
      }

      this.inherited(arguments);
      this._loadNavigationState();
      this._saveDefaultPreferences();
      this._setupToasts();

      this.UID = new Date().getTime();
      var original = Sage.SData.Client.SDataService.prototype.executeRequest;
      var self = this;
      Sage.SData.Client.SDataService.prototype.executeRequest = function executeRequest(request) {
        request.setRequestHeader('X-Application-Name', self.appName);
        request.setRequestHeader('X-Application-Version', _string['default'].substitute('${version.major}.${version.minor}.${version.revision};${id}', {
          version: self.mobileVersion,
          id: self.UID
        }));
        return original.apply(this, arguments);
      };
    },
    initConnects: function initConnects() {
      this.inherited(arguments);

      if (window.applicationCache) {
        this._connects.push(_connect['default'].connect(window.applicationCache, 'updateready', this, this._checkForUpdate));
      }
    },
    isOnFirstView: function isOnFirstView() {
      var history = ReUI.context.history;
      var length = history.length;
      var current = history[length - 1];
      var previous = history[length - 2];
      var isFirstView = false;

      if (current &amp;&amp; current.page === this.loginViewId || current &amp;&amp; current.page === this.logOffViewId) {
        isFirstView = true;
      } else if (previous &amp;&amp; previous.page === this.loginViewId) {
        isFirstView = true;
      } else if (length === 1) {
        isFirstView = true;
      }

      return isFirstView;
    },
    onSetOrientation: function onSetOrientation() {
      if (this.snapper) {
        this.snapper.close();
      }
    },
    _viewTransitionTo: function _viewTransitionTo() {
      this.inherited(arguments);
      this._checkSaveNavigationState();
      if (this.snapper) {
        this.snapper.close();
      }
    },
    _checkSaveNavigationState: function _checkSaveNavigationState() {
      if (this.rememberNavigationState !== false) {
        this._saveNavigationState();
      }
    },
    _checkForUpdate: function _checkForUpdate() {
      var applicationCache = window.applicationCache;
      if (applicationCache &amp;&amp; this.enableUpdateNotification) {
        if (applicationCache.status === applicationCache.UPDATEREADY) {
          this._notifyUpdateAvailable();
        }
      }
    },
    _notifyUpdateAvailable: function _notifyUpdateAvailable() {
      if (this.bars.updatebar) {
        this.bars.updatebar.show();
      }
    },
    _saveNavigationState: function _saveNavigationState() {
      try {
        if (window.localStorage) {
          window.localStorage.setItem('navigationState', _json['default'].stringify(ReUI.context.history));
        }
      } catch (e) {} // eslint-disable-line
    },
    _setupToasts: function _setupToasts() {
      this.toast = new _Toast['default']();
      this.toast.show();
    },
    hasMultiCurrency: function hasMultiCurrency() {
      // Check if the configuration specified multiCurrency, this will override the dynamic check.
      // A configuration is not ideal, and we should refactor the edit view to process the layout when it first recieves its data,
      // instead of on startup. We cannot check App.context data that was loaded after login when the startup method is used.
      if (this.multiCurrency) {
        return true;
      }

      return false;
    },
    canLockOpportunityRate: function canLockOpportunityRate() {
      if (this.context &amp;&amp; this.context.systemOptions &amp;&amp; this.context.systemOptions.LockOpportunityRate === 'True') {
        return true;
      }

      return false;
    },
    canChangeOpportunityRate: function canChangeOpportunityRate() {
      if (this.context &amp;&amp; this.context.systemOptions &amp;&amp; this.context.systemOptions.ChangeOpportunityRate === 'True') {
        return true;
      }

      return false;
    },
    getMyExchangeRate: function getMyExchangeRate() {
      var results = {
        code: '',
        rate: 1
      };

      if (this.hasMultiCurrency() &amp;&amp; this.context &amp;&amp; this.context.exchangeRates &amp;&amp; this.context.userOptions &amp;&amp; this.context.userOptions['General:Currency']) {
        var myCode = this.context.userOptions['General:Currency'];
        var myRate = this.context.exchangeRates[myCode];
        _lang['default'].mixin(results, {
          code: myCode,
          rate: myRate
        });
      }

      return results;
    },
    getBaseExchangeRate: function getBaseExchangeRate() {
      var results = {
        code: '',
        rate: 1
      };

      if (this.hasMultiCurrency() &amp;&amp; this.context &amp;&amp; this.context.exchangeRates &amp;&amp; this.context.systemOptions &amp;&amp; this.context.systemOptions.BaseCurrency) {
        var baseCode = this.context.systemOptions.BaseCurrency;
        var baseRate = this.context.exchangeRates[baseCode];
        _lang['default'].mixin(results, {
          code: baseCode,
          rate: baseRate
        });
      }

      return results;
    },
    getCurrentOpportunityExchangeRate: function getCurrentOpportunityExchangeRate() {
      var results = {
        code: '',
        rate: 1
      };

      var found = this.queryNavigationContext(function (o) {
        return (/^(opportunities)$/.test(o.resourceKind) &amp;&amp; o.key
        );
      });

      found = found &amp;&amp; found.options;

      if (found) {
        var rate = found.ExchangeRate;
        var code = found.ExchangeRateCode;
        _lang['default'].mixin(results, {
          code: code,
          rate: rate
        });
      }

      return results;
    },
    run: function run() {
      this.inherited(arguments);

      if (App.isOnline() || !App.enableCaching) {
        this.handleAuthentication();
      } else {
        // todo: always navigate to home when offline? data may not be available for restored state.
        this.navigateToHomeView();
      }

      if (this.enableUpdateNotification) {
        this._checkForUpdate();
      }
    },
    onAuthenticateUserSuccess: function onAuthenticateUserSuccess(credentials, callback, scope, result) {
      var _this = this;

      var user = {
        '$key': _lang['default'].trim(result.response.userId),
        '$descriptor': result.response.prettyName,
        'UserName': result.response.userName
      };

      this.context.user = user;
      this.context.roles = result.response.roles;
      this.context.securedActions = result.response.securedActions;

      if (this.context.securedActions) {
        this.context.userSecurity = {};
        _array['default'].forEach(this.context.securedActions, function (item) {
          _this.context.userSecurity[item] = true;
        });
      } else {
        // downgrade server version as only 8.0 has `securedActions` as part of the
        // `getCurrentUser` response.
        this.serverVersion = {
          'major': 7,
          'minor': 5,
          'revision': 4
        };
      }

      if (credentials.remember) {
        try {
          if (window.localStorage) {
            window.localStorage.setItem('credentials', Base64.encode(_json['default'].stringify({
              username: credentials.username,
              password: credentials.password || ''
            })));
          }
        } catch (e) {} //eslint-disable-line
      }

      if (callback) {
        callback.call(scope || this, {
          user: user
        });
      }
    },
    onAuthenticateUserFailure: function onAuthenticateUserFailure(callback, scope, response) {
      var service = this.getService();
      if (service) {
        service.setUserName(false).setPassword(false);
      }

      if (callback) {
        callback.call(scope || this, {
          response: response
        });
      }
    },
    authenticateUser: function authenticateUser(credentials, options) {
      var service = this.getService().setUserName(credentials.username).setPassword(credentials.password || '');

      var request = new Sage.SData.Client.SDataServiceOperationRequest(service).setContractName('system').setOperationName('getCurrentUser');

      request.execute({}, {
        success: _lang['default'].hitch(this, this.onAuthenticateUserSuccess, credentials, options.success, options.scope), // this.onAuthenticateUserSuccess.createDelegate(this, [credentials, options.success, options.scope], true),
        failure: _lang['default'].hitch(this, this.onAuthenticateUserFailure, options.failure, options.scope), // this.onAuthenticateUserFailure.createDelegate(this, [options.failure, options.scope], true),
        aborted: _lang['default'].hitch(this, this.onAuthenticateUserFailure, options.failure, options.scope) });
    },
    // this.onAuthenticateUserFailure.createDelegate(this, [options.aborted, options.scope], true)
    hasAccessTo: function hasAccessTo(security) {
      if (!security) {
        return true;
      }

      var user = this.context.user;
      var userId = user &amp;&amp; user.$key;
      var userSecurity = this.context.userSecurity;

      if (/^ADMIN\s*/i.test(userId)) {
        return true;
      }

      if (typeof userSecurity === 'undefined') {
        return true; // running against a pre 8.0 SalesLogix environment
      }

      return !!userSecurity[security];
    },
    reload: function reload() {
      this.ReUI.disableLocationCheck();
      this.hash('');
      window.location.reload();
    },
    logOut: function logOut() {
      this.removeCredentials();
      this._clearNavigationState();

      var service = this.getService();

      if (service) {
        service.setUserName(false).setPassword(false);
      }

      var view = this.getView(this.logOffViewId);

      if (view) {
        view.show();
      }
    },
    getCredentials: function getCredentials() {
      var credentials = null;
      try {
        if (window.localStorage) {
          var stored = window.localStorage.getItem('credentials');
          var encoded = stored &amp;&amp; Base64.decode(stored);
          credentials = encoded &amp;&amp; _json['default'].parse(encoded);
        }
      } catch (e) {} //eslint-disable-line

      return credentials;
    },
    removeCredentials: function removeCredentials() {
      try {
        if (window.localStorage) {
          window.localStorage.removeItem('credentials');
        }
      } catch (e) {} //eslint-disable-line
    },
    isAuthenticated: false,
    hasState: false,
    handleAuthentication: function handleAuthentication() {
      var credentials = this.getCredentials();

      if (credentials) {
        this.setPrimaryTitle(this.authText);
        this.authenticateUser(credentials, {
          success: this.onHandleAuthenticationSuccess,
          failure: this.onHandleAuthenticationFailed,
          aborted: this.onHandleAuthenticationAborted,
          scope: this
        });
      } else {
        this.navigateToLoginView();
      }
    },
    onHandleAuthenticationSuccess: function onHandleAuthenticationSuccess() {
      var _this2 = this;

      this.isAuthenticated = true;
      this.setPrimaryTitle(this.loadingText);
      this.initAppState().then(function () {
        _this2.onInitAppStateSuccess();
      }, function (err) {
        _this2.onInitAppStateFailed(err);
      });
    },
    onHandleAuthenticationFailed: function onHandleAuthenticationFailed() {
      this.removeCredentials();
      this.navigateToLoginView();
    },
    onHandleAuthenticationAborted: function onHandleAuthenticationAborted() {
      this.navigateToLoginView();
    },
    onInitAppStateSuccess: function onInitAppStateSuccess() {
      var _this3 = this;

      if (this.enableOfflineSupport) {
        this.initOfflineData().then(function () {
          _this3.hasState = true;
          _this3.navigateToInitialView();
        }, function (error) {
          _this3.hasState = true;
          _this3.enableOfflineSupport = false;
          var message = resource.offlineInitErrorText;
          _ErrorManager['default'].addSimpleError(message, error);
          _ErrorManager['default'].showErrorDialog(null, message, function () {
            _this3.navigateToInitialView();
          });
        });
      } else {
        this.hasState = true;
        this.navigateToInitialView();
      }
    },
    onInitAppStateFailed: function onInitAppStateFailed(error) {
      var _this4 = this;

      var message = resource.appStateInitErrorText;
      _ErrorManager['default'].addSimpleError(message, error);
      _ErrorManager['default'].showErrorDialog(null, message, function () {
        _this4._clearNavigationState();
        _this4.removeCredentials();
        _this4.navigateToLoginView();
      });
    },
    _clearNavigationState: function _clearNavigationState() {
      try {
        this.initialNavigationState = null;

        if (window.localStorage) {
          window.localStorage.removeItem('navigationState');
        }
      } catch (e) {} //eslint-disable-line
    },
    _loadNavigationState: function _loadNavigationState() {
      try {
        if (window.localStorage) {
          this.navigationState = window.localStorage.getItem('navigationState');
        }
      } catch (e) {} // eslint-disable-line
    },
    _saveDefaultPreferences: function _saveDefaultPreferences() {
      if (this.preferences) {
        return;
      }

      var views = this.getDefaultViews();

      this.preferences = {
        home: {
          visible: views
        },
        configure: {
          order: views.slice(0)
        }
      };
    },
    getMetricsByResourceKind: function getMetricsByResourceKind(resourceKind) {
      var results = [];
      var prefs = this.preferences &amp;&amp; this.preferences.metrics &amp;&amp; this.preferences.metrics;

      if (prefs) {
        prefs = _array['default'].filter(prefs, function (item) {
          return item.resourceKind === resourceKind;
        });

        if (prefs.length === 1) {
          results = prefs[0].children;
        }
      }

      return results;
    },
    setDefaultMetricPreferences: function setDefaultMetricPreferences() {
      if (!this.preferences.metrics) {
        var defaults = new _DefaultMetrics2['default']();
        this.preferences.metrics = defaults.getDefinitions();
        this.persistPreferences();
      }
    },
    requestUserDetails: function requestUserDetails() {
      var request = new Sage.SData.Client.SDataSingleResourceRequest(this.getService()).setResourceKind('users').setResourceSelector(_string['default'].substitute('&quot;${0}&quot;', [this.context.user.$key])).setQueryArg('select', this.userDetailsQuerySelect.join(','));

      var def = new _Deferred['default']();

      request.read({
        success: function success(entry) {
          this.context.user = entry;
          this.context.defaultOwner = entry &amp;&amp; entry.DefaultOwner;
          this.setDefaultMetricPreferences();
          def.resolve(entry);
        },
        failure: function failure() {
          def.reject();
        },
        scope: this
      });

      return def.promise;
    },
    requestUserOptions: function requestUserOptions() {
      var batch = new Sage.SData.Client.SDataBatchRequest(this.getService()).setContractName('system').setResourceKind('useroptions').setQueryArg('select', 'name,value').using(function using() {
        var service = this.getService();
        _array['default'].forEach(this.userOptionsToRequest, function forEach(item) {
          new Sage.SData.Client.SDataSingleResourceRequest(this).setContractName('system').setResourceKind('useroptions').setResourceSelector(_string['default'].substitute('&quot;${0}&quot;', [item])).read();
        }, service);
      }, this);

      var def = new _Deferred['default']();
      batch.commit({
        success: function success(feed) {
          var userOptions = this.context.userOptions = this.context.userOptions || {};

          _array['default'].forEach(feed &amp;&amp; feed.$resources, function (item) {
            var key = item &amp;&amp; item.$descriptor;
            var value = item &amp;&amp; item.value;

            if (value &amp;&amp; key) {
              userOptions[key] = value;
            }
          });

          var insertSecCode = userOptions['General:InsertSecCodeID'];
          var currentDefaultOwner = this.context.defaultOwner &amp;&amp; this.context.defaultOwner.$key;

          if (insertSecCode &amp;&amp; (!currentDefaultOwner || currentDefaultOwner !== insertSecCode)) {
            this.requestOwnerDescription(insertSecCode);
          }

          this.loadCustomizedMoment();
          def.resolve(feed);
        },
        failure: function failure(response, o) {
          def.reject();
          _ErrorManager['default'].addError(response, o, {}, 'failure');
        },
        scope: this
      });

      return def.promise;
    },
    /*
     * Loads a custom object to pass into the current moment language. The object for the language gets built in buildCustomizedMoment.
     */
    loadCustomizedMoment: function loadCustomizedMoment() {
      var custom = this.buildCustomizedMoment();
      var currentLang = moment.locale();

      moment.locale(currentLang, custom);
      this.moment = moment().locale(currentLang, custom);
    },
    /*
     * Builds an object that will get passed into moment.locale()
     */
    buildCustomizedMoment: function buildCustomizedMoment() {
      if (!App.context.userOptions) {
        return null;
      }

      var userWeekStartDay = parseInt(App.context.userOptions['Calendar:WeekStart'], 10);
      var results = {}; // 0-6, Sun-Sat

      if (!isNaN(userWeekStartDay)) {
        results = {
          week: {
            dow: userWeekStartDay
          }
        };
      }

      return results;
    },
    requestSystemOptions: function requestSystemOptions() {
      var request = new Sage.SData.Client.SDataResourceCollectionRequest(this.getService()).setContractName('system').setResourceKind('systemoptions').setQueryArg('select', 'name,value');

      var def = new _Deferred['default']();
      request.read({
        success: function succes(feed) {
          var _this5 = this;

          var systemOptions = this.context.systemOptions = this.context.systemOptions || {};

          _array['default'].forEach(feed &amp;&amp; feed.$resources, function (item) {
            var name = item.name;
            var value = item.value;

            if (value &amp;&amp; name &amp;&amp; _array['default'].indexOf(_this5.systemOptionsToRequest, name) &gt; -1) {
              systemOptions[name] = value;
            }
          }, this);

          var multiCurrency = systemOptions.MultiCurrency;

          if (multiCurrency &amp;&amp; multiCurrency === 'True') {
            this.requestExchangeRates().then(function () {
              def.resolve(feed);
            }, function () {
              def.reject();
            });
          } else {
            def.resolve(feed);
          }
        },
        failure: function failure(response, o) {
          _ErrorManager['default'].addError(response, o, {}, 'failure');
          def.reject();
        },
        scope: this
      });

      return def.promise;
    },
    requestExchangeRates: function requestExchangeRates() {
      var request = new Sage.SData.Client.SDataResourceCollectionRequest(this.getService()).setContractName('dynamic').setResourceKind('exchangeRates').setQueryArg('select', 'Rate');

      var def = new _Deferred['default']();
      request.read({
        success: function success(feed) {
          var exchangeRates = this.context.exchangeRates = this.context.exchangeRates || {};

          _array['default'].forEach(feed &amp;&amp; feed.$resources, function (item) {
            var key = item &amp;&amp; item.$key;
            var value = item &amp;&amp; item.Rate;

            if (value &amp;&amp; key) {
              exchangeRates[key] = value;
            }
          });

          def.resolve(feed);
        },
        failure: function failure(response, o) {
          def.reject();
          _ErrorManager['default'].addError(response, o, {}, 'failure');
        },
        scope: this
      });

      return def.promise;
    },
    requestOwnerDescription: function requestOwnerDescription(key) {
      var request = new Sage.SData.Client.SDataSingleResourceRequest(this.getService()).setResourceKind('owners').setResourceSelector(_string['default'].substitute('&quot;${0}&quot;', [key])).setQueryArg('select', 'OwnerDescription');

      request.read({
        success: this.onRequestOwnerDescriptionSuccess,
        failure: this.onRequestOwnerDescriptionFailure,
        scope: this
      });
    },
    onRequestOwnerDescriptionSuccess: function onRequestOwnerDescriptionSuccess(entry) {
      if (entry) {
        this.context.defaultOwner = entry;
      }
    },
    onRequestOwnerDescriptionFailure: function onRequestOwnerDescriptionFailure(response, o) {
      _ErrorManager['default'].addError(response, o, {}, 'failure');
    },
    defaultViews: ['myday_list', 'calendar_view', 'history_list', 'account_list', 'contact_list', 'lead_list', 'opportunity_list', 'ticket_list', 'myattachment_list', 'recently_viewed_list', 'briefcase_list'],
    getDefaultViews: function getDefaultViews() {
      return this.defaultViews;
    },
    getExposedViews: function getExposedViews() {
      return Object.keys(this.views).filter(function (id) {
        var view = App.getView(id);
        return view &amp;&amp; view.id !== 'home' &amp;&amp; view.expose;
      });
    },
    cleanRestoredHistory: function cleanRestoredHistory(restoredHistory) {
      var result = [];
      var hasRoot = false;

      for (var i = restoredHistory.length - 1; i &gt;= 0 &amp;&amp; !hasRoot; i--) {
        if (restoredHistory[i].data.options &amp;&amp; restoredHistory[i].data.options.negateHistory) {
          result = [];
          continue;
        }

        if (App.hasView(restoredHistory[i].page)) {
          result.unshift(restoredHistory[i]);
        }

        hasRoot = restoredHistory[i].page === 'home';
      }

      return hasRoot &amp;&amp; result;
    },
    navigateToInitialView: function navigateToInitialView() {
      this.loadSnapper();

      try {
        var restoredState = this.navigationState;
        var restoredHistory = restoredState &amp;&amp; _json['default'].parse(restoredState);
        var cleanedHistory = this.cleanRestoredHistory(restoredHistory);

        this._clearNavigationState();

        if (cleanedHistory) {
          ReUI.context.transitioning = true;
          ReUI.context.history = ReUI.context.history.concat(cleanedHistory.slice(0, cleanedHistory.length - 1));

          for (var i = 0; i &lt; cleanedHistory.length - 1; i++) {
            window.location.hash = cleanedHistory[i].hash;
          }

          ReUI.context.transitioning = false;

          var last = cleanedHistory[cleanedHistory.length - 1];
          var view = App.getView(last.page);
          var options = last.data &amp;&amp; last.data.options;

          view.show(options);
        } else {
          this.navigateToHomeView();
        }
      } catch (e) {
        this._clearNavigationState();
        this.navigateToHomeView();
      }
    },
    setupRedirectHash: function setupRedirectHash() {
      if (this._hasValidRedirect()) {
        // Split by &quot;/redirectTo/&quot;
        var split = this.redirectHash.split(/\/redirectTo\//gi);
        if (split.length === 2) {
          this.redirectHash = split[1];
        }
      } else {
        this.redirectHash = '';
      }
    },
    onConnectionChange: function onConnectionChange(online) {
      var view = App.getView('left_drawer');
      if (!this.enableOfflineSupport) {
        return;
      }

      if (view) {
        view.refresh();
      }

      this.ReUI.resetHistory();
      if (online) {
        this.toast.add({ message: this.onlineText, title: this.connectionToastTitleText });
        if (this.context &amp;&amp; this.context.user) {
          this.navigateToInitialView();
        } else {
          this.navigateToLoginView();
        }
      } else {
        this.toast.add({ message: this.offlineText, title: this.connectionToastTitleText });
        this.navigateToInitialView();
      }

      this.setToolBarMode(online);
    },
    navigateToLoginView: function navigateToLoginView() {
      this.setupRedirectHash();

      var view = this.getView(this.loginViewId);
      if (view) {
        view.show();
      }
    },
    _hasValidRedirect: function _hasValidRedirect() {
      return this.redirectHash !== '' &amp;&amp; this.redirectHash.indexOf('/redirectTo/') &gt; 0;
    },
    showLeftDrawer: function showLeftDrawer() {
      var view = this.getView('left_drawer');
      if (view) {
        view.show();
      }
    },
    showRightDrawer: function showRightDrawer() {
      var view = this.getView('right_drawer');
      if (view) {
        view.show();
      }
    },
    navigateToHomeView: function navigateToHomeView() {
      this.setupRedirectHash();
      this.loadSnapper();

      var visible = this.preferences &amp;&amp; this.preferences.home &amp;&amp; this.preferences.home.visible;
      if (visible &amp;&amp; visible.length &gt; 0) {
        this.homeViewId = visible[0];
      }

      // Default view will be the home view, overwritten below if a redirect hash is supplied
      var view = this.getView(this.homeViewId);

      if (this.redirectHash) {
        var split = this.redirectHash.split(';');
        if (split.length &gt; 0) {
          var _split = _slicedToArray(split, 2);

          var viewId = _split[0];
          var key = _split[1];

          var redirectView = this.getView(viewId);
          if (redirectView) {
            view = redirectView;
            if (key) {
              redirectView.show({
                key: key
              });
            }
          }
        }
      }

      if (!App.isOnline()) {
        view = this.getView(this.offlineHomeViewId);
      }

      if (view) {
        view.show();
      }
    },
    navigateToActivityInsertView: function navigateToActivityInsertView() {
      var view = this.getView('activity_types_list');
      if (view) {
        view.show();
      }
    },
    initiateCall: function initiateCall() {
      // shortcut for environment call
      _environment['default'].initiateCall.apply(this, arguments);
    },
    initiateEmail: function initiateEmail() {
      // shortcut for environment call
      _environment['default'].initiateEmail.apply(this, arguments);
    },
    showMapForAddress: function showMapForAddress() {
      // shortcut for environment call
      _environment['default'].showMapForAddress.apply(this, arguments);
    },
    getVersionInfo: function getVersionInfo() {
      var info = _string['default'].substitute(this.versionInfoText, [this.mobileVersion.major, this.mobileVersion.minor, this.mobileVersion.revision, this.serverVersion.major]);
      return info;
    },
    initOfflineData: function initOfflineData() {
      var _this6 = this;

      var def = new _Deferred['default']();
      var model = this.ModelManager.getModel('Authentication', _MODEL_TYPES['default'].OFFLINE);
      if (model) {
        (function () {
          var indicator = new _BusyIndicator['default']({
            id: 'busyIndicator__offlineData',
            label: resource.offlineInitDataText
          });
          _this6.modal.disableClose = true;
          _this6.modal.showToolbar = false;
          _this6.modal.add(indicator);
          indicator.start();

          model.initAuthentication(App.context.user.$key).then(function (result) {
            var options = _offlineManager['default'].getOptions();
            if (result.hasUserChanged) {
              options = {
                clearAll: true
              };
            }
            if (result.hasUserChanged || !result.hasAuthenticatedToday) {
              _offlineManager['default'].clearData(options).then(function () {
                model.updateEntry(result.entry);
                indicator.complete(true);
                _this6.modal.disableClose = false;
                _this6.modal.hide();
                def.resolve();
              }, function (err) {
                indicator.complete(true);
                _this6.modal.disableClose = false;
                _this6.modal.hide();
                def.reject(err);
              });
            } else {
              result.entry.ModifyDate = moment().toDate();
              model.updateEntry(result.entry);
              indicator.complete(true);
              _this6.modal.disableClose = false;
              _this6.modal.hide();
              def.resolve(); // Do nothing since this not the first time athuenticating.
            }
          }, function (err) {
            def.reject(err);
          });
        })();
      } else {
        def.resolve();
      }
      return def.promise;
    }
  });

  _lang['default'].setObject('Mobile.SalesLogix.Application', __class);
  module.exports = __class;
});
//# sourceMappingURL=data:application/json;base64,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QUFDLENBQUM7QUFDekIscUJBQUssS0FBSyxDQUFDLFlBQVksR0FBRyxLQUFLLENBQUM7QUFDaEMscUJBQUssS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ2xCLGlCQUFHLENBQUMsT0FBTyxFQUFFLENBQUM7YUFDZjtXQUNGLEVBQUUsVUFBQyxHQUFHLEVBQUs7QUFDVixlQUFHLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1dBQ2pCLENBQUMsQ0FBQzs7T0FDSixNQUFNO0FBQ0wsV0FBRyxDQUFDLE9BQU8sRUFBRSxDQUFDO09BQ2Y7QUFDRCxhQUFPLEdBQUcsQ0FBQyxPQUFPLENBQUM7S0FDcEI7R0FDRixDQUFDLENBQUM7O0FBRUgsbUJBQUssU0FBUyxDQUFDLCtCQUErQixFQUFFLE9BQU8sQ0FBQyxDQUFDO21CQUMxQyxPQUFPIiwiZmlsZSI6InNyYy9BcHBsaWNhdGlvbi5qcyIsInNvdXJjZVJvb3QiOiJzcmMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZGVjbGFyZSBmcm9tICdkb2pvL19iYXNlL2RlY2xhcmUnO1xyXG5pbXBvcnQgYXJyYXkgZnJvbSAnZG9qby9fYmFzZS9hcnJheSc7XHJcbmltcG9ydCBjb25uZWN0IGZyb20gJ2Rvam8vX2Jhc2UvY29ubmVjdCc7XHJcbmltcG9ydCBqc29uIGZyb20gJ2Rvam8vanNvbic7XHJcbmltcG9ydCBsYW5nIGZyb20gJ2Rvam8vX2Jhc2UvbGFuZyc7XHJcbmltcG9ydCBoYXMgZnJvbSAnZG9qby9oYXMnO1xyXG5pbXBvcnQgc3RyaW5nIGZyb20gJ2Rvam8vc3RyaW5nJztcclxuaW1wb3J0IERlZmVycmVkIGZyb20gJ2Rvam8vRGVmZXJyZWQnO1xyXG5pbXBvcnQgRGVmYXVsdE1ldHJpY3MgZnJvbSAnLi9EZWZhdWx0TWV0cmljcyc7XHJcbmltcG9ydCBFcnJvck1hbmFnZXIgZnJvbSAnYXJnb3MvRXJyb3JNYW5hZ2VyJztcclxuaW1wb3J0IGVudmlyb25tZW50IGZyb20gJy4vRW52aXJvbm1lbnQnO1xyXG5pbXBvcnQgQXBwbGljYXRpb24gZnJvbSAnYXJnb3MvQXBwbGljYXRpb24nO1xyXG5pbXBvcnQgVG9hc3QgZnJvbSAnYXJnb3MvRGlhbG9ncy9Ub2FzdCc7XHJcbmltcG9ydCBvZmZsaW5lTWFuYWdlciBmcm9tICdhcmdvcy9PZmZsaW5lL01hbmFnZXInO1xyXG5pbXBvcnQgTU9ERUxfVFlQRVMgZnJvbSAnYXJnb3MvTW9kZWxzL1R5cGVzJztcclxuaW1wb3J0IEJ1c3lJbmRpY2F0b3IgZnJvbSAnYXJnb3MvRGlhbG9ncy9CdXN5SW5kaWNhdG9yJztcclxuaW1wb3J0IGdldFJlc291cmNlIGZyb20gJ2FyZ29zL0kxOG4nO1xyXG5pbXBvcnQgJ2Rvam8vc25pZmYnO1xyXG5cclxuXHJcbmNvbnN0IHJlc291cmNlID0gZ2V0UmVzb3VyY2UoJ2FwcGxpY2F0aW9uJyk7XHJcblxyXG4vKipcclxuICogQGNsYXNzIGNybS5BcHBsaWNhdGlvblxyXG4gKlxyXG4gKiBAZXh0ZW5kcyBhcmdvcy5BcHBsaWNhdGlvblxyXG4gKiBAcmVxdWlyZXMgYXJnb3MuRXJyb3JNYW5hZ2VyXHJcbiAqIEByZXF1aXJlcyBjcm0uRW52aXJvbm1lbnRcclxuICogQHJlcXVpcmVzIG1vbWVudFxyXG4gKlxyXG4gKi9cclxuY29uc3QgX19jbGFzcyA9IGRlY2xhcmUoJ2NybS5BcHBsaWNhdGlvbicsIFtBcHBsaWNhdGlvbl0sIHtcclxuICBuYXZpZ2F0aW9uU3RhdGU6IG51bGwsXHJcbiAgcmVtZW1iZXJOYXZpZ2F0aW9uU3RhdGU6IHRydWUsXHJcbiAgZW5hYmxlVXBkYXRlTm90aWZpY2F0aW9uOiBmYWxzZSxcclxuICBtdWx0aUN1cnJlbmN5OiBmYWxzZSxcclxuICBlbmFibGVHcm91cHM6IHRydWUsXHJcbiAgZW5hYmxlSGFzaFRhZ3M6IHRydWUsXHJcbiAgZW5hYmxlT2ZmbGluZVN1cHBvcnQ6IGZhbHNlLFxyXG4gIHNwZWVkU2VhcmNoOiB7XHJcbiAgICBpbmNsdWRlU3RlbW1pbmc6IHRydWUsXHJcbiAgICBpbmNsdWRlUGhvbmljOiB0cnVlLFxyXG4gICAgaW5jbHVkZVRoZXNhdXJ1czogZmFsc2UsXHJcbiAgICB1c2VGcmVxdWVudEZpbHRlcjogZmFsc2UsXHJcbiAgICBzZWFyY2hUeXBlOiAxLFxyXG4gIH0sXHJcbiAgZW5hYmxlQ2FjaGluZzogdHJ1ZSxcclxuICB1c2VyRGV0YWlsc1F1ZXJ5U2VsZWN0OiBbJ1VzZXJOYW1lJywgJ1VzZXJJbmZvL1VzZXJOYW1lJywgJ1VzZXJJbmZvL0ZpcnN0TmFtZScsICdVc2VySW5mby9MYXN0TmFtZScsICdEZWZhdWx0T3duZXIvT3duZXJEZXNjcmlwdGlvbiddLFxyXG4gIHVzZXJPcHRpb25zVG9SZXF1ZXN0OiBbXHJcbiAgICAnRGVmYXVsdEdyb3VwO0FDQ09VTlQnLFxyXG4gICAgJ0RlZmF1bHRHcm91cDtDT05UQUNUJyxcclxuICAgICdEZWZhdWx0R3JvdXA7T1BQT1JUVU5JVFknLFxyXG4gICAgJ0RlZmF1bHRHcm91cDtMRUFEJyxcclxuICAgICdEZWZhdWx0R3JvdXA7VElDS0VUJyxcclxuICAgICdHZW5lcmFsO0luc2VydFNlY0NvZGVJRCcsXHJcbiAgICAnR2VuZXJhbDtDdXJyZW5jeScsXHJcbiAgICAnQ2FsZW5kYXI7RGF5U3RhcnRUaW1lJyxcclxuICAgICdDYWxlbmRhcjtXZWVrU3RhcnQnLFxyXG4gICAgJ0FjdGl2aXR5TWVldGluZ09wdGlvbnM7QWxhcm1FbmFibGVkJyxcclxuICAgICdBY3Rpdml0eU1lZXRpbmdPcHRpb25zO0FsYXJtTGVhZCcsXHJcbiAgICAnQWN0aXZpdHlNZWV0aW5nT3B0aW9ucztEdXJhdGlvbicsXHJcbiAgICAnQWN0aXZpdHlQaG9uZU9wdGlvbnM7QWxhcm1FbmFibGVkJyxcclxuICAgICdBY3Rpdml0eVBob25lT3B0aW9ucztBbGFybUxlYWQnLFxyXG4gICAgJ0FjdGl2aXR5UGhvbmVPcHRpb25zO0R1cmF0aW9uJyxcclxuICAgICdBY3Rpdml0eVRvRG9PcHRpb25zO0FsYXJtRW5hYmxlZCcsXHJcbiAgICAnQWN0aXZpdHlUb0RvT3B0aW9ucztBbGFybUxlYWQnLFxyXG4gICAgJ0FjdGl2aXR5VG9Eb09wdGlvbnM7RHVyYXRpb24nLFxyXG4gICAgJ0FjdGl2aXR5UGVyc29uYWxPcHRpb25zO0FsYXJtRW5hYmxlZCcsXHJcbiAgICAnQWN0aXZpdHlQZXJzb25hbE9wdGlvbnM7QWxhcm1MZWFkJyxcclxuICAgICdBY3Rpdml0eVBlcnNvbmFsT3B0aW9ucztEdXJhdGlvbicsXHJcbiAgXSxcclxuICBzeXN0ZW1PcHRpb25zVG9SZXF1ZXN0OiBbXHJcbiAgICAnQmFzZUN1cnJlbmN5JyxcclxuICAgICdNdWx0aUN1cnJlbmN5JyxcclxuICAgICdDaGFuZ2VPcHBvcnR1bml0eVJhdGUnLFxyXG4gICAgJ0xvY2tPcHBvcnR1bml0eVJhdGUnLFxyXG4gIF0sXHJcbiAgYXBwTmFtZTogJ2FyZ29zLXNhbGVzbG9naXgnLFxyXG4gIHNlcnZlclZlcnNpb246IHtcclxuICAgICdtYWpvcic6IDgsXHJcbiAgICAnbWlub3InOiAwLFxyXG4gICAgJ3JldmlzaW9uJzogMCxcclxuICB9LFxyXG4gIG1vYmlsZVZlcnNpb246IHtcclxuICAgICdtYWpvcic6IDMsXHJcbiAgICAnbWlub3InOiA0LFxyXG4gICAgJ3JldmlzaW9uJzogMCxcclxuICB9LFxyXG4gIHZlcnNpb25JbmZvVGV4dDogcmVzb3VyY2UudmVyc2lvbkluZm9UZXh0LFxyXG4gIGxvYWRpbmdUZXh0OiByZXNvdXJjZS5sb2FkaW5nVGV4dCxcclxuICBhdXRoVGV4dDogcmVzb3VyY2UuYXV0aFRleHQsXHJcbiAgY29ubmVjdGlvblRvYXN0VGl0bGVUZXh0OiByZXNvdXJjZS5jb25uZWN0aW9uVG9hc3RUaXRsZVRleHQsXHJcbiAgb2ZmbGluZVRleHQ6IHJlc291cmNlLm9mZmxpbmVUZXh0LFxyXG4gIG9ubGluZVRleHQ6IHJlc291cmNlLm9ubGluZVRleHQsXHJcbiAgaG9tZVZpZXdJZDogJ215YWN0aXZpdHlfbGlzdCcsXHJcbiAgb2ZmbGluZUhvbWVWaWV3SWQ6ICdyZWNlbnRseV92aWV3ZWRfbGlzdCcsXHJcbiAgbG9naW5WaWV3SWQ6ICdsb2dpbicsXHJcbiAgbG9nT2ZmVmlld0lkOiAnbG9nb2ZmJyxcclxuXHJcbiAgVUlEOiBudWxsLFxyXG4gIGluaXQ6IGZ1bmN0aW9uIGluaXQoKSB7XHJcbiAgICBpZiAoaGFzKCdpZScpICYmIGhhcygnaWUnKSA8IDkpIHtcclxuICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAndW5zdXBwb3J0ZWQuaHRtbCc7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5pbmhlcml0ZWQoYXJndW1lbnRzKTtcclxuICAgIHRoaXMuX2xvYWROYXZpZ2F0aW9uU3RhdGUoKTtcclxuICAgIHRoaXMuX3NhdmVEZWZhdWx0UHJlZmVyZW5jZXMoKTtcclxuICAgIHRoaXMuX3NldHVwVG9hc3RzKCk7XHJcblxyXG4gICAgdGhpcy5VSUQgPSAobmV3IERhdGUoKSkuZ2V0VGltZSgpO1xyXG4gICAgY29uc3Qgb3JpZ2luYWwgPSBTYWdlLlNEYXRhLkNsaWVudC5TRGF0YVNlcnZpY2UucHJvdG90eXBlLmV4ZWN1dGVSZXF1ZXN0O1xyXG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcbiAgICBTYWdlLlNEYXRhLkNsaWVudC5TRGF0YVNlcnZpY2UucHJvdG90eXBlLmV4ZWN1dGVSZXF1ZXN0ID0gZnVuY3Rpb24gZXhlY3V0ZVJlcXVlc3QocmVxdWVzdCkge1xyXG4gICAgICByZXF1ZXN0LnNldFJlcXVlc3RIZWFkZXIoJ1gtQXBwbGljYXRpb24tTmFtZScsIHNlbGYuYXBwTmFtZSk7XHJcbiAgICAgIHJlcXVlc3Quc2V0UmVxdWVzdEhlYWRlcignWC1BcHBsaWNhdGlvbi1WZXJzaW9uJywgc3RyaW5nLnN1YnN0aXR1dGUoJyR7dmVyc2lvbi5tYWpvcn0uJHt2ZXJzaW9uLm1pbm9yfS4ke3ZlcnNpb24ucmV2aXNpb259OyR7aWR9Jywge1xyXG4gICAgICAgIHZlcnNpb246IHNlbGYubW9iaWxlVmVyc2lvbixcclxuICAgICAgICBpZDogc2VsZi5VSUQsXHJcbiAgICAgIH0pKTtcclxuICAgICAgcmV0dXJuIG9yaWdpbmFsLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbiAgICB9O1xyXG4gIH0sXHJcbiAgaW5pdENvbm5lY3RzOiBmdW5jdGlvbiBpbml0Q29ubmVjdHMoKSB7XHJcbiAgICB0aGlzLmluaGVyaXRlZChhcmd1bWVudHMpO1xyXG5cclxuICAgIGlmICh3aW5kb3cuYXBwbGljYXRpb25DYWNoZSkge1xyXG4gICAgICB0aGlzLl9jb25uZWN0cy5wdXNoKGNvbm5lY3QuY29ubmVjdCh3aW5kb3cuYXBwbGljYXRpb25DYWNoZSwgJ3VwZGF0ZXJlYWR5JywgdGhpcywgdGhpcy5fY2hlY2tGb3JVcGRhdGUpKTtcclxuICAgIH1cclxuICB9LFxyXG4gIGlzT25GaXJzdFZpZXc6IGZ1bmN0aW9uIGlzT25GaXJzdFZpZXcoKSB7XHJcbiAgICBjb25zdCBoaXN0b3J5ID0gUmVVSS5jb250ZXh0Lmhpc3Rvcnk7XHJcbiAgICBjb25zdCBsZW5ndGggPSBoaXN0b3J5Lmxlbmd0aDtcclxuICAgIGNvbnN0IGN1cnJlbnQgPSBoaXN0b3J5W2xlbmd0aCAtIDFdO1xyXG4gICAgY29uc3QgcHJldmlvdXMgPSBoaXN0b3J5W2xlbmd0aCAtIDJdO1xyXG4gICAgbGV0IGlzRmlyc3RWaWV3ID0gZmFsc2U7XHJcblxyXG4gICAgaWYgKChjdXJyZW50ICYmIGN1cnJlbnQucGFnZSA9PT0gdGhpcy5sb2dpblZpZXdJZCkgfHwgKGN1cnJlbnQgJiYgY3VycmVudC5wYWdlID09PSB0aGlzLmxvZ09mZlZpZXdJZCkpIHtcclxuICAgICAgaXNGaXJzdFZpZXcgPSB0cnVlO1xyXG4gICAgfSBlbHNlIGlmIChwcmV2aW91cyAmJiBwcmV2aW91cy5wYWdlID09PSB0aGlzLmxvZ2luVmlld0lkKSB7XHJcbiAgICAgIGlzRmlyc3RWaWV3ID0gdHJ1ZTtcclxuICAgIH0gZWxzZSBpZiAobGVuZ3RoID09PSAxKSB7XHJcbiAgICAgIGlzRmlyc3RWaWV3ID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gaXNGaXJzdFZpZXc7XHJcbiAgfSxcclxuICBvblNldE9yaWVudGF0aW9uOiBmdW5jdGlvbiBvblNldE9yaWVudGF0aW9uKCkge1xyXG4gICAgaWYgKHRoaXMuc25hcHBlcikge1xyXG4gICAgICB0aGlzLnNuYXBwZXIuY2xvc2UoKTtcclxuICAgIH1cclxuICB9LFxyXG4gIF92aWV3VHJhbnNpdGlvblRvOiBmdW5jdGlvbiBfdmlld1RyYW5zaXRpb25UbygpIHtcclxuICAgIHRoaXMuaW5oZXJpdGVkKGFyZ3VtZW50cyk7XHJcbiAgICB0aGlzLl9jaGVja1NhdmVOYXZpZ2F0aW9uU3RhdGUoKTtcclxuICAgIGlmICh0aGlzLnNuYXBwZXIpIHtcclxuICAgICAgdGhpcy5zbmFwcGVyLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfSxcclxuICBfY2hlY2tTYXZlTmF2aWdhdGlvblN0YXRlOiBmdW5jdGlvbiBfY2hlY2tTYXZlTmF2aWdhdGlvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMucmVtZW1iZXJOYXZpZ2F0aW9uU3RhdGUgIT09IGZhbHNlKSB7XHJcbiAgICAgIHRoaXMuX3NhdmVOYXZpZ2F0aW9uU3RhdGUoKTtcclxuICAgIH1cclxuICB9LFxyXG4gIF9jaGVja0ZvclVwZGF0ZTogZnVuY3Rpb24gX2NoZWNrRm9yVXBkYXRlKCkge1xyXG4gICAgY29uc3QgYXBwbGljYXRpb25DYWNoZSA9IHdpbmRvdy5hcHBsaWNhdGlvbkNhY2hlO1xyXG4gICAgaWYgKGFwcGxpY2F0aW9uQ2FjaGUgJiYgdGhpcy5lbmFibGVVcGRhdGVOb3RpZmljYXRpb24pIHtcclxuICAgICAgaWYgKGFwcGxpY2F0aW9uQ2FjaGUuc3RhdHVzID09PSBhcHBsaWNhdGlvbkNhY2hlLlVQREFURVJFQURZKSB7XHJcbiAgICAgICAgdGhpcy5fbm90aWZ5VXBkYXRlQXZhaWxhYmxlKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LFxyXG4gIF9ub3RpZnlVcGRhdGVBdmFpbGFibGU6IGZ1bmN0aW9uIF9ub3RpZnlVcGRhdGVBdmFpbGFibGUoKSB7XHJcbiAgICBpZiAodGhpcy5iYXJzLnVwZGF0ZWJhcikge1xyXG4gICAgICB0aGlzLmJhcnMudXBkYXRlYmFyLnNob3coKTtcclxuICAgIH1cclxuICB9LFxyXG4gIF9zYXZlTmF2aWdhdGlvblN0YXRlOiBmdW5jdGlvbiBfc2F2ZU5hdmlnYXRpb25TdGF0ZSgpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGlmICh3aW5kb3cubG9jYWxTdG9yYWdlKSB7XHJcbiAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCduYXZpZ2F0aW9uU3RhdGUnLCBqc29uLnN0cmluZ2lmeShSZVVJLmNvbnRleHQuaGlzdG9yeSkpO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlKSB7fSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXHJcbiAgfSxcclxuICBfc2V0dXBUb2FzdHM6IGZ1bmN0aW9uIF9zZXR1cFRvYXN0cygpIHtcclxuICAgIHRoaXMudG9hc3QgPSBuZXcgVG9hc3QoKTtcclxuICAgIHRoaXMudG9hc3Quc2hvdygpO1xyXG4gIH0sXHJcbiAgaGFzTXVsdGlDdXJyZW5jeTogZnVuY3Rpb24gaGFzTXVsdGlDdXJyZW5jeSgpIHtcclxuICAgIC8vIENoZWNrIGlmIHRoZSBjb25maWd1cmF0aW9uIHNwZWNpZmllZCBtdWx0aUN1cnJlbmN5LCB0aGlzIHdpbGwgb3ZlcnJpZGUgdGhlIGR5bmFtaWMgY2hlY2suXHJcbiAgICAvLyBBIGNvbmZpZ3VyYXRpb24gaXMgbm90IGlkZWFsLCBhbmQgd2Ugc2hvdWxkIHJlZmFjdG9yIHRoZSBlZGl0IHZpZXcgdG8gcHJvY2VzcyB0aGUgbGF5b3V0IHdoZW4gaXQgZmlyc3QgcmVjaWV2ZXMgaXRzIGRhdGEsXHJcbiAgICAvLyBpbnN0ZWFkIG9mIG9uIHN0YXJ0dXAuIFdlIGNhbm5vdCBjaGVjayBBcHAuY29udGV4dCBkYXRhIHRoYXQgd2FzIGxvYWRlZCBhZnRlciBsb2dpbiB3aGVuIHRoZSBzdGFydHVwIG1ldGhvZCBpcyB1c2VkLlxyXG4gICAgaWYgKHRoaXMubXVsdGlDdXJyZW5jeSkge1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfSxcclxuICBjYW5Mb2NrT3Bwb3J0dW5pdHlSYXRlOiBmdW5jdGlvbiBjYW5Mb2NrT3Bwb3J0dW5pdHlSYXRlKCkge1xyXG4gICAgaWYgKHRoaXMuY29udGV4dCAmJlxyXG4gICAgICB0aGlzLmNvbnRleHQuc3lzdGVtT3B0aW9ucyAmJlxyXG4gICAgICB0aGlzLmNvbnRleHQuc3lzdGVtT3B0aW9ucy5Mb2NrT3Bwb3J0dW5pdHlSYXRlID09PSAnVHJ1ZScpIHtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH0sXHJcbiAgY2FuQ2hhbmdlT3Bwb3J0dW5pdHlSYXRlOiBmdW5jdGlvbiBjYW5DaGFuZ2VPcHBvcnR1bml0eVJhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5jb250ZXh0ICYmXHJcbiAgICAgIHRoaXMuY29udGV4dC5zeXN0ZW1PcHRpb25zICYmXHJcbiAgICAgIHRoaXMuY29udGV4dC5zeXN0ZW1PcHRpb25zLkNoYW5nZU9wcG9ydHVuaXR5UmF0ZSA9PT0gJ1RydWUnKSB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9LFxyXG4gIGdldE15RXhjaGFuZ2VSYXRlOiBmdW5jdGlvbiBnZXRNeUV4Y2hhbmdlUmF0ZSgpIHtcclxuICAgIGNvbnN0IHJlc3VsdHMgPSB7XHJcbiAgICAgIGNvZGU6ICcnLFxyXG4gICAgICByYXRlOiAxLFxyXG4gICAgfTtcclxuXHJcbiAgICBpZiAodGhpcy5oYXNNdWx0aUN1cnJlbmN5KCkgJiZcclxuICAgICAgdGhpcy5jb250ZXh0ICYmXHJcbiAgICAgIHRoaXMuY29udGV4dC5leGNoYW5nZVJhdGVzICYmXHJcbiAgICAgIHRoaXMuY29udGV4dC51c2VyT3B0aW9ucyAmJlxyXG4gICAgICB0aGlzLmNvbnRleHQudXNlck9wdGlvbnNbJ0dlbmVyYWw6Q3VycmVuY3knXSkge1xyXG4gICAgICBjb25zdCBteUNvZGUgPSB0aGlzLmNvbnRleHQudXNlck9wdGlvbnNbJ0dlbmVyYWw6Q3VycmVuY3knXTtcclxuICAgICAgY29uc3QgbXlSYXRlID0gdGhpcy5jb250ZXh0LmV4Y2hhbmdlUmF0ZXNbbXlDb2RlXTtcclxuICAgICAgbGFuZy5taXhpbihyZXN1bHRzLCB7XHJcbiAgICAgICAgY29kZTogbXlDb2RlLFxyXG4gICAgICAgIHJhdGU6IG15UmF0ZSxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHJlc3VsdHM7XHJcbiAgfSxcclxuICBnZXRCYXNlRXhjaGFuZ2VSYXRlOiBmdW5jdGlvbiBnZXRCYXNlRXhjaGFuZ2VSYXRlKCkge1xyXG4gICAgY29uc3QgcmVzdWx0cyA9IHtcclxuICAgICAgY29kZTogJycsXHJcbiAgICAgIHJhdGU6IDEsXHJcbiAgICB9O1xyXG5cclxuICAgIGlmICh0aGlzLmhhc011bHRpQ3VycmVuY3koKSAmJlxyXG4gICAgICB0aGlzLmNvbnRleHQgJiZcclxuICAgICAgdGhpcy5jb250ZXh0LmV4Y2hhbmdlUmF0ZXMgJiZcclxuICAgICAgdGhpcy5jb250ZXh0LnN5c3RlbU9wdGlvbnMgJiZcclxuICAgICAgdGhpcy5jb250ZXh0LnN5c3RlbU9wdGlvbnMuQmFzZUN1cnJlbmN5KSB7XHJcbiAgICAgIGNvbnN0IGJhc2VDb2RlID0gdGhpcy5jb250ZXh0LnN5c3RlbU9wdGlvbnMuQmFzZUN1cnJlbmN5O1xyXG4gICAgICBjb25zdCBiYXNlUmF0ZSA9IHRoaXMuY29udGV4dC5leGNoYW5nZVJhdGVzW2Jhc2VDb2RlXTtcclxuICAgICAgbGFuZy5taXhpbihyZXN1bHRzLCB7XHJcbiAgICAgICAgY29kZTogYmFzZUNvZGUsXHJcbiAgICAgICAgcmF0ZTogYmFzZVJhdGUsXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZXN1bHRzO1xyXG4gIH0sXHJcbiAgZ2V0Q3VycmVudE9wcG9ydHVuaXR5RXhjaGFuZ2VSYXRlOiBmdW5jdGlvbiBnZXRDdXJyZW50T3Bwb3J0dW5pdHlFeGNoYW5nZVJhdGUoKSB7XHJcbiAgICBjb25zdCByZXN1bHRzID0ge1xyXG4gICAgICBjb2RlOiAnJyxcclxuICAgICAgcmF0ZTogMSxcclxuICAgIH07XHJcblxyXG4gICAgbGV0IGZvdW5kID0gdGhpcy5xdWVyeU5hdmlnYXRpb25Db250ZXh0KChvKSA9PiB7XHJcbiAgICAgIHJldHVybiAoL14ob3Bwb3J0dW5pdGllcykkLykudGVzdChvLnJlc291cmNlS2luZCkgJiYgby5rZXk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBmb3VuZCA9IGZvdW5kICYmIGZvdW5kLm9wdGlvbnM7XHJcblxyXG4gICAgaWYgKGZvdW5kKSB7XHJcbiAgICAgIGNvbnN0IHJhdGUgPSBmb3VuZC5FeGNoYW5nZVJhdGU7XHJcbiAgICAgIGNvbnN0IGNvZGUgPSBmb3VuZC5FeGNoYW5nZVJhdGVDb2RlO1xyXG4gICAgICBsYW5nLm1peGluKHJlc3VsdHMsIHtcclxuICAgICAgICBjb2RlOiBjb2RlLFxyXG4gICAgICAgIHJhdGU6IHJhdGUsXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZXN1bHRzO1xyXG4gIH0sXHJcbiAgcnVuOiBmdW5jdGlvbiBydW4oKSB7XHJcbiAgICB0aGlzLmluaGVyaXRlZChhcmd1bWVudHMpO1xyXG5cclxuICAgIGlmIChBcHAuaXNPbmxpbmUoKSB8fCAhQXBwLmVuYWJsZUNhY2hpbmcpIHtcclxuICAgICAgdGhpcy5oYW5kbGVBdXRoZW50aWNhdGlvbigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gdG9kbzogYWx3YXlzIG5hdmlnYXRlIHRvIGhvbWUgd2hlbiBvZmZsaW5lPyBkYXRhIG1heSBub3QgYmUgYXZhaWxhYmxlIGZvciByZXN0b3JlZCBzdGF0ZS5cclxuICAgICAgdGhpcy5uYXZpZ2F0ZVRvSG9tZVZpZXcoKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5lbmFibGVVcGRhdGVOb3RpZmljYXRpb24pIHtcclxuICAgICAgdGhpcy5fY2hlY2tGb3JVcGRhdGUoKTtcclxuICAgIH1cclxuICB9LFxyXG4gIG9uQXV0aGVudGljYXRlVXNlclN1Y2Nlc3M6IGZ1bmN0aW9uIG9uQXV0aGVudGljYXRlVXNlclN1Y2Nlc3MoY3JlZGVudGlhbHMsIGNhbGxiYWNrLCBzY29wZSwgcmVzdWx0KSB7XHJcbiAgICBjb25zdCB1c2VyID0ge1xyXG4gICAgICAnJGtleSc6IGxhbmcudHJpbShyZXN1bHQucmVzcG9uc2UudXNlcklkKSxcclxuICAgICAgJyRkZXNjcmlwdG9yJzogcmVzdWx0LnJlc3BvbnNlLnByZXR0eU5hbWUsXHJcbiAgICAgICdVc2VyTmFtZSc6IHJlc3VsdC5yZXNwb25zZS51c2VyTmFtZSxcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5jb250ZXh0LnVzZXIgPSB1c2VyO1xyXG4gICAgdGhpcy5jb250ZXh0LnJvbGVzID0gcmVzdWx0LnJlc3BvbnNlLnJvbGVzO1xyXG4gICAgdGhpcy5jb250ZXh0LnNlY3VyZWRBY3Rpb25zID0gcmVzdWx0LnJlc3BvbnNlLnNlY3VyZWRBY3Rpb25zO1xyXG5cclxuICAgIGlmICh0aGlzLmNvbnRleHQuc2VjdXJlZEFjdGlvbnMpIHtcclxuICAgICAgdGhpcy5jb250ZXh0LnVzZXJTZWN1cml0eSA9IHt9O1xyXG4gICAgICBhcnJheS5mb3JFYWNoKHRoaXMuY29udGV4dC5zZWN1cmVkQWN0aW9ucywgKGl0ZW0pID0+IHtcclxuICAgICAgICB0aGlzLmNvbnRleHQudXNlclNlY3VyaXR5W2l0ZW1dID0gdHJ1ZTtcclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBkb3duZ3JhZGUgc2VydmVyIHZlcnNpb24gYXMgb25seSA4LjAgaGFzIGBzZWN1cmVkQWN0aW9uc2AgYXMgcGFydCBvZiB0aGVcclxuICAgICAgLy8gYGdldEN1cnJlbnRVc2VyYCByZXNwb25zZS5cclxuICAgICAgdGhpcy5zZXJ2ZXJWZXJzaW9uID0ge1xyXG4gICAgICAgICdtYWpvcic6IDcsXHJcbiAgICAgICAgJ21pbm9yJzogNSxcclxuICAgICAgICAncmV2aXNpb24nOiA0LFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChjcmVkZW50aWFscy5yZW1lbWJlcikge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGlmICh3aW5kb3cubG9jYWxTdG9yYWdlKSB7XHJcbiAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2NyZWRlbnRpYWxzJywgQmFzZTY0LmVuY29kZShqc29uLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgIHVzZXJuYW1lOiBjcmVkZW50aWFscy51c2VybmFtZSxcclxuICAgICAgICAgICAgcGFzc3dvcmQ6IGNyZWRlbnRpYWxzLnBhc3N3b3JkIHx8ICcnLFxyXG4gICAgICAgICAgfSkpKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gY2F0Y2ggKGUpIHt9IC8vZXNsaW50LWRpc2FibGUtbGluZVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChjYWxsYmFjaykge1xyXG4gICAgICBjYWxsYmFjay5jYWxsKHNjb3BlIHx8IHRoaXMsIHtcclxuICAgICAgICB1c2VyOiB1c2VyLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9LFxyXG4gIG9uQXV0aGVudGljYXRlVXNlckZhaWx1cmU6IGZ1bmN0aW9uIG9uQXV0aGVudGljYXRlVXNlckZhaWx1cmUoY2FsbGJhY2ssIHNjb3BlLCByZXNwb25zZSkge1xyXG4gICAgY29uc3Qgc2VydmljZSA9IHRoaXMuZ2V0U2VydmljZSgpO1xyXG4gICAgaWYgKHNlcnZpY2UpIHtcclxuICAgICAgc2VydmljZVxyXG4gICAgICAgIC5zZXRVc2VyTmFtZShmYWxzZSlcclxuICAgICAgICAuc2V0UGFzc3dvcmQoZmFsc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChjYWxsYmFjaykge1xyXG4gICAgICBjYWxsYmFjay5jYWxsKHNjb3BlIHx8IHRoaXMsIHtcclxuICAgICAgICByZXNwb25zZTogcmVzcG9uc2UsXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgYXV0aGVudGljYXRlVXNlcjogZnVuY3Rpb24gYXV0aGVudGljYXRlVXNlcihjcmVkZW50aWFscywgb3B0aW9ucykge1xyXG4gICAgY29uc3Qgc2VydmljZSA9IHRoaXMuZ2V0U2VydmljZSgpXHJcbiAgICAgIC5zZXRVc2VyTmFtZShjcmVkZW50aWFscy51c2VybmFtZSlcclxuICAgICAgLnNldFBhc3N3b3JkKGNyZWRlbnRpYWxzLnBhc3N3b3JkIHx8ICcnKTtcclxuXHJcbiAgICBjb25zdCByZXF1ZXN0ID0gbmV3IFNhZ2UuU0RhdGEuQ2xpZW50LlNEYXRhU2VydmljZU9wZXJhdGlvblJlcXVlc3Qoc2VydmljZSlcclxuICAgICAgLnNldENvbnRyYWN0TmFtZSgnc3lzdGVtJylcclxuICAgICAgLnNldE9wZXJhdGlvbk5hbWUoJ2dldEN1cnJlbnRVc2VyJyk7XHJcblxyXG4gICAgcmVxdWVzdC5leGVjdXRlKHt9LCB7XHJcbiAgICAgIHN1Y2Nlc3M6IGxhbmcuaGl0Y2godGhpcywgdGhpcy5vbkF1dGhlbnRpY2F0ZVVzZXJTdWNjZXNzLCBjcmVkZW50aWFscywgb3B0aW9ucy5zdWNjZXNzLCBvcHRpb25zLnNjb3BlKSwgLy8gdGhpcy5vbkF1dGhlbnRpY2F0ZVVzZXJTdWNjZXNzLmNyZWF0ZURlbGVnYXRlKHRoaXMsIFtjcmVkZW50aWFscywgb3B0aW9ucy5zdWNjZXNzLCBvcHRpb25zLnNjb3BlXSwgdHJ1ZSksXHJcbiAgICAgIGZhaWx1cmU6IGxhbmcuaGl0Y2godGhpcywgdGhpcy5vbkF1dGhlbnRpY2F0ZVVzZXJGYWlsdXJlLCBvcHRpb25zLmZhaWx1cmUsIG9wdGlvbnMuc2NvcGUpLCAvLyB0aGlzLm9uQXV0aGVudGljYXRlVXNlckZhaWx1cmUuY3JlYXRlRGVsZWdhdGUodGhpcywgW29wdGlvbnMuZmFpbHVyZSwgb3B0aW9ucy5zY29wZV0sIHRydWUpLFxyXG4gICAgICBhYm9ydGVkOiBsYW5nLmhpdGNoKHRoaXMsIHRoaXMub25BdXRoZW50aWNhdGVVc2VyRmFpbHVyZSwgb3B0aW9ucy5mYWlsdXJlLCBvcHRpb25zLnNjb3BlKSwgLy8gdGhpcy5vbkF1dGhlbnRpY2F0ZVVzZXJGYWlsdXJlLmNyZWF0ZURlbGVnYXRlKHRoaXMsIFtvcHRpb25zLmFib3J0ZWQsIG9wdGlvbnMuc2NvcGVdLCB0cnVlKVxyXG4gICAgfSk7XHJcbiAgfSxcclxuICBoYXNBY2Nlc3NUbzogZnVuY3Rpb24gaGFzQWNjZXNzVG8oc2VjdXJpdHkpIHtcclxuICAgIGlmICghc2VjdXJpdHkpIHtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdXNlciA9IHRoaXMuY29udGV4dC51c2VyO1xyXG4gICAgY29uc3QgdXNlcklkID0gdXNlciAmJiB1c2VyLiRrZXk7XHJcbiAgICBjb25zdCB1c2VyU2VjdXJpdHkgPSB0aGlzLmNvbnRleHQudXNlclNlY3VyaXR5O1xyXG5cclxuICAgIGlmICgvXkFETUlOXFxzKi9pLnRlc3QodXNlcklkKSkge1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodHlwZW9mIHVzZXJTZWN1cml0eSA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgcmV0dXJuIHRydWU7IC8vIHJ1bm5pbmcgYWdhaW5zdCBhIHByZSA4LjAgU2FsZXNMb2dpeCBlbnZpcm9ubWVudFxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiAhIXVzZXJTZWN1cml0eVtzZWN1cml0eV07XHJcbiAgfSxcclxuICByZWxvYWQ6IGZ1bmN0aW9uIHJlbG9hZCgpIHtcclxuICAgIHRoaXMuUmVVSS5kaXNhYmxlTG9jYXRpb25DaGVjaygpO1xyXG4gICAgdGhpcy5oYXNoKCcnKTtcclxuICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICB9LFxyXG4gIGxvZ091dDogZnVuY3Rpb24gbG9nT3V0KCkge1xyXG4gICAgdGhpcy5yZW1vdmVDcmVkZW50aWFscygpO1xyXG4gICAgdGhpcy5fY2xlYXJOYXZpZ2F0aW9uU3RhdGUoKTtcclxuXHJcbiAgICBjb25zdCBzZXJ2aWNlID0gdGhpcy5nZXRTZXJ2aWNlKCk7XHJcblxyXG4gICAgaWYgKHNlcnZpY2UpIHtcclxuICAgICAgc2VydmljZVxyXG4gICAgICAgIC5zZXRVc2VyTmFtZShmYWxzZSlcclxuICAgICAgICAuc2V0UGFzc3dvcmQoZmFsc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHZpZXcgPSB0aGlzLmdldFZpZXcodGhpcy5sb2dPZmZWaWV3SWQpO1xyXG5cclxuICAgIGlmICh2aWV3KSB7XHJcbiAgICAgIHZpZXcuc2hvdygpO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgZ2V0Q3JlZGVudGlhbHM6IGZ1bmN0aW9uIGdldENyZWRlbnRpYWxzKCkge1xyXG4gICAgbGV0IGNyZWRlbnRpYWxzID0gbnVsbDtcclxuICAgIHRyeSB7XHJcbiAgICAgIGlmICh3aW5kb3cubG9jYWxTdG9yYWdlKSB7XHJcbiAgICAgICAgY29uc3Qgc3RvcmVkID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjcmVkZW50aWFscycpO1xyXG4gICAgICAgIGNvbnN0IGVuY29kZWQgPSBzdG9yZWQgJiYgQmFzZTY0LmRlY29kZShzdG9yZWQpO1xyXG4gICAgICAgIGNyZWRlbnRpYWxzID0gZW5jb2RlZCAmJiBqc29uLnBhcnNlKGVuY29kZWQpO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlKSB7fSAvL2VzbGludC1kaXNhYmxlLWxpbmVcclxuXHJcbiAgICByZXR1cm4gY3JlZGVudGlhbHM7XHJcbiAgfSxcclxuICByZW1vdmVDcmVkZW50aWFsczogZnVuY3Rpb24gcmVtb3ZlQ3JlZGVudGlhbHMoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBpZiAod2luZG93LmxvY2FsU3RvcmFnZSkge1xyXG4gICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnY3JlZGVudGlhbHMnKTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZSkge30gLy9lc2xpbnQtZGlzYWJsZS1saW5lXHJcbiAgfSxcclxuICBpc0F1dGhlbnRpY2F0ZWQ6IGZhbHNlLFxyXG4gIGhhc1N0YXRlOiBmYWxzZSxcclxuICBoYW5kbGVBdXRoZW50aWNhdGlvbjogZnVuY3Rpb24gaGFuZGxlQXV0aGVudGljYXRpb24oKSB7XHJcbiAgICBjb25zdCBjcmVkZW50aWFscyA9IHRoaXMuZ2V0Q3JlZGVudGlhbHMoKTtcclxuXHJcbiAgICBpZiAoY3JlZGVudGlhbHMpIHtcclxuICAgICAgdGhpcy5zZXRQcmltYXJ5VGl0bGUodGhpcy5hdXRoVGV4dCk7XHJcbiAgICAgIHRoaXMuYXV0aGVudGljYXRlVXNlcihjcmVkZW50aWFscywge1xyXG4gICAgICAgIHN1Y2Nlc3M6IHRoaXMub25IYW5kbGVBdXRoZW50aWNhdGlvblN1Y2Nlc3MsXHJcbiAgICAgICAgZmFpbHVyZTogdGhpcy5vbkhhbmRsZUF1dGhlbnRpY2F0aW9uRmFpbGVkLFxyXG4gICAgICAgIGFib3J0ZWQ6IHRoaXMub25IYW5kbGVBdXRoZW50aWNhdGlvbkFib3J0ZWQsXHJcbiAgICAgICAgc2NvcGU6IHRoaXMsXHJcbiAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5uYXZpZ2F0ZVRvTG9naW5WaWV3KCk7XHJcbiAgICB9XHJcbiAgfSxcclxuICBvbkhhbmRsZUF1dGhlbnRpY2F0aW9uU3VjY2VzczogZnVuY3Rpb24gb25IYW5kbGVBdXRoZW50aWNhdGlvblN1Y2Nlc3MoKSB7XHJcbiAgICB0aGlzLmlzQXV0aGVudGljYXRlZCA9IHRydWU7XHJcbiAgICB0aGlzLnNldFByaW1hcnlUaXRsZSh0aGlzLmxvYWRpbmdUZXh0KTtcclxuICAgIHRoaXMuaW5pdEFwcFN0YXRlKCkudGhlbigoKT0+IHtcclxuICAgICAgdGhpcy5vbkluaXRBcHBTdGF0ZVN1Y2Nlc3MoKTtcclxuICAgIH0sIChlcnIpPT4ge1xyXG4gICAgICB0aGlzLm9uSW5pdEFwcFN0YXRlRmFpbGVkKGVycik7XHJcbiAgICB9KTtcclxuICB9LFxyXG4gIG9uSGFuZGxlQXV0aGVudGljYXRpb25GYWlsZWQ6IGZ1bmN0aW9uIG9uSGFuZGxlQXV0aGVudGljYXRpb25GYWlsZWQoKSB7XHJcbiAgICB0aGlzLnJlbW92ZUNyZWRlbnRpYWxzKCk7XHJcbiAgICB0aGlzLm5hdmlnYXRlVG9Mb2dpblZpZXcoKTtcclxuICB9LFxyXG4gIG9uSGFuZGxlQXV0aGVudGljYXRpb25BYm9ydGVkOiBmdW5jdGlvbiBvbkhhbmRsZUF1dGhlbnRpY2F0aW9uQWJvcnRlZCgpIHtcclxuICAgIHRoaXMubmF2aWdhdGVUb0xvZ2luVmlldygpO1xyXG4gIH0sXHJcbiAgb25Jbml0QXBwU3RhdGVTdWNjZXNzOiBmdW5jdGlvbiBvbkluaXRBcHBTdGF0ZVN1Y2Nlc3MoKSB7XHJcbiAgICBpZiAodGhpcy5lbmFibGVPZmZsaW5lU3VwcG9ydCkge1xyXG4gICAgICB0aGlzLmluaXRPZmZsaW5lRGF0YSgpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuaGFzU3RhdGUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMubmF2aWdhdGVUb0luaXRpYWxWaWV3KCk7XHJcbiAgICAgIH0sIChlcnJvcikgPT4ge1xyXG4gICAgICAgIHRoaXMuaGFzU3RhdGUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuZW5hYmxlT2ZmbGluZVN1cHBvcnQgPSBmYWxzZTtcclxuICAgICAgICBjb25zdCBtZXNzYWdlID0gcmVzb3VyY2Uub2ZmbGluZUluaXRFcnJvclRleHQ7XHJcbiAgICAgICAgRXJyb3JNYW5hZ2VyLmFkZFNpbXBsZUVycm9yKG1lc3NhZ2UsIGVycm9yKTtcclxuICAgICAgICBFcnJvck1hbmFnZXIuc2hvd0Vycm9yRGlhbG9nKG51bGwsIG1lc3NhZ2UsICgpID0+IHtcclxuICAgICAgICAgIHRoaXMubmF2aWdhdGVUb0luaXRpYWxWaWV3KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5oYXNTdGF0ZSA9IHRydWU7XHJcbiAgICAgIHRoaXMubmF2aWdhdGVUb0luaXRpYWxWaWV3KCk7XHJcbiAgICB9XHJcbiAgfSxcclxuICBvbkluaXRBcHBTdGF0ZUZhaWxlZDogZnVuY3Rpb24gb25Jbml0QXBwU3RhdGVGYWlsZWQoZXJyb3IpIHtcclxuICAgIGNvbnN0IG1lc3NhZ2UgPSByZXNvdXJjZS5hcHBTdGF0ZUluaXRFcnJvclRleHQ7XHJcbiAgICBFcnJvck1hbmFnZXIuYWRkU2ltcGxlRXJyb3IobWVzc2FnZSwgZXJyb3IpO1xyXG4gICAgRXJyb3JNYW5hZ2VyLnNob3dFcnJvckRpYWxvZyhudWxsLCBtZXNzYWdlLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2NsZWFyTmF2aWdhdGlvblN0YXRlKCk7XHJcbiAgICAgIHRoaXMucmVtb3ZlQ3JlZGVudGlhbHMoKTtcclxuICAgICAgdGhpcy5uYXZpZ2F0ZVRvTG9naW5WaWV3KCk7XHJcbiAgICB9KTtcclxuICB9LFxyXG4gIF9jbGVhck5hdmlnYXRpb25TdGF0ZTogZnVuY3Rpb24gX2NsZWFyTmF2aWdhdGlvblN0YXRlKCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgdGhpcy5pbml0aWFsTmF2aWdhdGlvblN0YXRlID0gbnVsbDtcclxuXHJcbiAgICAgIGlmICh3aW5kb3cubG9jYWxTdG9yYWdlKSB7XHJcbiAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCduYXZpZ2F0aW9uU3RhdGUnKTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZSkge30gLy9lc2xpbnQtZGlzYWJsZS1saW5lXHJcbiAgfSxcclxuICBfbG9hZE5hdmlnYXRpb25TdGF0ZTogZnVuY3Rpb24gX2xvYWROYXZpZ2F0aW9uU3RhdGUoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBpZiAod2luZG93LmxvY2FsU3RvcmFnZSkge1xyXG4gICAgICAgIHRoaXMubmF2aWdhdGlvblN0YXRlID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCduYXZpZ2F0aW9uU3RhdGUnKTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZSkge30gLy8gZXNsaW50LWRpc2FibGUtbGluZVxyXG4gIH0sXHJcbiAgX3NhdmVEZWZhdWx0UHJlZmVyZW5jZXM6IGZ1bmN0aW9uIF9zYXZlRGVmYXVsdFByZWZlcmVuY2VzKCkge1xyXG4gICAgaWYgKHRoaXMucHJlZmVyZW5jZXMpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHZpZXdzID0gdGhpcy5nZXREZWZhdWx0Vmlld3MoKTtcclxuXHJcbiAgICB0aGlzLnByZWZlcmVuY2VzID0ge1xyXG4gICAgICBob21lOiB7XHJcbiAgICAgICAgdmlzaWJsZTogdmlld3MsXHJcbiAgICAgIH0sXHJcbiAgICAgIGNvbmZpZ3VyZToge1xyXG4gICAgICAgIG9yZGVyOiB2aWV3cy5zbGljZSgwKSxcclxuICAgICAgfSxcclxuICAgIH07XHJcbiAgfSxcclxuICBnZXRNZXRyaWNzQnlSZXNvdXJjZUtpbmQ6IGZ1bmN0aW9uIGdldE1ldHJpY3NCeVJlc291cmNlS2luZChyZXNvdXJjZUtpbmQpIHtcclxuICAgIGxldCByZXN1bHRzID0gW107XHJcbiAgICBsZXQgcHJlZnMgPSB0aGlzLnByZWZlcmVuY2VzICYmIHRoaXMucHJlZmVyZW5jZXMubWV0cmljcyAmJiB0aGlzLnByZWZlcmVuY2VzLm1ldHJpY3M7XHJcblxyXG4gICAgaWYgKHByZWZzKSB7XHJcbiAgICAgIHByZWZzID0gYXJyYXkuZmlsdGVyKHByZWZzLCAoaXRlbSkgPT4ge1xyXG4gICAgICAgIHJldHVybiBpdGVtLnJlc291cmNlS2luZCA9PT0gcmVzb3VyY2VLaW5kO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGlmIChwcmVmcy5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICByZXN1bHRzID0gcHJlZnNbMF0uY2hpbGRyZW47XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmVzdWx0cztcclxuICB9LFxyXG4gIHNldERlZmF1bHRNZXRyaWNQcmVmZXJlbmNlczogZnVuY3Rpb24gc2V0RGVmYXVsdE1ldHJpY1ByZWZlcmVuY2VzKCkge1xyXG4gICAgaWYgKCF0aGlzLnByZWZlcmVuY2VzLm1ldHJpY3MpIHtcclxuICAgICAgY29uc3QgZGVmYXVsdHMgPSBuZXcgRGVmYXVsdE1ldHJpY3MoKTtcclxuICAgICAgdGhpcy5wcmVmZXJlbmNlcy5tZXRyaWNzID0gZGVmYXVsdHMuZ2V0RGVmaW5pdGlvbnMoKTtcclxuICAgICAgdGhpcy5wZXJzaXN0UHJlZmVyZW5jZXMoKTtcclxuICAgIH1cclxuICB9LFxyXG4gIHJlcXVlc3RVc2VyRGV0YWlsczogZnVuY3Rpb24gcmVxdWVzdFVzZXJEZXRhaWxzKCkge1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IG5ldyBTYWdlLlNEYXRhLkNsaWVudC5TRGF0YVNpbmdsZVJlc291cmNlUmVxdWVzdCh0aGlzLmdldFNlcnZpY2UoKSlcclxuICAgICAgLnNldFJlc291cmNlS2luZCgndXNlcnMnKVxyXG4gICAgICAuc2V0UmVzb3VyY2VTZWxlY3RvcihzdHJpbmcuc3Vic3RpdHV0ZSgnXCIkezB9XCInLCBbdGhpcy5jb250ZXh0LnVzZXIuJGtleV0pKVxyXG4gICAgICAuc2V0UXVlcnlBcmcoJ3NlbGVjdCcsIHRoaXMudXNlckRldGFpbHNRdWVyeVNlbGVjdC5qb2luKCcsJykpO1xyXG5cclxuICAgIGNvbnN0IGRlZiA9IG5ldyBEZWZlcnJlZCgpO1xyXG5cclxuICAgIHJlcXVlc3QucmVhZCh7XHJcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIHN1Y2Nlc3MoZW50cnkpIHtcclxuICAgICAgICB0aGlzLmNvbnRleHQudXNlciA9IGVudHJ5O1xyXG4gICAgICAgIHRoaXMuY29udGV4dC5kZWZhdWx0T3duZXIgPSBlbnRyeSAmJiBlbnRyeS5EZWZhdWx0T3duZXI7XHJcbiAgICAgICAgdGhpcy5zZXREZWZhdWx0TWV0cmljUHJlZmVyZW5jZXMoKTtcclxuICAgICAgICBkZWYucmVzb2x2ZShlbnRyeSk7XHJcbiAgICAgIH0sXHJcbiAgICAgIGZhaWx1cmU6IGZ1bmN0aW9uIGZhaWx1cmUoKSB7XHJcbiAgICAgICAgZGVmLnJlamVjdCgpO1xyXG4gICAgICB9LFxyXG4gICAgICBzY29wZTogdGhpcyxcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBkZWYucHJvbWlzZTtcclxuICB9LFxyXG4gIHJlcXVlc3RVc2VyT3B0aW9uczogZnVuY3Rpb24gcmVxdWVzdFVzZXJPcHRpb25zKCkge1xyXG4gICAgY29uc3QgYmF0Y2ggPSBuZXcgU2FnZS5TRGF0YS5DbGllbnQuU0RhdGFCYXRjaFJlcXVlc3QodGhpcy5nZXRTZXJ2aWNlKCkpXHJcbiAgICAgIC5zZXRDb250cmFjdE5hbWUoJ3N5c3RlbScpXHJcbiAgICAgIC5zZXRSZXNvdXJjZUtpbmQoJ3VzZXJvcHRpb25zJylcclxuICAgICAgLnNldFF1ZXJ5QXJnKCdzZWxlY3QnLCAnbmFtZSx2YWx1ZScpXHJcbiAgICAgIC51c2luZyhmdW5jdGlvbiB1c2luZygpIHtcclxuICAgICAgICBjb25zdCBzZXJ2aWNlID0gdGhpcy5nZXRTZXJ2aWNlKCk7XHJcbiAgICAgICAgYXJyYXkuZm9yRWFjaCh0aGlzLnVzZXJPcHRpb25zVG9SZXF1ZXN0LCBmdW5jdGlvbiBmb3JFYWNoKGl0ZW0pIHtcclxuICAgICAgICAgIG5ldyBTYWdlLlNEYXRhLkNsaWVudC5TRGF0YVNpbmdsZVJlc291cmNlUmVxdWVzdCh0aGlzKVxyXG4gICAgICAgICAgICAuc2V0Q29udHJhY3ROYW1lKCdzeXN0ZW0nKVxyXG4gICAgICAgICAgICAuc2V0UmVzb3VyY2VLaW5kKCd1c2Vyb3B0aW9ucycpXHJcbiAgICAgICAgICAgIC5zZXRSZXNvdXJjZVNlbGVjdG9yKHN0cmluZy5zdWJzdGl0dXRlKCdcIiR7MH1cIicsIFtpdGVtXSkpXHJcbiAgICAgICAgICAgIC5yZWFkKCk7XHJcbiAgICAgICAgfSwgc2VydmljZSk7XHJcbiAgICAgIH0sIHRoaXMpO1xyXG5cclxuICAgIGNvbnN0IGRlZiA9IG5ldyBEZWZlcnJlZCgpO1xyXG4gICAgYmF0Y2guY29tbWl0KHtcclxuICAgICAgc3VjY2VzczogZnVuY3Rpb24gc3VjY2VzcyhmZWVkKSB7XHJcbiAgICAgICAgY29uc3QgdXNlck9wdGlvbnMgPSB0aGlzLmNvbnRleHQudXNlck9wdGlvbnMgPSB0aGlzLmNvbnRleHQudXNlck9wdGlvbnMgfHwge307XHJcblxyXG4gICAgICAgIGFycmF5LmZvckVhY2goZmVlZCAmJiBmZWVkLiRyZXNvdXJjZXMsIChpdGVtKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBrZXkgPSBpdGVtICYmIGl0ZW0uJGRlc2NyaXB0b3I7XHJcbiAgICAgICAgICBjb25zdCB2YWx1ZSA9IGl0ZW0gJiYgaXRlbS52YWx1ZTtcclxuXHJcbiAgICAgICAgICBpZiAodmFsdWUgJiYga2V5KSB7XHJcbiAgICAgICAgICAgIHVzZXJPcHRpb25zW2tleV0gPSB2YWx1ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgaW5zZXJ0U2VjQ29kZSA9IHVzZXJPcHRpb25zWydHZW5lcmFsOkluc2VydFNlY0NvZGVJRCddO1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnREZWZhdWx0T3duZXIgPSB0aGlzLmNvbnRleHQuZGVmYXVsdE93bmVyICYmIHRoaXMuY29udGV4dC5kZWZhdWx0T3duZXIuJGtleTtcclxuXHJcbiAgICAgICAgaWYgKGluc2VydFNlY0NvZGUgJiYgKCFjdXJyZW50RGVmYXVsdE93bmVyIHx8IChjdXJyZW50RGVmYXVsdE93bmVyICE9PSBpbnNlcnRTZWNDb2RlKSkpIHtcclxuICAgICAgICAgIHRoaXMucmVxdWVzdE93bmVyRGVzY3JpcHRpb24oaW5zZXJ0U2VjQ29kZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmxvYWRDdXN0b21pemVkTW9tZW50KCk7XHJcbiAgICAgICAgZGVmLnJlc29sdmUoZmVlZCk7XHJcbiAgICAgIH0sXHJcbiAgICAgIGZhaWx1cmU6IGZ1bmN0aW9uIGZhaWx1cmUocmVzcG9uc2UsIG8pIHtcclxuICAgICAgICBkZWYucmVqZWN0KCk7XHJcbiAgICAgICAgRXJyb3JNYW5hZ2VyLmFkZEVycm9yKHJlc3BvbnNlLCBvLCB7fSwgJ2ZhaWx1cmUnKTtcclxuICAgICAgfSxcclxuICAgICAgc2NvcGU6IHRoaXMsXHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gZGVmLnByb21pc2U7XHJcbiAgfSxcclxuICAvKlxyXG4gICAqIExvYWRzIGEgY3VzdG9tIG9iamVjdCB0byBwYXNzIGludG8gdGhlIGN1cnJlbnQgbW9tZW50IGxhbmd1YWdlLiBUaGUgb2JqZWN0IGZvciB0aGUgbGFuZ3VhZ2UgZ2V0cyBidWlsdCBpbiBidWlsZEN1c3RvbWl6ZWRNb21lbnQuXHJcbiAgICovXHJcbiAgbG9hZEN1c3RvbWl6ZWRNb21lbnQ6IGZ1bmN0aW9uIGxvYWRDdXN0b21pemVkTW9tZW50KCkge1xyXG4gICAgY29uc3QgY3VzdG9tID0gdGhpcy5idWlsZEN1c3RvbWl6ZWRNb21lbnQoKTtcclxuICAgIGNvbnN0IGN1cnJlbnRMYW5nID0gbW9tZW50LmxvY2FsZSgpO1xyXG5cclxuICAgIG1vbWVudC5sb2NhbGUoY3VycmVudExhbmcsIGN1c3RvbSk7XHJcbiAgICB0aGlzLm1vbWVudCA9IG1vbWVudCgpLmxvY2FsZShjdXJyZW50TGFuZywgY3VzdG9tKTtcclxuICB9LFxyXG4gIC8qXHJcbiAgICogQnVpbGRzIGFuIG9iamVjdCB0aGF0IHdpbGwgZ2V0IHBhc3NlZCBpbnRvIG1vbWVudC5sb2NhbGUoKVxyXG4gICAqL1xyXG4gIGJ1aWxkQ3VzdG9taXplZE1vbWVudDogZnVuY3Rpb24gYnVpbGRDdXN0b21pemVkTW9tZW50KCkge1xyXG4gICAgaWYgKCFBcHAuY29udGV4dC51c2VyT3B0aW9ucykge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB1c2VyV2Vla1N0YXJ0RGF5ID0gcGFyc2VJbnQoQXBwLmNvbnRleHQudXNlck9wdGlvbnNbJ0NhbGVuZGFyOldlZWtTdGFydCddLCAxMCk7XHJcbiAgICBsZXQgcmVzdWx0cyA9IHt9OyAvLyAwLTYsIFN1bi1TYXRcclxuXHJcbiAgICBpZiAoIWlzTmFOKHVzZXJXZWVrU3RhcnREYXkpKSB7XHJcbiAgICAgIHJlc3VsdHMgPSB7XHJcbiAgICAgICAgd2Vlazoge1xyXG4gICAgICAgICAgZG93OiB1c2VyV2Vla1N0YXJ0RGF5LFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHJlc3VsdHM7XHJcbiAgfSxcclxuICByZXF1ZXN0U3lzdGVtT3B0aW9uczogZnVuY3Rpb24gcmVxdWVzdFN5c3RlbU9wdGlvbnMoKSB7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0gbmV3IFNhZ2UuU0RhdGEuQ2xpZW50LlNEYXRhUmVzb3VyY2VDb2xsZWN0aW9uUmVxdWVzdCh0aGlzLmdldFNlcnZpY2UoKSlcclxuICAgICAgLnNldENvbnRyYWN0TmFtZSgnc3lzdGVtJylcclxuICAgICAgLnNldFJlc291cmNlS2luZCgnc3lzdGVtb3B0aW9ucycpXHJcbiAgICAgIC5zZXRRdWVyeUFyZygnc2VsZWN0JywgJ25hbWUsdmFsdWUnKTtcclxuXHJcbiAgICBjb25zdCBkZWYgPSBuZXcgRGVmZXJyZWQoKTtcclxuICAgIHJlcXVlc3QucmVhZCh7XHJcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIHN1Y2NlcyhmZWVkKSB7XHJcbiAgICAgICAgY29uc3Qgc3lzdGVtT3B0aW9ucyA9IHRoaXMuY29udGV4dC5zeXN0ZW1PcHRpb25zID0gdGhpcy5jb250ZXh0LnN5c3RlbU9wdGlvbnMgfHwge307XHJcblxyXG4gICAgICAgIGFycmF5LmZvckVhY2goZmVlZCAmJiBmZWVkLiRyZXNvdXJjZXMsIChpdGVtKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCB7IG5hbWUsIHZhbHVlIH0gPSBpdGVtO1xyXG4gICAgICAgICAgaWYgKHZhbHVlICYmIG5hbWUgJiYgYXJyYXkuaW5kZXhPZih0aGlzLnN5c3RlbU9wdGlvbnNUb1JlcXVlc3QsIG5hbWUpID4gLTEpIHtcclxuICAgICAgICAgICAgc3lzdGVtT3B0aW9uc1tuYW1lXSA9IHZhbHVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sIHRoaXMpO1xyXG5cclxuICAgICAgICBjb25zdCBtdWx0aUN1cnJlbmN5ID0gc3lzdGVtT3B0aW9ucy5NdWx0aUN1cnJlbmN5O1xyXG5cclxuICAgICAgICBpZiAobXVsdGlDdXJyZW5jeSAmJiBtdWx0aUN1cnJlbmN5ID09PSAnVHJ1ZScpIHtcclxuICAgICAgICAgIHRoaXMucmVxdWVzdEV4Y2hhbmdlUmF0ZXMoKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgZGVmLnJlc29sdmUoZmVlZCk7XHJcbiAgICAgICAgICB9LCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGRlZi5yZWplY3QoKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBkZWYucmVzb2x2ZShmZWVkKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIGZhaWx1cmU6IGZ1bmN0aW9uIGZhaWx1cmUocmVzcG9uc2UsIG8pIHtcclxuICAgICAgICBFcnJvck1hbmFnZXIuYWRkRXJyb3IocmVzcG9uc2UsIG8sIHt9LCAnZmFpbHVyZScpO1xyXG4gICAgICAgIGRlZi5yZWplY3QoKTtcclxuICAgICAgfSxcclxuICAgICAgc2NvcGU6IHRoaXMsXHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gZGVmLnByb21pc2U7XHJcbiAgfSxcclxuICByZXF1ZXN0RXhjaGFuZ2VSYXRlczogZnVuY3Rpb24gcmVxdWVzdEV4Y2hhbmdlUmF0ZXMoKSB7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0gbmV3IFNhZ2UuU0RhdGEuQ2xpZW50LlNEYXRhUmVzb3VyY2VDb2xsZWN0aW9uUmVxdWVzdCh0aGlzLmdldFNlcnZpY2UoKSlcclxuICAgICAgLnNldENvbnRyYWN0TmFtZSgnZHluYW1pYycpXHJcbiAgICAgIC5zZXRSZXNvdXJjZUtpbmQoJ2V4Y2hhbmdlUmF0ZXMnKVxyXG4gICAgICAuc2V0UXVlcnlBcmcoJ3NlbGVjdCcsICdSYXRlJyk7XHJcblxyXG4gICAgY29uc3QgZGVmID0gbmV3IERlZmVycmVkKCk7XHJcbiAgICByZXF1ZXN0LnJlYWQoe1xyXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbiBzdWNjZXNzKGZlZWQpIHtcclxuICAgICAgICBjb25zdCBleGNoYW5nZVJhdGVzID0gdGhpcy5jb250ZXh0LmV4Y2hhbmdlUmF0ZXMgPSB0aGlzLmNvbnRleHQuZXhjaGFuZ2VSYXRlcyB8fCB7fTtcclxuXHJcbiAgICAgICAgYXJyYXkuZm9yRWFjaChmZWVkICYmIGZlZWQuJHJlc291cmNlcywgKGl0ZW0pID0+IHtcclxuICAgICAgICAgIGNvbnN0IGtleSA9IGl0ZW0gJiYgaXRlbS4ka2V5O1xyXG4gICAgICAgICAgY29uc3QgdmFsdWUgPSBpdGVtICYmIGl0ZW0uUmF0ZTtcclxuXHJcbiAgICAgICAgICBpZiAodmFsdWUgJiYga2V5KSB7XHJcbiAgICAgICAgICAgIGV4Y2hhbmdlUmF0ZXNba2V5XSA9IHZhbHVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBkZWYucmVzb2x2ZShmZWVkKTtcclxuICAgICAgfSxcclxuICAgICAgZmFpbHVyZTogZnVuY3Rpb24gZmFpbHVyZShyZXNwb25zZSwgbykge1xyXG4gICAgICAgIGRlZi5yZWplY3QoKTtcclxuICAgICAgICBFcnJvck1hbmFnZXIuYWRkRXJyb3IocmVzcG9uc2UsIG8sIHt9LCAnZmFpbHVyZScpO1xyXG4gICAgICB9LFxyXG4gICAgICBzY29wZTogdGhpcyxcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBkZWYucHJvbWlzZTtcclxuICB9LFxyXG4gIHJlcXVlc3RPd25lckRlc2NyaXB0aW9uOiBmdW5jdGlvbiByZXF1ZXN0T3duZXJEZXNjcmlwdGlvbihrZXkpIHtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgU2FnZS5TRGF0YS5DbGllbnQuU0RhdGFTaW5nbGVSZXNvdXJjZVJlcXVlc3QodGhpcy5nZXRTZXJ2aWNlKCkpXHJcbiAgICAgIC5zZXRSZXNvdXJjZUtpbmQoJ293bmVycycpXHJcbiAgICAgIC5zZXRSZXNvdXJjZVNlbGVjdG9yKHN0cmluZy5zdWJzdGl0dXRlKCdcIiR7MH1cIicsIFtrZXldKSlcclxuICAgICAgLnNldFF1ZXJ5QXJnKCdzZWxlY3QnLCAnT3duZXJEZXNjcmlwdGlvbicpO1xyXG5cclxuICAgIHJlcXVlc3QucmVhZCh7XHJcbiAgICAgIHN1Y2Nlc3M6IHRoaXMub25SZXF1ZXN0T3duZXJEZXNjcmlwdGlvblN1Y2Nlc3MsXHJcbiAgICAgIGZhaWx1cmU6IHRoaXMub25SZXF1ZXN0T3duZXJEZXNjcmlwdGlvbkZhaWx1cmUsXHJcbiAgICAgIHNjb3BlOiB0aGlzLFxyXG4gICAgfSk7XHJcbiAgfSxcclxuICBvblJlcXVlc3RPd25lckRlc2NyaXB0aW9uU3VjY2VzczogZnVuY3Rpb24gb25SZXF1ZXN0T3duZXJEZXNjcmlwdGlvblN1Y2Nlc3MoZW50cnkpIHtcclxuICAgIGlmIChlbnRyeSkge1xyXG4gICAgICB0aGlzLmNvbnRleHQuZGVmYXVsdE93bmVyID0gZW50cnk7XHJcbiAgICB9XHJcbiAgfSxcclxuICBvblJlcXVlc3RPd25lckRlc2NyaXB0aW9uRmFpbHVyZTogZnVuY3Rpb24gb25SZXF1ZXN0T3duZXJEZXNjcmlwdGlvbkZhaWx1cmUocmVzcG9uc2UsIG8pIHtcclxuICAgIEVycm9yTWFuYWdlci5hZGRFcnJvcihyZXNwb25zZSwgbywge30sICdmYWlsdXJlJyk7XHJcbiAgfSxcclxuICBkZWZhdWx0Vmlld3M6IFtcclxuICAgICdteWRheV9saXN0JyxcclxuICAgICdjYWxlbmRhcl92aWV3JyxcclxuICAgICdoaXN0b3J5X2xpc3QnLFxyXG4gICAgJ2FjY291bnRfbGlzdCcsXHJcbiAgICAnY29udGFjdF9saXN0JyxcclxuICAgICdsZWFkX2xpc3QnLFxyXG4gICAgJ29wcG9ydHVuaXR5X2xpc3QnLFxyXG4gICAgJ3RpY2tldF9saXN0JyxcclxuICAgICdteWF0dGFjaG1lbnRfbGlzdCcsXHJcbiAgICAncmVjZW50bHlfdmlld2VkX2xpc3QnLFxyXG4gICAgJ2JyaWVmY2FzZV9saXN0JyxcclxuICBdLFxyXG4gIGdldERlZmF1bHRWaWV3czogZnVuY3Rpb24gZ2V0RGVmYXVsdFZpZXdzKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuZGVmYXVsdFZpZXdzO1xyXG4gIH0sXHJcbiAgZ2V0RXhwb3NlZFZpZXdzOiBmdW5jdGlvbiBnZXRFeHBvc2VkVmlld3MoKSB7XHJcbiAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy52aWV3cykuZmlsdGVyKChpZCkgPT4ge1xyXG4gICAgICBjb25zdCB2aWV3ID0gQXBwLmdldFZpZXcoaWQpO1xyXG4gICAgICByZXR1cm4gdmlldyAmJiB2aWV3LmlkICE9PSAnaG9tZScgJiYgdmlldy5leHBvc2U7XHJcbiAgICB9KTtcclxuICB9LFxyXG4gIGNsZWFuUmVzdG9yZWRIaXN0b3J5OiBmdW5jdGlvbiBjbGVhblJlc3RvcmVkSGlzdG9yeShyZXN0b3JlZEhpc3RvcnkpIHtcclxuICAgIGxldCByZXN1bHQgPSBbXTtcclxuICAgIGxldCBoYXNSb290ID0gZmFsc2U7XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IHJlc3RvcmVkSGlzdG9yeS5sZW5ndGggLSAxOyBpID49IDAgJiYgIWhhc1Jvb3Q7IGktLSkge1xyXG4gICAgICBpZiAocmVzdG9yZWRIaXN0b3J5W2ldLmRhdGEub3B0aW9ucyAmJiByZXN0b3JlZEhpc3RvcnlbaV0uZGF0YS5vcHRpb25zLm5lZ2F0ZUhpc3RvcnkpIHtcclxuICAgICAgICByZXN1bHQgPSBbXTtcclxuICAgICAgICBjb250aW51ZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKEFwcC5oYXNWaWV3KHJlc3RvcmVkSGlzdG9yeVtpXS5wYWdlKSkge1xyXG4gICAgICAgIHJlc3VsdC51bnNoaWZ0KHJlc3RvcmVkSGlzdG9yeVtpXSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGhhc1Jvb3QgPSAocmVzdG9yZWRIaXN0b3J5W2ldLnBhZ2UgPT09ICdob21lJyk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGhhc1Jvb3QgJiYgcmVzdWx0O1xyXG4gIH0sXHJcbiAgbmF2aWdhdGVUb0luaXRpYWxWaWV3OiBmdW5jdGlvbiBuYXZpZ2F0ZVRvSW5pdGlhbFZpZXcoKSB7XHJcbiAgICB0aGlzLmxvYWRTbmFwcGVyKCk7XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcmVzdG9yZWRTdGF0ZSA9IHRoaXMubmF2aWdhdGlvblN0YXRlO1xyXG4gICAgICBjb25zdCByZXN0b3JlZEhpc3RvcnkgPSByZXN0b3JlZFN0YXRlICYmIGpzb24ucGFyc2UocmVzdG9yZWRTdGF0ZSk7XHJcbiAgICAgIGNvbnN0IGNsZWFuZWRIaXN0b3J5ID0gdGhpcy5jbGVhblJlc3RvcmVkSGlzdG9yeShyZXN0b3JlZEhpc3RvcnkpO1xyXG5cclxuICAgICAgdGhpcy5fY2xlYXJOYXZpZ2F0aW9uU3RhdGUoKTtcclxuXHJcbiAgICAgIGlmIChjbGVhbmVkSGlzdG9yeSkge1xyXG4gICAgICAgIFJlVUkuY29udGV4dC50cmFuc2l0aW9uaW5nID0gdHJ1ZTtcclxuICAgICAgICBSZVVJLmNvbnRleHQuaGlzdG9yeSA9IFJlVUkuY29udGV4dC5oaXN0b3J5LmNvbmNhdChjbGVhbmVkSGlzdG9yeS5zbGljZSgwLCBjbGVhbmVkSGlzdG9yeS5sZW5ndGggLSAxKSk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2xlYW5lZEhpc3RvcnkubGVuZ3RoIC0gMTsgaSsrKSB7XHJcbiAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaGFzaCA9IGNsZWFuZWRIaXN0b3J5W2ldLmhhc2g7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBSZVVJLmNvbnRleHQudHJhbnNpdGlvbmluZyA9IGZhbHNlO1xyXG5cclxuICAgICAgICBjb25zdCBsYXN0ID0gY2xlYW5lZEhpc3RvcnlbY2xlYW5lZEhpc3RvcnkubGVuZ3RoIC0gMV07XHJcbiAgICAgICAgY29uc3QgdmlldyA9IEFwcC5nZXRWaWV3KGxhc3QucGFnZSk7XHJcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IGxhc3QuZGF0YSAmJiBsYXN0LmRhdGEub3B0aW9ucztcclxuXHJcbiAgICAgICAgdmlldy5zaG93KG9wdGlvbnMpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMubmF2aWdhdGVUb0hvbWVWaWV3KCk7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgdGhpcy5fY2xlYXJOYXZpZ2F0aW9uU3RhdGUoKTtcclxuICAgICAgdGhpcy5uYXZpZ2F0ZVRvSG9tZVZpZXcoKTtcclxuICAgIH1cclxuICB9LFxyXG4gIHNldHVwUmVkaXJlY3RIYXNoOiBmdW5jdGlvbiBzZXR1cFJlZGlyZWN0SGFzaCgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNWYWxpZFJlZGlyZWN0KCkpIHtcclxuICAgICAgLy8gU3BsaXQgYnkgXCIvcmVkaXJlY3RUby9cIlxyXG4gICAgICBjb25zdCBzcGxpdCA9IHRoaXMucmVkaXJlY3RIYXNoLnNwbGl0KC9cXC9yZWRpcmVjdFRvXFwvL2dpKTtcclxuICAgICAgaWYgKHNwbGl0Lmxlbmd0aCA9PT0gMikge1xyXG4gICAgICAgIHRoaXMucmVkaXJlY3RIYXNoID0gc3BsaXRbMV07XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMucmVkaXJlY3RIYXNoID0gJyc7XHJcbiAgICB9XHJcbiAgfSxcclxuICBvbkNvbm5lY3Rpb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ29ubmVjdGlvbkNoYW5nZShvbmxpbmUpIHtcclxuICAgIGNvbnN0IHZpZXcgPSBBcHAuZ2V0VmlldygnbGVmdF9kcmF3ZXInKTtcclxuICAgIGlmICghdGhpcy5lbmFibGVPZmZsaW5lU3VwcG9ydCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHZpZXcpIHtcclxuICAgICAgdmlldy5yZWZyZXNoKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5SZVVJLnJlc2V0SGlzdG9yeSgpO1xyXG4gICAgaWYgKG9ubGluZSkge1xyXG4gICAgICB0aGlzLnRvYXN0LmFkZCh7IG1lc3NhZ2U6IHRoaXMub25saW5lVGV4dCwgdGl0bGU6IHRoaXMuY29ubmVjdGlvblRvYXN0VGl0bGVUZXh0IH0pO1xyXG4gICAgICBpZiAodGhpcy5jb250ZXh0ICYmIHRoaXMuY29udGV4dC51c2VyKSB7XHJcbiAgICAgICAgdGhpcy5uYXZpZ2F0ZVRvSW5pdGlhbFZpZXcoKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLm5hdmlnYXRlVG9Mb2dpblZpZXcoKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy50b2FzdC5hZGQoeyBtZXNzYWdlOiB0aGlzLm9mZmxpbmVUZXh0LCB0aXRsZTogdGhpcy5jb25uZWN0aW9uVG9hc3RUaXRsZVRleHQgfSk7XHJcbiAgICAgIHRoaXMubmF2aWdhdGVUb0luaXRpYWxWaWV3KCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zZXRUb29sQmFyTW9kZShvbmxpbmUpO1xyXG4gIH0sXHJcbiAgbmF2aWdhdGVUb0xvZ2luVmlldzogZnVuY3Rpb24gbmF2aWdhdGVUb0xvZ2luVmlldygpIHtcclxuICAgIHRoaXMuc2V0dXBSZWRpcmVjdEhhc2goKTtcclxuXHJcbiAgICBjb25zdCB2aWV3ID0gdGhpcy5nZXRWaWV3KHRoaXMubG9naW5WaWV3SWQpO1xyXG4gICAgaWYgKHZpZXcpIHtcclxuICAgICAgdmlldy5zaG93KCk7XHJcbiAgICB9XHJcbiAgfSxcclxuICBfaGFzVmFsaWRSZWRpcmVjdDogZnVuY3Rpb24gX2hhc1ZhbGlkUmVkaXJlY3QoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5yZWRpcmVjdEhhc2ggIT09ICcnICYmIHRoaXMucmVkaXJlY3RIYXNoLmluZGV4T2YoJy9yZWRpcmVjdFRvLycpID4gMDtcclxuICB9LFxyXG4gIHNob3dMZWZ0RHJhd2VyOiBmdW5jdGlvbiBzaG93TGVmdERyYXdlcigpIHtcclxuICAgIGNvbnN0IHZpZXcgPSB0aGlzLmdldFZpZXcoJ2xlZnRfZHJhd2VyJyk7XHJcbiAgICBpZiAodmlldykge1xyXG4gICAgICB2aWV3LnNob3coKTtcclxuICAgIH1cclxuICB9LFxyXG4gIHNob3dSaWdodERyYXdlcjogZnVuY3Rpb24gc2hvd1JpZ2h0RHJhd2VyKCkge1xyXG4gICAgY29uc3QgdmlldyA9IHRoaXMuZ2V0VmlldygncmlnaHRfZHJhd2VyJyk7XHJcbiAgICBpZiAodmlldykge1xyXG4gICAgICB2aWV3LnNob3coKTtcclxuICAgIH1cclxuICB9LFxyXG4gIG5hdmlnYXRlVG9Ib21lVmlldzogZnVuY3Rpb24gbmF2aWdhdGVUb0hvbWVWaWV3KCkge1xyXG4gICAgdGhpcy5zZXR1cFJlZGlyZWN0SGFzaCgpO1xyXG4gICAgdGhpcy5sb2FkU25hcHBlcigpO1xyXG5cclxuICAgIGNvbnN0IHZpc2libGUgPSB0aGlzLnByZWZlcmVuY2VzICYmIHRoaXMucHJlZmVyZW5jZXMuaG9tZSAmJiB0aGlzLnByZWZlcmVuY2VzLmhvbWUudmlzaWJsZTtcclxuICAgIGlmICh2aXNpYmxlICYmIHZpc2libGUubGVuZ3RoID4gMCkge1xyXG4gICAgICB0aGlzLmhvbWVWaWV3SWQgPSB2aXNpYmxlWzBdO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIERlZmF1bHQgdmlldyB3aWxsIGJlIHRoZSBob21lIHZpZXcsIG92ZXJ3cml0dGVuIGJlbG93IGlmIGEgcmVkaXJlY3QgaGFzaCBpcyBzdXBwbGllZFxyXG4gICAgbGV0IHZpZXcgPSB0aGlzLmdldFZpZXcodGhpcy5ob21lVmlld0lkKTtcclxuXHJcbiAgICBpZiAodGhpcy5yZWRpcmVjdEhhc2gpIHtcclxuICAgICAgY29uc3Qgc3BsaXQgPSB0aGlzLnJlZGlyZWN0SGFzaC5zcGxpdCgnOycpO1xyXG4gICAgICBpZiAoc3BsaXQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGNvbnN0IFt2aWV3SWQsIGtleV0gPSBzcGxpdDtcclxuICAgICAgICBjb25zdCByZWRpcmVjdFZpZXcgPSB0aGlzLmdldFZpZXcodmlld0lkKTtcclxuICAgICAgICBpZiAocmVkaXJlY3RWaWV3KSB7XHJcbiAgICAgICAgICB2aWV3ID0gcmVkaXJlY3RWaWV3O1xyXG4gICAgICAgICAgaWYgKGtleSkge1xyXG4gICAgICAgICAgICByZWRpcmVjdFZpZXcuc2hvdyh7XHJcbiAgICAgICAgICAgICAga2V5OiBrZXksXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICghQXBwLmlzT25saW5lKCkpIHtcclxuICAgICAgdmlldyA9IHRoaXMuZ2V0Vmlldyh0aGlzLm9mZmxpbmVIb21lVmlld0lkKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodmlldykge1xyXG4gICAgICB2aWV3LnNob3coKTtcclxuICAgIH1cclxuICB9LFxyXG4gIG5hdmlnYXRlVG9BY3Rpdml0eUluc2VydFZpZXc6IGZ1bmN0aW9uIG5hdmlnYXRlVG9BY3Rpdml0eUluc2VydFZpZXcoKSB7XHJcbiAgICBjb25zdCB2aWV3ID0gdGhpcy5nZXRWaWV3KCdhY3Rpdml0eV90eXBlc19saXN0Jyk7XHJcbiAgICBpZiAodmlldykge1xyXG4gICAgICB2aWV3LnNob3coKTtcclxuICAgIH1cclxuICB9LFxyXG4gIGluaXRpYXRlQ2FsbDogZnVuY3Rpb24gaW5pdGlhdGVDYWxsKCkge1xyXG4gICAgLy8gc2hvcnRjdXQgZm9yIGVudmlyb25tZW50IGNhbGxcclxuICAgIGVudmlyb25tZW50LmluaXRpYXRlQ2FsbC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gIH0sXHJcbiAgaW5pdGlhdGVFbWFpbDogZnVuY3Rpb24gaW5pdGlhdGVFbWFpbCgpIHtcclxuICAgIC8vIHNob3J0Y3V0IGZvciBlbnZpcm9ubWVudCBjYWxsXHJcbiAgICBlbnZpcm9ubWVudC5pbml0aWF0ZUVtYWlsLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbiAgfSxcclxuICBzaG93TWFwRm9yQWRkcmVzczogZnVuY3Rpb24gc2hvd01hcEZvckFkZHJlc3MoKSB7XHJcbiAgICAvLyBzaG9ydGN1dCBmb3IgZW52aXJvbm1lbnQgY2FsbFxyXG4gICAgZW52aXJvbm1lbnQuc2hvd01hcEZvckFkZHJlc3MuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuICB9LFxyXG4gIGdldFZlcnNpb25JbmZvOiBmdW5jdGlvbiBnZXRWZXJzaW9uSW5mbygpIHtcclxuICAgIGNvbnN0IGluZm8gPSBzdHJpbmcuc3Vic3RpdHV0ZSh0aGlzLnZlcnNpb25JbmZvVGV4dCwgW1xyXG4gICAgICB0aGlzLm1vYmlsZVZlcnNpb24ubWFqb3IsXHJcbiAgICAgIHRoaXMubW9iaWxlVmVyc2lvbi5taW5vcixcclxuICAgICAgdGhpcy5tb2JpbGVWZXJzaW9uLnJldmlzaW9uLFxyXG4gICAgICB0aGlzLnNlcnZlclZlcnNpb24ubWFqb3IsXHJcbiAgICBdKTtcclxuICAgIHJldHVybiBpbmZvO1xyXG4gIH0sXHJcbiAgaW5pdE9mZmxpbmVEYXRhOiBmdW5jdGlvbiBpbml0T2ZmbGluZURhdGEoKSB7XHJcbiAgICBjb25zdCBkZWYgPSBuZXcgRGVmZXJyZWQoKTtcclxuICAgIGNvbnN0IG1vZGVsID0gdGhpcy5Nb2RlbE1hbmFnZXIuZ2V0TW9kZWwoJ0F1dGhlbnRpY2F0aW9uJywgTU9ERUxfVFlQRVMuT0ZGTElORSk7XHJcbiAgICBpZiAobW9kZWwpIHtcclxuICAgICAgY29uc3QgaW5kaWNhdG9yID0gbmV3IEJ1c3lJbmRpY2F0b3Ioe1xyXG4gICAgICAgIGlkOiAnYnVzeUluZGljYXRvcl9fb2ZmbGluZURhdGEnLFxyXG4gICAgICAgIGxhYmVsOiByZXNvdXJjZS5vZmZsaW5lSW5pdERhdGFUZXh0LFxyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy5tb2RhbC5kaXNhYmxlQ2xvc2UgPSB0cnVlO1xyXG4gICAgICB0aGlzLm1vZGFsLnNob3dUb29sYmFyID0gZmFsc2U7XHJcbiAgICAgIHRoaXMubW9kYWwuYWRkKGluZGljYXRvcik7XHJcbiAgICAgIGluZGljYXRvci5zdGFydCgpO1xyXG5cclxuICAgICAgbW9kZWwuaW5pdEF1dGhlbnRpY2F0aW9uKEFwcC5jb250ZXh0LnVzZXIuJGtleSkudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAgICAgbGV0IG9wdGlvbnMgPSBvZmZsaW5lTWFuYWdlci5nZXRPcHRpb25zKCk7XHJcbiAgICAgICAgaWYgKHJlc3VsdC5oYXNVc2VyQ2hhbmdlZCkge1xyXG4gICAgICAgICAgb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgY2xlYXJBbGw6IHRydWUsXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocmVzdWx0Lmhhc1VzZXJDaGFuZ2VkIHx8ICghcmVzdWx0Lmhhc0F1dGhlbnRpY2F0ZWRUb2RheSkpIHtcclxuICAgICAgICAgIG9mZmxpbmVNYW5hZ2VyLmNsZWFyRGF0YShvcHRpb25zKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgbW9kZWwudXBkYXRlRW50cnkocmVzdWx0LmVudHJ5KTtcclxuICAgICAgICAgICAgaW5kaWNhdG9yLmNvbXBsZXRlKHRydWUpO1xyXG4gICAgICAgICAgICB0aGlzLm1vZGFsLmRpc2FibGVDbG9zZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLm1vZGFsLmhpZGUoKTtcclxuICAgICAgICAgICAgZGVmLnJlc29sdmUoKTtcclxuICAgICAgICAgIH0sIChlcnIpID0+IHtcclxuICAgICAgICAgICAgaW5kaWNhdG9yLmNvbXBsZXRlKHRydWUpO1xyXG4gICAgICAgICAgICB0aGlzLm1vZGFsLmRpc2FibGVDbG9zZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLm1vZGFsLmhpZGUoKTtcclxuICAgICAgICAgICAgZGVmLnJlamVjdChlcnIpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHJlc3VsdC5lbnRyeS5Nb2RpZnlEYXRlID0gbW9tZW50KCkudG9EYXRlKCk7XHJcbiAgICAgICAgICBtb2RlbC51cGRhdGVFbnRyeShyZXN1bHQuZW50cnkpO1xyXG4gICAgICAgICAgaW5kaWNhdG9yLmNvbXBsZXRlKHRydWUpO1xyXG4gICAgICAgICAgdGhpcy5tb2RhbC5kaXNhYmxlQ2xvc2UgPSBmYWxzZTtcclxuICAgICAgICAgIHRoaXMubW9kYWwuaGlkZSgpO1xyXG4gICAgICAgICAgZGVmLnJlc29sdmUoKTsgLy8gRG8gbm90aGluZyBzaW5jZSB0aGlzIG5vdCB0aGUgZmlyc3QgdGltZSBhdGh1ZW50aWNhdGluZy5cclxuICAgICAgICB9XHJcbiAgICAgIH0sIChlcnIpID0+IHtcclxuICAgICAgICBkZWYucmVqZWN0KGVycik7XHJcbiAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZGVmLnJlc29sdmUoKTtcclxuICAgIH1cclxuICAgIHJldHVybiBkZWYucHJvbWlzZTtcclxuICB9LFxyXG59KTtcclxuXHJcbmxhbmcuc2V0T2JqZWN0KCdNb2JpbGUuU2FsZXNMb2dpeC5BcHBsaWNhdGlvbicsIF9fY2xhc3MpO1xyXG5leHBvcnQgZGVmYXVsdCBfX2NsYXNzO1xyXG4iXX0=
</pre>
</body>
</html>
