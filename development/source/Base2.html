<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">define('crm/Models/Activity/Base', ['exports', 'module', 'dojo/_base/declare', 'argos/Models/_ModelBase', '../Names', './ActivityTypeText', './ActivityTypeIcon', 'argos/I18n'], function (exports, module, _dojo_baseDeclare, _argosModels_ModelBase, _Names, _ActivityTypeText, _ActivityTypeIcon, _argosI18n) {
  function _interopRequireDefault(obj) { return obj &amp;&amp; obj.__esModule ? obj : { 'default': obj }; }

  var _declare = _interopRequireDefault(_dojo_baseDeclare);

  var _ModelBase2 = _interopRequireDefault(_argosModels_ModelBase);

  var _MODEL_NAMES = _interopRequireDefault(_Names);

  var _ACTIVITY_TYPE_TEXT = _interopRequireDefault(_ActivityTypeText);

  var _ACTIVITY_TYPE_ICON = _interopRequireDefault(_ActivityTypeIcon);

  var _getResource = _interopRequireDefault(_argosI18n);

  var resource = (0, _getResource['default'])('activityModel');
  var accountResource = (0, _getResource['default'])('accountModel');
  var contactResource = (0, _getResource['default'])('contactModel');
  var oppResource = (0, _getResource['default'])('opportunityModel');
  var ticketResource = (0, _getResource['default'])('ticketModel');
  var leadResource = (0, _getResource['default'])('leadModel');

  var __class = (0, _declare['default'])('crm.Models.Activity.Base', [_ModelBase2['default']], {
    modelName: _MODEL_NAMES['default'].ACTIVITY,
    entityName: 'Activity',
    entityDisplayName: resource.entityDisplayName,
    entityDisplayNamePlural: resource.entityDisplayNamePlural,
    iconClass: 'fa fa-list-ul fa-2x',
    resourceKind: 'activities',
    contractName: 'system',
    recurringActivityIdSeparator: ';',

    createRelationships: function createRelationships() {
      var rel = undefined;
      rel = this.relationships || (this.relationships = [{
        name: 'Account',
        displayName: accountResource.entityDisplayName,
        type: 'ManyToOne',
        parentProperty: 'AccountId',
        relatedEntity: 'Account'
      }, {
        name: 'Contact',
        displayName: contactResource.entityDisplayName,
        type: 'ManyToOne',
        parentProperty: 'ContactId',
        relatedEntity: 'Contact'
      }, {
        name: 'Ticket',
        displayName: ticketResource.entityDisplayName,
        type: 'ManyToOne',
        parentProperty: 'TicketId',
        relatedEntity: 'Ticket'
      }, {
        name: 'Opportunity',
        displayName: oppResource.entityDisplayName,
        type: 'ManyToOne',
        parentProperty: 'OpportunityId',
        relatedEntity: 'Opportunity'
      }, {
        name: 'Lead',
        displayName: leadResource.entityDisplayName,
        type: 'ManyToOne',
        parentProperty: 'LeadId',
        relatedEntity: 'Lead'
      }]);
      return rel;
    },
    getIconClass: function getIconClass(entry) {
      var cls = this.iconClass;
      if (entry &amp;&amp; entry.Type) {
        cls = _ACTIVITY_TYPE_ICON['default'][entry.Type];
        if (cls) {
          cls = cls + ' fa-2x';
        }
      }
      return cls;
    },
    getTypeText: function getTypeText(entry) {
      var name = '';
      if (entry &amp;&amp; entry.Type) {
        name = _ACTIVITY_TYPE_TEXT['default'][entry.Type];
      }
      return name;
    },
    isActivityRecurring: function isActivityRecurring(entry) {
      return entry &amp;&amp; (entry.Recurring || entry.RecurrenceState === 'rstOccurrence');
    }
  });
  module.exports = __class;
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9Nb2RlbHMvQWN0aXZpdHkvQmFzZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFPQSxNQUFNLFFBQVEsR0FBRyw2QkFBWSxlQUFlLENBQUMsQ0FBQztBQUM5QyxNQUFNLGVBQWUsR0FBRyw2QkFBWSxjQUFjLENBQUMsQ0FBQztBQUNwRCxNQUFNLGVBQWUsR0FBRyw2QkFBWSxjQUFjLENBQUMsQ0FBQztBQUNwRCxNQUFNLFdBQVcsR0FBRyw2QkFBWSxrQkFBa0IsQ0FBQyxDQUFDO0FBQ3BELE1BQU0sY0FBYyxHQUFHLDZCQUFZLGFBQWEsQ0FBQyxDQUFDO0FBQ2xELE1BQU0sWUFBWSxHQUFHLDZCQUFZLFdBQVcsQ0FBQyxDQUFDOztBQUU5QyxNQUFNLE9BQU8sR0FBRyx5QkFBUSwwQkFBMEIsRUFBRSx3QkFBWSxFQUFFO0FBQ2hFLGFBQVMsRUFBRSx3QkFBWSxRQUFRO0FBQy9CLGNBQVUsRUFBRSxVQUFVO0FBQ3RCLHFCQUFpQixFQUFFLFFBQVEsQ0FBQyxpQkFBaUI7QUFDN0MsMkJBQXVCLEVBQUUsUUFBUSxDQUFDLHVCQUF1QjtBQUN6RCxhQUFTLEVBQUUscUJBQXFCO0FBQ2hDLGdCQUFZLEVBQUUsWUFBWTtBQUMxQixnQkFBWSxFQUFFLFFBQVE7QUFDdEIsZ0NBQTRCLEVBQUUsR0FBRzs7QUFFakMsdUJBQW1CLEVBQUUsU0FBUyxtQkFBbUIsR0FBRztBQUNsRCxVQUFJLEdBQUcsWUFBQSxDQUFDO0FBQ1IsU0FBRyxHQUFHLElBQUksQ0FBQyxhQUFhLEtBQUssSUFBSSxDQUFDLGFBQWEsR0FBRyxDQUFFO0FBQ2xELFlBQUksRUFBRSxTQUFTO0FBQ2YsbUJBQVcsRUFBRSxlQUFlLENBQUMsaUJBQWlCO0FBQzlDLFlBQUksRUFBRSxXQUFXO0FBQ2pCLHNCQUFjLEVBQUUsV0FBVztBQUMzQixxQkFBYSxFQUFFLFNBQVM7T0FDekIsRUFBRTtBQUNELFlBQUksRUFBRSxTQUFTO0FBQ2YsbUJBQVcsRUFBRSxlQUFlLENBQUMsaUJBQWlCO0FBQzlDLFlBQUksRUFBRSxXQUFXO0FBQ2pCLHNCQUFjLEVBQUUsV0FBVztBQUMzQixxQkFBYSxFQUFFLFNBQVM7T0FDekIsRUFBRTtBQUNELFlBQUksRUFBRSxRQUFRO0FBQ2QsbUJBQVcsRUFBRSxjQUFjLENBQUMsaUJBQWlCO0FBQzdDLFlBQUksRUFBRSxXQUFXO0FBQ2pCLHNCQUFjLEVBQUUsVUFBVTtBQUMxQixxQkFBYSxFQUFFLFFBQVE7T0FDeEIsRUFBRTtBQUNELFlBQUksRUFBRSxhQUFhO0FBQ25CLG1CQUFXLEVBQUUsV0FBVyxDQUFDLGlCQUFpQjtBQUMxQyxZQUFJLEVBQUUsV0FBVztBQUNqQixzQkFBYyxFQUFFLGVBQWU7QUFDL0IscUJBQWEsRUFBRSxhQUFhO09BQzdCLEVBQUU7QUFDRCxZQUFJLEVBQUUsTUFBTTtBQUNaLG1CQUFXLEVBQUUsWUFBWSxDQUFDLGlCQUFpQjtBQUMzQyxZQUFJLEVBQUUsV0FBVztBQUNqQixzQkFBYyxFQUFFLFFBQVE7QUFDeEIscUJBQWEsRUFBRSxNQUFNO09BQ3RCLENBQUMsQ0FBQSxBQUFDLENBQUM7QUFDSixhQUFPLEdBQUcsQ0FBQztLQUNaO0FBQ0QsZ0JBQVksRUFBRSxTQUFTLFlBQVksQ0FBQyxLQUFLLEVBQUU7QUFDekMsVUFBSSxHQUFHLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQztBQUN6QixVQUFJLEtBQUssSUFBSSxLQUFLLENBQUMsSUFBSSxFQUFFO0FBQ3ZCLFdBQUcsR0FBRywrQkFBbUIsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ3JDLFlBQUksR0FBRyxFQUFFO0FBQ1AsYUFBRyxHQUFHLEdBQUcsR0FBRyxRQUFRLENBQUM7U0FDdEI7T0FDRjtBQUNELGFBQU8sR0FBRyxDQUFDO0tBQ1o7QUFDRCxlQUFXLEVBQUUsU0FBUyxXQUFXLENBQUMsS0FBSyxFQUFFO0FBQ3ZDLFVBQUksSUFBSSxHQUFHLEVBQUUsQ0FBQztBQUNkLFVBQUksS0FBSyxJQUFJLEtBQUssQ0FBQyxJQUFJLEVBQUU7QUFDdkIsWUFBSSxHQUFHLCtCQUFtQixLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7T0FDdkM7QUFDRCxhQUFPLElBQUksQ0FBQztLQUNiO0FBQ0QsdUJBQW1CLEVBQUUsU0FBUyxtQkFBbUIsQ0FBQyxLQUFLLEVBQUU7QUFDdkQsYUFBTyxLQUFLLEtBQUssS0FBSyxDQUFDLFNBQVMsSUFBSSxLQUFLLENBQUMsZUFBZSxLQUFLLGVBQWUsQ0FBQSxBQUFDLENBQUM7S0FDaEY7R0FDRixDQUFDLENBQUM7bUJBQ1ksT0FBTyIsImZpbGUiOiJzcmMvTW9kZWxzL0FjdGl2aXR5L0Jhc2UuanMiLCJzb3VyY2VSb290Ijoic3JjIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGRlY2xhcmUgZnJvbSAnZG9qby9fYmFzZS9kZWNsYXJlJztcclxuaW1wb3J0IF9Nb2RlbEJhc2UgZnJvbSAnYXJnb3MvTW9kZWxzL19Nb2RlbEJhc2UnO1xyXG5pbXBvcnQgTU9ERUxfTkFNRVMgZnJvbSAnLi4vTmFtZXMnO1xyXG5pbXBvcnQgQUNUSVZJVFlfVFlQRV9URVhUIGZyb20gJy4vQWN0aXZpdHlUeXBlVGV4dCc7XHJcbmltcG9ydCBBQ1RJVklUWV9UWVBFX0lDT04gZnJvbSAnLi9BY3Rpdml0eVR5cGVJY29uJztcclxuaW1wb3J0IGdldFJlc291cmNlIGZyb20gJ2FyZ29zL0kxOG4nO1xyXG5cclxuY29uc3QgcmVzb3VyY2UgPSBnZXRSZXNvdXJjZSgnYWN0aXZpdHlNb2RlbCcpO1xyXG5jb25zdCBhY2NvdW50UmVzb3VyY2UgPSBnZXRSZXNvdXJjZSgnYWNjb3VudE1vZGVsJyk7XHJcbmNvbnN0IGNvbnRhY3RSZXNvdXJjZSA9IGdldFJlc291cmNlKCdjb250YWN0TW9kZWwnKTtcclxuY29uc3Qgb3BwUmVzb3VyY2UgPSBnZXRSZXNvdXJjZSgnb3Bwb3J0dW5pdHlNb2RlbCcpO1xyXG5jb25zdCB0aWNrZXRSZXNvdXJjZSA9IGdldFJlc291cmNlKCd0aWNrZXRNb2RlbCcpO1xyXG5jb25zdCBsZWFkUmVzb3VyY2UgPSBnZXRSZXNvdXJjZSgnbGVhZE1vZGVsJyk7XHJcblxyXG5jb25zdCBfX2NsYXNzID0gZGVjbGFyZSgnY3JtLk1vZGVscy5BY3Rpdml0eS5CYXNlJywgW19Nb2RlbEJhc2VdLCB7XHJcbiAgbW9kZWxOYW1lOiBNT0RFTF9OQU1FUy5BQ1RJVklUWSxcclxuICBlbnRpdHlOYW1lOiAnQWN0aXZpdHknLFxyXG4gIGVudGl0eURpc3BsYXlOYW1lOiByZXNvdXJjZS5lbnRpdHlEaXNwbGF5TmFtZSxcclxuICBlbnRpdHlEaXNwbGF5TmFtZVBsdXJhbDogcmVzb3VyY2UuZW50aXR5RGlzcGxheU5hbWVQbHVyYWwsXHJcbiAgaWNvbkNsYXNzOiAnZmEgZmEtbGlzdC11bCBmYS0yeCcsXHJcbiAgcmVzb3VyY2VLaW5kOiAnYWN0aXZpdGllcycsXHJcbiAgY29udHJhY3ROYW1lOiAnc3lzdGVtJyxcclxuICByZWN1cnJpbmdBY3Rpdml0eUlkU2VwYXJhdG9yOiAnOycsXHJcblxyXG4gIGNyZWF0ZVJlbGF0aW9uc2hpcHM6IGZ1bmN0aW9uIGNyZWF0ZVJlbGF0aW9uc2hpcHMoKSB7XHJcbiAgICBsZXQgcmVsO1xyXG4gICAgcmVsID0gdGhpcy5yZWxhdGlvbnNoaXBzIHx8ICh0aGlzLnJlbGF0aW9uc2hpcHMgPSBbIHtcclxuICAgICAgbmFtZTogJ0FjY291bnQnLFxyXG4gICAgICBkaXNwbGF5TmFtZTogYWNjb3VudFJlc291cmNlLmVudGl0eURpc3BsYXlOYW1lLFxyXG4gICAgICB0eXBlOiAnTWFueVRvT25lJyxcclxuICAgICAgcGFyZW50UHJvcGVydHk6ICdBY2NvdW50SWQnLFxyXG4gICAgICByZWxhdGVkRW50aXR5OiAnQWNjb3VudCcsXHJcbiAgICB9LCB7XHJcbiAgICAgIG5hbWU6ICdDb250YWN0JyxcclxuICAgICAgZGlzcGxheU5hbWU6IGNvbnRhY3RSZXNvdXJjZS5lbnRpdHlEaXNwbGF5TmFtZSxcclxuICAgICAgdHlwZTogJ01hbnlUb09uZScsXHJcbiAgICAgIHBhcmVudFByb3BlcnR5OiAnQ29udGFjdElkJyxcclxuICAgICAgcmVsYXRlZEVudGl0eTogJ0NvbnRhY3QnLFxyXG4gICAgfSwge1xyXG4gICAgICBuYW1lOiAnVGlja2V0JyxcclxuICAgICAgZGlzcGxheU5hbWU6IHRpY2tldFJlc291cmNlLmVudGl0eURpc3BsYXlOYW1lLFxyXG4gICAgICB0eXBlOiAnTWFueVRvT25lJyxcclxuICAgICAgcGFyZW50UHJvcGVydHk6ICdUaWNrZXRJZCcsXHJcbiAgICAgIHJlbGF0ZWRFbnRpdHk6ICdUaWNrZXQnLFxyXG4gICAgfSwge1xyXG4gICAgICBuYW1lOiAnT3Bwb3J0dW5pdHknLFxyXG4gICAgICBkaXNwbGF5TmFtZTogb3BwUmVzb3VyY2UuZW50aXR5RGlzcGxheU5hbWUsXHJcbiAgICAgIHR5cGU6ICdNYW55VG9PbmUnLFxyXG4gICAgICBwYXJlbnRQcm9wZXJ0eTogJ09wcG9ydHVuaXR5SWQnLFxyXG4gICAgICByZWxhdGVkRW50aXR5OiAnT3Bwb3J0dW5pdHknLFxyXG4gICAgfSwge1xyXG4gICAgICBuYW1lOiAnTGVhZCcsXHJcbiAgICAgIGRpc3BsYXlOYW1lOiBsZWFkUmVzb3VyY2UuZW50aXR5RGlzcGxheU5hbWUsXHJcbiAgICAgIHR5cGU6ICdNYW55VG9PbmUnLFxyXG4gICAgICBwYXJlbnRQcm9wZXJ0eTogJ0xlYWRJZCcsXHJcbiAgICAgIHJlbGF0ZWRFbnRpdHk6ICdMZWFkJyxcclxuICAgIH1dKTtcclxuICAgIHJldHVybiByZWw7XHJcbiAgfSxcclxuICBnZXRJY29uQ2xhc3M6IGZ1bmN0aW9uIGdldEljb25DbGFzcyhlbnRyeSkge1xyXG4gICAgbGV0IGNscyA9IHRoaXMuaWNvbkNsYXNzO1xyXG4gICAgaWYgKGVudHJ5ICYmIGVudHJ5LlR5cGUpIHtcclxuICAgICAgY2xzID0gQUNUSVZJVFlfVFlQRV9JQ09OW2VudHJ5LlR5cGVdO1xyXG4gICAgICBpZiAoY2xzKSB7XHJcbiAgICAgICAgY2xzID0gY2xzICsgJyBmYS0yeCc7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBjbHM7XHJcbiAgfSxcclxuICBnZXRUeXBlVGV4dDogZnVuY3Rpb24gZ2V0VHlwZVRleHQoZW50cnkpIHtcclxuICAgIGxldCBuYW1lID0gJyc7XHJcbiAgICBpZiAoZW50cnkgJiYgZW50cnkuVHlwZSkge1xyXG4gICAgICBuYW1lID0gQUNUSVZJVFlfVFlQRV9URVhUW2VudHJ5LlR5cGVdO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5hbWU7XHJcbiAgfSxcclxuICBpc0FjdGl2aXR5UmVjdXJyaW5nOiBmdW5jdGlvbiBpc0FjdGl2aXR5UmVjdXJyaW5nKGVudHJ5KSB7XHJcbiAgICByZXR1cm4gZW50cnkgJiYgKGVudHJ5LlJlY3VycmluZyB8fCBlbnRyeS5SZWN1cnJlbmNlU3RhdGUgPT09ICdyc3RPY2N1cnJlbmNlJyk7XHJcbiAgfSxcclxufSk7XHJcbmV4cG9ydCBkZWZhdWx0IF9fY2xhc3M7XHJcbiJdfQ==
</pre>
</body>
</html>
