<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">define('argos/MainToolbar', ['exports', 'module', 'dojo/_base/declare', 'dojo/_base/lang', 'dojo/query', 'dojo/dom-class', 'dojo/dom-construct', './Toolbar', './I18n', 'dojo/NodeList-manipulate'], function (exports, module, _dojo_baseDeclare, _dojo_baseLang, _dojoQuery, _dojoDomClass, _dojoDomConstruct, _Toolbar, _I18n, _dojoNodeListManipulate) {
  function _interopRequireDefault(obj) { return obj &amp;&amp; obj.__esModule ? obj : { 'default': obj }; }

  /* Copyright (c) 2010, Sage Software, Inc. All rights reserved.
   *
   * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *     http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */

  var _declare = _interopRequireDefault(_dojo_baseDeclare);

  var _lang = _interopRequireDefault(_dojo_baseLang);

  var _query = _interopRequireDefault(_dojoQuery);

  var _domClass = _interopRequireDefault(_dojoDomClass);

  var _domConstruct = _interopRequireDefault(_dojoDomConstruct);

  var _Toolbar2 = _interopRequireDefault(_Toolbar);

  var _getResource = _interopRequireDefault(_I18n);

  var resource = (0, _getResource['default'])('mainToolbar');

<span id='argos-MainToolbar'>  /**
</span>   * @class argos.MainToolbar
   * MainToolbar is designed to handle the top application bar with markup and logic to set
   * a title and position toolbar items to the left or right
   * @alternateClassName MainToolbar
   * @extends argos.Toolbar
   */
  var __class = (0, _declare['default'])('argos.MainToolbar', [_Toolbar2['default']], {
<span id='argos-MainToolbar-property-attributeMap'>    /**
</span>     * @property {Object}
     * Used to set the title node's innerHTML
     */
    attributeMap: {
      'title': {
        node: 'titleNode',
        type: 'innerHTML'
      }
    },
<span id='argos-MainToolbar-property-widgetTemplate'>    /**
</span>     * @property {Simplate}
     * Simplate that defines the main HTML Markup of the toolbar
     *
     * `$` - the toolbar instance
     */
    widgetTemplate: new Simplate(['&lt;div class=&quot;toolbar {%= $.cls %}&quot;&gt;', '&lt;div id=&quot;pageTitle&quot; class=&quot;toolbar-title&quot; data-dojo-attach-event=&quot;onclick: onTitleClick&quot; data-dojo-attach-point=&quot;titleNode&quot;&gt;{%= $.titleText %}&lt;/div&gt;', '&lt;/div&gt;']),
<span id='argos-MainToolbar-property-toolTemplate'>    /**
</span>     * @property {Simplate}
     * Simplate that defines the toolbar item HTML Markup
     *
     * `$` - The toolbar item object
     * `$$` - The toolbar instance
     */
    toolTemplate: new Simplate(['&lt;button class=&quot;button toolButton toolButton-{%= $.side || &quot;right&quot; %} {%= ($$.enabled) ? &quot;&quot; : &quot;toolButton-disabled&quot; %} {%= $.cls %}&quot;', 'data-action=&quot;invokeTool&quot; data-tool=&quot;{%= $.id %}&quot;', 'aria-label=&quot;{%: $.title || $.id %}&quot;&gt;', '{% if ($.icon) { %}', '&lt;img src=&quot;{%= $.icon %}&quot; alt=&quot;{%= $.id %}&quot; /&gt;', '{% } %}', '{% if (!$.cls) { %}', '&lt;span&gt;&lt;/span&gt;', '{% } %}', '&lt;/button&gt;']),
<span id='argos-MainToolbar-property-size'>    /**
</span>     * @property {Number}
     * Current number of toolbar items set
     */
    size: 0,

<span id='argos-MainToolbar-property-titleText'>    /**
</span>     * Text that is placed into the toolbar titleNode
     */
    titleText: resource.titleText,

<span id='argos-MainToolbar-method-clear'>    /**
</span>     * Calls parent {@link Toolbar#clear clear} and removes all toolbar items from DOM.
     */
    clear: function clear() {
      this.inherited(arguments);

      (0, _query['default'])('&gt; [data-action], .toolButton-right', this.domNode).remove();
    },
<span id='argos-MainToolbar-method-showTools'>    /**
</span>     * Calls parent {@link Toolbar#showTools showTools} which sets the tool collection.
     * The collection is then looped over and added to DOM, adding the left or right styling
     * @param {Object[]} tools Array of toolbar item definitions
     */
    showTools: function showTools(tools) {
      this.inherited(arguments);

      _domClass['default'].remove(this.domNode, 'toolbar-size-' + this.size);
      var onLine = App.onLine;
      if (tools) {
        var count = {
          left: 0,
          right: 0
        };

        for (var i = 0; i &lt; tools.length; i++) {
          var tool = tools[i];
          var side = tool.side || 'right';
          var toolTemplate = tool.template || this.toolTemplate;
          count[side] += 1;
          if (tool.offline) {
            onLine = false;
          }
          _domConstruct['default'].place(toolTemplate.apply(tool, this.tools[tool.id]), this.domNode, 'last');
        }

        this.size = Math.max(count.left, count.right);
        _domClass['default'].add(this.domNode, 'toolbar-size-' + this.size);
        this.setMode(onLine);
      }
    },
<span id='argos-MainToolbar-method-onTitleClick'>    /**
</span>     * Event handler that fires when the toolbar title is clicked.
     */
    onTitleClick: function onTitleClick() /*evt*/{},
    setMode: function setMode(onLine) {
      _domClass['default'].remove(this.domNode, 'offline');
      if (!onLine) {
        _domClass['default'].add(this.domNode, 'offline');
      }
    }
  });

  _lang['default'].setObject('Sage.Platform.Mobile.MainToolbar', __class);
  module.exports = __class;
});
//# sourceMappingURL=data:application/json;base64,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RSxTQUFTLE9BQU8sQ0FBQyxNQUFNLEVBQUU7QUFDaEMsMkJBQVMsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsU0FBUyxDQUFDLENBQUM7QUFDekMsVUFBSSxDQUFDLE1BQU0sRUFBRTtBQUNYLDZCQUFTLEdBQUcsQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLFNBQVMsQ0FBQyxDQUFDO09BQ3ZDO0tBQ0Y7R0FDRixDQUFDLENBQUM7O0FBRUgsbUJBQUssU0FBUyxDQUFDLGtDQUFrQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO21CQUM3QyxPQUFPIiwiZmlsZSI6InNyYy9NYWluVG9vbGJhci5qcyIsInNvdXJjZVJvb3QiOiJzcmMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBDb3B5cmlnaHQgKGMpIDIwMTAsIFNhZ2UgU29mdHdhcmUsIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5pbXBvcnQgZGVjbGFyZSBmcm9tICdkb2pvL19iYXNlL2RlY2xhcmUnO1xyXG5pbXBvcnQgbGFuZyBmcm9tICdkb2pvL19iYXNlL2xhbmcnO1xyXG5pbXBvcnQgcXVlcnkgZnJvbSAnZG9qby9xdWVyeSc7XHJcbmltcG9ydCBkb21DbGFzcyBmcm9tICdkb2pvL2RvbS1jbGFzcyc7XHJcbmltcG9ydCBkb21Db25zdHJ1Y3QgZnJvbSAnZG9qby9kb20tY29uc3RydWN0JztcclxuaW1wb3J0IFRvb2xiYXIgZnJvbSAnLi9Ub29sYmFyJztcclxuaW1wb3J0IGdldFJlc291cmNlIGZyb20gJy4vSTE4bic7XHJcbmltcG9ydCAnZG9qby9Ob2RlTGlzdC1tYW5pcHVsYXRlJztcclxuXHJcbmNvbnN0IHJlc291cmNlID0gZ2V0UmVzb3VyY2UoJ21haW5Ub29sYmFyJyk7XHJcblxyXG4vKipcclxuICogQGNsYXNzIGFyZ29zLk1haW5Ub29sYmFyXHJcbiAqIE1haW5Ub29sYmFyIGlzIGRlc2lnbmVkIHRvIGhhbmRsZSB0aGUgdG9wIGFwcGxpY2F0aW9uIGJhciB3aXRoIG1hcmt1cCBhbmQgbG9naWMgdG8gc2V0XHJcbiAqIGEgdGl0bGUgYW5kIHBvc2l0aW9uIHRvb2xiYXIgaXRlbXMgdG8gdGhlIGxlZnQgb3IgcmlnaHRcclxuICogQGFsdGVybmF0ZUNsYXNzTmFtZSBNYWluVG9vbGJhclxyXG4gKiBAZXh0ZW5kcyBhcmdvcy5Ub29sYmFyXHJcbiAqL1xyXG5jb25zdCBfX2NsYXNzID0gZGVjbGFyZSgnYXJnb3MuTWFpblRvb2xiYXInLCBbVG9vbGJhcl0sIHtcclxuICAvKipcclxuICAgKiBAcHJvcGVydHkge09iamVjdH1cclxuICAgKiBVc2VkIHRvIHNldCB0aGUgdGl0bGUgbm9kZSdzIGlubmVySFRNTFxyXG4gICAqL1xyXG4gIGF0dHJpYnV0ZU1hcDoge1xyXG4gICAgJ3RpdGxlJzoge1xyXG4gICAgICBub2RlOiAndGl0bGVOb2RlJyxcclxuICAgICAgdHlwZTogJ2lubmVySFRNTCcsXHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogQHByb3BlcnR5IHtTaW1wbGF0ZX1cclxuICAgKiBTaW1wbGF0ZSB0aGF0IGRlZmluZXMgdGhlIG1haW4gSFRNTCBNYXJrdXAgb2YgdGhlIHRvb2xiYXJcclxuICAgKlxyXG4gICAqIGAkYCAtIHRoZSB0b29sYmFyIGluc3RhbmNlXHJcbiAgICovXHJcbiAgd2lkZ2V0VGVtcGxhdGU6IG5ldyBTaW1wbGF0ZShbXHJcbiAgICAnPGRpdiBjbGFzcz1cInRvb2xiYXIgeyU9ICQuY2xzICV9XCI+JyxcclxuICAgICc8ZGl2IGlkPVwicGFnZVRpdGxlXCIgY2xhc3M9XCJ0b29sYmFyLXRpdGxlXCIgZGF0YS1kb2pvLWF0dGFjaC1ldmVudD1cIm9uY2xpY2s6IG9uVGl0bGVDbGlja1wiIGRhdGEtZG9qby1hdHRhY2gtcG9pbnQ9XCJ0aXRsZU5vZGVcIj57JT0gJC50aXRsZVRleHQgJX08L2Rpdj4nLFxyXG4gICAgJzwvZGl2PicsXHJcbiAgXSksXHJcbiAgLyoqXHJcbiAgICogQHByb3BlcnR5IHtTaW1wbGF0ZX1cclxuICAgKiBTaW1wbGF0ZSB0aGF0IGRlZmluZXMgdGhlIHRvb2xiYXIgaXRlbSBIVE1MIE1hcmt1cFxyXG4gICAqXHJcbiAgICogYCRgIC0gVGhlIHRvb2xiYXIgaXRlbSBvYmplY3RcclxuICAgKiBgJCRgIC0gVGhlIHRvb2xiYXIgaW5zdGFuY2VcclxuICAgKi9cclxuICB0b29sVGVtcGxhdGU6IG5ldyBTaW1wbGF0ZShbXHJcbiAgICAnPGJ1dHRvbiBjbGFzcz1cImJ1dHRvbiB0b29sQnV0dG9uIHRvb2xCdXR0b24teyU9ICQuc2lkZSB8fCBcInJpZ2h0XCIgJX0geyU9ICgkJC5lbmFibGVkKSA/IFwiXCIgOiBcInRvb2xCdXR0b24tZGlzYWJsZWRcIiAlfSB7JT0gJC5jbHMgJX1cIicsXHJcbiAgICAnZGF0YS1hY3Rpb249XCJpbnZva2VUb29sXCIgZGF0YS10b29sPVwieyU9ICQuaWQgJX1cIicsXHJcbiAgICAnYXJpYS1sYWJlbD1cInslOiAkLnRpdGxlIHx8ICQuaWQgJX1cIj4nLFxyXG4gICAgJ3slIGlmICgkLmljb24pIHsgJX0nLFxyXG4gICAgJzxpbWcgc3JjPVwieyU9ICQuaWNvbiAlfVwiIGFsdD1cInslPSAkLmlkICV9XCIgLz4nLFxyXG4gICAgJ3slIH0gJX0nLFxyXG4gICAgJ3slIGlmICghJC5jbHMpIHsgJX0nLFxyXG4gICAgJzxzcGFuPjwvc3Bhbj4nLFxyXG4gICAgJ3slIH0gJX0nLFxyXG4gICAgJzwvYnV0dG9uPicsXHJcbiAgXSksXHJcbiAgLyoqXHJcbiAgICogQHByb3BlcnR5IHtOdW1iZXJ9XHJcbiAgICogQ3VycmVudCBudW1iZXIgb2YgdG9vbGJhciBpdGVtcyBzZXRcclxuICAgKi9cclxuICBzaXplOiAwLFxyXG5cclxuICAvKipcclxuICAgKiBUZXh0IHRoYXQgaXMgcGxhY2VkIGludG8gdGhlIHRvb2xiYXIgdGl0bGVOb2RlXHJcbiAgICovXHJcbiAgdGl0bGVUZXh0OiByZXNvdXJjZS50aXRsZVRleHQsXHJcblxyXG4gIC8qKlxyXG4gICAqIENhbGxzIHBhcmVudCB7QGxpbmsgVG9vbGJhciNjbGVhciBjbGVhcn0gYW5kIHJlbW92ZXMgYWxsIHRvb2xiYXIgaXRlbXMgZnJvbSBET00uXHJcbiAgICovXHJcbiAgY2xlYXI6IGZ1bmN0aW9uIGNsZWFyKCkge1xyXG4gICAgdGhpcy5pbmhlcml0ZWQoYXJndW1lbnRzKTtcclxuXHJcbiAgICBxdWVyeSgnPiBbZGF0YS1hY3Rpb25dLCAudG9vbEJ1dHRvbi1yaWdodCcsIHRoaXMuZG9tTm9kZSkucmVtb3ZlKCk7XHJcbiAgfSxcclxuICAvKipcclxuICAgKiBDYWxscyBwYXJlbnQge0BsaW5rIFRvb2xiYXIjc2hvd1Rvb2xzIHNob3dUb29sc30gd2hpY2ggc2V0cyB0aGUgdG9vbCBjb2xsZWN0aW9uLlxyXG4gICAqIFRoZSBjb2xsZWN0aW9uIGlzIHRoZW4gbG9vcGVkIG92ZXIgYW5kIGFkZGVkIHRvIERPTSwgYWRkaW5nIHRoZSBsZWZ0IG9yIHJpZ2h0IHN0eWxpbmdcclxuICAgKiBAcGFyYW0ge09iamVjdFtdfSB0b29scyBBcnJheSBvZiB0b29sYmFyIGl0ZW0gZGVmaW5pdGlvbnNcclxuICAgKi9cclxuICBzaG93VG9vbHM6IGZ1bmN0aW9uIHNob3dUb29scyh0b29scykge1xyXG4gICAgdGhpcy5pbmhlcml0ZWQoYXJndW1lbnRzKTtcclxuXHJcbiAgICBkb21DbGFzcy5yZW1vdmUodGhpcy5kb21Ob2RlLCAndG9vbGJhci1zaXplLScgKyB0aGlzLnNpemUpO1xyXG4gICAgbGV0IG9uTGluZSA9IEFwcC5vbkxpbmU7XHJcbiAgICBpZiAodG9vbHMpIHtcclxuICAgICAgY29uc3QgY291bnQgPSB7XHJcbiAgICAgICAgbGVmdDogMCxcclxuICAgICAgICByaWdodDogMCxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdG9vbHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCB0b29sID0gdG9vbHNbaV07XHJcbiAgICAgICAgY29uc3Qgc2lkZSA9IHRvb2wuc2lkZSB8fCAncmlnaHQnO1xyXG4gICAgICAgIGNvbnN0IHRvb2xUZW1wbGF0ZSA9IHRvb2wudGVtcGxhdGUgfHwgdGhpcy50b29sVGVtcGxhdGU7XHJcbiAgICAgICAgY291bnRbc2lkZV0gKz0gMTtcclxuICAgICAgICBpZiAodG9vbC5vZmZsaW5lKSB7XHJcbiAgICAgICAgICBvbkxpbmUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZG9tQ29uc3RydWN0LnBsYWNlKHRvb2xUZW1wbGF0ZS5hcHBseSh0b29sLCB0aGlzLnRvb2xzW3Rvb2wuaWRdKSwgdGhpcy5kb21Ob2RlLCAnbGFzdCcpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLnNpemUgPSBNYXRoLm1heChjb3VudC5sZWZ0LCBjb3VudC5yaWdodCk7XHJcbiAgICAgIGRvbUNsYXNzLmFkZCh0aGlzLmRvbU5vZGUsICd0b29sYmFyLXNpemUtJyArIHRoaXMuc2l6ZSk7XHJcbiAgICAgIHRoaXMuc2V0TW9kZShvbkxpbmUpO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICogRXZlbnQgaGFuZGxlciB0aGF0IGZpcmVzIHdoZW4gdGhlIHRvb2xiYXIgdGl0bGUgaXMgY2xpY2tlZC5cclxuICAgKi9cclxuICBvblRpdGxlQ2xpY2s6IGZ1bmN0aW9uIG9uVGl0bGVDbGljaygvKmV2dCovKSB7fSxcclxuICBzZXRNb2RlOiBmdW5jdGlvbiBzZXRNb2RlKG9uTGluZSkge1xyXG4gICAgZG9tQ2xhc3MucmVtb3ZlKHRoaXMuZG9tTm9kZSwgJ29mZmxpbmUnKTtcclxuICAgIGlmICghb25MaW5lKSB7XHJcbiAgICAgIGRvbUNsYXNzLmFkZCh0aGlzLmRvbU5vZGUsICdvZmZsaW5lJyk7XHJcbiAgICB9XHJcbiAgfSxcclxufSk7XHJcblxyXG5sYW5nLnNldE9iamVjdCgnU2FnZS5QbGF0Zm9ybS5Nb2JpbGUuTWFpblRvb2xiYXInLCBfX2NsYXNzKTtcclxuZXhwb3J0IGRlZmF1bHQgX19jbGFzcztcclxuIl19
</pre>
</body>
</html>
